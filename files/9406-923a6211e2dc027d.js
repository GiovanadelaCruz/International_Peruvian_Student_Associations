(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9406],{26660:(e,t,n)=>{e.exports=n(98226)},68427:(e,t,n)=>{"use strict";var i=n(44345),r=n(96435),s=n(68286),o=n(93025),l=n(13916),a=n(6135),d=n(56923),c=n(31792);e.exports=function(e){return new Promise(function(t,n){var u=e.data,h=e.headers,x=e.responseType;i.isFormData(u)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(m+":"+f)}var g=l(e.baseURL,e.url);function j(){if(p){var i="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null;r(t,n,{data:x&&"text"!==x&&"json"!==x?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:i,config:e,request:p}),p=null}}if(p.open(e.method.toUpperCase(),o(g,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,"onloadend"in p?p.onloadend=j:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(j)},p.onabort=function(){p&&(n(c("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(c("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(c(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},i.isStandardBrowserEnv()){var v=(e.withCredentials||d(g))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;v&&(h[e.xsrfHeaderName]=v)}"setRequestHeader"in p&&i.forEach(h,function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)}),i.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),x&&"json"!==x&&(p.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),n(e),p=null)}),u||(u=null),p.send(u)})}},98226:(e,t,n)=>{"use strict";var i=n(44345),r=n(25063),s=n(9560),o=n(4816);function l(e){var t=new s(e),n=r(s.prototype.request,t);return i.extend(n,s.prototype,t),i.extend(n,t),n}var a=l(n(10292));a.Axios=s,a.create=function(e){return l(o(a.defaults,e))},a.Cancel=n(69945),a.CancelToken=n(95912),a.isCancel=n(6945),a.all=function(e){return Promise.all(e)},a.spread=n(18127),a.isAxiosError=n(18568),e.exports=a,e.exports.default=a},69945:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},95912:(e,t,n)=>{"use strict";var i=n(69945);function r(e){if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});var t,n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},6945:e=>{"use strict";e.exports=function(e){return!!(e&&e.__CANCEL__)}},9560:(e,t,n)=>{"use strict";var i=n(44345),r=n(93025),s=n(70546),o=n(71617),l=n(4816),a=n(16552),d=a.validators;function c(e){this.defaults=e,this.interceptors={request:new s,response:new s}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},(e=l(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t,n=e.transitional;void 0!==n&&a.assertOptions(n,{silentJSONParsing:d.transitional(d.boolean,"1.0.0"),forcedJSONParsing:d.transitional(d.boolean,"1.0.0"),clarifyTimeoutError:d.transitional(d.boolean,"1.0.0")},!1);var i=[],r=!0;this.interceptors.request.forEach(function(t){("function"!=typeof t.runWhen||!1!==t.runWhen(e))&&(r=r&&t.synchronous,i.unshift(t.fulfilled,t.rejected))});var s=[];if(this.interceptors.response.forEach(function(e){s.push(e.fulfilled,e.rejected)}),!r){var c=[o,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(s),t=Promise.resolve(e);c.length;)t=t.then(c.shift(),c.shift());return t}for(var u=e;i.length;){var h=i.shift(),x=i.shift();try{u=h(u)}catch(e){x(e);break}}try{t=o(u)}catch(e){return Promise.reject(e)}for(;s.length;)t=t.then(s.shift(),s.shift());return t},c.prototype.getUri=function(e){return r((e=l(this.defaults,e)).url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(e){c.prototype[e]=function(t,n){return this.request(l(n||{},{method:e,url:t,data:(n||{}).data}))}}),i.forEach(["post","put","patch"],function(e){c.prototype[e]=function(t,n,i){return this.request(l(i||{},{method:e,url:t,data:n}))}}),e.exports=c},70546:(e,t,n)=>{"use strict";var i=n(44345);function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},13916:(e,t,n)=>{"use strict";var i=n(34860),r=n(7825);e.exports=function(e,t){return e&&!i(t)?r(e,t):t}},31792:(e,t,n)=>{"use strict";var i=n(27148);e.exports=function(e,t,n,r,s){return i(Error(e),t,n,r,s)}},71617:(e,t,n)=>{"use strict";var i=n(44345),r=n(97638),s=n(6945),o=n(10292);function l(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return l(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||o.adapter)(e).then(function(t){return l(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t},function(t){return!s(t)&&(l(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},27148:e=>{"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},4816:(e,t,n)=>{"use strict";var i=n(44345);e.exports=function(e,t){t=t||{};var n={},r=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function a(e,t){return i.isPlainObject(e)&&i.isPlainObject(t)?i.merge(e,t):i.isPlainObject(t)?i.merge({},t):i.isArray(t)?t.slice():t}function d(r){i.isUndefined(t[r])?i.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(e[r],t[r])}i.forEach(r,function(e){i.isUndefined(t[e])||(n[e]=a(void 0,t[e]))}),i.forEach(s,d),i.forEach(o,function(r){i.isUndefined(t[r])?i.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(void 0,t[r])}),i.forEach(l,function(i){i in t?n[i]=a(e[i],t[i]):i in e&&(n[i]=a(void 0,e[i]))});var c=r.concat(s).concat(o).concat(l),u=Object.keys(e).concat(Object.keys(t)).filter(function(e){return -1===c.indexOf(e)});return i.forEach(u,d),n}},96435:(e,t,n)=>{"use strict";var i=n(31792);e.exports=function(e,t,n){var r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(i("Request failed with status code "+n.status,n.config,null,n.request,n))}},97638:(e,t,n)=>{"use strict";var i=n(44345),r=n(10292);e.exports=function(e,t,n){var s=this||r;return i.forEach(n,function(n){e=n.call(s,e,t)}),e}},10292:(e,t,n)=>{"use strict";var i=n(39907),r=n(44345),s=n(2327),o=n(27148),l={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var d={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(68427):void 0!==i&&"[object process]"===Object.prototype.toString.call(i)&&(e=n(68427)),e}(),transformRequest:[function(e,t){return(s(t,"Accept"),s(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(a(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};d.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(e){d.headers[e]={}}),r.forEach(["post","put","patch"],function(e){d.headers[e]=r.merge(l)}),e.exports=d},25063:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},93025:(e,t,n)=>{"use strict";var i=n(44345);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;if(n)s=n(t);else if(i.isURLSearchParams(t))s=t.toString();else{var s,o=[];i.forEach(t,function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(r(t)+"="+r(e))}))}),s=o.join("&")}if(s){var l=e.indexOf("#");-1!==l&&(e=e.slice(0,l)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},7825:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},68286:(e,t,n)=>{"use strict";var i=n(44345);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,r,s,o){var l=[];l.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),i.isString(r)&&l.push("path="+r),i.isString(s)&&l.push("domain="+s),!0===o&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){var t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},34860:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},18568:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},56923:(e,t,n)=>{"use strict";var i=n(44345);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},2327:(e,t,n)=>{"use strict";var i=n(44345);e.exports=function(e,t){i.forEach(e,function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])})}},6135:(e,t,n)=>{"use strict";var i=n(44345),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,o={};return e&&i.forEach(e.split("\n"),function(e){s=e.indexOf(":"),t=i.trim(e.substr(0,s)).toLowerCase(),n=i.trim(e.substr(s+1)),t&&!(o[t]&&r.indexOf(t)>=0)&&("set-cookie"===t?o[t]=(o[t]?o[t]:[]).concat([n]):o[t]=o[t]?o[t]+", "+n:n)}),o}},18127:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},16552:(e,t,n)=>{"use strict";var i=n(38983),r={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){r[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var s={},o=i.version.split(".");function l(e,t){for(var n=t?t.split("."):o,i=e.split("."),r=0;r<3;r++){if(n[r]>i[r])return!0;if(n[r]<i[r])break}return!1}r.transitional=function(e,t,n){var r=t&&l(t);function o(e,t){return"[Axios v"+i.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,l){if(!1===e)throw Error(o(i," has been removed in "+t));return r&&!s[i]&&(s[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,l)}},e.exports={isOlderVersion:l,assertOptions:function(e,t,n){if("object"!=typeof e)throw TypeError("options must be an object");for(var i=Object.keys(e),r=i.length;r-- >0;){var s=i[r],o=t[s];if(o){var l=e[s],a=void 0===l||o(l,s,e);if(!0!==a)throw TypeError("option "+s+" must be "+a);continue}if(!0!==n)throw Error("Unknown option "+s)}},validators:r}},44345:(e,t,n)=>{"use strict";var i=n(25063),r=Object.prototype.toString;function s(e){return"[object Array]"===r.call(e)}function o(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function a(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function d(e){return"[object Function]"===r.call(e)}function c(e,t){if(null!=e){if("object"!=typeof e&&(e=[e]),s(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:l,isPlainObject:a,isUndefined:o,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:d,isStream:function(e){return l(e)&&d(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function n(n,i){a(t[i])&&a(n)?t[i]=e(t[i],n):a(n)?t[i]=e({},n):s(n)?t[i]=n.slice():t[i]=n}for(var i=0,r=arguments.length;i<r;i++)c(arguments[i],n);return t},extend:function(e,t,n){return c(t,function(t,r){n&&"function"==typeof t?e[r]=i(t,n):e[r]=t}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},76272:e=>{var t="function"==typeof Float32Array;function n(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}function i(e,t,n){return 3*(1-3*n+3*t)*e*e+2*(3*n-6*t)*e+3*t}function r(e){return e}e.exports=function(e,s,o,l){if(!(0<=e&&e<=1&&0<=o&&o<=1))throw Error("bezier x values must be in [0, 1] range");if(e===s&&o===l)return r;for(var a=t?new Float32Array(11):Array(11),d=0;d<11;++d)a[d]=n(.1*d,e,o);return function(t){return 0===t?0:1===t?1:n(function(t){for(var r=0,s=1;10!==s&&a[s]<=t;++s)r+=.1;var l=r+(t-a[--s])/(a[s+1]-a[s])*.1,d=i(l,e,o);return d>=.001?function(e,t,r,s){for(var o=0;o<4;++o){var l=i(t,r,s);if(0===l)break;var a=n(t,r,s)-e;t-=a/l}return t}(t,l,e,o):0===d?l:function(e,t,i,r,s){var o,l,a=0;do(o=n(l=t+(i-t)/2,r,s)-e)>0?i=l:t=l;while(Math.abs(o)>1e-7&&++a<10);return l}(t,r,r+.1,e,o)}(t),s,l)}}},28985:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,i,s,o){if("function"!=typeof i)throw TypeError("The listener must be a function");var l=new r(i,s||e,o),a=n?n+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],l]:e._events[a].push(l):(e._events[a]=l,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1)),l.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},l.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=Array(s);r<s;r++)o[r]=i[r].fn;return o},l.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},l.prototype.emit=function(e,t,i,r,s,o){var l=n?n+e:e;if(!this._events[l])return!1;var a,d,c=this._events[l],u=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,r),!0;case 5:return c.fn.call(c.context,t,i,r,s),!0;case 6:return c.fn.call(c.context,t,i,r,s,o),!0}for(d=1,a=Array(u-1);d<u;d++)a[d-1]=arguments[d];c.fn.apply(c.context,a)}else{var h,x=c.length;for(d=0;d<x;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),u){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,i);break;case 4:c[d].fn.call(c[d].context,t,i,r);break;default:if(!a)for(h=1,a=Array(u-1);h<u;h++)a[h-1]=arguments[h];c[d].fn.apply(c[d].context,a)}}return!0},l.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,i,r){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var l=this._events[s];if(l.fn)l.fn!==t||r&&!l.once||i&&l.context!==i||o(this,s);else{for(var a=0,d=[],c=l.length;a<c;a++)(l[a].fn!==t||r&&!l[a].once||i&&l[a].context!==i)&&d.push(l[a]);d.length?this._events[s]=1===d.length?d[0]:d:o(this,s)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l},37124:e=>{"use strict";let t=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);e.exports=e=>!t.has(e&&e.code)},5508:function(e,t){(function(){(null!==t?t:this).Lethargy=function(){function e(e,t,n,i){this.stability=null!=e?Math.abs(e):8,this.sensitivity=null!=t?1+Math.abs(t):100,this.tolerance=null!=n?1+Math.abs(n):1.1,this.delay=null!=i?i:150,this.lastUpDeltas=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this),this.lastDownDeltas=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this),this.deltasTimestamp=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this)}return e.prototype.check=function(e){var t;return(null!=(e=e.originalEvent||e).wheelDelta?t=e.wheelDelta:null!=e.deltaY?t=-40*e.deltaY:(null!=e.detail||0===e.detail)&&(t=-40*e.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),t>0)?(this.lastUpDeltas.push(t),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(t),this.lastDownDeltas.shift(),this.isInertia(-1))},e.prototype.isInertia=function(e){var t,n,i,r,s,o;return null===(t=-1===e?this.lastDownDeltas:this.lastUpDeltas)[0]?e:(!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now())||t[0]!==t[2*this.stability-1])&&(i=t.slice(0,this.stability),n=t.slice(this.stability,2*this.stability),o=i.reduce(function(e,t){return e+t}),s=n.reduce(function(e,t){return e+t}),!!(Math.abs(o/i.length)<Math.abs((r=s/n.length)*this.tolerance)&&this.sensitivity<Math.abs(r))&&e)},e.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},e.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},e}()}).call(this)},79407:(e,t,n)=>{"use strict";n.d(t,{V:()=>ej});var i=n(31085),r=n(46882),s=n(76003),o=n(80532),l=n(20501),a=n(3040),d=n(95640),c=n(14041),u=n(50080),h=n(97548),x=n(75675),p=n(37908),m=n(64130),f=n(64225),g=n(20869),j=n(2600),v=n(49547),b=n(22218),y=n(26848),C=n(35687),w=n(62313),E=n(61778),k=n(24221),S=n(12327),I=n(55576),T=n(23832),A=n(99548),R=n(60434),_=n(2768);let O=(0,c.memo)(()=>{let[e]=(0,R.R7)("editorMode"),t=(0,T.n)(_.s);return(0,i.jsxs)(j.T,{spacing:3,align:"stretch",children:[(0,i.jsxs)(v.MJ,{children:[(0,i.jsx)(b.l,{fontSize:"sm",mb:"3",children:(0,i.jsx)(d.x6,{id:"G57+qO"})}),(0,i.jsx)(z,{})]}),(0,i.jsx)(o.az,{fontSize:"sm",children:(0,i.jsx)(d.x6,{id:"x4f8pZ"})}),"freeform"===e?(0,i.jsx)(D,{title:t.freeform.label(),icon:t.freeform.icon,children:(0,i.jsx)(d.x6,{id:"ELg7Zs",values:{0:t.freeform.label()}})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D,{title:t.structured.label(),icon:t.structured.icon,children:(0,i.jsx)(d.x6,{id:"iKG7iK",values:{0:t.structured.label()}})}),(0,i.jsx)(D,{title:(0,i.jsx)(d.x6,{id:"+mgW41"}),icon:l.LFz,children:(0,i.jsx)(d.x6,{id:"oGNrqw",components:{0:(0,i.jsx)(y.u,{})}})}),(0,i.jsx)(D,{title:(0,i.jsx)(d.x6,{id:"1Nr9Bi"}),icon:a.zm_,children:(0,i.jsx)(d.x6,{id:"5cPTto",components:{0:(0,i.jsx)(y.u,{})}})})]})]})});O.displayName="AIGeneratorTipsAndInstructions";let D=e=>{let{icon:t,title:n,children:r}=e;return(0,i.jsx)(o.az,{p:4,borderRadius:"md",bg:"whiteAlpha.700",children:(0,i.jsxs)(C.B,{color:"gray.700",spacing:"1",children:[(0,i.jsxs)(w.z,{spacing:"1",fontSize:"sm",children:[null!==t&&(0,i.jsx)(k.g,{icon:t}),(0,i.jsx)(E.E,{fontWeight:"600",color:"gray.800",children:n})]}),(0,i.jsx)(E.E,{fontSize:"sm",children:r})]})})},z=(0,c.memo)(()=>{let[e,t]=(0,R.lF)(),n=(0,c.useCallback)(e=>t(e.target.value),[t]),r=(0,c.useRef)(null);return(0,i.jsx)(I._,{ref:r,initialHeight:"20",value:e||"",onChange:n,bg:"white",placeholder:S.Ru._({id:"LLAa/9"}),maxLength:A.nt})});z.displayName="PromptInput";var P=n(11070),L=n(66176),N=n(93129),M=n(27559),V=n(80853);let F=(0,c.memo)(()=>{let e=(0,f.jL)(),t=(0,f.CU)(),n=(0,f.GV)(g.mD),r=(0,f.GV)(g.cK),s=(0,f.GV)(g.OM),a=(0,R.jQ)(),u=(0,c.useCallback)(()=>{let n=(0,g.QR)(t.getState()).find(e=>e.isDraft);n&&e((0,g.mr)({num:n.num}))},[e,t]);return(0,i.jsx)(o.az,{children:n&&(0,i.jsx)(M.S,{in:s,children:(0,i.jsxs)(C.B,{direction:{base:"column",md:"row"},alignItems:{base:"stretch",md:"center"},spacing:4,bg:"white",p:"4",borderRadius:"lg",boxShadow:"sm",children:[(0,i.jsxs)(w.z,{flex:"1",children:[(0,i.jsx)(k.g,{icon:l.Yj9}),(0,i.jsxs)(C.B,{spacing:0,children:[(0,i.jsx)(E.E,{fontWeight:"600",fontSize:"lg",children:(0,i.jsx)(d.x6,{id:"YU/AK+",values:{0:null==r?void 0:r.num}})}),(0,i.jsx)(E.E,{children:(0,i.jsx)(d.x6,{id:"J4c0Rh"})})]})]}),(0,i.jsx)(V.$,{variant:"solid",colorScheme:"primary",onClick:a,children:(0,i.jsx)(d.x6,{id:"u52q7m"})}),(0,i.jsx)(V.$,{onClick:u,variant:"plain",children:(0,i.jsx)(d.x6,{id:"dEgA5A"})})]})})})});F.displayName="OverrideDraftWarning";var G=n(74727),W=n(9021),B=n(63341),U=n(18528),H=n(40173),q=n(72821),K=n(48310),J=n(33473),Y=n(81575),X=n(9104),$=n(46343),Z=n.n($),Q=n(87064);let ee={size:"sm",variant:"ghost",colorScheme:"gray",color:"gray.800"},et=(0,c.memo)(()=>{let e=(0,f.CU)(),t=(0,f.jL)(),n=(0,R.ow)(),r=(0,f.GV)(g.QR,(e,t)=>Z()(e,t)),{hideTooltips:s,GammaTooltipHiderContext:a}=(0,X.ku)(),u=(0,f.GV)(g.mD),h=(0,c.useCallback)(()=>{t((0,g.yU)()),n((0,g.qT)(e.getState()),!1),(0,Q.WR)({changeType:"next"})},[t,n,e]),x=(0,c.useCallback)(()=>{t((0,g.kh)()),n((0,g.qT)(e.getState()),!1),(0,Q.WR)({changeType:"prev"})},[t,n,e]),p=(0,c.useCallback)(i=>{t((0,g.mr)({num:i})),n((0,g.qT)(e.getState()),!1),(0,Q.WR)({changeType:"load",version:i})},[t,n,e]);if(0===r.length)return null;let m=r.findIndex(e=>e.isCurrent),j=r[m],v=m<r.length-1;return u?(0,i.jsxs)(G.e,{isAttached:!0,bg:"whiteAlpha.500",borderRadius:"md",children:[(0,i.jsx)(W.K,{display:{base:"none",md:"inline-flex"},isDisabled:!(m>0),"aria-label":"previous version",onClick:x,...ee,icon:(0,i.jsx)(k.g,{icon:l.Wzs,fixedWidth:!0})}),(0,i.jsxs)(B.W,{closeOnSelect:!0,children:[(0,i.jsx)(a,{children:(0,i.jsx)(X.Tz,{label:"Version ".concat(j.num," ").concat(j.isDraft?"(current draft)":""),closeOnClick:!1,children:(0,i.jsx)(U.I,{colorScheme:"gray",minW:"10",size:"sm",as:V.$,variant:"ghost",onClick:()=>{s()},children:j.num})})}),(0,i.jsx)(H.Z,{children:(0,i.jsxs)(q.c,{maxW:"260px",children:[(0,i.jsx)(K.i,{title:"Version history",type:"radio",value:String(j.num),children:[...r].reverse().map((e,t)=>(0,i.jsx)(J.k,{value:String(e.num),onClick:()=>{p(e.num),setTimeout(()=>{s()},0)},children:(0,i.jsxs)(E.E,{children:["Version ",e.num," ",e.isDraft&&"(current draft)"]})},t))}),(0,i.jsx)(Y.N,{}),(0,i.jsx)(o.az,{py:1,px:2,children:(0,i.jsx)(E.E,{fontSize:"xs",children:(0,i.jsx)(d.x6,{id:"gdzgeC"})})})]})})]}),(0,i.jsx)(W.K,{display:{base:"none",md:"inline-flex"},isDisabled:!v,onClick:h,"aria-label":"next version",...ee,icon:(0,i.jsx)(k.g,{icon:l.XkK,fixedWidth:!0})})]}):null});et.displayName="VersionSwitcher";var en=n(62230),ei=n(60353),er=n(70323),es=n(91568),eo=n(98177),el=n(12664),ea=n(84142),ed=n(30950),ec=n(44066);let eu=(0,c.memo)(()=>{var e;let{format:t,styleTemplate:n,setStyleTemplate:r}=(0,R.pm)(),s=(0,T.n)(ea.sb);return(0,i.jsx)(ec.X,{label:(0,i.jsx)(d.x6,{id:"kI1qVD"}),colorScheme:"orchid",icon:a.swh,values:[s[t].label(),n&&(null===(e=el.S9[n])||void 0===e?void 0:e.label())],testId:"format-settings-group",children:(0,i.jsx)(j.T,{spacing:2,align:"start",children:(0,i.jsxs)(v.MJ,{children:[(0,i.jsx)(ea.Qz,{wrap:!0}),n&&(0,i.jsx)(ed.k,{docFormatType:t,onSelectStyleTemplate:r,selectedStyleTemplate:n})]})})})});eu.displayName="FormatSettingsGroup";var eh=n(40137),ex=n(2928);let ep=(0,c.memo)(e=>{let{isLoading:t}=e,n=(0,f.GV)(g.OM);return(0,i.jsxs)(j.T,{flex:"1",overflow:"hidden auto",spacing:3,align:"start",alignItems:"stretch",transition:"all 300ms ease",opacity:n?.75:1,pointerEvents:n?"none":"inherit",cursor:n?"not-allowed":"default",children:[(0,i.jsxs)(o.az,{fontSize:"sm",children:[(0,i.jsx)(d.x6,{id:"Tz0i8g"})," ",(0,i.jsx)(X.qT,{label:(0,i.jsx)(d.x6,{id:"FDel/s"})})]}),t?(0,i.jsxs)(C.B,{children:[(0,i.jsx)(en.E,{height:16}),(0,i.jsx)(en.E,{height:16}),(0,i.jsx)(en.E,{height:16})]}):(0,i.jsxs)(ei.n,{allowMultiple:!0,defaultIndex:[0],allowToggle:!0,as:C.B,w:"100%",bg:"white",borderRadius:"lg",overflow:"hidden",spacing:0,divider:(0,i.jsx)(er.c,{}),boxShadow:"sm",children:[(0,i.jsx)(ex.M,{}),(0,i.jsx)(eh.cG,{}),(0,i.jsx)(eu,{})]}),(0,i.jsx)(o.az,{display:{base:"none",lg:"block"},children:(0,i.jsx)(em,{})})]})});ep.displayName="AIGeneratorSettings";let em=(0,c.memo)(()=>{let e=(0,f.GV)(g.J$),{maxTokens:t}=(0,eo.is)();return(0,i.jsx)(es.n,{charCount:e,max:t,shouldShow:!0})});em.displayName="AIGeneratorCharacterCount";var ef=n(24548),eg=n(20574);let ej=(0,c.memo)(()=>{let[e,t]=(0,c.useState)("outline"),{skipThemeStep:n}=(0,u._2)(),j=(0,f.jL)(),v=(0,m.fW)()?a.CeG:a.dmS,b=(0,m.fW)()?l.dmS:l.CeG;(0,c.useEffect)(()=>()=>{j((0,g.GL)())},[j]);let y=(0,c.useCallback)(()=>{t("outline")},[]),C="theme"===e?void 0:(0,i.jsx)(d.x6,{id:"opD9db"});return(0,i.jsx)(p.pY,{children:(0,i.jsxs)(P.d,{children:[(0,i.jsx)(N.V,{onClick:"theme"===e?y:void 0,navIconOverride:"theme"===e?b:void 0,navLabelOverride:"theme"===e?(0,i.jsx)(d.x6,{id:"iH8pgl"}):void 0,styleProps:"theme"===e?{position:"absolute"}:void 0,pageTitle:C,rightItem:"outline"===e?(0,i.jsx)(et,{}):void 0}),"outline"===e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.x,{templateAreas:{base:'"overrideWarning" \n                   "settings" \n                   "editor"\n                   "tips-instructions"',md:'"overrideWarning overrideWarning"\n                   "settings editor"\n                   "tips-instructions editor"',xl:'". overrideWarning ." \n                 "settings editor tips-instructions" \n                 "settings editor tips-instructions"'},gridTemplateColumns:{base:"1fr",md:"2fr 3fr",xl:"3fr 6fr 3fr"},gridTemplateRows:{base:"auto",md:"auto auto 1fr",xl:"auto"},gap:4,mx:"auto",alignItems:"flex-start",p:{base:4,lg:6},pt:{base:4,lg:4},maxW:"1800px",children:[(0,i.jsx)(s.E,{area:"overrideWarning",children:(0,i.jsx)(F,{})}),(0,i.jsx)(s.E,{area:"settings",alignSelf:"start",children:(0,i.jsx)(ep,{isLoading:!1})}),(0,i.jsx)(s.E,{area:"editor",h:"100%",children:(0,i.jsx)(L.N,{showTopbar:!0,showAddBreaks:!0,enableModes:!0,containerProps:{minH:{base:"40vh",lg:"60vh"},fontSize:"16px"},showContentTip:!0})}),(0,i.jsx)(s.E,{area:"tips-instructions",children:(0,i.jsx)(O,{})})]}),(0,i.jsx)(o.az,{height:"20vh"})," ",(0,i.jsx)(eg.I,{cta:n?(0,i.jsx)(x.I,{children:(0,i.jsx)(d.x6,{id:"ziAjHi"})}):(0,i.jsx)(ef.Q,{arrowIcon:v,onClick:()=>t("theme")})})]}):"theme"===e?(0,i.jsx)(h.e,{}):null]})})});ej.displayName="AIGeneratorPage"},44240:(e,t,n)=>{"use strict";n.d(t,{m:()=>F});var i=n(31085),r=n(31223),s=n(35687),o=n(46882),l=n(76003),a=n(3706),d=n(3040),c=n(95640),u=n(31242),h=n(14041),x=n(92712),p=n(80532),m=n(80853),f=n(25420),g=n(18651),j=n(2219),v=n(27670),b=n(12917),y=n(24221),C=n(34747),w=n.n(C),E=n(44507);let k=e=>{let{children:t,href:n,onClick:r,as:s=w()}=e;return n?(0,i.jsx)(x.Q,{as:p.az,role:"group",onClick:r,children:(0,i.jsx)(x.r,{href:n,as:s,_focusVisible:{boxShadow:"none",outline:"0 none !important"},_hover:{textDecoration:"none !important"},children:t})}):(0,i.jsx)(p.az,{as:m.$,w:"100%",variant:"unstyled",display:"flex",alignItems:"stretch",justifyContent:"stretch",h:"auto",role:"group",onClick:r,maxW:{base:"none",md:"18em"},tabIndex:0,_focusVisible:{boxShadow:"none",outline:"0 none !important"},children:t})},S=e=>{let{label:t,description:n,isPopular:r,isBeta:o,imageUrl:l,imageComponent:a,href:d,onClick:u,as:h}=e;return(0,i.jsx)(k,{href:d,onClick:e=>{null==u||u(e)},as:h||w(),children:(0,i.jsxs)(s.B,{cursor:"pointer",direction:{base:"row",md:"column"},flex:"1",whiteSpace:"normal",textAlign:"start",spacing:4,bg:"white",borderRadius:"lg",p:6,boxShadow:{base:"sm",md:"md"},transitionDuration:"normal",transitionProperty:"common",_groupHover:(0,E.Xb)()?{}:{boxShadow:"xl",transform:"scale(1.03)"},position:"relative",_groupFocusWithin:{shadow:"outline"},children:[(0,i.jsxs)(f.s,{flex:"1",children:[a,l&&(0,i.jsx)(g._,{src:l,objectFit:"cover"})]}),(0,i.jsx)(s.B,{spacing:"1.5",maxW:"100%",minH:{base:"100px",md:"none"},flex:"1.5",direction:{base:"row",md:"column"},children:(0,i.jsxs)(s.B,{align:"flex-start",children:[(0,i.jsx)(j.D,{fontSize:{base:"xl",md:"2xl"},fontWeight:"600",children:t}),(0,i.jsx)(p.az,{fontSize:{base:"sm",md:"md"},fontWeight:"500",lineHeight:"1.4",color:"gray.600",children:n}),r&&(0,i.jsxs)(v.E,{fontSize:"md",children:[(0,i.jsx)(y.g,{icon:b.zm_})," ",(0,i.jsx)(c.x6,{id:"gL/sdV"})]}),o&&(0,i.jsx)(v.E,{fontSize:"md",colorScheme:"highlight-bordeaux",children:(0,i.jsx)(c.x6,{id:"YBt9YP"})})]})})]})})};var I=n(11070),T=n(35002),A=n(64225),R=n(10458);let _={src:"/_next/static/media/generate-big-button-rebrand.b74a0218.svg"},O={src:"/_next/static/media/import-big-button-rebrand.b67764ff.svg"},D={src:"/_next/static/media/paste-in-big-butotn-rebrand.1eab7a2f.svg"};var z=n(20869),P=n(78416),L=n(14090),N=n(50080),M=n(93129);let V=e=>{let{createGenerateV2Enabled:t}=e,n=T.of.get("importUrl");return{paste:{label:(0,i.jsx)(c.x6,{id:"Q4xH1Z"}),description:(0,i.jsx)(c.x6,{id:"MxbdK6"}),icon:d.bLf,colorScheme:"pink",imageUrl:D.src,transform:"rotate(-1.5deg) scale(0.84)",screen:"createPaste"},generate:{label:(0,i.jsx)(c.x6,{id:"ziAjHi"}),description:(0,i.jsx)(c.x6,{id:"anOFr5"}),icon:d.p7g,colorScheme:"trueblue",imageUrl:_.src,isPopular:!0,screen:t?"createGenerate":"legacyGuidedMode"},import:{label:n?(0,i.jsx)(c.x6,{id:"krF+YI"}):(0,i.jsx)(c.x6,{id:"2xoyqj"}),description:n?(0,i.jsx)(c.x6,{id:"fG2B2z"}):(0,i.jsx)(c.x6,{id:"5c5WYH"}),icon:d.$MS,colorScheme:"purple",imageUrl:O.src,transform:"rotate(1.5deg) scale(0.84)",screen:"createImport"}}},F=(0,h.memo)(()=>{let e=(0,A.jL)(),{goToScreen:t,navEnabled:n}=(0,N._2)(),d=(0,T.u)("createGenerateV2"),h=(0,R.st)(),{query:x}=(0,u.useRouter)(),p=x.channelId;return(0,i.jsxs)(I.d,{children:[n&&(0,i.jsx)(M.V,{}),(0,i.jsx)(L.I,{title:(0,i.jsx)(c.x6,{id:"1zuBj5"}),subtitle:(0,i.jsx)(c.x6,{id:"h0sjMM"}),children:(0,i.jsx)(r.m,{maxW:"4xl",children:(0,i.jsx)(s.B,{spacing:12,align:"center",children:(0,i.jsx)(o.x,{gap:6,alignItems:"center",gridTemplateAreas:{base:'"generate" "paste" "import"',md:'"paste generate import"'},gridTemplateColumns:{base:"1fr",md:"1fr 1fr 1fr"},width:"100%",children:Object.entries(V({createGenerateV2Enabled:d})).map(n=>{let[r,{label:s,description:o,isPopular:d,colorScheme:c,imageUrl:u,screen:x}]=n;return(0,i.jsx)(l.E,{area:r,children:(0,i.jsx)(S,{as:a.N,label:s,description:o,isPopular:d,colorScheme:c,imageUrl:u,onClick:n=>{null==h||h.track(R.VV.AI_DOC_CREATION_GENERATION_TYPE_CLICKED,{generationType:r,device:(0,E.ZI)()}),e((0,z.s)()),n.preventDefault(),n.stopPropagation(),t(x,{ref:"createWithAI",channelId:p})}})},r)})})})})}),(0,i.jsx)(r.m,{maxW:"2xl",pb:"10vw",children:(0,i.jsx)(P.r,{})})]})});F.displayName="CreatePage"},55729:(e,t,n)=>{"use strict";n.d(t,{b:()=>L});var i=n(31085),r=n(31223),s=n(2600),o=n(80532),l=n(27559),a=n(2219),d=n(35789),c=n(80853),u=n(61778),h=n(3706),x=n(20501),p=n(3040),m=n(24221),f=n(9104),g=n(95640),j=n(12327),v=n(14041),b=n(11070),y=n(37908),C=n(74109),w=n(50877),E=n(64130),k=n(64225),S=n(66176),I=n(60434),T=n(32033),A=n(20869),R=n(14452),_=n(30950),O=n(84142),D=n(14090),z=n(50080),P=n(93129);let L=(0,v.memo)(()=>{let{guessSettings:e,isLoading:t}=(0,T.D)({ref:"createPaste"}),n=(0,k.GV)(A.qT),[L,N]=(0,v.useState)(!1),{format:M,styleTemplate:V,setStyleTemplate:F}=(0,I.pm)(),{goToScreen:G}=(0,z._2)(),W=(0,v.useCallback)(async()=>{let t=(0,R.QA)(n),i=(0,R.rd)(n),r=(0,C.WW)(n);await e(w.xbH.PasteText,{format:M,content:n,settings:{textMode:r>=1e3?"document"===M?"preserve":"condense":"generate",editorMode:i>2&&t>5?"structured":"freeform",styleTemplate:V}})},[n,V,e,M]),B=(0,E.fW)()?x.CeG:x.dmS;return(0,i.jsx)(y.pY,{children:(0,i.jsxs)(b.d,{children:[(0,i.jsx)(P.V,{}),(0,i.jsx)(D.I,{title:(0,i.jsx)(g.x6,{id:"RG+JLG"}),subtitle:(0,i.jsx)(g.x6,{id:"v2ydVh"}),icon:(0,i.jsx)(m.g,{icon:p.vZS}),iconBoxProps:{color:"salmon.300"},children:(0,i.jsx)(r.m,{maxW:"2xl",children:(0,i.jsxs)(s.T,{spacing:4,w:"100%",children:[(0,i.jsx)(s.T,{spacing:3,align:"stretch",w:"100%",children:(0,i.jsx)(S.N,{containerProps:{minH:{base:"270px",sm:"300px",md:"50vh"},maxH:"50vh",overflow:"auto",fontSize:"16px"},hideFooter:!0,onEditorUpdate:e=>{let{editor:t}=e;N(!t.isEmpty)}})}),(0,i.jsx)(o.az,{w:"100%",children:(0,i.jsx)(l.S,{in:L,children:(0,i.jsxs)(s.T,{py:2,w:"100%",spacing:0,children:[(0,i.jsx)(a.D,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,pb:4,w:"100%",children:(0,i.jsx)(g.x6,{id:"SjATqV"})}),(0,i.jsx)(d.o,{children:(0,i.jsx)(O.Qz,{})}),V&&(0,i.jsx)(o.az,{w:"100%",children:(0,i.jsx)(_.k,{docFormatType:M,onSelectStyleTemplate:F,selectedStyleTemplate:V})})]})})}),(0,i.jsx)(f.Tz,{label:n?"":(0,i.jsx)(g.x6,{id:"9IxKHJ"}),isDisabled:!!n,placement:"top",children:(0,i.jsx)(o.az,{width:"100%",children:(0,i.jsx)(c.$,{size:"lg",minW:"16em",width:"100%",onClick:W,variant:"solid",rightIcon:(0,i.jsx)(m.g,{icon:B}),isLoading:t,isDisabled:!n,loadingText:j.Ru._({id:"qgUvjm"}),children:(0,i.jsx)(g.x6,{id:"xGVfLh"})})})}),(0,i.jsx)(o.az,{w:"100%",children:(0,i.jsx)(l.S,{in:!L,children:(0,i.jsx)(u.E,{textAlign:"center",color:"blackAlpha.800",children:(0,i.jsx)(g.x6,{id:"LVQnRo",components:{0:(0,i.jsx)(h.N,{onClick:e=>{e.preventDefault(),G("createImport",{ref:"createPaste"})},textDecoration:"underline",fontWeight:"600"})}})})})})]})})})]})})});L.displayName="CreatePastePage"},14643:(e,t,n)=>{"use strict";n.d(t,{y:()=>g});var i=n(31085),r=n(25420),s=n(14041),o=n(13251),l=n(46108),a=n.n(l),d=n(31242),c=n(20869),u=n(50877),h=n(64225),x=n(50080);let p=e=>{let{id:t}=e,n=(0,d.useRouter)(),i=(0,h.jL)(),r=(0,h.CU)(),{goToScreen:o}=(0,x._2)(),[l,a]=(0,s.useState)(!0),[p]=(0,u.ezx)({variables:{id:t}});return(0,s.useEffect)(()=>{n&&r&&p&&p().then(e=>{let{data:t}=e;if(null==t?void 0:t.docGeneration)return t.docGeneration;throw Error("Could not load docGeneration")}).then(e=>{i((0,c.Jv)(m(e))),a(!1)}).catch(()=>{o("createWithAI")})},[i,p,o,n,r]),{isLoading:l}},m=e=>({...e,docGenerateInputs:e.docGenerateInputs.map(f),draftInput:e.draftInput?f(e.draftInput):void 0}),f=e=>{let t=a()(e);return t.settings.textMode||(t.settings.preserveText?t.settings.textMode="preserve":t.settings.textMode="generate",delete t.settings.preserveText),t},g=(0,s.memo)(e=>{let{id:t,children:n}=e,{isLoading:s}=p({id:t});return s?(0,i.jsx)(r.s,{background:"gradient.sky",w:"100%",h:"100%",flex:1,alignSelf:"center",children:(0,i.jsx)(o.Y,{})}):(0,i.jsx)(i.Fragment,{children:n})});g.displayName="LoadDocGenerationPage"},95312:(e,t,n)=>{"use strict";n.d(t,{u:()=>j});var i=n(31085),r=n(62313),s=n(26848),o=n(61778),l=n(80532),a=n(35687),d=n(2219),c=n(15672),u=n(70323),h=n(80853),x=n(20501),p=n(3040),m=n(24221),f=n(95640);n(14041);let g=e=>{let{label:t,shortcuts:n}=e;return(0,i.jsxs)(r.z,{children:[n.map((e,t)=>(0,i.jsx)(s.u,{padding:1,children:e},t)),(0,i.jsx)(o.E,{fontSize:"sm",fontWeight:"medium",whiteSpace:"nowrap",children:t})]})},j=e=>{let{onClose:t,showExitPresentMode:n=!0}=e;return(0,i.jsx)(l.az,{children:(0,i.jsxs)(a.B,{spacing:6,children:[(0,i.jsxs)(a.B,{spacing:1,children:[(0,i.jsxs)(r.z,{color:"gray.500",children:[(0,i.jsx)(m.g,{icon:x.Lhe})," ",(0,i.jsx)(d.D,{size:"xs",fontWeight:"normal",children:(0,i.jsx)(f.x6,{id:"h7MgpO"})})]}),(0,i.jsx)(d.D,{size:"md",children:(0,i.jsx)(f.x6,{id:"UodEcE"})})]}),(0,i.jsxs)(c.r,{spacing:3,columns:1,children:[(0,i.jsx)(g,{label:(0,i.jsx)(f.x6,{id:"9xCxY6"}),shortcuts:[(0,i.jsx)(m.g,{icon:p.CeG},"left"),(0,i.jsx)(m.g,{icon:p.dmS},"right")]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.x6,{id:"K0Oq/D"}),shortcuts:["R"]}),(0,i.jsx)(u.c,{borderColor:"gray.300"}),(0,i.jsx)(g,{label:(0,i.jsx)(f.x6,{id:"CgmvBu"}),shortcuts:["S"]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.x6,{id:"/5i2oX"}),shortcuts:[(0,i.jsx)(m.g,{icon:p.INu},"up"),(0,i.jsx)(m.g,{icon:p.B0C},"down")]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.x6,{id:"rEj/lx"}),shortcuts:["Enter"]}),(0,i.jsx)(u.c,{borderColor:"gray.300"}),n&&(0,i.jsx)(g,{label:(0,i.jsx)(f.x6,{id:"IkakN2"}),shortcuts:["Esc"]})]}),(0,i.jsx)(h.$,{size:"sm",variant:"solid",onClick:t,children:(0,i.jsx)(f.x6,{id:"76gPWk"})})]})},"coach-bar")}},29557:(e,t,n)=>{"use strict";n.d(t,{R:()=>o});var i=n(14041),r=n(13432),s=n(45591);let o=e=>{let{enabled:t,type:n}=e,o=(0,r.O2)(n),l=(0,i.useRef)(!0);(0,i.useEffect)(()=>{if(!t)return;let e=o.scroller;if(!e)return;let n=()=>{o.isAtBottom(40)?l.current=!0:l.current=!1},i=()=>{l.current=!1};return e.addEventListener("wheel",n,{passive:!0}),e.addEventListener("touchend",n,{passive:!0}),e.addEventListener("touchstart",i,{passive:!0}),e.addEventListener("touchmove",i,{passive:!0}),()=>{e.removeEventListener("wheel",n),e.removeEventListener("touchend",n),e.removeEventListener("touchstart",i),e.removeEventListener("touchmove",i)}},[o,t]);let a=(0,i.useCallback)(()=>{l.current&&(null==o||o.scrollToBottom({behavior:"auto"}))},[o]);return(0,s.wb)(a,100)}},31504:(e,t,n)=>{"use strict";n.d(t,{z:()=>v});var i=n(31085),r=n(25420),s=n(80532),o=n(12327),l=n(14041),a=n(94445),d=n(64225),c=n(94745),u=n(5893),h=n(62407),x=n(38888),p=n(63955);let m={fontFamily:"var(--chakra-fonts-body) !important",fontWeight:"500",lineHeight:"1.5 !important",textTransform:"none",letterSpacing:"normal !important",textAlign:"start !important",margin:"0 !important",color:"gray.800 !important",background:"none !important",border:"0 none !important",padding:"0 !important",content:'""'},f={".block-paragraph,.block-heading,.block-title,.block-todo,.block-numbered,.block-bullet":{...m,margin:0,my:"0.75em",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"}},".block-paragraph":{fontSize:"1em"},".block-heading,.block-title":{fontWeight:"bold",lineHeight:{fontSize:"1.25"},'.heading[level="1"]':{fontSize:"1.5em"},'.heading[level="2"]':{fontSize:"1.25em"},'.heading[level="3"]':{fontSize:"1.125em"},'.heading[level="4"]':{fontSize:"1em"}},".block-title":{".title":{fontSize:"1.75em"},'.title[level="1"]':{fontSize:"1.75em"},'.title[level="2"]':{fontSize:"2em"},'.title[level="3"]':{fontSize:"2.25em"}},a:{...m,color:"var(--chakra-colors-blue-500) !important","&:hover":{textDecoration:"underline"},'&[href=""]':{textDecorationStyle:"dashed"},cursor:"pointer"},".mention":{bgColor:"trueblue.50",whiteSpace:"break-spaces"},code:{backgroundColor:"var(--chakra-colors-trueblue-50)",color:"var(--body-color)",...p.wd}},g={".block-paragraph,.block-heading,.block-title,.block-todo,.block-numbered,.block-bullet":{...m,margin:0,my:"0.75em",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"},color:"white"},code:{backgroundColor:"var(--chakra-colors-whiteAlpha-100)",color:"var(--chakra-colors-gray-200)",...p.wd},".block-todo label.chakra-checkbox .chakra-checkbox__control[data-checked]":{backgroundColor:"var(--chakra-colors-whiteAlpha-100)",color:"var(--chakra-colors-white)"}},j=e=>{let{isDark:t=!1}=e;return{".ProseMirror":{height:"100%"},...f,...x.X0,"--box-border-radius":"var(--chakra-radii-sm)","--link-color":t?"var(--chakra-colors-trueblue-100)":"var(--chakra-colors-trueblue-500)",".block-todo label.chakra-checkbox .chakra-checkbox__control:not([data-checked])":{borderColor:"var(--chakra-colors-chakra-border-color)"},"--body-color-inverted":t?"black":"white",...t?g:{},".is-selecting-node":{"[data-selection-ring]":{_before:{content:'""',position:"absolute",inset:0,borderRadius:"inherit",outline:"2px solid",outlineColor:t?"trueblue.100":"trueblue.300",pointerEvents:"none",zIndex:1}},'[data-selection-ring="padded"]':{_before:{outlineOffset:"0.25em"}}}}},v=(0,l.memo)(e=>{var t;let{isEditable:n,notesSx:x,canShowEditHint:p=!1,isDark:m=!1}=e,[f,g]=(0,l.useState)(null),{destroyEditor:v,mountEditor:b}=(0,d.GV)(a.rd),y=(0,l.useRef)(!1);(0,l.useEffect)(()=>(b&&g(b()),()=>{null==v||v(),g(null)}),[v,b]),(0,l.useEffect)(()=>{f&&n&&!y.current&&(f.commands.focus("end"),y.current=!0)},[n,f]),(0,l.useEffect)(()=>{if(f){if(f.shouldUseLiteMenus=!0,n&&!f.isEditable){f.setEditable(!0);return}if(!n&&f.isEditable){f.setEditable(!1);return}}},[n,f]);let C=n?o.Ru._({id:"fnNtuR"}):"Double click to edit",w=p&&(null===(t=null==f?void 0:f.isEmpty)||void 0===t||t),E=j({isDark:m});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.s,{className:"card-notes-editor",overflowY:"auto",border:"1px solid",borderColor:m?"gray.700":"gray.200",borderRadius:"md",flex:1,p:4,wordBreak:"break-word",sx:{".block.block-paragraph.first-block.last-block.is-empty::before":{...h.sx,content:'"'.concat(C,'"')},...E,...x,_before:w?{...h.sx,top:4,left:4,height:"auto",width:"auto",content:'"'.concat(o.Ru._({id:"CvH5f/"}),'"')}:{}},pos:"relative",children:(0,i.jsx)(r.s,{flex:1,flexDirection:"column",children:f&&(0,i.jsx)(u.$,{editor:f,className:"highlight-mask",style:{height:"100%"}})})}),f&&n&&(0,i.jsx)(s.az,{children:(0,i.jsx)(c.Ht,{editor:f,appendToSelector:"[data-card-notes-bubble-menu-target]"})})]})});v.displayName="CardNotesEditor"},3367:(e,t,n)=>{"use strict";n.d(t,{JW:()=>E,Lh:()=>A,SQ:()=>k});var i=n(31085),r=n(61778),s=n(40173),o=n(80532),l=n(46882),a=n(76003),d=n(30046),c=n(9021),u=n(3040),h=n(24221),x=n(95640),p=n(12327),m=n(12567),f=n(14041),g=n(6657),j=n(73524),v=n(64225),b=n(36661),y=n(41510),C=n(73059);let w=(0,m.Ay)("mod+Escape"),E=new Set(["h","j","k","l","s","PageUp","PageDown","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Enter","Escape"]),k=e=>{let{enabled:t,setActiveKey:n}=e,{editor:i}=(0,b.m)(),{editCardInPresentMode:r}=(0,y.V)({editor:i}),s=(0,v.GV)(j.AO),{handlePresentNavigationEvent:o,spotlightingByBlock:l}=(0,C.e)();return(0,f.useEffect)(function(){if(t)return g.WC.on("keydown","NAVIGATION_CONTROLS",e=>{var t,i;let l=e.target;if((null==l?void 0:null===(t=l.closest)||void 0===t?void 0:t.call(l,"[data-gamma-child-tiptap-editor]"))||(null==l?void 0:null===(i=l.closest)||void 0===i?void 0:i.call(l,"input"))||e.metaKey||s)return!1;let a=e.key;if(E.has(a)&&("s"!==a&&(n(e.key),setTimeout(()=>{n(null)},100)),e.preventDefault())," "===a&&e.shiftKey)return o({eventType:"arrowLeft",eventKey:a});switch(e.key){case"e":return r(),!0;case"s":return o({eventType:"toggleSpotlight",eventKey:a});case" ":case"l":case"ArrowRight":return o({eventType:"arrowRight",eventKey:a});case"h":case"ArrowLeft":return o({eventType:"arrowLeft",eventKey:a});case"j":case"ArrowDown":case"PageDown":return o({eventType:"arrowDown",eventKey:a});case"k":case"ArrowUp":case"PageUp":return o({eventType:"arrowUp",eventKey:a});case"r":return o({eventType:"restart",eventKey:a});case"Escape":if(w(e))return!1;return o({eventType:"cancelCurrentAction",eventKey:a});case"Enter":return o({eventType:"toggleExpanded",eventKey:a});default:return!1}})},[r,t,o,s,n]),l},S=e=>{let t=new KeyboardEvent("keydown",{key:e});n.g.dispatchEvent(t)},I={ArrowUp:{icon:u.INu,label:(0,i.jsx)(x.x6,{id:"VbggDE"}),ariaLabel:()=>p.Ru._({id:"VbggDE"}),shortcuts:["↑","K"],key:"ArrowUp",onClick:()=>{S("ArrowUp")},gridPos:[1,2]},ArrowLeft:{icon:u.CeG,label:(0,i.jsx)(x.x6,{id:"4jciC3"}),ariaLabel:()=>p.Ru._({id:"4jciC3"}),shortcuts:["←","H"],key:"ArrowLeft",onClick:()=>{S("ArrowLeft")},gridPos:[2,1]},ArrowDown:{icon:u.B0C,label:(0,i.jsx)(x.x6,{id:"e3GOIZ"}),ariaLabel:()=>p.Ru._({id:"e3GOIZ"}),shortcuts:["↓","J"],key:"ArrowDown",onClick:()=>{S("ArrowDown")},gridPos:[2,2]},ArrowRight:{icon:u.dmS,label:(0,i.jsx)(x.x6,{id:"ZjQRVw"}),ariaLabel:()=>p.Ru._({id:"ZjQRVw"}),shortcuts:["→","L"],key:"ArrowRight",onClick:()=>{S("ArrowRight")},gridPos:[2,3]},Spotlight:{icon:u.Jq7,label:(0,i.jsx)(x.x6,{id:"Xon9jp"}),ariaLabel:()=>p.Ru._({id:"Xon9jp"}),shortcuts:["S"],key:"S",onClick:()=>{S("s")},gridPos:[1,3]}},T=e=>{let{shortcuts:t}=e;return(0,i.jsx)(r.E,{as:"span",color:"gray.400",ml:2,children:t.map((e,n)=>(0,i.jsxs)(f.Fragment,{children:[e,n===t.length-1?null:(0,i.jsx)(r.E,{fontSize:"11px",as:"span",color:"gray.500",mx:1,children:"or"})]},e))})},A=e=>{let{activeKey:t,spotlightingByBlock:n}=e;return(0,i.jsx)(s.Z,{children:(0,i.jsx)(o.az,{position:"absolute",bottom:4,insetEnd:6,zIndex:"sticky",children:(0,i.jsx)(l.x,{gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(2, 1fr)",children:Object.values(I).map(e=>{let{gridPos:s,icon:o,label:l,ariaLabel:u,shortcuts:x,key:p,onClick:m}=e;return(0,i.jsx)(a.E,{gridColumn:s[1],gridRow:s[0],children:(0,i.jsx)(d.m,{hasArrow:!0,placement:"top",label:(0,i.jsxs)(r.E,{whiteSpace:"nowrap",children:[l,(0,i.jsx)(T,{shortcuts:x})]}),children:(0,i.jsx)(c.K,{m:1,shadow:"base",size:"md",variant:"S"==p&&n?"solid":"plain",isActive:t===p||"S"===p&&n,onClick:m,onMouseDown:e=>e.preventDefault(),"aria-label":u(),icon:(0,i.jsx)(h.g,{icon:o})})})},p)})})})})}},41510:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var i=n(14041),r=n(64225),s=n(5933);let o=e=>{let{editor:t}=e,n=(0,r.jL)(),o=(0,r.CU)();return{editCardInPresentMode:(0,i.useCallback)(()=>{(0,s.Ik)(o.getState())&&(n((0,s._b)({isEditingInSlideView:!0})),n((0,s.mF)({attached:!1})),n((0,s.tB)()),null==t||t.commands.turnOffSpotlight())},[t,n,o])}}},73059:(e,t,n)=>{"use strict";n.d(t,{e:()=>m});var i=n(14041),r=n(5159),s=n(64225),o=n(80352),l=n(10458),a=n(51183),d=n(43167),c=n(86047),u=n(46896),h=n(5933),x=n(36661);let p=function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=(0,o.H1)("editor"),r=i.scroller;if(!r)return;e.commands.turnOffSpotlight();let s=r.scrollHeight-r.offsetHeight;if("down"===t){if(!(i.isAtBottom(90)&&n&&e.commands.spotlightNextCard(!1,"top"))){let e=r.scrollTop+.5*r.offsetHeight;e>s-150&&(e=s),i.scrollTo({top:e})}}else if(!(i.isAtTop(90)&&n&&e.commands.spotlightNextCard(!0,"bottom"))){let e=r.scrollTop-.5*r.offsetHeight;e<150&&(e=0),i.scrollTo({top:e})}},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.Y2.MAIN_PRESENT_VIEW,{editor:t}=(0,x.m)(),n=(0,l.st)(),{enabled:o}=(0,d.kY)(t),m=(0,s.CU)();return{handlePresentNavigationEvent:(0,i.useCallback)(i=>{let{eventType:s,eventKey:o,method:d="keyboard",payload:x={}}=i;if(!t)return!1;let f=m.getState(),g=(0,h.FI)(f),j=null==g?void 0:g.pos,v=!!(t&&g&&(0,c.UE)(t,g)),b=Object.keys((0,h.Ev)(f).tree);switch(s){case"toggleSpotlight":return v?null==t||t.commands.turnOffSpotlight():null==t||t.commands.spotlightNextBlock(),m.dispatch((0,h.tB)()),!0;case"goToCard":{let{cardId:e}=x;if(!e)return!1;return t.commands.spotlightCardById(e,v),m.dispatch((0,h.mF)({attached:!1})),!0}case"arrowRight":if((0,r.up)(),m.dispatch((0,h.mF)({attached:!1})),null==n||n.trackDocEvent(l.VV.PRESENT_MODE_NAVIGATED,{direction:l.Fk.CARD_NEXT,method:"keyboard"===d?l.fG.KEYBOARD:l.fG.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),v)return t.commands.spotlightNextBlock();return t.commands.spotlightNextCard();case"arrowLeft":if((0,r.up)(),m.dispatch((0,h.mF)({attached:!1})),null==n||n.trackDocEvent(l.VV.PRESENT_MODE_NAVIGATED,{direction:l.Fk.CARD_PREV,method:"keyboard"===d?l.fG.KEYBOARD:l.fG.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),v)return t.commands.spotlightNextBlock(!0);return t.commands.spotlightNextCard(!0);case"arrowDown":if((0,r.up)(),m.dispatch((0,h.mF)({attached:!1})),!v){let e=(0,a.TX)(t.state.selection);return t.commands.goToNextExpandableNode()||p(t,"down",!e),!0}return null==n||n.trackDocEvent(l.VV.PRESENT_MODE_NAVIGATED,{direction:l.Fk.TELEPROMPTER_DOWN,method:"keyboard"===d?l.fG.KEYBOARD:l.fG.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),t.commands.spotlightNextBlock();case"arrowUp":if((0,r.up)(),m.dispatch((0,h.mF)({attached:!1})),!v){let e=(0,a.TX)(t.state.selection);return t.commands.goToNextExpandableNode(!0)||p(t,"up",!e),!0}return null==n||n.trackDocEvent(l.VV.PRESENT_MODE_NAVIGATED,{direction:l.Fk.TELEPROMPTER_UP,method:"keyboard"===d?l.fG.KEYBOARD:l.fG.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),t.commands.spotlightNextBlock(!0);case"restart":if(b[0])return(0,r.up)(),t.commands.spotlightCardById(b[0]),m.dispatch((0,h.mF)({attached:!1})),!0;return!1;case"cancelCurrentAction":{let e=v&&j;if(t.commands.spotlightCollapseNearestExpandableNode(e?j:null))return t.commands.reHighlightExpandableNode(),!0;if(v)return t.commands.turnOffSpotlight(),!0;return m.dispatch((0,h.mF)({attached:!1})),null==n||n.track(l.VV.CARD_COLLAPSED,{is_present_mode:!0,method:"escape_key"}),t.commands.ascendUpToParentCard(!1)}case"toggleExpanded":{let e=v&&j;if(t.commands.expandOrCollapseExpandableNode(e?j:null))return!0;if(e){let e=t.state.doc.resolve(j).parent;if(e&&(0,u.p8)(e))return(0,u.bG)(e.attrs.id,!1),t.commands.spotlightNextBlock(!0),!0;return t.commands.spotlightCollapseNearestExpandableNode(j)}return!1}default:return!1}},[n,t,e,m]),spotlightingByBlock:o}}},69588:(e,t,n)=>{"use strict";n.d(t,{FM:()=>x,Lt:()=>h,Ur:()=>u,Yi:()=>p});var i=n(17228),r=n.n(i),s=n(14041),o=n(35002),l=n(64225),a=n(82354),d=n(5933),c=n(22544);let u="disable-card-size-animations",h=()=>{let e=(0,o.u)("autoZoomToFit"),t=(0,l.GV)(d.G7);return(0,s.useEffect)(()=>{t||f()},[t]),null!=t?t:e},x=()=>{let e=(0,l.GV)(d.$i),t=(0,s.useRef)(),n=h(),i=!c.rS&&!c.GC&&n;(0,s.useEffect)(()=>{let n=!t.current;t.current=e,e&&i&&(document.body.classList.add(u),p(),requestAnimationFrame(()=>{document.body.classList.remove(u)}),n&&setTimeout(()=>{document.body.classList.add(u),p(),requestAnimationFrame(()=>{document.body.classList.remove(u)})},a.M2))},[e,i])},p=()=>{let e=document.documentElement.clientHeight,t=document.querySelector('[data-animate-value="presentCurrent"][data-card-scroll-element]');if(!t)return;let n=m(t,e,1);if(n<.9){let i=(1-n)/3;n=m(t,e,n+i)}(0,l.KA)().dispatch((0,d.ed)({zoomLevel:n}))},m=(e,t,n)=>{e.style.setProperty("--zoom-level",n.toString());let i=e.scrollHeight,s=r()(n*t/i,c.hQ?.5:a.bq,1);return e.style.setProperty("--zoom-level",s.toString()),s},f=()=>{document.querySelectorAll("[data-card-scroll-element]").forEach(e=>{e.style.removeProperty("--zoom-level")})}},43980:(e,t,n)=>{"use strict";n.d(t,{$x:()=>Y});var i=n(31085),r=n(25420),s=n(32202),o=n(56824),l=n(98029),a=n(85774),d=n(31291),c=n(80532),u=n(61778),h=n(62313),x=n(67265),p=n(91047),m=n(6373),f=n(3706),g=n(20501),j=n(24221),v=n(9104),b=n(5377),y=n(95640),C=n(12327),w=n(13236),E=n(60674),k=n(75669),S=n(89897),I=n.n(S),T=n(34747),A=n.n(T),R=n(31242),_=n(14041),O=n(50877),D=n(91559),z=n(22844),P=n(35002),L=n(64130),N=n(64225),M=n(77646),V=n(5933),F=n(14e3),G=n(38678),W=n(57882),B=n(60219),U=n(78354),H=n(85025),q=n(14691),K=n(83060);let J=(0,E.P)(r.s),Y=e=>{let{doc:t}=e;return(0,i.jsx)(J,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},children:(0,i.jsx)(k.N,{initial:!1,children:(0,i.jsx)(ee,{doc:t})})})},X=(0,_.memo)(e=>{let{doc:t}=e,{editor:n}=(0,B.mi)(),{isConnected:r}=(0,D.u)(),u=(0,s.d)(),h=(0,_.useRef)(null),x=(0,_.useRef)(null),[p,{loading:m}]=(0,O.cGn)(),[f,g]=(0,_.useState)(null),[j,E]=(0,_.useState)(!1),[k,S]=(0,_.useState)(!1),T=(0,W.Iy)("edit",t),A=T?300:500,R=(0,_.useCallback)(()=>{if(!n)return"";let[e]=(0,w.xe)(n.state.doc,M.jg);return e&&(0,b.getCardTitle)(e.node.toJSON())||""},[n]);(0,_.useEffect)(()=>{!t||j||m||(g(t.title||""),S(!!t.titleEdited))},[t,j,m]);let z=()=>{h.current.style.width=x.current.offsetWidth+0+"px"},P=(0,o.dU)("gray.800","gray.200");return(0,i.jsx)(v.Tz,{label:T?r?(0,i.jsx)(y.x6,{id:"2wxgft"}):(0,i.jsx)(y.x6,{id:"Cb+Bgk"}):null,"aria-label":C.Ru._({id:"2wxgft"}),children:(0,i.jsxs)(l.F,{value:f||"",placeholder:f||R(),isDisabled:m||!T||!r,isPreviewFocusable:T,maxW:A,width:"100%",fontWeight:"normal",onCancel:()=>{z(),E(!1)},onFocus:()=>{z(),t&&!m&&E(!0)},onChange:e=>{z(),j&&(g(e),S(!!e))},onSubmit:()=>{if(!t||m)return;E(!1);let e=f||R();p({variables:{id:t.id,title:e,titleEdited:k}}).catch(e=>{console.error(e),u({title:(0,i.jsx)(y.x6,{id:"AToAqe",values:{0:e.message}}),position:"top",status:"error"})})},children:[(0,i.jsx)(a.l,{px:1,py:.5,display:j?"inline":"block",overflowX:"hidden",textOverflow:"ellipsis",color:k?P:"inherit"}),(0,i.jsx)(d.j,{ref:h,px:1,py:.5,color:k?P:"inherit",maxW:A,_focus:{outline:"none",shadow:"0 0 0 2px rgb(66 153 225 / 60%)"}}),(0,i.jsx)(c.az,{ref:x,as:"span",display:"inline-block",position:"absolute",left:"-9999px",opacity:0,zIndex:-1,minW:"180px",px:1,dangerouslySetInnerHTML:{__html:I().sanitize((f||"").replace(/\s/g,"&nbsp;"))}})]})})});X.displayName="EditableDocTitle";let $=e=>{let{cardId:t,isEllipsis:n,value:r,onClick:s}=e,o=(0,N.GV)((0,z.F1)(t||""));return n?(0,i.jsx)(j.g,{icon:g.vHW}):t||r?(0,i.jsx)(u.E,{noOfLines:1,onClick:s,maxW:180,fontWeight:"normal",children:r||o||""}):null},Z=e=>{let{isPresentModeFlat:t}=e;return e=>{let n=(0,V.wC)(e),i=(0,V.$i)(e)||"",r=(0,V.Ev)(e).parents[i]||[];if(n!==F.w.SLIDE_VIEW||t)return[{isHome:!0},{isDocTitle:!0}];let s=r[0],o=r[r.length-1];return[{isHome:!0},r.length>1?{cardId:s}:null,r.length>2?{isEllipsis:!0}:null,r.length>0?{cardId:o}:null,{cardId:i}]}},Q=()=>{let e=(0,P.u)("presentModeFlat");return(0,N.GV)(Z({isPresentModeFlat:e}),(e,t)=>JSON.stringify(e)===JSON.stringify(t))},ee=(0,_.memo)(e=>{let{doc:t}=e,n=(0,L.fW)(),s=Q(),[l]=(0,H.F)(q.E.lastHomeUrl,"/"),{user:a}=(0,W.ur)(),{isConnected:d,isInOfflineMode:b}=(0,D.u)(),{confirmNavigation:w}=(0,B.mi)(),{push:E}=(0,R.useRouter)(),k=(0,U.h5)({base:"xs",sm:"sm"}),S=(0,o.dU)("gray.500","gray.400");return(0,i.jsxs)(h.z,{spacing:0,textAlign:"start",px:0,h:8,children:[(0,i.jsx)(x.Q,{display:"flex",alignItems:"center",whiteSpace:"nowrap",size:k,spacing:["4px","8px"],separator:(0,i.jsx)(c.az,{color:"gray.300",mt:["0.2rem","0.125rem"],children:(0,i.jsx)(j.g,{icon:n?g.Wzs:g.XkK})}),children:s.map((e,n)=>{if(!e)return null;let r=n===s.length-1,{cardId:o,isEllipsis:d,isDocTitle:c,isHome:u,value:h}=e,x=u?"home":d?"ellipsis":o||h||n;if(u&&!a)return null;let v={as:A(),href:l||"/",fontWeight:"normal","data-testid":"toolbar-home-link"};return(0,i.jsx)(p.J,{children:(0,i.jsx)(J,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:(0,i.jsx)(m.w,{isCurrentPage:r,pointerEvents:r&&!c?"none":"inherit",color:r?S:"inherit",...u?{...v}:{},children:c?(0,i.jsx)(X,{doc:t}):u?(0,i.jsx)(f.N,{marginInlineStart:-3,as:K.I,href:v.href,onClick:e=>{!e.shiftKey&&(e.metaKey||e.ctrlKey)||(e.preventDefault(),w().then(()=>{E(v.href)}))},marginInlineEnd:-1,children:(0,i.jsx)(j.g,{size:"1x",icon:g.v02})}):(0,i.jsx)($,{cardId:o,value:h,isEllipsis:d,onClick:()=>{o&&(0,G.o)({cardId:o,method:"push"})}})})},x)},x)})}),!d&&(0,i.jsx)(v.Tz,{label:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.E,{marginInlineEnd:2,children:(0,i.jsx)(y.x6,{id:"ysdDIA"})}),b&&(0,i.jsx)(u.E,{color:"gray.300",children:(0,i.jsx)(y.x6,{id:"+QNhGE"})})]}),"aria-label":C.Ru._({id:"IcHxhR"}),children:(0,i.jsx)(r.s,{color:"gray.500",alignItems:"center",pe:3,children:(0,i.jsx)(j.g,{icon:g.seF})})})]})});ee.displayName="BreadcrumbGroup"},42850:(e,t,n)=>{"use strict";n.d(t,{l:()=>p});var i=n(3478),r=n(14041),s=n(73893),o=n(55640),l=n(35002),a=n(64225),d=n(30358),c=n(27042),u=n(6874),h=n(42434),x=n(51039);let p=e=>{let t=(0,a.GV)(x.Jo),n=(0,r.useMemo)(()=>!!i.A.get(u.oH),[]),p=(0,a.GV)(c.iG),m=(0,d.IM)(),f=(0,a.jL)(),g=(0,a.GV)(x.wt),j=(0,l.u)("docEditorForcePublicStatic"),v=window!==window.top,b=(0,r.useMemo)(()=>{var e,i;if(p||v)return!1;let r=new URLSearchParams(window.location.search);if(r.get("following_id")&&r.get("follow_on_start"))return!0;if(!t)return n;let l=null===(i=t.accessLinks)||void 0===i?void 0:null===(e=i.find(e=>e.token===s.$.SHARE_TOKEN))||void 0===e?void 0:e.permission;return l&&[o.aXG.Edit,o.aXG.Comment].includes(l)||m.can(o.aXG.Comment,t)||m.can(o.aXG.Edit,t)||m.can(o.aXG.Manage,t)},[m,t,n,v,p]);(0,r.useEffect)(()=>{let t=j?h.i.PUBLIC_STATIC:e||(b?h.i.COLLABORATIVE:h.i.PUBLIC_STATIC);f((0,x.wm)({docEditorType:t}))},[f,e,j,b]);let y=e||(b?h.i.COLLABORATIVE:h.i.PUBLIC_STATIC);return g||y}},40403:(e,t,n)=>{"use strict";n.d(t,{BC:()=>my,UN:()=>mo,vn:()=>mV,mi:()=>t5.mi});var i,r,s=n(31085),o=n(25420),l=n(35687),a=n(61778),d=n(80853),c=n(80532),u=n(81313),h=n(20501),x=n(24221),p=n(2628),m=n(95640),f=n(12327),g=n(2657),j=n.n(g),v=n(34747),b=n.n(v),y=n(14041),C=n(32133),w=n(37132),E=n(91559),k=n(19893),S=n(33854),I=n(64225),T=n(82354),A=n(24643);let R=e=>{let t=(0,I.jL)(),n=(0,S.u)("buddyEdit");return{buddyHandleDeckClick:(0,y.useCallback)(i=>{if(!n||!e)return;let r=i.target;if(r.closest(".".concat(T.p$))&&!r.getAttribute("data-outside-card-body"))return;t((0,A.X6)({context:{type:"deck"}}));let s=e.state.tr;s.setMeta("buddyFocusedContextChanged",!0),e.view.dispatch(s)},[n,t,e])}};var _=n(54235),O=n(73893),D=n(35002),z=n(3204),P=n(44507),L=n(92405),N=n(57628),M=n(36832);let V=new M.b;var F=n(40173),G=n(19098),W=n(98903),B=n(56824),U=n(93185),H=n(97864),q=n(2219),K=n(35789),J=n(9021),Y=n(15428),X=n(9104),$=n(52374),Z=n(58403),Q=n(42214),ee=n(64130),et=n(80352),en=n(10458),ei=n(87747),er=n(57882),es=n(98371),eo=n(45591);let el=e=>{let{selector:t}=e,[n,i]=(0,y.useState)(null),r=t?document.querySelector(t):null,s=(0,y.useCallback)(()=>{if(!t){i(null);return}if(r){r.scrollIntoView({behavior:"auto",block:"center"});let e=r.getBoundingClientRect();i({top:e.top,bottom:e.bottom,left:e.left,right:e.right,width:e.width,height:e.height})}else i(null)},[t,r]),o=(0,eo.wb)(s,500);return(0,y.useEffect)(()=>(s(),window.addEventListener("resize",o),window.addEventListener("scroll",o),()=>{window.removeEventListener("resize",o),window.removeEventListener("scroll",o)}),[o,s]),{rectAttrs:n}},ea=e=>({backgroundColor:"neutral.toolbar.background",borderColor:e?"gray.700":"gray.200",color:e?"white":"gray.800"});var ed=n(26860);n(54);let ec=e=>{let{selector:t,onClickTargetElement:n,rectAttrs:i,lockScroll:r=!1}=e,o=(0,y.useCallback)(e=>{let n=t&&document.querySelector(t);n&&(null==n?void 0:n.parentElement)&&(e?n.parentElement.style.opacity="1":n.parentElement.style.opacity="unset")},[t]);(0,y.useEffect)(()=>{let e=()=>{null==n||n(),o(!1)},i=t&&document.querySelector(t);return i&&i.addEventListener("mousedown",e),()=>{i&&i.removeEventListener("mousedown",e)}},[o,n,t]),(0,y.useEffect)(()=>(o(!0),()=>{o(!1)}),[o]);let l=(0,y.useMemo)(()=>(0,ed.X)(),[]);return(0,s.jsxs)(F.Z,{children:[r&&(0,s.jsx)(Y.mL,{styles:{".doc-root":{overflowY:"hidden !important",paddingInlineEnd:"".concat(l,"px !important")}}}),(0,s.jsxs)("svg",{className:"overlay-svg",width:"100%",height:"100%",preserveAspectRatio:"none",children:[(0,s.jsxs)("defs",{children:[i&&(0,s.jsxs)("mask",{id:"mask",children:[(0,s.jsx)("rect",{width:"100%",height:"100%",fill:"white",rx:3,ry:3}),(0,s.jsx)("rect",{x:i.left,y:i.top,width:i.width,height:i.height,fill:"black",rx:3,ry:3})]}),(0,s.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#f79533"}),(0,s.jsx)("stop",{offset:"20%",stopColor:"#f37055"}),(0,s.jsx)("stop",{offset:"40%",stopColor:"#ef4e7b"}),(0,s.jsx)("stop",{offset:"60%",stopColor:"#a166ab"}),(0,s.jsx)("stop",{offset:"80%",stopColor:"#5073b8"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#1098ad"}),(0,s.jsx)("animateTransform",{attributeName:"gradientTransform",type:"rotate",from:"0",to:"1000",dur:"3s",repeatCount:"indefinite"})]})]}),(0,s.jsx)("rect",{width:"100%",height:"100%",fill:"black",opacity:"0.5",mask:"url(#mask)",id:"mask-overlay"}),i&&(0,s.jsx)("rect",{x:i.left-4,y:i.top-4,width:i.width+8,height:i.height+8,rx:3,ry:3,fill:"none",stroke:"url(#gradient)",strokeWidth:"3"})]}),(0,s.jsx)(c.az,{className:"overlay-clickable",children:i&&(0,s.jsx)(c.az,{className:"cutout-area",position:"absolute",top:i.top,left:i.left,width:"".concat(i.width,"px"),height:"".concat(i.height,"px"),borderRadius:3})})]})};var eu=n(64444),eh=n(19635),ex=n(78784),ep=n(5933),em=n(86724),ef=n(14691),eg=n(26848),ej=n(23071),ev=n(39286);let eb={createFirstGamma:!1,addCard:!1,dragToReorderCards:!1,addMedia:!1,changeTheme:!1,editWithAI:!1,tryPresenterView:!1,exportPDF:!1},ey=()=>({createFirstGamma:{title:(0,s.jsx)(m.x6,{id:"cwH/bW",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}}),detail:(0,s.jsx)(m.x6,{id:"gPnQTx"}),learnMoreLink:ej.C.CREATE_NEW_GAMMA,webm:"https://static.gamma.app/videos/editor-checklist/v2/CreateNewGamma_c0a1ff03.webm",mp4:"https://static.gamma.app/videos/editor-checklist/v2/CreateNewGamma_838d509f.mp4"},addCard:{title:(0,s.jsx)(m.x6,{id:"B3xxao"}),detail:(0,s.jsx)(m.x6,{id:"QFRh35",components:{0:(0,s.jsx)(eg.u,{})}}),webm:"https://static.gamma.app/videos/editor-checklist/v2/AddCard_b581730c.webm",mp4:"https://static.gamma.app/videos/editor-checklist/v2/AddCard_bafff15e.mp4",maskSelector:'[data-guider-highlight="add-card-button"]'},dragToReorderCards:{title:(0,s.jsx)(m.x6,{id:"eCIfAy"}),detail:(0,s.jsx)(m.x6,{id:"r2DHdM"}),webm:"https://static.gamma.app/videos/editor-checklist/v2/DragToReorder_73bf1b69.webm",mp4:"https://static.gamma.app/videos/editor-checklist/v2/DragToReorder_a5a6c98c.mp4",maskSelector:'[data-guider-highlight="filmstrip-scroller"]',actionBefore:()=>{_.R.emit("openFilmStrip",{})}},addMedia:{title:(0,s.jsx)(m.x6,{id:"upnFWM"}),detail:(0,s.jsx)(m.x6,{id:"4IBZBD",components:{0:(0,s.jsx)(eg.u,{})}}),learnMoreLink:ej.C.ADD_BLOCKS,webm:"https://static.gamma.app/videos/editor-checklist/v2/AddMedia_a78ee09c.webm",mp4:"https://static.gamma.app/videos/editor-checklist/v2/AddMedia_85b8aee8.mp4",maskSelector:'[data-guider-highlight="insert-widget"]'},changeTheme:{title:(0,s.jsx)(m.x6,{id:"UOE+DR"}),detail:(0,s.jsx)(m.x6,{id:"MOba58"}),learnMoreLink:ej.C.CHANGE_THEME,webm:"https://static.gamma.app/videos/editor-checklist/v2/ChangeTheme_18381f26.webm",mp4:"https://static.gamma.app/videos/editor-checklist/v2/ChangeTheme_a7fd3334.mp4",maskSelector:'[data-guider-highlight="toolbar-theme-button"]'},editWithAI:{title:(0,s.jsx)(m.x6,{id:"EVnzPs"}),detail:(0,s.jsx)(m.x6,{id:"t5XFEE"}),learnMoreLink:ej.C.EDIT_WITH_AI,webm:"https://static.gamma.app/videos/editor-checklist/v2/EditWithAI_47eefcc5.webm",mp4:"https://static.gamma.app/videos/editor-checklist/v2/EditWithAI_1e1eeaa6.mp4",maskSelector:'[data-guider-highlight="edit-with-ai-button"]'},tryPresenterView:{title:(0,s.jsx)(m.x6,{id:"E3nYWH"}),detail:(0,s.jsx)(m.x6,{id:"c4vcd2",components:{0:(0,s.jsx)(eg.u,{})}}),learnMoreLink:ej.C.PRESENT_MODE,webm:"https://static.gamma.app/videos/editor-checklist/v2/TryPresenting_44202db8.webm",mp4:"https://static.gamma.app/videos/editor-checklist/v2/TryPresenting_af27f32c.mp4",maskSelector:'[data-guider-highlight="present-button-group"]'},exportPDF:{title:(0,s.jsx)(m.x6,{id:"eW0Hm2"}),detail:(0,s.jsx)(m.x6,{id:"GZeq1f"}),learnMoreLink:ej.C.EXPORT,webm:"https://static.gamma.app/videos/editor-checklist/v2/ShareAndExport_3b15ca89.webm",mp4:"https://static.gamma.app/videos/editor-checklist/v2/ShareAndExport_41008843.mp4",maskSelector:'[data-guider-highlight="share-button"]',skipCompleteStepOnMaskClick:!0}}),eC=ey(),ew=()=>{let[e]=(0,em.M)(ef.E.onboardingChecklistSteps,eb),t=Object.values(eC).length,n=Object.values(e).filter(Boolean).length;return{isChecklistComplete:n===t,progress:n/t*100,stepCount:n,totalSteps:t}},eE="onboardingChecklistWidgetActivator",ek=()=>{var e;let t=(0,I.GV)(ep.sX),n=(0,I.GV)((0,ex.A0)(t)),i=(null==n?void 0:n.status)==="running",{user:r,isUserLoading:o}=(0,er.ur)(),{progress:c,stepCount:u,totalSteps:h,isChecklistComplete:x}=ew(),p=(0,B.dU)("gray.800","gray.200"),f=(0,B.dU)("gray.400","gray.600"),g=null==r?void 0:null===(e=r.settings)||void 0===e?void 0:e.needsEditorOnboarding;return i||o||x?null:(0,s.jsx)(eu.W,{children:(0,s.jsx)(d.$,{onClick:()=>{_.R.emit("toggleOpen",{behavior:"toggle"})},width:"fit-content",px:4,minW:"150px",borderRadius:"full","data-id":eE,visibility:g||0===u?"hidden":"visible",pointerEvents:g||0===u?"none":"auto",children:(0,s.jsxs)(l.B,{spacing:1,w:"100%",children:[(0,s.jsxs)(l.B,{w:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,s.jsx)(q.D,{fontSize:"xs",color:p,fontWeight:"semibold",children:(0,s.jsx)(m.x6,{id:"ZDIydz"})}),(0,s.jsx)(a.E,{fontSize:"xxs",color:f,children:(0,s.jsx)(m.x6,{id:"sNvodR",values:{totalSteps:h,0:String(u)}})})]}),(0,s.jsx)(eh.k,{size:"xs",value:c,colorScheme:"green",borderRadius:"full"})]})})})};n(62770);let eS=[{heading:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.x6,{id:"WywDbS",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})," ",(0,s.jsx)("span",{role:"img","aria-label":"party popper",className:"emoji",children:"\uD83C\uDF89"})]}),description:(0,s.jsx)(m.x6,{id:"qp5/eb",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}}),cta:(0,s.jsx)(m.x6,{id:"1K069f"})},{heading:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.x6,{id:"SikK9S",values:{GAMMA_PROPER_NOUN:ev.On}})," ",(0,s.jsx)("span",{role:"img","aria-label":"card",className:"emoji",children:"\uD83C\uDCCF"})]}),description:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m.x6,{id:"OXpHoP"})}),selector:'[data-guider-highlight="card-body"]'},{heading:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.x6,{id:"ufgIDV"})," ",(0,s.jsx)("span",{role:"img","aria-label":"brick",className:"emoji",children:"\uD83E\uDDF1"})]}),description:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m.x6,{id:"YzLd99",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})}),shouldFocusEditor:!0,selector:".first-block-in-card"},{heading:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.x6,{id:"xL3A5l"})," ",(0,s.jsx)("span",{role:"img","aria-label":"racing flag",className:"emoji",children:"\uD83C\uDFC1"})]}),description:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m.x6,{id:"USbGN7",values:{GAMMA_PROPER_NOUN:ev.On}})})}],eI='[data-id="'.concat(eE,'"]'),eT=e=>{let{editor:t}=e,n=(0,ee.fW)(),{setSettings:i}=(0,er.ur)(),[r,o]=(0,y.useState)(0),l=(0,et.O2)("editor"),[a,d]=(0,y.useState)(!1),u=eS[r],{rectAttrs:h}=el({selector:u.selector}),{rectAttrs:x}=el({selector:eI}),p=u.selector&&h||x;(0,y.useEffect)(()=>{(0,es._1)(eI,12e4).then(()=>{l.scrollTo({top:0,behavior:"smooth"}).then(()=>{requestAnimationFrame(()=>{(0,Z.v)(en.VV.ONBOARDING_WELCOME_TOUR_STARTED),d(!0)})})}).catch(()=>{})},[]);let m=(0,y.useCallback)(()=>{(0,Z.v)(en.VV.ONBOARDING_WELCOME_TOUR_STEP_COMPLETED,{step:r+1}),o(r+1)},[r]);(0,y.useEffect)(()=>{u.shouldFocusEditor&&(null==t||t.commands.focusDelayed())},[r,t,u.shouldFocusEditor]);let f=(0,y.useCallback)(()=>{(0,Z.v)(en.VV.ONBOARDING_WELCOME_TOUR_STEP_COMPLETED,{step:r+1}),d(!1),null==i||i({remove:["needsEditorOnboarding"]}),_.R.emit("toggleOpen",{behavior:"open"})},[i,r]),g=(0,y.useCallback)(()=>{o(r-1)},[r]),j=(0,ei.rd)();return!a||(0,P.Xb)()||!p?null:(0,s.jsxs)(F.Z,{children:[(0,s.jsx)(Y.mL,{styles:{"[data-editor-toolbar] button":{pointerEvents:"none"}}}),(0,s.jsx)(X.L8,{isDark:j,children:(0,s.jsxs)(G.A,{isOpen:!0,lazyBehavior:"unmount",closeOnBlur:!1,isLazy:!0,gutter:8,preventOverflow:!0,boundary:"clippingParents",placement:u.selector&&h?"start-start":"top",modifiers:[{name:"detectOverflow",phase:"beforeWrite",requiresIfExists:["offset"],enabled:!0,fn:e=>{let{state:t}=e;if(!u.selector)return t.styles.popper={...t.styles.popper,left:n?"".concat(Q.uA):"-".concat(Q.uA)},t;let i=(0,$.A)(t,{boundary:"clippingParents"}),r=i.top>0||i.bottom>0||i.left>0||i.right>0,s=t.elements.popper.getBoundingClientRect();return u.selector&&(null==x?void 0:x.top)&&r&&(t.styles.popper={...t.styles.popper,right:n?"auto":"0px",top:"-".concat(8,"px"),left:n?"0px":"auto",bottom:"auto",transform:"translate3d(0px, ".concat(x.top-s.height,"px, 0px)"),insetInlineEnd:Q.uA}),t}}],children:[(0,s.jsx)(W.d,{children:(0,s.jsx)(c.az,{position:"absolute",pointerEvents:"none",top:"".concat(null==p?void 0:p.top,"px"),left:"".concat(null==p?void 0:p.left,"px"),width:"".concat(null==p?void 0:p.width,"px"),height:"".concat(null==p?void 0:p.height,"px")})}),(0,s.jsx)(F.Z,{children:(0,s.jsx)(eA,{step:u,onNextClick:m,onBackClick:g,onCompleteClick:f,stepIndex:r},r)})]})}),(0,s.jsx)(ec,{selector:u.selector,rectAttrs:h||null,onClickTargetElement:()=>{}})]})},eA=e=>{let{step:t,onNextClick:n,onBackClick:i,onCompleteClick:r,stepIndex:o}=e,u=(0,ee.fW)(),p=u?h.CeG:h.dmS,g=u?h.dmS:h.CeG,j=ea((0,ei.rd)()),v=(0,B.dU)("gray.500","gray.400"),b=(0,B.dU)("gray.300","gray.700");return(0,s.jsx)(U.h,{"data-id":"tour-popover-content",shadow:"2xl",w:"400px",border:"1px solid var(--chakra-colors-gray-200)",className:"tour-popover",...j,children:(0,s.jsx)(H.e,{children:(0,s.jsxs)(l.B,{p:2,pt:4,spacing:6,children:[o!==eS.length-1&&(0,s.jsx)(a.E,{fontSize:"sm",color:b,fontWeight:"bold",mt:-2,children:(0,s.jsx)(m.x6,{id:"RfkEBH",values:{0:o+1,1:eS.length-1}})}),(0,s.jsxs)(l.B,{spacing:2,children:[(0,s.jsx)(c.az,{display:"inline",alignItems:"center",children:(0,s.jsx)(q.D,{display:"inline",variant:"fancy",fontSize:"2xl",mb:2,textAlign:"start",lineHeight:"1",children:t.heading})}),(0,s.jsx)(a.E,{fontSize:"md",children:t.description}),t.helperText&&(0,s.jsx)(a.E,{fontSize:"sm",color:v,children:t.helperText})]}),0===o?(0,s.jsx)(K.o,{children:(0,s.jsx)(d.$,{w:"fit-content",variant:"solid",onClick:n,children:(0,s.jsx)(m.x6,{id:"1K069f"})})}):o===eS.length-1?(0,s.jsx)(K.o,{children:(0,s.jsx)(d.$,{onClick:r,w:"fit-content",variant:"solid",children:(0,s.jsx)(m.x6,{id:"O1h2Xs"})})}):(0,s.jsxs)(l.B,{w:"100%",alignItems:"center",justifyContent:"space-between",direction:"row",children:[(0,s.jsx)(J.K,{size:"md",variant:"plain",px:6,colorScheme:"blackAlpha",onClick:i,"aria-label":f.Ru._({id:"iH8pgl"}),icon:(0,s.jsx)(x.g,{icon:g})}),(0,s.jsx)(J.K,{px:6,size:"md",variant:"solid",onClick:n,"aria-label":f.Ru._({id:"hXzOVo"}),icon:(0,s.jsx)(x.g,{icon:p})})]})]})})})},eR=e=>{let{editor:t}=e,[n,i]=(0,y.useState)("off"),{hasInitialized:r}=(0,D.FY)(),o=r&&("tour"===n||"aiGenerate"===n)&&!O.$.IS_USER_TESTING_SESSION;return((0,y.useEffect)(()=>{if(!O.$.IS_USER_TESTING_SESSION)return V.on("triggerOnboarding",e=>{let{reason:t}=e;(0,P.Xb)()||i(t)})},[]),e_(),o)?(0,s.jsx)(eT,{editor:t}):null},e_=()=>{let e="true"===(0,L.sF)()[N.y];(0,z.o)(N.y),(0,y.useEffect)(()=>{e&&V.emit("triggerOnboarding",{reason:"tour"})},[e])};var eO=n(83402),eD=n(89102),ez=n(10264),eP=n(55276),eL=n(69011),eN=n.n(eL),eM=n(97331),eV=n.n(eM);class eF extends M.b{setup(){document.addEventListener("mousemove",this.throttled)}teardown(){document.removeEventListener("mousemove",this.throttled)}constructor(){super(),this.throttled=eV()(e=>{this.emit("move",e)},200,{leading:!0})}}let eG=eN()(()=>new eF),eW=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=eG(),[r,s]=(0,y.useState)(!1),o=(0,y.useRef)(null),l=(0,y.useRef)(e);return l.current=e,(0,y.useEffect)(()=>{if(t)return;let e=()=>{null!==o.current&&(clearTimeout(o.current),o.current=null)},r=()=>{e(),n&&(o.current=setTimeout(()=>{s(!1),o.current=null},n))};r();let a=i.on("move",e=>{s(l.current(e)),r()});return()=>{e(),a()}},[i,t,n]),r};var eB=n(68251),eU=n(95312);let eH=(0,y.memo)(e=>{let{forceShow:t=!1}=e,{isOpen:n,onToggle:i,onClose:r,onOpen:o}=(0,eP.j)(),l=(0,I.GV)(ep.VJ),a=eW((0,y.useCallback)(e=>e.clientX>window.innerWidth-150&&e.clientY>window.innerHeight-150,[]));return(0,y.useEffect)(()=>{t?o():r()},[t,o,r]),(0,s.jsx)(eB.x,{me:!l||n||a||t?"0px":"-100%",transitionProperty:"margin-right",transitionDuration:"ultra-slow",transitionTimingFunction:"ease-in-out",children:(0,s.jsxs)(G.A,{returnFocusOnClose:!1,isOpen:n,onClose:r,closeOnBlur:!0,closeOnEsc:!1,children:[(0,s.jsx)(eu.W,{children:(0,s.jsx)(J.K,{onClick:()=>{i()},"aria-label":"Help",isRound:!0,size:"md",icon:(0,s.jsx)(x.g,{icon:h.Lhe})})}),(0,s.jsx)(U.h,{...Q.kK,children:(0,s.jsx)(H.e,{children:(0,s.jsx)(eU.u,{onClose:r})})})]})})});eH.displayName="PresentModeHelpWidget";var eq=n(43087),eK=n(62911),eJ=n(99070),eY=n(6657),eX=n(68335),e$=n(14968),eZ=n(78354),eQ=n(12790),e0=n(57548),e1=n(9138);let e6={ifPanelHasRoomToOpen:function(e,t,n){return"left"===n?{base:t,xl:e}:{base:t,"2xl":e}}},e2=e=>{let{children:t,onClose:n,panelName:i}=e;return(0,y.useEffect)(()=>eY.WC.on("keydown",i,e=>"Escape"===e.key&&(n(),!0)),[i,n]),t},e5=e=>{var t;let{position:n,panelLifecycle:i,editor:r,canResize:l=!0}=e,a=(0,ee.fW)()?"left"===n?"right":"left":n,d=(0,y.useRef)(),[c,u]=(0,y.useState)(!1),h=(0,C.wA)(),x=(0,I.GV)((0,e1.DP)(n)),p=(0,I.GV)((0,e1.wM)(n)),m=(0,I.GV)((0,e1.I2)(n)),f=(0,I.GV)(ep.OG),g=(0,I.GV)((0,e1.lp)(n)),j=(0,I.GV)((0,e1.yG)(n)),v=null!==(t=null==j?void 0:j.canCollapse)&&void 0!==t&&t,b=(0,y.useCallback)(()=>{h((0,e1.Zv)({position:n}))},[h,n]),w=(0,y.useCallback)(()=>{h((0,e1.NE)({component:j}))},[j,h]),E=(0,y.useCallback)(e=>{h((0,e1.bz)({width:e,position:n})),i.emit("resize",{})},[h,i,n]),k=(0,I.GV)((0,e1.aL)(n))&&l,S={zIndex:e$.$.panel,position:e6.ifPanelHasRoomToOpen("relative","fixed",a),top:e6.ifPanelHasRoomToOpen(0,"var(--editor-padding-top)",a),bottom:0,[a]:0},T=(0,ei.rd)();m||c||(S.transitionProperty="width",S.transitionDuration="".concat(eX.o0,"ms")),(0,y.useEffect)(()=>{let e=e=>{"width"===e.propertyName&&i.emit("resize",{})};return d.current.addEventListener("transitionend",e),()=>{d.current&&d.current.removeEventListener("transitionend",e)}},[i,d]);let A=(0,eZ.h5)(e6.ifPanelHasRoomToOpen(!0,!1,a))||!1;return(0,y.useEffect)(()=>{x&&!A&&v&&b()},[A,x,b,v]),(0,y.useEffect)(()=>{f&&b()},[f,b]),(0,s.jsxs)(o.s,{ref:d,...S,style:{width:x||v?g:0},boxShadow:A?"none":"2xl",borderColor:x?T?"gray.800":"blackAlpha.100":void 0,borderLeftWidth:x&&"right"===a?"1px":0,borderRightWidth:x&&"left"===a?"1px":0,maxW:"100%","data-print-hidden":!0,children:[x&&"right"===n&&k&&(0,s.jsx)(e0.$P,{isDragging:c,setIsDragging:u,position:a,width:g,minWidth:null==j?void 0:j.minWidth,setWidth:E,panelRef:d,onClose:b,initialWidth:eX.JO}),(0,s.jsx)(eQ.Y.Provider,{value:i,children:j&&(x||v)&&(0,s.jsx)(e2,{onClose:b,panelName:j.panelName,children:(0,s.jsx)(j,{isDragging:c,isOpen:x,closePanel:b,openPanel:w,panelRef:d,lifecycle:i,hasRoomToOpen:A,editor:r,...p})})}),x&&"left"===n&&k&&(0,s.jsx)(e0.$P,{isDragging:c,setIsDragging:u,position:a,width:g,minWidth:null==j?void 0:j.minWidth,setWidth:E,panelRef:d,onClose:b,initialWidth:eX.qm})]})},e3=(0,y.memo)(e=>(0,s.jsx)(e5,{position:"right",...e}));e3.displayName="RightPanelContainer";let e4=(0,y.memo)(e=>(0,s.jsx)(e5,{position:"left",...e}));e4.displayName="LeftPanelContainer";var e8=n(62313),e7=n(74727),e9=n(31242),te=n(17303);let tt=e=>{let{docId:t}=e,n=(0,I.jL)(),i=(0,B.dU)("gray.300","gray.800"),r=(0,B.dU)("white","gray.900"),l=(0,B.dU)("transparent","transparent"),a=(0,B.dU)("gray.500","gray.400"),u=(0,B.dU)("trueblue.50","trueblue.400"),p=(0,B.dU)("trueblue.500","white"),g=(0,B.dU)("gray.600","gray.100"),j=(0,B.dU)("gray.100","gray.700"),v=(0,B.dU)("trueblue.50","trueblue.400"),b=(0,B.dU)("trueblue.500","white"),{replace:C}=(0,e9.useRouter)(),w=(0,I.GV)(te.og),E=(0,y.useCallback)(()=>{t&&C((0,L.pF)({docId:t}),void 0,{shallow:!0})},[t,C]),k=(0,y.useCallback)(e=>{n((0,te.ey)({previewSize:e}))},[n]);return(0,y.useEffect)(()=>eY.WC.on("keydown","SITE_PREVIEW_PANE",e=>("Escape"===e.key&&E(),!0)),[E]),(0,s.jsx)(o.s,{bg:"white",align:"flex-start",direction:"column",width:"100%","data-sites-preview-pane":!0,children:(0,s.jsxs)(e8.z,{w:"100%",spacing:0,p:2,py:2,bg:r,borderColor:i,justify:"flex-start",borderBottomWidth:"1px",children:[(0,s.jsx)(e8.z,{spacing:2,flexBasis:"30%",children:!(0,P.Xb)()&&(0,s.jsx)(d.$,{size:"sm",variant:"plain",onClick:E,children:(0,s.jsx)(e8.z,{children:(0,s.jsx)(c.az,{children:(0,s.jsx)(x.g,{icon:h.CeG})})})})}),(0,s.jsxs)(e7.e,{size:"sm",ml:24,flexBasis:"40%",justifyContent:"center",children:[(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"58m6Qy"}),children:(0,s.jsx)(J.K,{"aria-label":f.Ru._({id:"58m6Qy"}),variant:"ghost",size:"sm",icon:(0,s.jsx)(x.g,{icon:h.GrJ}),bg:"mobile"===w?u:l,_hover:{color:"mobile"===w?b:g,bg:"mobile"===w?v:j},color:"mobile"===w?p:a,onClick:()=>{k("mobile")}})}),!(0,P.Xb)()&&(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"fpcKeD"}),children:(0,s.jsx)(J.K,{"aria-label":f.Ru._({id:"fpcKeD"}),variant:"ghost",size:"sm",icon:(0,s.jsx)(x.g,{icon:h.w7B}),bg:"tablet"===w?u:l,_hover:{color:"tablet"===w?b:g,bg:"tablet"===w?v:j},color:"tablet"===w?p:a,onClick:()=>{k("tablet")}})}),!(0,P.Xb)()&&(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"K3p0ar"}),children:(0,s.jsx)(J.K,{"aria-label":f.Ru._({id:"K3p0ar"}),variant:"ghost",size:"sm",icon:(0,s.jsx)(x.g,{icon:h.ArK}),bg:"desktop"===w?u:l,_hover:{color:"desktop"===w?b:g,bg:"desktop"===w?v:j},color:"desktop"===w?p:a,onClick:()=>{k("desktop")}})})]}),(0,s.jsx)(e8.z,{flexBasis:"30%",justifyContent:"flex-end"})]})})};var tn=n(89059),ti=n(12784),tr=n.n(ti),ts=n(35147),to=n(13487);let tl=(e,t)=>{let n=(0,I.jL)(),i=(0,I.CU)(),r=!!(0,I.GV)(ts.df),s=(0,I.GV)(ep.Ik),o=(0,I.GV)(ts.le),l=t&&r&&s;(0,y.useEffect)(()=>{var t,r;if(!l||!e||e.gammaDocId!==o)return;let s=(0,ep.Jo)(i.getState()),a=null==s?void 0:null===(r=s.publishedSnapshot)||void 0===r?void 0:null===(t=r.content)||void 0===t?void 0:t.default;if(!a)return;let d=!(0,to.wX)(e,a);console.debug("[useDirtyStateTracking] INITIALIZING DIRTY STATE ".concat(o," via compareDocJSON"),{isDirty:d}),d&&n((0,ts.VP)({pageId:e.gammaDocId,lastUpdatedAt:new Date().toISOString()}))},[n,i,e,l,o]),(0,y.useEffect)(()=>{if(!l||!e)return;let t=tr()(()=>{n((0,ts.VP)({pageId:e.gammaDocId,lastUpdatedAt:new Date().toISOString()}))},500,{leading:!0,trailing:!0,maxWait:1e3});return e.on("update",t),()=>{e.off("update",t)}},[l,n,e])};var ta=n(68962),td=n(33842),tc=n(37056),tu=n(86186),th=n(56922),tx=n(28895),tp=n(99100),tm=n(13236),tf=n(87835),tg=n.n(tf),tj=n(77646),tv=n(14e3);let tb=(e,t,n,i,r)=>{let s=i-n,o=Math.max(s-Math.max(e-n,0)-Math.max(i-t,0),0),l=o/s,a=l>0&&o==t-e;return{overlap:l,viewing:r&&(a||l>.5||o>400),only:a}},ty=(e,t)=>{let n=(0,et.O2)("editor"),[i,r]=(0,y.useState)(null),s=(0,y.useRef)({presentingCardId:null,scrollTop:0,containerHeight:0,expandedCards:{}}),o=(0,I.GV)(ep.wC),l=(0,I.GV)(ep.$i);(0,y.useEffect)(()=>{s.current.presentingCardId=null!=l?l:null},[l]);let a=(0,I.GV)(ep.vy);(0,y.useEffect)(()=>{s.current.expandedCards=a},[a]),(0,y.useEffect)(()=>{let e=document.querySelector(n.scrollSelector);if(!e)return;r(e);let{height:t}=e.getBoundingClientRect();s.current.scrollTop=e.scrollTop,s.current.containerHeight=t},[n.scrollSelector,s]),(0,y.useEffect)(()=>{let e=tr()(()=>{i&&(s.current.scrollTop=i.scrollTop)},250,{trailing:!0,maxWait:500});return window.addEventListener("scroll",e,!0),()=>window.removeEventListener("scroll",e,!0)},[i]),(0,y.useEffect)(()=>{let e=tr()(()=>{i&&(s.current.containerHeight=i.getBoundingClientRect().height)},250,{trailing:!0,maxWait:500});return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[i]),(0,y.useEffect)(()=>{if(!e)return;if(o===tv.w.SLIDE_VIEW){let e=setInterval(()=>{t.emit("cardViewed",{cardId:s.current.presentingCardId,interval:1e3})},1e3);return()=>clearInterval(e)}let i=setInterval(()=>{if(document.hidden)return;let{scrollTop:i,containerHeight:r,expandedCards:o}=s.current,l=i+r;tg()((0,tm.xe)(e.state.doc,tj.jg),e=>e.node.attrs.id).map(t=>{let r;let s=t.node.attrs.id,a=o[s];if(!a)return null;try{r=e.view.nodeDOM(t.pos)}catch(e){return null}if(r instanceof HTMLElement){let e=(0,es.sR)(r,n.scrollSelector),{offsetHeight:t}=r;return{id:s,...tb(i,l,e,t+e,a)}}return null}).filter(e=>!!(null==e?void 0:e.viewing)).forEach(e=>{t.emit("cardViewed",{cardId:e.id,interval:1e3})})},1e3);return()=>clearInterval(i)},[o,e,s,t,n.scrollSelector])},tC=e=>{let{editor:t,backoffFactor:n=1}=e,i=(0,en.st)(),[r,s]=(0,y.useState)(15e3);ty(t,tp.t);let o=(0,y.useCallback)(()=>{tp.t.flush(),s(Math.min(r*n,12e4))},[n,r]);return(0,y.useEffect)(()=>{if(!i)return;tp.t.initialize(),tp.t.on("flush",e=>{let{viewed:t}=e;for(let[e,n]of Object.entries(t))i.trackDocEvent(en.VV.CARD_VIEWED,{card_id:e,duration:n})});let e=setInterval(()=>o(),r);return()=>{clearInterval(e),tp.t.destroy()}},[i,r,o]),null};var tw=n(85303),tE=n(94445),tk=n(36661),tS=n(94259),tI=n(2600),tT=n(18201),tA=n(3040),tR=n(15355),t_=n(86984),tO=n(65184),tD=n(31504),tz=n(46343),tP=n.n(tz),tL=n(15072),tN=n(12554);let tM=e=>{let t=(0,I.GV)(tE.Ix),{title:n}=(0,tL.d)({cardId:t||void 0,editor:e}),i=(0,I.GV)(ep.uF,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return tP()(...t)}),r=i.indexOf(t||""),s=(0,y.useCallback)(t=>()=>{var n,s;if(!e)return;let o=null!==(s=i[r+(t?1:-1)])&&void 0!==s?s:i[r],l=null===(n=(0,tj.W0)(e,o))||void 0===n?void 0:n.pos;if(!l)return;(0,tN.I5)(e,l)||e.commands.selectInsideNodeAtPos(l);let a=e.view.nodeDOM(l);a instanceof HTMLElement&&(0,et.H1)("editor").scrollElementIntoView({element:a,delay:0})},[r,e,i]);return{cardId:t,title:n||"Untitled",canGoForward:r<i.length-1,canGoBack:r>0,goToNextCard:s(!0),goToPreviousCard:s(!1)}};var tV=n(72860),tF=n(32262);let tG=e=>{let{editor:t,isReadonly:n}=e,{selection:i}=(0,tV.y)(t),r=(0,I.jL)();(0,y.useEffect)(()=>{if(!t)return;let e=(0,tF.hT)(t.state.doc,t.state.selection.from);if(e&&e.node&&!(0,tN.eh)(e.node)){if(n){r((0,tE.qq)());return}(0,tN.ni)(t,e.pos)}},[r,t,n,i])};var tW=n(63587),tB=n(65449),tU=n(87064),tH=n(71197),tq=n(19717),tK=n(55090),tJ=n(26768),tY=n(48984),tX=n(39848),t$=n(92667);let tZ=e=>{let{editor:t,cardId:n}=e,i=(0,I.GV)(ep.sK),r=(0,I.GV)(ep.nD),s=(0,D.u)("aiCardNotes"),o=(0,y.useCallback)(e=>{if(!t||!n)return;let i=(0,tj.W0)(t,n);if(!i)return;let r=t.state.doc.resolve(i.pos),s=(0,tN.PD)(r);if(!s)return;let o=(0,tX.os)(e,t.schema),{tr:l}=t.state,a=s.pos+1,d=a+s.node.content.size;l.delete(a,d).insert(a,o.content),t.view.dispatch(l)},[t,n]),l=(0,t$.wb)(o,200),[a,d]=(0,y.useState)(!1),{generate:c}=(0,tB.pt)("GenerateSpeakerNotes",{onStart(){d(!0),l("")},onContent(e){l(e)},onComplete(e){l(e),d(!1)},timeout:3e4}),u=(0,I.CU)(),h=(0,y.useCallback)(async()=>{if(!i||!t||!n)return;let e=(0,tj.W0)(t,n);if(!e)return;let r=(0,tW.K)(t,e.node),s=(0,tU.$F)(),o=(0,tY.qe)(t,e.pos),l=(0,tJ.u)(u);await c({variables:{cardHtml:r,previous:o,outline:l},workspaceId:i.id}).promise,(0,tq.w)("generateCardNotes",i,s)},[c,i,t,n,u]);return{onClickGenerate:(0,tH.tO)(h,"generateCardNotes",tK.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD),isGenerating:a,canGenerateCardNotes:s&&r}},tQ=e=>{let{closePanel:t}=e,{editor:n}=(0,t5.mi)(),i=(0,I.GV)(ep.nD),{cardId:r,canGoBack:l,canGoForward:c,title:u,goToNextCard:p,goToPreviousCard:g}=tM(n),{isInOfflineMode:j}=(0,E.u)();tG({editor:n,isReadonly:!i});let v=(0,ei.rd)(),b=v?"white":"gray.900",y=v?"gray.300":"gray.500",{onClickGenerate:C,isGenerating:w,canGenerateCardNotes:k}=tZ({editor:n,cardId:r});return(0,s.jsx)(X.L8,{isDark:v,children:(0,s.jsx)(t_.Z,{bgColor:"neutral.toolbar.background","data-panelid":"card-notes-panel",color:b,children:(0,s.jsxs)(o.s,{direction:"column",h:"100%",flex:1,children:[(0,s.jsxs)(o.s,{px:6,py:4,children:[(0,s.jsx)(o.s,{flex:1,children:(0,s.jsxs)(e8.z,{spacing:4,children:[(0,s.jsx)(tO.N,{children:(0,s.jsx)(m.x6,{id:"1DBGsz"})}),i&&!j&&(0,s.jsx)(X.qT,{label:(0,s.jsx)(m.x6,{id:"qcPeK2"})})]})}),(0,s.jsx)(tS.J,{"data-card-notes-close-button":!0,onClick:t})]}),(0,s.jsxs)(tI.T,{px:6,pb:4,alignItems:"stretch",flex:1,overflowY:"hidden",spacing:4,"data-card-notes-bubble-menu-target":!0,children:[(0,s.jsxs)(e8.z,{align:"end",children:[(0,s.jsx)(a.E,{fontWeight:"600",color:y,wordBreak:"break-word",noOfLines:2,"data-testid":"card-notes-card-title",py:1,children:u}),(0,s.jsx)(tT.h,{}),k&&(0,s.jsx)(X.Tz,{label:(0,s.jsxs)(e8.z,{spacing:0,children:[(0,s.jsx)(m.x6,{id:"GyxUS3"}),(0,s.jsx)(tR.G,{type:"generateCardNotes"})]}),placement:"top",children:(0,s.jsx)(d.$,{variant:"ghost",onClick:C,isLoading:w,isDisabled:j,size:"sm","aria-label":f.Ru._({id:"ziAjHi"}),rightIcon:(0,s.jsx)(x.g,{icon:tA.p7g}),flexShrink:0,children:(0,s.jsx)(m.x6,{id:"ziAjHi"})})})]}),(0,s.jsx)(tD.z,{isEditable:i,isDark:v}),i&&(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(X.Tz,{label:l?(0,s.jsx)(m.x6,{id:"cbqngJ"}):(0,s.jsx)(m.x6,{id:"4OtlnH"}),children:(0,s.jsx)(o.s,{flex:1,children:(0,s.jsx)(J.K,{"aria-label":l?f.Ru._({id:"cbqngJ"}):f.Ru._({id:"4OtlnH"}),icon:(0,s.jsx)(x.g,{icon:h.CeG}),onClick:g,isDisabled:!l,flex:1})})}),(0,s.jsx)(X.Tz,{label:c?(0,s.jsx)(m.x6,{id:"EyUKqu"}):(0,s.jsx)(m.x6,{id:"ggpGEd"}),children:(0,s.jsx)(o.s,{flex:1,children:(0,s.jsx)(J.K,{"aria-label":c?f.Ru._({id:"EyUKqu"}):f.Ru._({id:"ggpGEd"}),icon:(0,s.jsx)(x.g,{icon:h.dmS}),onClick:p,isDisabled:!c,flex:1})})})]})]})]})})})};tQ.panelPosition="right",tQ.panelName="card-notes";let t0=()=>{let{togglePanel:e,isPanelOpen:t}=(0,eJ.ww)(tQ),{editor:n}=(0,tk.m)(),i=(0,I.jL)(),r=(0,I.GV)(ep.wC)===tv.w.SLIDE_VIEW;(0,y.useEffect)(()=>{t&&r&&e()},[t,e,r]),(0,y.useEffect)(()=>{!t&&n&&(i((0,tE.Yf)({isOpen:!1})),n.view.dispatch(n.state.tr))},[i,n,t,e]),(0,y.useEffect)(()=>{if(n)return tw.R.on("toggle",r=>{let{config:s,clickedCardId:o,activeNotesCardId:l}=r;t&&o!==l||(e(s),i((0,tE.Yf)({isOpen:!t})),n.view.dispatch(n.state.tr))})},[i,n,t,e])},t1="drag-in-progress",t6=()=>{(0,y.useEffect)(()=>{let e=()=>{document.body.classList.add(t1)},t=()=>{document.body.classList.remove(t1)};return document.body.addEventListener("dragstart",e,!0),document.body.addEventListener("dragend",t,!0),document.body.addEventListener("drop",t,!0),document.body.addEventListener("mouseup",t,!0),()=>{document.body.removeEventListener("dragstart",e,!0),document.body.removeEventListener("dragend",t,!0),document.body.removeEventListener("drop",t,!0),document.body.removeEventListener("mouseup",t,!0)}},[])};var t2=n(42434),t5=n(60219),t3=n(43342),t4=n(29719),t8=n(82257),t7=n(57267),t9=n(52743),ne=n(94052),nt=n(24935),nn=n(57322),ni=n(30503),nr=n(43421),ns=n(91151),no=n(33718),nl=n(65695),na=n(34323),nd=n(84003),nc=n(22071),nu=n(63751);let nh=()=>{let e=(0,eZ.h5)({lg:100,xl:125,"2xl":150})||100,t=(0,I.GV)(no.jF),n=null!==t?t:e;return{previewWidth:n,width:n+40,fontSize:n/nu.s5}};var nx=n(2696),np=n(27042),nm=n(51039);let nf=()=>{let e=(0,I.GV)(np.iG),t=(0,D.u)("filmstrip"),n=(0,I.GV)(nm.wt),i=(0,nx.UT)("comment"),r=(0,I.GV)(ep.wC),s=(0,I.GV)((0,e1.DP)("left")),o=(0,I.GV)(te.C),l=n===t2.i.COLLABORATIVE||e;return t&&l&&(i||e)&&r===tv.w.DOC_VIEW&&!(0,P.Xb)()&&!s&&!o},ng=()=>{let e=(0,ee.fW)(),t=(0,eJ.t3)(),n=(0,eJ.Wm)(),i=(0,eZ.h5)({base:!1,lg:!0,"3xl":t+n>0}),r=(0,I.GV)(ep.cS),s=(0,I.GV)(no.lh),o=nf(),l=(0,nc.Tq)(),a=(0,ns.U)(),d=s&&o&&i,c=(0,nl.R)(),u=(0,nr.A)({base:"0px",[na.y3]:nd.iq})||"0px",{width:h}=nh();return(0,y.useMemo)(()=>{let i=d?"".concat(h,"px"):!a&&l.src&&"bottom-left"===l.position?"".concat(l.width+l.paddingX/2,"px"):"0px",s=r?u:c?"60px":"0px";return{"--doc-padding-left":e?s:i,"--doc-padding-right":e?i:s,"--present-padding-left":"".concat(t,"px"),"--present-padding-right":"".concat(n,"px"),"--comment-slide-margin":u}},[h,t,r,n,c,u,a,l,d,e])};var nj=n(78273);let nv=e=>"tablet"===e?"768px":"mobile"===e?(0,P.Xb)()?"100vw":"375px":"100vw",nb=e=>{let{loading:t,...n}=e,{editor:i,docId:r,previewSize:a}=n;return(0,s.jsxs)(t4.Tw,{children:[(0,s.jsx)("style",{id:"global-styles",dangerouslySetInnerHTML:{__html:nj.S.toString()}}),(0,s.jsx)(t8.Um,{children:(0,s.jsx)(o.s,{pos:"relative",justifyContent:"center",bg:"#C5C5C5",flex:1,children:!t&&i&&r?(0,s.jsx)(ny,{...n,editor:i,docId:r}):(0,s.jsx)(c.az,{flexDirection:"column",w:nv(a),h:"var(--100vh)",bg:"gray.100","data-testid":"preview-editor-loading",inset:0,children:(0,s.jsx)(K.o,{h:"100%",children:(0,s.jsx)(l.B,{align:"center",children:(0,s.jsx)(t3.y,{})})})})})})]})},ny=e=>{let{docId:t,editor:n,previewSize:i,onCreate:r}=e,l=(0,y.useMemo)(()=>(0,t7.C)().concat(t9.Q),[]),a=(0,y.useMemo)(()=>n.getJSON(),[n]),d="mobile"===i?"mobile":"desktop",h=(0,nt.h)({async onCreate(e){let{editor:t}=e;console.debug("[SimpleEditor][onCreate] TipTap editor is now ready"),null==r||r({editor:t})},content:a,extensions:l,editable:!1});h.shouldUsePublishedVersion=!0;let{editorAnimationsClass:x,editorAnimationsCSSVars:p}=(0,tc.O)({editor:h,instanceId:d,scrollingParentSelector:".".concat(t2.v)}),m=(0,I.GV)(ts.Gd),f=(0,I.GV)(ep.SJ),g=(0,ni.pg)(m),j=g?th.kb:0,v=nv(i),b=ng();return(0,s.jsxs)(c.az,{className:(0,u.cx)("preview-editor-root",x),style:p,w:v,h:"100%",css:{...b,"--editor-width":v,"--doc-padding-top":"".concat(j,"px"),"--editor-padding-top":"".concat(50,"px")},position:"relative",shadow:"xl",children:[m&&g&&(0,s.jsx)(o.s,{pos:"absolute",top:0,left:0,w:"100%",zIndex:"10",children:(0,s.jsx)(ne._,{theme:f,editable:!1,content:m.navContent},"".concat(t,"__preview-editor-nav__").concat(d,"}"))}),(0,s.jsx)(nn.N,{editor:h},"".concat(t,"__preview-editor__").concat(d,"}"))]})};var nC=n(50877);let nw=()=>{let e=(0,I.GV)(ts.Gd),t=(0,I.GV)(ep.SJ),n=(0,I.CU)(),[i]=(0,nC.vlJ)(),r=(0,y.useCallback)(async e=>{var t;let{editor:r}=e,s=null===(t=(0,ts.Gd)(n.getState()))||void 0===t?void 0:t.id;s&&await i({variables:{input:{siteId:s,navContent:r.state.doc.toJSON()}}})},[i,n]),l=(0,t$.lW)(r,500);return e?(0,s.jsx)(o.s,{pos:"absolute",top:0,left:0,w:"100%",zIndex:e$.$.siteNav,children:(0,s.jsx)(ne._,{theme:t,onUpdate:l,content:e.navContent,editable:!0,scrollingParentSelector:".".concat(t2.v)})}):null};var nE=n(5665),nk=n(32202),nS=n(14608),nI=n(9746),nT=n(34363),nA=n(65446),nR=n(18658),n_=n(70323),nO=n(90290),nD=n(69648),nz=n(90754),nP=n(31223),nL=n(55640),nN=n(86074);let nM={title:(0,s.jsx)(m.x6,{id:"DD5mqk"}),description:(0,s.jsx)(m.x6,{id:"8BmWcz"}),status:"error",position:"top",isClosable:!0},nV=e=>{let{doc:t,site:n,path:i}=e,r=(0,nk.d)(),o=(0,I.jL)(),l=(0,I.GV)(ts.aK),u=(0,nN.rB)(),[p]=(0,nL.b0Z)(),[f]=(0,nL.w$N)(),[g]=(0,nL._Su)(),j=(0,I.GV)(ts.le),v=null==t?void 0:t.id,b=(0,ta.jY)({site:n,path:(0,ta.wK)(i)}),C=null==n?void 0:n.id,w=(0,y.useCallback)(async()=>{if(v){if(u){r(nM);return}(0,ts.wb)(o)(!0),await (0,ta.fb)(v),await f({variables:{id:v},refetchQueries:["GetDoc","GetSite"]}).then(()=>{r({render:function(){return(0,s.jsx)(c.az,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,s.jsxs)(e8.z,{spacing:4,children:[(0,s.jsx)(c.az,{children:(0,s.jsx)(x.g,{icon:h.QRE})}),(0,s.jsx)(a.E,{fontWeight:"semibold",children:(0,s.jsx)(m.x6,{id:"V6Byuz"})}),b&&(0,s.jsx)(d.$,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:b,rightIcon:(0,s.jsx)(x.g,{icon:h.Ju_}),children:(0,s.jsx)(m.x6,{id:"Zel0o2"})}),(0,s.jsx)(tS.J,{onClick:()=>r.closeAll()})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(e=>{r({title:(0,s.jsx)(m.x6,{id:"DD5mqk"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)}).finally(()=>{(0,ts.wb)(o)(!1)})}},[o,v,u,f,r,b]);return{publishSite:(0,y.useCallback)(async()=>{if(C){if(u){r(nM);return}(0,ts.wb)(o)(!0),j&&await (0,ta.fb)(j),await p({variables:{id:C},update:(e,t)=>{let{data:n}=t,i=null==n?void 0:n.publishSite;i&&i.routes.forEach(t=>{e.updateQuery({query:nL.iVk,variables:{id:t.docId}},e=>{var n,i,r;return(e||console.log("%c Publish doc _data is undefined or null","color: red; font-size: 16px"),null==e?void 0:e.doc)?{doc:{...e.doc,publishedTime:null===(n=t.doc)||void 0===n?void 0:n.publishedTime,publishedSnapshotId:null===(i=t.doc)||void 0===i?void 0:i.publishedSnapshotId,currentSnapshotId:null===(r=t.doc)||void 0===r?void 0:r.currentSnapshotId}}:e})})}}).then(()=>{r({render:function(){return(0,s.jsx)(c.az,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,s.jsxs)(e8.z,{spacing:4,children:[(0,s.jsx)(c.az,{children:(0,s.jsx)(x.g,{icon:h.QRE})}),(0,s.jsx)(a.E,{fontWeight:"semibold",children:(0,s.jsx)(m.x6,{id:"V6Byuz"})}),b&&(0,s.jsx)(d.$,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:b,rightIcon:(0,s.jsx)(x.g,{icon:h.Ju_}),children:(0,s.jsx)(m.x6,{id:"Zel0o2"})}),(0,s.jsx)(tS.J,{onClick:()=>r.closeAll()})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(e=>{r({title:(0,s.jsx)(m.x6,{id:"DD5mqk"}),description:(0,s.jsx)(m.x6,{id:"R4PZ4k"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)}).finally(()=>{(0,ts.wb)(o)(!1)})}},[C,u,o,j,p,r,b]),publishDoc:w,isPublishing:l}};var nF=n(14979);let nG=e=>{var t;let{site:n}=e,i=null==n?void 0:null===(t=n.currentDeployment)||void 0===t?void 0:t.deploymentTime,r=(0,y.useMemo)(()=>({fromNow:(0,nF.Gx)(i),calendar:(0,nF.Yq)(i,"PPpp")}),[i]);return(0,s.jsx)(m.x6,{id:"ay/UB+",values:{0:r.fromNow},components:{0:(0,s.jsx)(X.Tz,{label:r.calendar,placement:"top",shouldWrapChildren:!0}),1:(0,s.jsx)(a.E,{as:"span",cursor:"pointer",style:{textDecoration:"underline"}})}})},nW=e=>{let t=(0,I.GV)(ts.Gd),n=(0,ta.m8)(t),i=!(0,ta.dv)(t),r=(0,I.GV)(ts.Tx),o=(0,I.GV)(ts.vP),{icon:l,text:a,color:d}=(0,y.useCallback)(()=>e?{icon:(0,s.jsx)(x.g,{icon:h.z1G,height:13,width:13}),text:(0,s.jsx)(m.x6,{id:"mkk40+"}),color:"gray.500"}:i?{icon:(0,s.jsx)(x.g,{icon:h.DW4,height:13,width:13}),text:(0,s.jsx)(m.x6,{id:"r5OY1d"}),color:"gray.500"}:n?r>0||o?{icon:(0,s.jsx)(x.g,{icon:h.ijf,height:13,width:13}),text:(0,s.jsx)(m.x6,{id:"eVV2pl"}),color:"text.warning"}:{icon:(0,s.jsx)(x.g,{icon:h.vBH,height:13,width:13}),text:(0,s.jsx)(m.x6,{id:"Rgbxkx"}),color:"text.success"}:{icon:(0,s.jsx)(x.g,{icon:h.Bwz,height:13,width:13}),text:(0,s.jsx)(m.x6,{id:"tpB6bH"}),color:"gray.700"},[e,i,n,r,o])(),c=e?null:i?(0,s.jsx)(m.x6,{id:"u8Rqhk"}):!1===n?(0,s.jsx)(m.x6,{id:"Ys0XoA"}):r>0||o?(0,s.jsx)(m.x6,{id:"Ys0XoA"}):null,u=!1===i&&!e;return{statusText:a,statusIcon:l,statusColor:d,detailText:c,needsPublish:!n||o||r>0,lastPublishedTime:t?(0,s.jsx)(nG,{site:t}):null,publishEnabled:u}},nB=e=>{let{context:t,openSiteSettings:n}=e,i=(0,I.GV)(ts.Gd),r=(0,nN.Gx)(),{publishSite:o,isPublishing:c}=nV({site:i}),{statusText:u,detailText:p,needsPublish:f,publishEnabled:g}=nW(c),j=(0,B.dU)(!1,!0);return("pages"!==t||f||c)&&r&&i&&(0,ta.dv)(i)?(0,s.jsx)(nP.m,{px:0,children:(0,s.jsxs)(l.B,{w:"100%",bg:j?"gray.800":"gray.50",borderRadius:"md",p:4,align:"pages"===t?"stretch":"center",direction:"pages"===t?"column":"row",spacing:"pages"===t?3:1,children:[(0,s.jsxs)(tI.T,{spacing:0,color:j?"gray.200":void 0,textAlign:"pages"===t?"center":"left",align:"pages"===t?"center":"start",children:[(0,s.jsx)(a.E,{fontWeight:"500",fontSize:"sm",children:u}),p&&(0,s.jsx)(a.E,{fontSize:"xs",textColor:"gray.500",css:{textWrap:"balance"},children:p})]}),"pages"!==t&&(0,s.jsx)(tT.h,{}),(0,s.jsx)(d.$,{flexShrink:"0",size:"sm",variant:"solid",leftIcon:(0,s.jsx)(x.g,{icon:h.MNJ}),isDisabled:!g,onClick:o,isLoading:c,children:(0,s.jsx)(m.x6,{id:"1EeNDU"})}),"pages"===t&&(0,s.jsx)(d.$,{textAlign:"left",color:j?"trueblue.200":"trueblue.600",variant:"link",size:"sm",onClick:n,flex:1,children:(0,s.jsx)(m.x6,{id:"WtsmDd"})})]})}):null};var nU=n(55575),nH=n(13251),nq=n(88808),nK=n(20671),nJ=n(49614),nY=n(32849),nX=n(18588),n$=n(59742),nZ=n(97482),nQ=n(82680);let n0=e=>{let{onClose:t,domainName:n,onDelete:i,isDeleting:r}=e;return(0,s.jsxs)(nX.aF,{isOpen:!0,onClose:t,trapFocus:!1,size:"xl",isCentered:!0,closeOnOverlayClick:!1,children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nZ.$,{children:[(0,s.jsx)(nT.r,{children:(0,s.jsx)(l.B,{spacing:0,children:(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"T3exbL",values:{domainName:n}})})})}),(0,s.jsx)(nR.c,{children:(0,s.jsx)(l.B,{spacing:4,children:(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"DkFGZj"})})})}),(0,s.jsx)(nQ.j,{children:(0,s.jsxs)(e7.e,{children:[(0,s.jsx)(d.$,{isDisabled:r,variant:"ghost",colorScheme:"gray",onClick:t,children:(0,s.jsx)(m.x6,{id:"dEgA5A"})}),(0,s.jsx)(d.$,{variant:"hazardous",isLoading:r,onClick:i,loadingText:f.Ru._({id:"EF2EU9"}),children:(0,s.jsx)(m.x6,{id:"cnGeoo"})})]})})]})]})};var n1=n(27670),n6=n(11395),n2=n(65513),n5=n(3706),n3=n(85146),n4=n(6256);let n8=e=>{let{code:t,data:n}=e;switch(t){case nC.sYx.AddARecord:return(0,s.jsx)(m.x6,{id:"ZIfa5n",values:{0:n.ip},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)(n4.C,{})}});case nC.sYx.AddCnameRecordSubdomain:return(0,s.jsx)(m.x6,{id:"edcjuc",values:{0:n.subdomain,1:n.cnameDomain},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)(n4.C,{}),2:(0,s.jsx)(n4.C,{})}});case nC.sYx.EditCnameRecordSubdomain:return(0,s.jsx)(m.x6,{id:"ngCUo8",values:{0:n.subdomain,1:n.cnameDomain},components:{0:(0,s.jsx)(n4.C,{}),1:(0,s.jsx)("strong",{}),2:(0,s.jsx)(n4.C,{})}});case nC.sYx.RemoveARecord:return(0,s.jsx)(m.x6,{id:"GLzRh5",values:{0:n.ip},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)(n4.C,{})}});case nC.sYx.RemoveAaaaRecord:return(0,s.jsx)(m.x6,{id:"g1KLfp",values:{0:n.ip},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)(n4.C,{})}});case nC.sYx.AddCnameRecordWww:return(0,s.jsx)(m.x6,{id:"Hb2/CF",values:{0:n.cnameDomain},components:{0:(0,s.jsx)("strong",{}),1:(0,s.jsx)(n4.C,{})}});case nC.sYx.EditCnameRecordWww:return(0,s.jsx)(m.x6,{id:"LmV2TD",values:{0:n.cnameDomain},components:{0:(0,s.jsx)(n4.C,{}),1:(0,s.jsx)("strong",{}),2:(0,s.jsx)(n4.C,{})}});case nC.sYx.ContactGammaSupport:return(0,s.jsx)(m.x6,{id:"Wr1wrv",values:{GAMMA_PROPER_NOUN:ev.On}});case nC.sYx.SslModeFullCloudflare:return(0,s.jsx)(m.x6,{id:"D61i6v"});case nC.sYx.CheckDnsCloudflare:return(0,s.jsx)(m.x6,{id:"gYfbYc"})}return(0,s.jsx)(s.Fragment,{})};var n7=n(49547),n9=n(22218),ie=n(5978);let it=e=>{let{isOpen:t,onClose:n,domain:i,siteId:r}=e,o=(0,nk.d)(),l=null==i?void 0:i.name,c=null==l?void 0:l.split(".")[0].split("-").slice(-1)[0],[u,h]=(0,y.useState)(null==l?void 0:l.split(".")[0].split("-").slice(0,-1).join("-")),x=null==l?void 0:l.split(".").slice(1).join("."),[p,{loading:g}]=(0,nC.g1r)(),j=(0,y.useCallback)(()=>{p({variables:{input:{siteId:r,name:u}}}).then(()=>{o({title:(0,s.jsx)(m.x6,{id:"oMgC5V"}),description:(0,s.jsx)(m.x6,{id:"tIBLtD"}),duration:3e3,position:"top",isClosable:!1,status:"success"}),n()}).catch(e=>{o({title:(0,s.jsx)(m.x6,{id:"YoFYYT"}),description:(0,s.jsx)(m.x6,{id:"Wd0ucu"}),duration:3e3,position:"top",isClosable:!1,status:"error"}),console.error("[BuiltInDomainEditModal] Failed to change domain name:",e)})},[p,r,u,o,n]);return(0,s.jsxs)(nX.aF,{isOpen:t,onClose:n,size:"md",closeOnOverlayClick:!1,children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nZ.$,{children:[(0,s.jsx)(nT.r,{children:(0,s.jsx)(m.x6,{id:"VMKg48"})}),(0,s.jsx)(nA.s,{}),(0,s.jsx)(nR.c,{children:(0,s.jsxs)(n7.MJ,{children:[(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(nK.p,{value:u,onKeyDown:e=>{"Enter"===e.key&&j()},onChange:e=>{h((0,ie.Fw)(e.target.value))},placeholder:f.Ru._({id:"dcSbw0"})}),(0,s.jsxs)(n9.l,{whiteSpace:"nowrap",children:["-",c,".",x]})]}),(0,s.jsx)(n7.eK,{lineHeight:"normal",children:(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"bvN4Vx"})})})]})}),(0,s.jsxs)(nQ.j,{children:[(0,s.jsx)(d.$,{onClick:n,mr:3,variant:"ghost",children:(0,s.jsx)(m.x6,{id:"dEgA5A"})}),(0,s.jsx)(d.$,{variant:"solid",onClick:j,isLoading:g,isDisabled:u.length<3,children:(0,s.jsx)(m.x6,{id:"tfDRzk"})})]})]})]})},ii={pending:{tooltip:(0,s.jsx)(m.x6,{id:"/BjVEU"}),badgeText:(0,s.jsx)(m.x6,{id:"bl9677"}),badgeColorScheme:"yellow"},failed:{tooltip:(0,s.jsx)(m.x6,{id:"7Bj3x9"}),badgeText:(0,s.jsx)(m.x6,{id:"7Bj3x9"}),badgeColorScheme:"red"}},ir=e=>{let{status:t,onClick:n}=e;if("verified"===t)return null;let{tooltip:i,badgeText:r,badgeColorScheme:o}=ii[t];return(0,s.jsx)(X.Tz,{label:i,placement:"top",children:(0,s.jsx)(n1.E,{display:"flex",justifyContent:"center",colorScheme:o,cursor:n?"pointer":"default",onClick:n||void 0,children:r})})},is=e=>{var t,n,i;let{domain:r,onDomainSetupClick:o,path:u,onDeleteClick:p,numDomains:g,siteId:j}=e,v=(0,ta.bO)({domain:r,path:u}),b=(0,nk.d)(),C=!r.builtin,w=r.builtin,E=C&&("verified"!==r.status||"verified"===r.status&&g>1),[k]=(0,nC.MyE)(),{data:S}=(0,nC.SmF)({variables:{name:r.name},skip:r.builtin||"failed"===r.status}),I=(0,y.useCallback)(async()=>{await k({variables:{id:r.id}}),b({title:(0,s.jsx)(m.x6,{id:"LIAJwx"}),status:"success",duration:3e3,position:"top",isClosable:!0})},[k,r.id,b]),{isOpen:T,onOpen:A,onClose:R}=(0,eP.j)({id:"edit-domain-modal"});return(0,s.jsxs)(n6.Z,{variant:"outline",children:[(0,s.jsx)(n2.b,{children:(0,s.jsxs)(l.B,{spacing:1,children:[(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(l.B,{children:"verified"===r.status?(0,s.jsx)(X.Tz,{label:v,placement:"top",children:(0,s.jsx)(d.$,{as:n5.N,variant:"link",href:v,wordBreak:"break-all",target:"_blank",rightIcon:(0,s.jsx)(c.az,{ms:2,children:(0,s.jsx)(x.g,{icon:tA.Ju_,size:"xs"})}),whiteSpace:"normal",children:r.name})}):(0,s.jsx)(a.E,{children:r.name})}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(e8.z,{children:(0,s.jsx)(ir,{status:r.status,onClick:"failed"===r.status?I:null})}),(0,s.jsxs)(e7.e,{children:[w&&(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"VMKg48"}),placement:"top",children:(0,s.jsx)(J.K,{onClick:A,"aria-label":f.Ru._({id:"VMKg48"}),size:"sm",variant:"ghost",icon:(0,s.jsx)(x.g,{icon:h.MT7})})}),C&&(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"UqSZMD"}),placement:"top",children:(0,s.jsx)(J.K,{onClick:()=>{o(r.name)},"aria-label":f.Ru._({id:"UqSZMD"}),size:"sm",variant:"ghost",colorScheme:"blackAlpha",icon:(0,s.jsx)(x.g,{icon:h.mEO})})}),E&&(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"C2YqXi"}),placement:"top",children:(0,s.jsx)(J.K,{onClick:()=>{p(null==r?void 0:r.id)},"aria-label":f.Ru._({id:"C2YqXi"}),size:"sm",variant:"hazardous",icon:(0,s.jsx)(x.g,{icon:h.sjs})})})]})]}),w&&(0,s.jsx)(c.az,{children:(0,s.jsxs)(a.E,{fontSize:"xs",color:"gray.500",as:"span",children:[(0,s.jsx)(m.x6,{id:"gDP3Mn",values:{GAMMA_PROPER_NOUN:ev.On}})," ",(0,s.jsx)(X.qT,{label:(0,s.jsx)(m.x6,{id:"ABSkTP",values:{GAMMA_PROPER_NOUN:ev.On}})})]})}),(null==S?void 0:S.checkDomain)&&(null===(t=S.checkDomain.actions)||void 0===t?void 0:t.length)&&(null===(i=S.checkDomain)||void 0===i?void 0:null===(n=i.dns)||void 0===n?void 0:n.status)!==nC.mXm.Ok&&(0,s.jsxs)(l.B,{spacing:2,fontSize:"xs",color:"gray.500",children:[(0,s.jsxs)(a.E,{children:[(0,s.jsx)(m.x6,{id:"ezr3/E"})," "]}),(0,s.jsx)(n3.Xy,{ps:"0",spacing:"2",children:((null==S?void 0:S.checkDomain.actions)||[]).map((e,t)=>(0,s.jsx)(n3.ck,{sx:{code:{fontSize:"xxs",bg:"gray.100",color:"gray.800"}},children:n8(e)},e.code+t))})]})]})}),(0,s.jsx)(it,{isOpen:T,onClose:R,domain:r,siteId:j})]})};var io=n(83073),il=n(30358);let ia=()=>{let e=(0,y.useRef)(!1),[t,n]=(0,y.useState)(()=>void 0!==window.entri);return(0,t$.nW)("https://cdn.goentri.com/entri.js",{predicate:()=>void 0===window.entri,onload:()=>{n(!0),e.current=!0}}),{entriReady:t}};var id=n(90088);let ic=async()=>{if(!window.entri)throw Error("Entri not found");return fetch("/api/domains/connectToken").then(e=>e.json()).then(e=>{if(!e.auth_token)throw Error("No auth token returned");return e.auth_token})},iu=async e=>{let{firstName:t,lastName:n,email:i,locale:r}=e,s=await ic();if(!window.entri)throw Error("Entri not found");let{dnsRecords:o}=(0,ta.oX)(""),l={applicationId:"gamma",applicationName:"Gamma",token:s,dnsRecords:o,sellVersion:"v3",locale:r,whiteLabel:{theme:{primary:"#dcebfd",onPrimary:"#262527",secondary:"#0540ad",onSecondary:"#ffffff",headerBackground:"#dcebfd",interactive:"#0540ad",premiumBadge:"#fee9fb",onPremiumBadge:"#b71f97",priceBadge:"#e2f7e1",onPriceBadge:"#1a561c",activating:"#0540ad",onActivating:"#ffffff"},sell:{flowTarget:"_blank",overlayScreenHeight:"60%",partnerName:"Gamma",partnerLogo:id.Yd,partnerIcon:id.Uf,contact:{firstName:t,lastName:n,email:i}}}};return console.log("[launchEntri] Purchasing Entri with config",l),window.entri.purchaseDomain(l),ix()},ih=async(e,t)=>{let n=await ic(),{domain:i,dnsRecords:r,isRootDomain:s,subdomain:o}=(0,ta.oX)(e),l={applicationId:"gamma",token:n,prefilledDomain:i,dnsRecords:r,locale:t,...!s&&{defaultSubdomain:o,forceSubdomain:!0}};return console.log("[launchEntri] Launching Entri with config",l),window.entri.showEntri(l),ix()},ix=()=>new Promise((e,t)=>{let n=i=>{if(window.removeEventListener("onEntriClose",n),i.detail.success)e(i.detail);else{var r,s;let e=null==i?void 0:null===(r=i.detail)||void 0===r?void 0:r.error;if(!e||(null===(s=e.details)||void 0===s?void 0:s.includes("Please refresh")))return t();let n=e.title||"",o=e.details||"",l=n&&o?": ":"";t("".concat(n).concat(l).concat(o).trim()||void 0)}};window.addEventListener("onEntriClose",n,!1)}),ip=e=>{let{siteId:t}=e,n=(0,en.st)(),{user:i}=(0,il.ur)(),r=(0,io.O)(),{entriReady:o}=ia(),l=(0,nk.d)(),[a,c]=(0,y.useState)(!1),[u,{loading:h}]=(0,nC.yuV)(),x=(0,y.useCallback)(async()=>{t&&(c(!0),iu({firstName:(null==i?void 0:i.firstName)||"",lastName:(null==i?void 0:i.lastName)||"",email:(null==i?void 0:i.email)||"",locale:r}).then(e=>{if(e&&"purchase"===e.setupType&&e.domain){let i=e.domain;null==n||n.track(en.VV.SITE_DOMAIN_PURCHASED,{domain:i,siteId:t}),u({variables:{input:{name:i,siteId:t,method:nC.hbC.Purchase}}}).then(()=>{null==n||n.track(en.VV.SITE_DOMAIN_ADDED,{domain:i,siteId:t,source:"entriSell"}),l({title:(0,s.jsx)(m.x6,{id:"5Ae0kE"}),description:(0,s.jsx)(m.x6,{id:"HqV46b"}),status:"success",duration:3e3,isClosable:!0,position:"top"})}).catch(e=>{console.error("[DomainListWrapper] error adding domain error",e),l({title:(0,s.jsx)(m.x6,{id:"JXFM3z"}),description:(null==e?void 0:e.message)&&e.message,status:"error",duration:null,position:"top",isClosable:!0})})}}).catch(e=>{console.error("[DomainListWrapper] entriPurchaseDomain error",e),l({title:e?(0,s.jsx)(m.x6,{id:"JXFM3z"}):(0,s.jsx)(m.x6,{id:"vr6nIz"}),description:e||void 0,status:"error",duration:e?null:3e3,position:"top",isClosable:!0})}).finally(()=>{c(!1)}))},[u,n,t,l,i,r]);return t?(0,s.jsx)(d.$,{variant:"outline",size:"md",onClick:x,isLoading:a,isDisabled:!o,children:(0,s.jsx)(m.x6,{id:"+VODT0"})}):null},im=e=>{let{isOpen:t,onClose:n,domainName:i,onTransferConfirm:r,onTransferCancel:o,domainToTransfer:c,isTransferring:u}=e,h=(0,y.useCallback)(()=>{o(),n()},[n,o]),x=(0,y.useCallback)(async()=>{r(),n()},[n,r]);return c?(0,s.jsx)(X.L8,{isDark:!1,children:(0,s.jsxs)(nX.aF,{isOpen:t,onClose:h,size:"lg",children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nZ.$,{children:[(0,s.jsx)(nT.r,{children:(0,s.jsx)(m.x6,{id:"hqplvI"})}),(0,s.jsx)(nA.s,{}),(0,s.jsx)(nR.c,{children:(0,s.jsxs)(l.B,{spacing:2,children:[(0,s.jsx)(a.E,{children:c.siteArchived?(0,s.jsx)(m.x6,{id:"SeHn75",values:{domainName:i,0:c.siteName}}):(0,s.jsx)(m.x6,{id:"tX38ij",values:{domainName:i,0:c.siteName}})}),(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"rKH6wM"})})]})}),(0,s.jsxs)(nQ.j,{children:[(0,s.jsx)(d.$,{variant:"ghost",mr:3,onClick:h,children:(0,s.jsx)(m.x6,{id:"yz7wBu"})}),(0,s.jsx)(d.$,{isLoading:u,variant:"hazardous",onClick:x,children:(0,s.jsx)(m.x6,{id:"vTZxnA"})})]})]})]})}):(0,s.jsx)(s.Fragment,{})},ig=e=>{var t;let{site:n,path:i,onDomainSetupClick:r,onAddDomain:o,isAddingDomain:c,refetchSites:u}=e,h=(0,D.u)("purchaseDomain"),x=(0,nk.d)(),{currentWorkspace:p}=(0,er.ur)(),[g,j]=(0,y.useState)(),[v,b]=(0,y.useState)(),[C,w]=(0,y.useState)(""),{isOpen:E,onOpen:k,onClose:S}=(0,eP.j)({id:"delete-domain-modal"}),{isOpen:I,onOpen:T,onClose:A}=(0,nz.E)({id:"transferDomainModal"}),[R,{loading:_}]=(0,nC.D3l)({fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),O=n.domains.find(e=>e.id===g),z=(0,ta.zC)(C)&&void 0===n.domains.find(e=>e.name===C),[P,{loading:L}]=(0,nC.InM)(),[N,{loading:M}]=(0,nC.OyM)(),[V,F]=(0,y.useState)(void 0),G=(0,y.useCallback)(async e=>{var t;let i=await R({variables:{name:e,workspaceId:null==p?void 0:p.id}}),r=null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.domains,s=null==r?void 0:r[0];if(n&&s){b(s),T();return}o(e),b(void 0),w("")},[null==p?void 0:p.id,R,o,T,n]);(0,t$.Vg)(()=>{g?F(null==O?void 0:O.name):F(void 0)},[g,null==O?void 0:O.name],[g]);let W=(0,y.useCallback)(()=>{S(),j(()=>void 0)},[S]),B=(0,y.useCallback)(async()=>{O&&(await P({variables:{id:g}}),await u(),x({title:(0,s.jsx)(m.x6,{id:"V4fbcv",values:{0:O.name}}),status:"success",duration:3e3,position:"top",isClosable:!0}),W())},[u,P,g,O,W,x]),U=(0,nY.ez)("custom_domains"),H=U&&h,q=(0,ta.H3)(n.domains),K=(0,y.useCallback)(()=>{b(void 0)},[]),J=(0,y.useCallback)(async()=>{v&&(await N({variables:{id:null==v?void 0:v.id,siteId:n.id},refetchQueries:["GetSite"]}),x({title:(0,s.jsx)(m.x6,{id:"dHhDGG",values:{0:v.name}}),position:"top",status:"success",duration:5e3}),w(""),b(void 0))},[v,n.id,x,N]);return(0,s.jsxs)(l.B,{spacing:8,p:2,children:[U&&(0,s.jsxs)(l.B,{spacing:4,mb:2,children:[H&&(0,s.jsxs)(l.B,{children:[(0,s.jsx)(a.E,{fontSize:"md",children:(0,s.jsx)(m.x6,{id:"gBiND0"})}),(0,s.jsx)(ip,{siteId:null==n?void 0:n.id})]}),(0,s.jsxs)(l.B,{children:[(0,s.jsx)(a.E,{children:H?(0,s.jsx)(m.x6,{id:"9UtMWk"}):(0,s.jsx)(m.x6,{id:"ssWCSl"})}),(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(nK.p,{bg:"white",placeholder:(null==n?void 0:null===(t=n.domains)||void 0===t?void 0:t.length)?f.Ru._({id:"jt/2Ky"}):f.Ru._({id:"1y9z1r"}),value:C,onChange:e=>w(e.target.value),onKeyDown:e=>{"Enter"===e.key&&z&&(e.preventDefault(),G(C))}}),(0,s.jsx)(l.B,{children:(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"aUB5ST"}),placement:"top",shouldWrapChildren:!0,isDisabled:z,children:(0,s.jsx)(d.$,{isDisabled:!z,variant:"plain",onClick:()=>{G(C)},isLoading:c||_,children:(0,s.jsx)(m.x6,{id:"EdEpYN"})})})})]})]})]}),(0,s.jsxs)(l.B,{spacing:2,children:[(0,s.jsx)(m.x6,{id:"bwl+tv"}),q.map(e=>(0,s.jsx)(is,{domain:e,onDomainSetupClick:r,path:i,onDeleteClick:e=>{j(e),k()},numDomains:n.domains.length||0,siteId:n.id},e.id))]}),!U&&(0,s.jsx)(nJ.c,{segmentEvent:en.VV.GAMMA_PRO_UPSELL_DOMAINS,title:(0,s.jsx)(m.x6,{id:"m6aLo0"}),description:(0,s.jsx)(m.x6,{id:"xFELnF",values:{GAMMA_PRO_PROPER_NOUN:ev.Ol,GAMMA_PROPER_NOUN:ev.On}})}),E&&(0,s.jsx)(n0,{onClose:W,onDelete:B,domainName:V,isDeleting:L}),(0,s.jsx)(im,{isOpen:I,onClose:A,onTransferCancel:K,domainName:C,domainToTransfer:v,onTransferConfirm:J,isTransferring:M})]})};var ij=n(76069),iv=n(66288),ib=n(31659),iy=n(95033),iC=n(90534),iw=n(56377),iE=n(56154),ik=n(7910);let iS=e=>{let{isOpen:t,onClose:n,domainName:i,onDomainConfirmed:r}=e,[c,u]=(0,y.useState)("initial"),p=(0,io.O)(),{entriReady:f}=ia(),[g,j]=(0,y.useState)(!1),v=(0,nk.d)(),{dnsRecords:b,isRootDomain:C,subdomain:w}=(0,y.useMemo)(()=>(0,ta.oX)(i||""),[i]);return(0,s.jsx)(X.L8,{isDark:!1,children:(0,s.jsxs)(nX.aF,{isOpen:t,onClose:n,size:"3xl",trapFocus:!1,children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nZ.$,{children:[(0,s.jsx)(nT.r,{children:(0,s.jsx)(m.x6,{id:"YSyDVG",values:{domainName:i,GAMMA_PROPER_NOUN:ev.On}})}),(0,s.jsx)(nA.s,{}),(0,s.jsxs)(nR.c,{children:["initial"===c&&(0,s.jsx)(n6.Z,{variant:"filled",children:(0,s.jsx)(n2.b,{children:(0,s.jsxs)(l.B,{spacing:4,py:4,mx:"auto",children:[(0,s.jsxs)(l.B,{spacing:2,children:[(0,s.jsxs)(l.B,{spacing:1,children:[(0,s.jsx)(a.E,{textAlign:"center",fontSize:"2xl",children:(0,s.jsx)(x.g,{icon:h.Bwz,size:"lg"})}),(0,s.jsx)(a.E,{fontWeight:"semibold",fontSize:"lg",textAlign:"center",children:(0,s.jsx)(m.x6,{id:"w5l5pM"})})]}),(0,s.jsx)(a.E,{textAlign:"center",maxW:"unset",children:(0,s.jsx)(m.x6,{id:"aV1OpM",values:{GAMMA_PROPER_NOUN:ev.On}})})]}),(0,s.jsx)(o.s,{align:"center",justify:"center",w:"100%",children:(0,s.jsxs)(l.B,{w:64,maxW:"100%",children:[(0,s.jsx)(d.$,{size:"md",variant:"solid",isDisabled:!f,isLoading:g,onClick:()=>{i&&(j(!0),ih(i,p).then(e=>{console.log("[ENTRI] Successfully setup domain",e),null==r||r({domainName:i,source:"automatic"})}).catch(e=>{e&&iE.Cp("[entri.showEntri] Error setting up domain: ".concat(e)),v({title:e?(0,s.jsx)(m.x6,{id:"l/2jzv"}):(0,s.jsx)(m.x6,{id:"FZ1Qqq"}),description:e,status:"error",duration:3e3,isClosable:!0,position:"top"})}).finally(()=>{j(!1)}))},children:(0,s.jsx)(m.x6,{id:"qu+sXe"})}),(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(n_.c,{}),(0,s.jsx)(a.E,{color:"gray.600",children:(0,s.jsx)(m.x6,{id:"BzEFor"})}),(0,s.jsx)(n_.c,{})]}),(0,s.jsx)(d.$,{size:"md",variant:"plain",onClick:()=>{u("manualSetup")},children:(0,s.jsx)(m.x6,{id:"ANIrop"})})]})})]})})}),"manualSetup"===c&&(0,s.jsx)(n6.Z,{variant:"filled",children:(0,s.jsx)(n2.b,{children:(0,s.jsxs)(l.B,{spacing:6,children:[(0,s.jsx)(a.E,{fontWeight:"semibold",fontSize:"lg",children:(0,s.jsx)(m.x6,{id:"L5N7HX"})}),(0,s.jsxs)(ij.X,{variant:"simple",children:[(0,s.jsx)(iv.d,{children:(0,s.jsxs)(ib.Tr,{children:[(0,s.jsx)(iy.Th,{children:(0,s.jsx)(m.x6,{id:"6YtxFj"})}),(0,s.jsx)(iy.Th,{children:(0,s.jsx)(m.x6,{id:"+zy2Nq"})}),(0,s.jsx)(iy.Th,{isNumeric:!0,children:(0,s.jsx)(m.x6,{id:"HKH+W+"})})]})}),(0,s.jsx)(iC.N,{children:(b||[]).map(e=>(0,s.jsxs)(ib.Tr,{children:[(0,s.jsx)(iw.Td,{fontFamily:"mono",children:e.host}),(0,s.jsx)(iw.Td,{fontFamily:"mono",children:e.type}),(0,s.jsx)(iw.Td,{isNumeric:!0,fontFamily:"mono",children:e.value})]},e.value))})]}),(0,s.jsxs)(nO.F,{status:"info",colorScheme:"orange",children:[(0,s.jsx)(nD._,{}),(0,s.jsxs)(l.B,{children:[(0,s.jsx)(a.E,{fontWeight:"bold",fontSize:"md",children:(0,s.jsx)(m.x6,{id:"NxHkkp"})}),(0,s.jsxs)(n3._J,{ps:"4",spacing:"2",children:[C?1===ik.Wc.length?(0,s.jsx)(n3.ck,{children:(0,s.jsx)(m.x6,{id:"wz2Cgq",values:{0:ik.Wc[0]},components:{0:(0,s.jsx)(n4.C,{colorScheme:"gray"}),1:(0,s.jsx)(n4.C,{colorScheme:"gray"})}})}):(0,s.jsx)(n3.ck,{children:(0,s.jsx)(m.x6,{id:"+kOqFW",values:{0:ik.Wc.slice(0,-1).map(e=>(0,s.jsx)(n4.C,{colorScheme:"gray",children:e},e)),1:ik.Wc.slice(-1)[0]},components:{0:(0,s.jsx)(n4.C,{colorScheme:"gray"}),1:(0,s.jsx)(e8.z,{display:"inline",divider:(0,s.jsx)("span",{children:", "})}),2:(0,s.jsx)(n4.C,{colorScheme:"gray"})}})}):null,C&&(0,s.jsx)(n3.ck,{children:(0,s.jsx)(m.x6,{id:"vLov0O",components:{0:(0,s.jsx)(n4.C,{colorScheme:"gray"}),1:(0,s.jsx)(n4.C,{colorScheme:"gray"})}})}),(0,s.jsx)(n3.ck,{children:(0,s.jsx)(m.x6,{id:"Jmb6Yp",values:{subdomain:w,GAMMA_SITES_HOST:ik._o},components:{0:(0,s.jsx)(n4.C,{colorScheme:"gray"}),1:(0,s.jsx)(n4.C,{colorScheme:"gray"}),2:(0,s.jsx)(n4.C,{colorScheme:"gray"})}})})]})]})]}),r&&(0,s.jsxs)(e8.z,{justifyContent:"space-between",children:[(0,s.jsx)(d.$,{variant:"plain",onClick:()=>u("initial"),children:(0,s.jsx)(m.x6,{id:"iH8pgl"})}),(0,s.jsx)(d.$,{variant:"solid",onClick:()=>{n(),null==r||r({domainName:i,source:"manual"})},size:"md",mx:"auto",children:(0,s.jsx)(m.x6,{id:"RyhVuk"})})]})]})})})]}),(0,s.jsx)(nQ.j,{})]})]})})},iI=e=>{let{children:t,shouldWrap:n=!1}=e;return n?(0,s.jsx)(nP.m,{py:16,maxW:"container.md",children:t}):(0,s.jsx)(s.Fragment,{children:t})},iT=e=>{let{showHeadings:t=!0}=e,n=(0,en.st)(),i=(0,I.GV)(ts.Gd),r=(0,nk.d)(),{refetch:d}=(0,nL.DL0)({variables:{id:null==i?void 0:i.id},fetchPolicy:"cache-first",skip:!(null==i?void 0:i.id)}),{isOpen:c,onOpen:u,onClose:h}=(0,nz.E)({id:"domainSetupModal"}),x=null==i?void 0:i.domains.find(e=>"pending"===e.status),[p,f]=(0,y.useState)(null),[g,{loading:j}]=(0,nL.yuV)(),[v,b]=(0,y.useState)();(0,y.useEffect)(()=>{if(!x)return;let e=setInterval(()=>{d()},1e4);return()=>{clearInterval(e)}},[x,d,i]);let C=(0,y.useCallback)(e=>{b(e),u()},[u]),w=(0,y.useCallback)(e=>{let{domainName:t,source:o}=e;"addDomain"===p&&g({variables:{input:{siteId:null==i?void 0:i.id,name:t,method:"automatic"===o?nL.hbC.Automatic:nL.hbC.Manual}}}).then(()=>{null==n||n.track(en.VV.SITE_DOMAIN_ADDED,{domain:t,siteId:null==i?void 0:i.id,source:o}),r({title:(0,s.jsx)(m.x6,{id:"p8Oc6N"}),description:(0,s.jsx)(m.x6,{id:"HqV46b"}),status:"success",duration:3e3,isClosable:!0,position:"top"}),h()}).catch(e=>{let t=(0,nq.vI)(e).some(e=>"max_domains_reached"===e);r({title:t?(0,s.jsx)(m.x6,{id:"634yzf"}):(0,s.jsx)(m.x6,{id:"HugOMA"}),description:t?(0,s.jsx)(m.x6,{id:"aMKkZK"}):(0,s.jsx)(m.x6,{id:"PZCqeW"}),status:"error",isClosable:!0,position:"top"})})},[g,n,p,h,null==i?void 0:i.id,r]);return console.debug("%cDomainsPanel debug","background-color: #cc00ff",{site:i}),(0,s.jsx)(o.s,{w:"100%",flex:1,direction:"column",mt:4,children:(0,s.jsxs)(iI,{shouldWrap:t,children:[t&&(0,s.jsxs)(l.B,{spacing:1,mb:4,children:[(0,s.jsx)(q.D,{children:(0,s.jsx)(m.x6,{id:"AZ4xlc"})}),(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"tNT34Z",values:{GAMMA_PROPER_NOUN:ev.On}})})]}),i?(0,s.jsx)(ig,{site:i,onDomainSetupClick:C,onAddDomain:e=>{u(),b(e),f("addDomain")},isAddingDomain:j,refetchSites:d}):(0,s.jsx)(nH.Y,{}),c&&v&&(0,s.jsx)(iS,{domainName:v,isOpen:c,onClose:()=>{h(),f(null)},onDomainConfirmed:p?w:null})]})})};var iA=n(18651),iR=n(15672),i_=n(74327),iO=n(4977),iD=n(67656);let iz={src:"/_next/static/media/no-navbar.e9d28333.png"},iP={src:"/_next/static/media/top-navbar.97a69a83.png"};var iL=n(69237),iN=n(76166),iM=n(35436),iV=n(61077);let iF=e=>{let{gtmContainerId:t,setGtmContainerId:n}=e;return(0,s.jsxs)(n7.MJ,{children:[(0,s.jsx)(e8.z,{justifyContent:"center",children:(0,s.jsxs)(n9.l,{display:"flex",flex:"1",my:.5,mx:0,children:[(0,s.jsx)(m.x6,{id:"d4WWfP"}),(0,s.jsx)(X.qT,{ms:2,label:(0,s.jsx)(m.x6,{id:"gmEwbH"})}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(d.$,{"aria-label":"Learn more about Google Tag Manager",as:"a",variant:"link",href:"https://support.google.com/tagmanager/answer/6103696?hl=en",target:"_blank",size:"sm",rightIcon:(0,s.jsx)(iL.p,{ms:-1}),children:(0,s.jsx)(m.x6,{id:"zwWKhA"})})]})}),(0,s.jsxs)(iN.M,{children:[(0,s.jsx)(iM.W,{pointerEvents:"none",color:"gray.500",w:"fit-content",px:3,children:"GTM -"}),(0,s.jsx)(nK.p,{placeholder:"XXXXXX",paddingStart:16,value:t||"",onChange:e=>{n(iV.W.sanitize(e.currentTarget.value).replace(/[\W_]+/g,"").toUpperCase().slice(0,10))}})]})]})},iG=e=>{let{pixelId:t,setPixelId:n}=e;return(0,s.jsxs)(n7.MJ,{children:[(0,s.jsx)(e8.z,{justifyContent:"center",children:(0,s.jsxs)(n9.l,{display:"flex",flex:"1",m:0,children:[(0,s.jsx)(m.x6,{id:"163jQp"}),(0,s.jsx)(X.qT,{ms:2,label:(0,s.jsx)(m.x6,{id:"mynmm2",components:{0:(0,s.jsx)("span",{"aria-label":"arrow-right",role:"img"})}})}),(0,s.jsx)(o.s,{mx:2,mb:1.5,alignItems:"center",children:(0,s.jsx)(n1.E,{colorScheme:"green",children:(0,s.jsx)(m.x6,{id:"isRobC"})})}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(d.$,{"aria-label":"Learn more about the Meta Pixel",as:"a",variant:"link",href:"https://developers.facebook.com/docs/meta-pixel/get-started",target:"_blank",size:"sm",rightIcon:(0,s.jsx)(iL.p,{ms:-1}),children:(0,s.jsx)(m.x6,{id:"zwWKhA"})})]})}),(0,s.jsx)(o.s,{children:(0,s.jsx)(nK.p,{ps:4,placeholder:"12345*****67890",value:t||"",onChange:e=>{n(iV.W.sanitize(e.currentTarget.value).replace(/[\W_]+/g,"").toUpperCase().slice(0,20))}})})]})},iW=e=>{let t=(0,I.GV)(ts.Gd);return t?(0,s.jsx)(iB,{site:t,...e}):null},iB=e=>{let{site:t,showHeadings:n=!0,doc:i}=e,r=(0,nk.d)(),c=(0,D.u)("sitesNav"),[u,p]=(0,y.useState)(t.name),[g,j]=(0,y.useState)(t.gtmContainerId),[v,b]=(0,y.useState)(t.metaPixelId),[C,w]=(0,y.useState)(t.navEnabled),[E,k]=(0,y.useState)(!1),[S,I]=(0,y.useState)(!1),[T,A]=(0,y.useState)(null),{currentWorkspace:R}=(0,er.ur)(),[_]=(0,nC.vlJ)(),O=(0,y.useCallback)(async()=>{if(!(null==t?void 0:t.id))return;k(!0);let e={siteId:t.id,name:u,navEnabled:C,gtmContainerId:g||null,metaPixelId:v||null};!C||(null==t?void 0:t.navContent)||(e.navContent=(0,th.aG)()),await _({variables:{input:e}}),r({title:(0,s.jsx)(m.x6,{id:"bZn5Ok"}),status:"success",isClosable:!0,position:"top"}),k(!1)},[g,v,u,C,t,r,_]),z=(0,y.useCallback)(async e=>{(null==t?void 0:t.id)&&(I(!0),await _({variables:{input:{siteId:t.id,faviconUrl:e}}}),r({title:e?(0,s.jsx)(m.x6,{id:"64GEyu"}):(0,s.jsx)(m.x6,{id:"/K2cLG"}),status:"success",isClosable:!0,position:"top"}),I(!1))},[null==t?void 0:t.id,r,_]),P=(0,y.useMemo)(()=>{let e=g||void 0,n=(null==t?void 0:t.gtmContainerId)||void 0,i=v||void 0,r=(null==t?void 0:t.metaPixelId)||void 0;return u!==(null==t?void 0:t.name)||C!==(null==t?void 0:t.navEnabled)||e!==n||i!==r},[t,u,C,g,v]);return(0,s.jsxs)(o.s,{w:"100%",flex:1,direction:"column",px:2,children:[(0,s.jsxs)(iI,{shouldWrap:n,children:[n&&(0,s.jsx)(q.D,{fontSize:"3xl",letterSpacing:"tight",fontWeight:"800",mb:12,children:(0,s.jsx)(m.x6,{id:"Tz0i8g"})}),(0,s.jsxs)(l.B,{spacing:4,mt:6,children:[(0,s.jsxs)(n7.MJ,{children:[(0,s.jsx)(e8.z,{justifyContent:"center",children:(0,s.jsx)(n9.l,{flex:"1",children:(0,s.jsx)(m.x6,{id:"Lve3H6"})})}),(0,s.jsx)(nK.p,{onChange:e=>{p(e.currentTarget.value)},placeholder:f.Ru._({id:"ZiMSMQ"}),value:u})]}),(0,s.jsxs)(n7.MJ,{children:[(0,s.jsx)(e8.z,{justifyContent:"center",children:(0,s.jsx)(n9.l,{flex:"1",children:(0,s.jsx)(m.x6,{id:"+Qaboy"})})}),(0,s.jsx)(o.s,{h:"150px",w:"100%",position:"relative",justify:"center",align:"center",children:(null==t?void 0:t.faviconUrl)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.s,{align:"center",justify:"center",w:"128px",h:"128px",border:"1px solid var(--chakra-colors-blackAlpha-200)",children:(0,s.jsx)(iA._,{src:null==t?void 0:t.faviconUrl,maxW:"100px",maxH:"100px",borderRadius:"sm"})}),(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"XyBdok"}),children:(0,s.jsx)(J.K,{zIndex:2,position:"absolute",top:0,right:0,isRound:!0,isDisabled:S,size:"sm",icon:(0,s.jsx)(x.g,{icon:h.yLS}),"aria-label":f.Ru._({id:"XyBdok"}),onClick:()=>z(null)})})]}):S||T===iO.A.Uploading?(0,s.jsx)(t3.y,{}):(0,s.jsx)(i_.Zc,{orgId:null==R?void 0:R.id,uploadType:"icon",editType:"icon",dropHereText:f.Ru._({id:"hVCCpY",values:{0:"%{browse}"}}),customHeight:"150px",customFontSize:"xs",onUploadStart:()=>{A(iO.A.Uploading)},onUploadSuccess:async(e,t)=>{let{src:n,uploadResultStep:i}=e;"optimized"===i&&(await z(n),A(iO.A.Done))},onUploadFailed:e=>{A(iO.A.Error),r({title:(0,s.jsx)(m.x6,{id:"aECahe"})}),console.error("[Site SettingsPanel] Favicon upload error",e)},sx:{width:"100%",".uppy-Root":{border:"1px solid var(--chakra-colors-gray-200)",borderRadius:"md",width:"100%"},".uppy-DragDrop-label":{fontSize:"xs",color:"gray.500"},".uppy-DragDrop--isDragDropSupported":{border:"none"},".uppy-DragDrop-arrow":{transform:"scale(0.85)"}}})}),(0,s.jsx)(a.E,{fontSize:"xs",color:"gray.500",mt:2,children:(0,s.jsx)(m.x6,{id:"ifTGl2"})})]}),c&&(0,s.jsxs)(n7.MJ,{children:[(0,s.jsx)(e8.z,{justifyContent:"center",children:(0,s.jsx)(n9.l,{flex:"1",children:(0,s.jsx)(m.x6,{id:"UxKoFf"})})}),(0,s.jsxs)(iR.r,{columns:2,spacing:6,flex:1,children:[(0,s.jsx)(iU,{name:f.Ru._({id:"Nom9QG"}),src:iP.src,isSelected:C,onClick:()=>{w(!0)}}),(0,s.jsx)(iU,{name:f.Ru._({id:"BvDFuc"}),src:iz.src,isSelected:!C,onClick:()=>{w(!1)}})]})]}),(0,s.jsx)(iF,{gtmContainerId:g,setGtmContainerId:j}),(0,s.jsx)(iG,{pixelId:v,setPixelId:b}),i&&(0,s.jsx)(iD.w,{label:(0,s.jsx)(m.x6,{id:"ebOoCq",values:{GAMMA_PROPER_NOUN:ev.On}}),segmentEvent:tK.VV.GAMMA_PRO_UPSELL_SITE_REMOVE_WATERMARK,doc:i})]})]}),(0,s.jsx)(o.s,{w:"100%",flex:1,direction:"column",pos:"sticky",bottom:0,children:(0,s.jsxs)(o.s,{mx:-2,flex:1,mb:-2,py:4,bg:"white",children:[(0,s.jsx)(tT.h,{}),(0,s.jsx)(d.$,{variant:"solid",isDisabled:!P,onClick:O,isLoading:E,children:(0,s.jsx)(m.x6,{id:"tfDRzk"})})]})})]})},iU=e=>{let{name:t,src:n,onClick:i,isSelected:r,...o}=e;return(0,s.jsxs)(l.B,{p:2,bg:r?"trueblue.50":"transparent",_hover:{bg:"trueblue.50",cursor:"pointer"},borderRadius:"md",spacing:2,...o,transitionProperty:"common",transitionDuration:"normal",onClick:i,children:[(0,s.jsx)(c.az,{height:"80px",bg:"gray.50",borderRadius:"md",borderWidth:"1px",overflow:"hidden",children:n&&(0,s.jsx)(iA._,{src:n,width:"100%",height:"100%",objectFit:"contain",borderRadius:"md"})}),(0,s.jsxs)(e8.z,{children:[r&&(0,s.jsx)(c.az,{children:(0,s.jsx)(x.g,{icon:h.e68})}),(0,s.jsx)(a.E,{fontSize:"sm",fontWeight:"500",children:t})]})]})};var iH=n(26833),iq=n(88771);let iK=e=>{let{label:t,initialValue:i="",updateValue:r,helperText:o,language:l,...a}=e,[d,u]=(0,y.useState)(i),[h,x]=(0,y.useState)(null),p=(0,t$.lW)(r,100),[m,f]=(0,y.useState)();(0,y.useEffect)(()=>{"css"===l?Promise.all([n.e(3881),n.e(9587),n.e(1963)]).then(n.bind(n,51963)).then(e=>{f(e.css())}):"html"===l&&Promise.all([n.e(3881),n.e(9587),n.e(1963),n.e(7213),n.e(891)]).then(n.bind(n,891)).then(e=>{f(e.html())})},[l]),(0,t$.Vg)(()=>{x(null),p(d)},[d,p],[d]);let g=[m].filter(Boolean);return(0,s.jsxs)(n7.MJ,{isInvalid:!!h,children:[(0,s.jsx)(n9.l,{children:t}),h&&(0,s.jsx)(iH.Wt,{children:h}),o&&(0,s.jsx)(n7.eK,{children:o}),(0,s.jsx)(c.az,{border:"1px solid",borderColor:"gray.200",fontSize:"md",position:"relative",children:(0,s.jsx)(y.Suspense,{fallback:(0,s.jsx)("span",{}),children:(0,s.jsx)(iq.j,{value:d,extensions:g,onChange:u,...a})})})]})},iJ=(0,y.memo)(e=>{let{editor:t}=e,{bodyStart:n}=(0,I.GV)(ep.BP),i=(0,y.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[t]);return(0,s.jsx)(o.s,{w:"100%",flex:1,direction:"column",p:2,pt:6,children:(0,s.jsx)(iK,{label:f.Ru._({id:"fC5kYg"}),helperText:f.Ru._({id:"0AZNtw"}),initialValue:n,updateValue:i,language:"html",height:"600px"})})});iJ.displayName="CustomCodePanel";let iY=(0,y.memo)(e=>{let{selectedPanel:t,setSelectedPanel:n}=e,i=(0,D.u)("docCustomCode");return(0,s.jsx)(l.B,{spacing:4,children:(0,s.jsx)(l.B,{spacing:8,children:(0,s.jsxs)(e7.e,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",children:[(0,s.jsx)(d.$,{borderRadius:"md",leftIcon:(0,s.jsx)(x.g,{icon:h.y5z,fixedWidth:!0}),"data-website-panel-active-view-button":"domains",colorScheme:"domains"===t?"trueblue":"gray",bg:"domains"===t?"trueblue.100":void 0,onClick:()=>n("domains"),flex:1,children:(0,s.jsx)(m.x6,{id:"AZ4xlc"})}),(0,s.jsx)(d.$,{borderRadius:"md",leftIcon:(0,s.jsx)(x.g,{icon:h.BH7,fixedWidth:!0}),"data-website-panel-active-view-button":"website",colorScheme:"website"===t?"trueblue":"gray",bg:"website"===t?"trueblue.100":void 0,onClick:()=>n("website"),flex:1,children:(0,s.jsx)(m.x6,{id:"Tz0i8g"})}),i&&(0,s.jsx)(d.$,{borderRadius:"md",leftIcon:(0,s.jsx)(x.g,{icon:h.jTw,fixedWidth:!0}),"data-website-panel-active-view-button":"code",colorScheme:"code"===t?"trueblue":"gray",bg:"code"===t?"trueblue.100":void 0,onClick:()=>n("code"),flex:1,children:(0,s.jsx)(m.x6,{id:"E16GGw"})})]})})})});iY.displayName="SettingsPanelHeader";var iX=n(71144),i$=n(99742);let iZ=e=>{var t;let{title:n,site:i}=e,r="/".concat((0,ie.Fw)(n||"untitled"));return(null==i?void 0:null===(t=i.routes)||void 0===t?void 0:t.find(e=>e.path===r))&&(r="".concat(r,"-").concat((0,i$.Ak)(6))),r},iQ={variant:"outline",transitionProperty:"all",transitionDuration:"normal",cursor:"pointer",boxShadow:"none",tabIndex:0,_hover:{shadow:"lg",borderColor:"trueblue.300",bg:"trueblue.50"},_focusVisible:{boxShadow:"none",outline:"none"},_focus:{boxShadow:"outline"}},i0=e=>{let{sites:t}=e,n=(0,I.GV)(ep.Jo),i=(0,en.st)(),{currentWorkspace:r}=(0,er.ur)(),[d]=(0,nC.Imo)(),[c,u]=(0,y.useState)(!1),p=(0,nk.d)(),{push:f,reload:g}=(0,e9.useRouter)(),j=(0,y.useCallback)(async e=>{if(!n)return;u(!0);let o=null==t?void 0:t.find(t=>t.id===e),l=n.id;if(!(null==r?void 0:r.id)){console.error("[MoveToSiteModal] No currentWorkspace found");return}let a=iZ({title:n.title,site:o});if(await (0,ta.fb)(l),!l){console.error("[MoveToSiteModal] No docId found");return}null==i||i.track(en.VV.DOC_MOVED_TO_SITE,{doc_id:l,site_id:e}),d({variables:{input:{siteId:e,docId:l,path:a}},refetchQueries:["GetSite"]}).then(()=>{(0,L.pF)({docId:l}),console.debug("[MoveToSiteModal] Doc moved to site. Adding route then navigating to editor",l),p({position:"top",title:(0,s.jsx)(m.x6,{id:"oMgC5V"}),description:(0,s.jsx)(m.x6,{id:"rYG2u6"}),status:"success",duration:5e3}),g()}).catch(e=>{p({position:"top",title:"Error",description:e.message,status:"error",duration:5e3}),u(!1)}).finally(()=>{u(!1)})},[i,null==r?void 0:r.id,n,g,d,t,p]);return(0,s.jsxs)(s.Fragment,{children:[c&&(0,s.jsx)(o.s,{w:"100",h:"400px",maxH:"30vh",children:(0,s.jsx)(nH.Y,{})}),!c&&(0,s.jsxs)(l.B,{spacing:4,children:[(0,s.jsx)(l.B,{pt:2,pb:2,children:(0,s.jsxs)(a.E,{fontSize:"sm",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:[(0,s.jsx)(m.x6,{id:"1osTfm",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP},components:{0:(0,s.jsx)("strong",{})}})," ",(0,s.jsxs)(n5.N,{href:ej.C.CREATE_SITE,textDecoration:"underline",isExternal:!0,color:"trueblue.500",children:[(0,s.jsx)(m.x6,{id:"Px95UX"}),(0,s.jsx)(iL.p,{mx:"2px"})]})," "]})}),t&&t.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.E,{fontSize:"sm",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:(0,s.jsx)(m.x6,{id:"kjbPb3",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})}),null==t?void 0:t.map(e=>(0,s.jsx)(n6.Z,{onClick:()=>j(e.id),onKeyPress:t=>{"Enter"===t.key&&j(e.id)},...iQ,children:(0,s.jsx)(n2.b,{children:(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(l.B,{spacing:0,children:(0,s.jsxs)(e8.z,{children:[e.faviconUrl&&(0,s.jsx)(iA._,{w:"4",src:e.faviconUrl}),(0,s.jsx)(a.E,{fontWeight:"600",children:e.name})]})}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(x.g,{icon:h.dmS})]})})},e.id))]})]})]})},i1=()=>{let{isOpen:e,onOpen:t,onClose:n}=(0,nz.E)({id:"MoveToSiteDisclosure"}),{currentWorkspace:i}=(0,er.ur)(),{data:r,loading:o}=(0,nC._qT)({variables:{workspaceId:null==i?void 0:i.id},skip:!(null==i?void 0:i.id),fetchPolicy:"cache-first"}),l=null==r?void 0:r.sites;return o?(0,s.jsx)(t3.y,{size:"xs"}):l&&0===l.length?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.$,{variant:"plain",onClick:t,colorScheme:"trueblue",children:(0,s.jsx)(m.x6,{id:"hsMvVQ"})}),(0,s.jsxs)(nX.aF,{isOpen:e,onClose:n,size:"3xl",children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nZ.$,{children:[(0,s.jsx)(nT.r,{children:(0,s.jsx)(m.x6,{id:"i4b0iJ"})}),(0,s.jsx)(nA.s,{}),(0,s.jsx)(nR.c,{maxH:"80vh",overflowY:"auto",children:(0,s.jsx)(i0,{sites:l})}),(0,s.jsx)(nQ.j,{children:(0,s.jsx)(d.$,{mr:3,onClick:n,children:(0,s.jsx)(m.x6,{id:"yz7wBu"})})})]})]})]})},i6=e=>{let{onEnable:t,isLoading:n}=e;return(0,s.jsx)(l.B,{align:"center",justify:"center",spacing:4,flex:1,p:6,mt:8,children:(0,s.jsx)(iX.p,{size:"md",title:(0,s.jsx)(m.x6,{id:"CcudBl",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}}),description:(0,s.jsx)(m.x6,{id:"xEtury"}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.B,{w:"100%",mt:4,children:[(0,s.jsx)(d.$,{variant:"solid",onClick:t,isLoading:n,children:(0,s.jsx)(m.x6,{id:"oL6HHo"})}),(0,s.jsx)(i1,{})]}),(0,s.jsx)(d.$,{as:n5.N,variant:"ghost",isExternal:!0,href:ej.C.CREATE_SITE,rightIcon:(0,s.jsx)(x.g,{icon:h.vMs,size:"sm"}),children:(0,s.jsx)(m.x6,{id:"Px95UX"})})]})})})};var i2=n(60674),i5=n(75669);let i3=(0,i2.P)(c.az),i4={initial:{opacity:0,translateY:-40},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:40},transition:{duration:.3}},i8=e=>{let{isLoading:t,onChange:n,isChecked:i,isDisabled:r,enabledText:l,disabledText:a}=e;return(0,s.jsxs)(o.s,{cursor:r?"not-allowed":"pointer",className:(0,u.cx)("gamma-switch-container",t&&"loading",i?"active":""),opacity:r?.6:1,children:[(0,s.jsx)(c.az,{as:"label",className:"text",fontSize:"sm",justifyContent:"center",htmlFor:"gamma-checkbox",position:"relative",overflow:"hidden",children:(0,s.jsx)(i5.N,{initial:!1,children:t?(0,s.jsx)(i3,{as:"span",position:"absolute",...i4,children:(0,s.jsx)(t3.y,{size:"sm"})},"loading"):i?(0,s.jsx)(i3,{as:"span",position:"absolute",...i4,children:l},"checked"):(0,s.jsx)(i3,{as:"span",position:"absolute",...i4,children:a},"unchecked")})}),(0,s.jsxs)(c.az,{as:"label",className:"switch",pointerEvents:r?"none":"auto",children:[(0,s.jsx)("input",{id:"gamma-checkbox",type:"checkbox",onChange:n,disabled:t||r}),(0,s.jsx)("span",{className:"slider round"})]})]})},i7=(0,Y.i7)({"0%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(1.7)",opacity:0},"100%":{transform:"scale(1)",opacity:0}}),i9=(0,Y.i7)({"0%":{transform:"scale(1)",opacity:1},"15%":{transform:"scale(1)",opacity:1},"60%":{transform:"scale(1.7)",opacity:0},"100%":{transform:"scale(1)",opacity:0}}),re=(0,Y.i7)({"0%":{transform:"scale(1)"},"30%":{transform:"scale(1)"},"50%":{transform:"scale(1.05)"},"70%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),rt=e=>{let{icon:t,showDisabled:n=!1,shouldPulse:i=!1,bg:r="gray.200",color:o="gray.800"}=e;return(0,s.jsx)(c.jl,{color:o,textAlign:"center",bg:r,size:8,opacity:n?.5:1,position:"relative",animation:i?"".concat(re," 2.7s infinite"):"none",sx:{":before":i?{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:"''",boxShadow:"inset 0 0 0 3px #6910D166",transition:"transform 0.2s, opacity 0.2s",animation:"".concat(i7," 2.7s infinite")}:{},":after":i?{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:"''",boxShadow:"inset 0 0 0 2px #6910D133",transition:"transform 0.2s, opacity 0.2s",animation:"".concat(i9," 2.7s infinite")}:{}},children:n?(0,s.jsxs)("span",{className:"fa-stack",children:[(0,s.jsx)(x.g,{icon:h.$Dv,className:"fa-stack-1x"}),(0,s.jsx)(x.g,{icon:t,className:"fa-stack-1x"})]}):(0,s.jsx)(x.g,{size:"1x",icon:t})})},rn=e=>{let{isLoading:t=!1,site:n,onChange:i,disabledText:r,doc:l}=e,d=(0,ta.dv)(n),u=(0,nN.mL)(),x=(0,er.Iy)("manage",l),p=u||x,f=!!(t||r||!p),g=(0,ta.m8)(n),j=p?r||(t?(0,s.jsx)(m.x6,{id:"mkk40+"}):d?(0,s.jsx)(m.x6,{id:"f4CBNf"}):(0,s.jsx)(m.x6,{id:"5G4vd5"})):(0,s.jsx)(m.x6,{id:"Z2uNdQ"});return n?(0,s.jsxs)(e8.z,{w:"100%",justify:"space-between","data-testid":"toggle-website-settings",children:[(0,s.jsx)(c.az,{children:(0,s.jsxs)(o.s,{alignItems:"center",children:[(0,s.jsx)(rt,{shouldPulse:g,bg:g?"#6910D1":"gray.200",color:g?"white":"gray.800",icon:g?h.LIr:h.Bwz}),(0,s.jsxs)(c.az,{ml:3,children:[(0,s.jsx)(e8.z,{children:(0,s.jsx)(a.E,{children:g?(0,s.jsx)(m.x6,{id:"MuDTSp"}):d?(0,s.jsx)(m.x6,{id:"AAm5jh"}):(0,s.jsx)(m.x6,{id:"HzFHhy"})})}),(0,s.jsx)(o.s,{align:"center",children:(0,s.jsx)(e8.z,{spacing:1,align:"center",children:(0,s.jsx)(a.E,{fontSize:"xs",color:"gray.500",css:{textWrap:"balance"},children:n&&g?(0,s.jsx)(nG,{site:n}):d?(0,s.jsx)(m.x6,{id:"N4VTXP"}):(0,s.jsx)(m.x6,{id:"39MFjF",values:{GAMMA_PROPER_NOUN:ev.On}})})})})]})]})}),(0,s.jsx)(c.az,{children:(0,s.jsx)(X.Tz,{label:j,placement:"top",shouldWrapChildren:!0,children:(0,s.jsx)(i8,{isChecked:d,isDisabled:f,isLoading:t,onChange:i})})})]}):null},ri=e=>{var t,n;let{doc:i}=e,{isOpen:r,onClose:l,onOpen:a}=(0,nz.E)({id:"SiteSettingsDrawer"}),d=(0,nk.d)(),c=(0,I.jL)(),u=(0,I.GV)(ts.Gd),h=(0,I.GV)(ts.df),{editor:x}=(0,t5.mi)(),{currentWorkspace:p}=(0,er.ur)(),[f,g]=(0,y.useState)(!1),[j]=(0,nC.Ybb)(),[v]=(0,nC.yqC)(),[b]=(0,nC.Xcb)(),[C]=(0,nC.LTv)(),[w,E]=(0,y.useState)("domains"),k=i.id,S=i.title,T=null==p?void 0:p.id,A=null==i?void 0:null===(t=i.theme)||void 0===t?void 0:t.id,R=!1==!!i.site?null:(null===(n=i.site)||void 0===n?void 0:n.enabled)?"enabled":"disabled",_=!!u,O=(null==u?void 0:u.archived)?(0,s.jsx)(m.x6,{id:"jxz7x1",values:{GAMMA_PROPER_NOUN:ev.On}}):null,{query:D}=(0,e9.useRouter)();(0,z.o)("showDomains"),(0,y.useEffect)(()=>{let e=nU.R.on("openSiteSettings",e=>{E(e),a()});return()=>{e()}},[a]),(0,y.useEffect)(()=>{"true"===D.showDomains&&nU.R.emit("openSiteSettings","domains")},[D.showDomains]);let P=(0,y.useCallback)(async()=>{if(T){g(!0),C({variables:{id:k,themeId:null}});try{await j({variables:{input:{workspaceId:T,name:S,themeId:A,routes:[{docId:k,path:"/"}]}},refetchQueries:["GetDoc"]}).then(e=>{let{data:t}=e;(0,ts.wC)(c)({site:null==t?void 0:t.createSite,docId:k})})}catch(e){console.error("[WebsiteSettingsModal] Failed to create site",e.message),d({title:(0,s.jsx)(m.x6,{id:"Pdboh4"}),description:(0,s.jsx)(m.x6,{id:"8wxFbh"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{g(!1)}}},[j,c,k,S,A,d,C,T]),L=(0,y.useCallback)(async()=>{if(h){g(!0);try{await v({variables:{id:h},update:(e,t)=>{let{data:n}=t;e.updateQuery({query:nC.iVk,variables:{id:k}},e=>e&&e.doc?{...e,doc:{...e.doc,site:null==n?void 0:n.disableSite}}:e)}})}catch(e){console.error("[WebsiteSettingsModal] Failed to deactivate site",e.message),d({title:(0,s.jsx)(m.x6,{id:"ksq4sM"}),description:(0,s.jsx)(m.x6,{id:"VE0YVl"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{g(!1)}}},[v,k,h,d]),N=(0,y.useCallback)(async()=>{if(h){g(!0);try{await b({variables:{id:h},update:(e,t)=>{let{data:n}=t;e.updateQuery({query:nC.iVk,variables:{id:k}},e=>e&&e.doc?{...e,doc:{...e.doc,site:null==n?void 0:n.enableSite}}:e)}})}catch(e){console.error("[WebsiteSettingsModal] Failed to re-activate site",e.message),d({title:(0,s.jsx)(m.x6,{id:"aQnYTJ"}),description:(0,s.jsx)(m.x6,{id:"E2sPQM"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{g(!1)}}},[k,b,h,d]),M=(0,y.useCallback)(()=>{null===R?P():"enabled"===R?L():"disabled"===R&&N()},[P,L,N,R]);return(0,s.jsx)(X.L8,{isDark:!1,children:(0,s.jsx)(nS._,{isOpen:r,onClose:l,size:"md",trapFocus:!1,blockScrollOnMount:!1,children:(0,s.jsxs)(nI.z,{p:0,shadow:"xl",children:[(0,s.jsx)(nT.r,{children:(0,s.jsx)(m.x6,{id:"WtsmDd"})}),(0,s.jsx)(nA.s,{}),(0,s.jsxs)(nR.c,{children:[(0,s.jsxs)(tI.T,{spacing:4,align:"stretch",children:[(0,s.jsx)(rn,{isLoading:f,site:u,doc:i,onChange:M,disabledText:O}),_&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nB,{context:"settings"}),(0,s.jsx)(n_.c,{}),"disabled"===R&&(0,s.jsxs)(nO.F,{status:"warning",mb:6,children:[(0,s.jsx)(nD._,{}),(0,s.jsx)(m.x6,{id:"CHu+l0"})]}),(0,s.jsxs)(o.s,{direction:"column",children:[(0,s.jsx)(iY,{selectedPanel:w,setSelectedPanel:E}),"website"===w?(0,s.jsx)(iW,{showHeadings:!1,doc:i}):"domains"===w?(0,s.jsx)(iT,{showHeadings:!1}):"code"===w?(0,s.jsx)(iJ,{editor:x}):null]})]})]}),!u&&(0,s.jsx)(i6,{onEnable:M,isLoading:f})]})]})})})};var rr=n(79967),rs=n(31889);let ro="onboarding-checklist-popover-content";var rl=n(25676);let ra=e=>{let{item:t,itemKey:n,onButtonClick:i}=e,r=(0,B.dU)("gray.800","gray.200"),o=(0,B.dU)("gray.500","gray.400"),c=(0,B.dU)("gray.400","gray.300"),u=(0,y.useCallback)(()=>{(0,Z.v)(tK.VV.ONBOARDING_CHECKLIST_WIDGET_ITEM_LEARN_MORE_CLICKED,{item:n})},[n]);return(0,s.jsx)(H.e,{overflowY:"auto","data-id":"onboarding-checklist-item-detail",sx:{kbd:{color:"gray.800"}},children:(0,s.jsxs)(l.B,{spacing:4,py:2,children:[(0,s.jsx)(rl.g,{ratio:16/9,children:(0,s.jsxs)("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,controls:!0,children:[(0,s.jsx)("source",{src:t.mp4}),(0,s.jsx)("source",{src:t.webm})]})}),(0,s.jsxs)(l.B,{children:[(0,s.jsx)(q.D,{size:"md",fontWeight:"bold",children:t.title}),(0,s.jsxs)(a.E,{fontSize:"sm",color:r,children:[t.detail&&t.detail,t.learnMoreLink&&(0,s.jsxs)(s.Fragment,{children:[" ",(0,s.jsxs)(n5.N,{href:t.learnMoreLink,isExternal:!0,display:"inline-block",alignItems:"center",color:o,textDecoration:"underline",_hover:{color:c},verticalAlign:"text-top",fontSize:"xs",onClick:u,children:[(0,s.jsx)(m.x6,{id:"zwWKhA"})," ",(0,s.jsx)(iL.p,{})]})]})]})]}),(0,s.jsx)(d.$,{variant:"solid",onClick:i,size:"sm",id:"completeButton",children:(0,s.jsx)(m.x6,{id:"76gPWk"})})]})})};var rd=n(32351);let rc=e=>{let{item:t,onClick:n,itemKey:i,isCompleted:r,showPointer:o}=e,u=(0,B.dU)("gray.800","white"),p=(0,B.dU)("gray.600","gray.400"),m=(0,B.dU)("blackAlpha.50","blackAlpha.100"),f=(0,B.dU)("gray.400","gray.600"),g=r?f:u,j=(0,B.dU)("trueblue.50","trueblue.50"),v=(0,ee.fW)();return(0,s.jsx)(d.$,{w:"100%",py:.5,variant:"link",alignItems:"flex-start",justifyContent:"flex-start",onClick:e=>{e.stopPropagation(),n()},id:"checklist-item-".concat(i),textDecoration:"none",color:g,_hover:{textDecoration:"none",color:p,bgColor:m},fontSize:"sm",fontWeight:"medium",css:{"--checklist-item-highlight-color":j},className:r?"highlight-animation":"",whiteSpace:"normal",textAlign:"start",children:(0,s.jsxs)(l.B,{direction:"row",alignItems:"flex-start",spacing:2,w:"100%",position:"relative",children:[(0,s.jsx)(c.az,{w:"fit-content",color:r?f:g,children:r?(0,s.jsx)(x.g,{icon:h.e68,fixedWidth:!0}):(0,s.jsx)(x.g,{icon:h.Nfw,fixedWidth:!0})}),(0,s.jsxs)(c.az,{children:[(0,s.jsx)(a.E,{pos:"relative",lineHeight:"1.5",display:"inline",...r?{background:"linear-gradient(currentColor, currentColor)",backgroundRepeat:"no-repeat",textDecoration:"none",backgroundPosition:"0% 50%",backgroundSize:"100% 2px",className:"strike-animation ".concat(v?"strike-animation-rtl":"")}:{},children:t.title}),o&&(0,s.jsx)(c.az,{display:"inline-block",position:"absolute",marginInlineStart:2,className:v?"pointer-animation-rtl":"pointer-animation-ltr",lineHeight:0,fontSize:"2xl",bottom:"10px",children:(0,s.jsx)("span",{role:"img","aria-label":"show me how",children:v?"\uD83D\uDC49":"\uD83D\uDC48"})})]})]})})},ru=e=>{let{onMinimizeClick:t,onListItemClick:n,completedSteps:i,steps:r}=e,{progress:o,stepCount:d,totalSteps:u}=ew(),h=(0,B.dU)("gray.400","gray.600"),p=(0,B.dU)("blackAlpha","whiteAlpha");return(0,s.jsxs)(c.az,{children:[(0,s.jsx)(c.az,{position:"absolute",top:1,insetInlineEnd:2,zIndex:3,children:(0,s.jsx)(J.K,{variant:"ghost",color:"currentColor",colorScheme:p,isRound:!1,size:"xs",icon:(0,s.jsx)(x.g,{icon:tA.AJu,fixedWidth:!0}),"aria-label":"Minimize",onClick:t})},"onboarding-checklist-popover-minimize-button"),(0,s.jsx)(rd.D,{border:"0 none",children:(0,s.jsxs)(l.B,{spacing:2,children:[(0,s.jsxs)(l.B,{direction:"row",alignItems:"baseline",justifyContent:"flex-start",children:[(0,s.jsx)(q.D,{size:"sm",fontWeight:"bold",children:(0,s.jsx)(m.x6,{id:"ZDIydz"})}),(0,s.jsx)(a.E,{fontSize:"xs",color:h,children:(0,s.jsx)(m.x6,{id:"llY0P5",values:{totalSteps:u,0:String(d)}})})]}),(0,s.jsx)(eh.k,{size:"sm",colorScheme:"green",value:o,isAnimated:!0,borderRadius:"full"})]})}),(0,s.jsx)(H.e,{children:(0,s.jsx)(l.B,{spacing:4,w:"100%",children:(0,s.jsx)(l.B,{spacing:1,w:"100%",children:r.map(e=>{let[t,r]=e,o=i[t],l=Object.entries(i).find(e=>{let[t,n]=e;return!n}),a=l&&l[0]===t;return(0,s.jsx)(rc,{item:r,onClick:()=>{n(t)},itemKey:t,isCompleted:o,showPointer:a},t)})})})})]})};n(50405);let rh=ey(),rx=e=>{let{onEditClick:t}=e,[n,i]=(0,em.M)(ef.E.onboardingChecklistSteps,eb),r=(0,ei.rd)(),o=(0,y.useMemo)(()=>Object.entries(rh),[]),u=(0,ee.fW)(),{isOpen:h,onOpen:x,onClose:p,onToggle:f}=(0,eP.j)({id:"onboarding-checklist-popover"}),{isOpen:g,onOpen:j,onClose:v}=(0,eP.j)({id:"attached-helper-popover"}),[b,C]=(0,y.useState)(null),w=null!==b&&rh[b]||null,{rectAttrs:E}=el({selector:null==w?void 0:w.maskSelector}),{rectAttrs:k}=el({selector:'[data-id="'.concat(eE,'"]')}),S=E||k,I=(0,y.useCallback)(async e=>{"addMedia"===e&&(_.R.emit("bringInsertWidgetToFront",{inFront:!0}),await new Promise(e=>setTimeout(e,500))),(0,Z.v)(tK.VV.ONBOARDING_CHECKLIST_WIDGET_ITEM_VIEWED,{item:e}),C(e);let t=rh[e];(null==t?void 0:t.actionBefore)&&t.actionBefore(),requestAnimationFrame(()=>{j()})},[j]),T=(0,y.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"btn";b&&((0,Z.v)(tK.VV.ONBOARDING_CHECKLIST_WIDGET_ITEM_COMPLETED,{item:b,method:e}),C(null),v(),i({...n,[b]:!0}),"addMedia"===b&&_.R.emit("bringInsertWidgetToFront",{inFront:!1}))},[n,v,b,i]),A=!!(g&&w),{reward:R}=(0,rs.bS)("confettiOriginator","confetti"),{reward:O}=(0,rs.bS)("checklist-item-createFirstGamma","confetti"),{isChecklistComplete:D}=ew();(0,y.useEffect)(()=>{D&&((0,Z.v)(tK.VV.ONBOARDING_CHECKLIST_WIDGET_COMPLETED),setTimeout(()=>{R()},500))},[D,R]),(0,y.useEffect)(()=>_.R.on("toggleOpen",e=>{let{behavior:t="toggle",skipTracking:n=!1}=e;if(!n){let e={open:tK.VV.ONBOARDING_CHECKLIST_WIDGET_OPENED,close:tK.VV.ONBOARDING_CHECKLIST_WIDGET_CLOSED,toggle:h?tK.VV.ONBOARDING_CHECKLIST_WIDGET_CLOSED:tK.VV.ONBOARDING_CHECKLIST_WIDGET_OPENED};(0,Z.v)(e[t])}({open:()=>{x(),D&&i(eb)},close:p,toggle:f})[t]()}),[D,h,p,x,f,i]),(0,y.useEffect)(()=>{_.R.emit("isInOnboardingChecklist",h)},[h]),(0,y.useEffect)(()=>{let e=document.querySelector('[data-id="'.concat(ro,'"]')),t=null==e?void 0:e.closest(".chakra-popover__popper");t&&(E?t.style.pointerEvents="none":t.style.pointerEvents="auto",b?t.style.zIndex="1":t.style.zIndex="".concat(e$.$.onboardingChecklist))},[b,E]);let z=(0,y.useCallback)(()=>{null!=w&&w.skipCompleteStepOnMaskClick||T("mask")},[T,w]);(0,y.useEffect)(()=>{h&&!n.createFirstGamma&&(i({...eb,createFirstGamma:!0}),(0,Z.v)(tK.VV.ONBOARDING_CHECKLIST_WIDGET_ITEM_COMPLETED,{item:"createFirstGamma",method:"auto"}),O())},[n.createFirstGamma,i,O,h]);let P=(0,y.useCallback)(()=>{(0,Z.v)(tK.VV.ONBOARDING_CHECKLIST_WIDGET_CLOSED),p()},[p]),L=ea(r),N=(0,B.dU)("gray.500","gray.400");return(0,s.jsxs)(X.L8,{isDark:r,children:[(0,s.jsxs)(G.A,{isOpen:h,placement:"top",gutter:8,children:[(0,s.jsx)(W.d,{children:(0,s.jsx)(ek,{})}),(0,s.jsx)(F.Z,{children:(0,s.jsx)(U.h,{"data-id":ro,marginInlineEnd:Q.uA,...L,children:D?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rr.q,{fontSize:"xxs",zIndex:3,onClick:p}),(0,s.jsxs)(l.B,{align:"center",justify:"flex-start",direction:"column",textAlign:"start",spacing:4,py:6,pb:4,px:4,children:[(0,s.jsxs)(l.B,{spacing:2,children:[(0,s.jsx)(q.D,{size:"lg",id:"confettiOriginator",children:(0,s.jsx)("span",{role:"img","aria-label":"confetti",children:"\uD83C\uDF89"})}),(0,s.jsx)(q.D,{size:"lg",variant:"fancy",textAlign:"start",children:(0,s.jsx)(m.x6,{id:"KQBnUP"})}),(0,s.jsx)(a.E,{fontSize:"sm",children:(0,s.jsx)(m.x6,{id:"hAMA9K",values:{GAMMA_PROPER_NOUN:ev.On}})})]}),(0,s.jsxs)(l.B,{flexDirection:"column",justifyContent:"center",alignContent:"center",spacing:2,w:"100%",children:[(0,s.jsx)(d.$,{as:n5.N,width:"100%",href:"/create",variant:"solid",target:"_blank",size:"sm",textDecoration:"none !important",onClick:()=>{(0,Z.v)(tK.VV.ONBOARDING_CHECKLIST_WIDGET_COMPLETION_MODAL_CTA_CLICKED,{cta:"create"})},children:(0,s.jsx)(m.x6,{id:"WudVHw"})}),(0,s.jsx)(d.$,{width:"100%",variant:"plain",size:"sm",onClick:()=>{(0,Z.v)(tK.VV.ONBOARDING_CHECKLIST_WIDGET_COMPLETION_MODAL_CTA_CLICKED,{cta:"edit"}),p(),t()},children:(0,s.jsx)(m.x6,{id:"bObOD4"})})]}),(0,s.jsx)(a.E,{fontSize:"xs",color:N,children:(0,s.jsx)(m.x6,{id:"sapBOc",components:{0:(0,s.jsx)(eg.u,{})}})})]})]}):(0,s.jsx)(ru,{onMinimizeClick:P,onListItemClick:I,completedSteps:n,steps:o})})})]}),(0,s.jsxs)(F.Z,{children:[(0,s.jsxs)(G.A,{strategy:"fixed",isOpen:A,lazyBehavior:"unmount",closeOnBlur:!1,placement:E?"end-start":"top",isLazy:!0,gutter:8,modifiers:[{name:"computeStyles",options:{gpuAcceleration:!1}},{name:"detectOverflow",phase:"beforeWrite",requiresIfExists:["offset"],enabled:!0,fn:e=>{let{state:t}=e,n=(0,$.A)(t,{boundary:"clippingParents"}),i=n.top>0||n.bottom>0||n.left>0||n.right>0,r=t.elements.popper.getBoundingClientRect();return(null==k?void 0:k.top)&&i&&(t.styles.popper={...t.styles.popper,right:u?"auto":"0px",top:"-".concat(8,"px"),left:u?"0px":"auto",bottom:"auto",transform:"translate3d(0px, ".concat(k.top-r.height,"px, 0px)"),marginInlineEnd:Q.uA}),t}}],children:[(0,s.jsx)(W.d,{children:(0,s.jsx)(c.az,{position:"absolute",pointerEvents:"none",top:"".concat(null==S?void 0:S.top,"px"),left:"".concat(null==S?void 0:S.left,"px"),width:"".concat(null==S?void 0:S.width,"px"),height:"".concat(null==S?void 0:S.height,"px")})}),w&&b&&A&&(0,s.jsx)(F.Z,{children:(0,s.jsx)(U.h,{w:"400px",...L,children:(0,s.jsx)(ra,{item:w,itemKey:b,onButtonClick:()=>{T("btn")}})})})]}),b&&(0,s.jsx)(ec,{selector:(null==w?void 0:w.maskSelector)||"",onClickTargetElement:z,rectAttrs:E||null,lockScroll:!0})]})]})};var rp=n(63341),rm=n(18528),rf=n(72821),rg=n(48310),rj=n(33473),rv=n(81575),rb=n(2940),ry=n.n(rb),rC=n(64162),rw=n(85888);let rE=ry()(()=>parseFloat(getComputedStyle(document.documentElement).fontSize)),rk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,{fontSize:t,defaultContentWidth:n}=(0,I.GV)(ep.Uu);return rS({zoomLevel:e,docSettingsFontSize:t,defaultContentWidth:n,viewportScaleFactor:(0,rC.t)(),theme:(0,I.GV)(ep.SJ)})},rS=e=>{let{docSettingsFontSize:t,defaultContentWidth:n,zoomLevel:i=1,viewportScaleFactor:r,theme:s}=e,o=(0,P.Xb)(),{cardWidthEms:l,baseFontSize:a}=(0,rw.S)({fontSize:t,contentWidth:n,theme:s,isMobileDevice:o});return r*a*rE()*i*l};var rI=n(95580),rT=n(69588);let rA={portrait:{max:1,min:.4},landscape:{max:1,min:.5}};function rR(e,t){var n;let i=e&&getComputedStyle(e).getPropertyValue(t);return i?parseInt(null===(n=i.match(/\d+/))||void 0===n?void 0:n[0],10):0}let r_=e=>{let{cardWrapperWidth:t,cardWrapperLeftPaddingNum:n,cardWrapperRightPaddingNum:i}=e;return t-n-i},rO=()=>{let{max:e,min:t}=rA[(0,I.GV)(ep.fX)||"landscape"]||rA.landscape;return{max:e,min:t}},rD=e=>{let{editor:t,editorWrapperDiv:n,aspectRatioValue:i}=e,r=(0,I.jL)(),s=(0,D.u)("doc-zoom"),{max:o,min:l}=rO(),a=(0,y.useCallback)(e=>{e<o&&e>l?r((0,ep.Ye)({zoomLevel:e})):e>=o?r((0,ep.Ye)({zoomLevel:o})):e<=l&&r((0,ep.Ye)({zoomLevel:l}))},[r,o,l]),d=(0,I.GV)((0,e1.lp)("left")),c=(0,I.GV)((0,e1.lp)("right")),u=(0,I.GV)(ep.yh),h=t&&(0,rI.jB)(t,0),x=rk(),p=(0,y.useCallback)(()=>{try{if(!n||!i||!s)return;document.body.classList.add(rT.Ur);let e=function(e,t){let n=null==e?void 0:e.querySelector(".card-wrapper"),i=rR(n,"padding-top"),r=rR(n,"padding-bottom"),s=null==n?void 0:n.clientWidth,o=rR(n,"padding-left"),l=rR(n,"padding-right");return{editorHeight:t.clientHeight,cardWrapperTopPaddingNum:i,cardWrapperBottomPaddingNum:r,cardWrapperWidth:s,cardWrapperLeftPaddingNum:o,cardWrapperRightPaddingNum:l}}(h,n);if(0===e.cardWrapperWidth)return;let t=r_(e),r=t/i,o=function(e){let{editorHeight:t,cardWrapperTopPaddingNum:n,cardWrapperBottomPaddingNum:i}=e;return t-n-i}(e);if(r-o>-10){let e=o*i,t=Math.round(e/x*100);a(t/100)}else{let e=Math.round(t/x*100);a(e/100)}requestAnimationFrame(()=>{document.body.classList.remove(rT.Ur)})}catch(e){iE.Cp(e),console.error(e)}},[n,i,s,h,x,a]);(0,y.useEffect)(()=>{u&&p()},[u,p]),(0,y.useEffect)(()=>{u&&tr()(p,200)()},[u,p,d,c]),(0,y.useEffect)(()=>(u&&window.addEventListener("resize",p),u||window.removeEventListener("resize",p),()=>{window.removeEventListener("resize",p)}),[p,u])},rz=[1.4,1.3,1.2,1.1,1,.9,.8,.7,.6,.5],rP=e=>{let{editor:t,editorWrapperDiv:n,aspectRatioValue:i}=e,r=(0,ei.rd)(),o=(0,I.jL)(),l=(0,I.GV)(ep.Uu),a=(0,S.u)("scaleToFit"),c=(0,I.GV)(ep.sA),u=(0,I.GV)(ep.We),h=(0,I.GV)(ep.yh),x=a&&l.scaleContentToFit;rD({editor:t,editorWrapperDiv:n,aspectRatioValue:i});let p=e=>{o((0,ep.Ye)({zoomLevel:e}))},m=e=>{o((0,ep.us)({enabled:e}))};return((0,y.useEffect)(()=>{let e="social"===c.formatType,t="fluid"!==l.cardDimensions&&"deck"===c.formatType;e||t||x?o((0,ep.us)({enabled:!0})):"fluid"===l.cardDimensions&&(o((0,ep.Ye)({zoomLevel:1})),o((0,ep.us)({enabled:!1})))},[o,c.formatType,l.cardDimensions,x]),x)?null:(0,s.jsx)(X.L8,{isDark:r,children:(0,s.jsxs)(rp.W,{children:[(0,s.jsx)(rm.I,{w:"fit-content",as:d.$,position:"relative",size:"xs",minWidth:"46px",maxW:"46px",borderRadius:"full",fontSize:"11px",px:"1",sx:{"font-variant-numeric":"tabular-nums"},children:"".concat(Math.round(100*u),"%")}),(0,s.jsx)(rf.c,{children:(0,s.jsxs)(rg.i,{value:h?"fit":"".concat(u),onChange:e=>{if("fit"===e){m(!0);return}p(parseFloat(e)),m(!1)},children:[rz.map(e=>(0,s.jsxs)(rj.k,{value:"".concat(e),children:[Math.round(100*e),"%"]},e)),"fluid"!==l.cardDimensions&&(0,s.jsx)(rv.N,{}),"fluid"!==l.cardDimensions&&(0,s.jsx)(rj.k,{value:"fit",children:f.Ru._({id:"u4iXQi"})})]})})]})})},rL=e=>{let{editor:t,editorWrapperDiv:n,aspectRatioValue:i}=e,r=(0,D.u)("doc-zoom");return(0,s.jsx)(eD.x,{zIndex:e$.$.bottomRightControls,children:(0,s.jsxs)(l.B,{direction:"column",alignItems:"flex-end",children:[r&&(0,s.jsx)(rP,{editor:t,editorWrapperDiv:n,aspectRatioValue:i}),(0,s.jsxs)(l.B,{direction:"row",children:[(0,s.jsx)(rx,{onEditClick:()=>{null==t||t.commands.focusDelayed()}}),(0,s.jsx)(ez.P,{showOnboardingChecklist:!0})]})]})})};var rN=n(34897),rM=n(69e3),rV=n(68228),rF=n(5377),rG=n(1771),rW=n(34185),rB=n(4588),rU=n(40408),rH=n(23051),rq=n(38684);let rK=y.createContext({enabled:!1,registerEditor:(e,t)=>{},getAllCards:()=>[],userMessage:"",setUserMessage:e=>{}});function rJ(){return(0,y.useContext)(rK)}let rY=e=>{let{children:t}=e,n=(0,y.useRef)(new Map),i=(0,y.useRef)(""),r=(0,y.useRef)((e,t)=>{n.current.set(e,t)}),o=(0,y.useRef)(()=>Array.from(n.current.values()).map(e=>{var t,n;return null===(n=e.state.doc.firstChild)||void 0===n?void 0:null===(t=n.content.toJSON())||void 0===t?void 0:t[0]}).filter(Boolean)),l=(0,y.useCallback)(e=>{i.current=e},[]);return(0,s.jsx)(rK.Provider,{value:{enabled:!0,registerEditor:r.current,getAllCards:o.current,userMessage:i.current,setUserMessage:l},children:t})};var rX=n(45214),r$=n(96742),rZ=n(76228);let rQ=e=>{let{cardId:t,onClick:n}=e,i=(0,I.GV)((0,rX.qw)(t)),r=(0,I.GV)(ep.SJ);return i?(0,s.jsxs)(l.B,{zIndex:1,mt:"4.5em",width:"180px",bg:"whiteAlpha.500",border:"1px solid",borderColor:"blackAlpha.300",borderRadius:"lg",p:4,sx:{"*":{"backdrop-filter":"none !important","-webkit-backdrop-filter":"none !important"}},children:[i.variants.map(e=>{if(!e)return null;let{label:o,card:l,id:a}=e;return(0,s.jsx)(r0,{theme:r,isSelected:i.selected===a,label:o,card:l,onClick:()=>{n({cardId:t,variationId:a})}},a)}),i.variants.length<2&&(0,s.jsx)(K.o,{children:(0,s.jsx)(t3.y,{})})]}):null},r0=e=>{let{label:t,card:n,theme:i,isSelected:r=!1,onClick:d=()=>{}}=e,c=(0,y.useMemo)(()=>(0,rF.createDocWithCards)({},[n]),[n]);return(0,s.jsxs)(l.B,{align:"start",children:[(0,s.jsx)(o.s,{borderRadius:"md",bg:"white",shadow:r?"outline":"md",overflow:"hidden",cursor:"pointer",_hover:{bg:"trueblue.50"},transitionProperty:"common",transitionDuration:"fast",onClick:d,children:(0,s.jsx)(o.s,{sx:rU.o,css:{"--editor-font-size":"0.15rem","--editor-width":"150px"},justifyContent:"center",alignItems:"top",pointerEvents:"none",children:(0,s.jsx)(rU.S,{content:c,theme:i,isThumbnail:!0})})}),(0,s.jsxs)(a.E,{fontSize:"sm",children:[r&&(0,s.jsx)(rZ.S,{boxSize:3,mr:2}),t]})]})},r1="ai-wizard-editor-root",r6=e=>{let{doc:t,cards:n,theme:i=(0,rW.N)()}=e,r=(0,rq.fS)(i),l=(0,rG.Mw)(i),a=(0,rq.FD)(r,l),d=(0,I.jL)(),{registerEditor:c}=rJ();return((0,y.useEffect)(()=>()=>{d((0,rX.cL)())},[d]),t)?(0,s.jsxs)(o.s,{bg:"gray.100",overflowY:"auto",overflowX:"hidden",justifyContent:"flex-start",alignContent:"center",alignItems:"center",alignSelf:"stretch",direction:"column",width:"100%",height:"100%",position:"relative",className:r1,...a,children:[(0,s.jsx)(rH.s,{}),n.map((e,n)=>{var i;let r=null===(i=e.attrs)||void 0===i?void 0:i.id;return r?(0,s.jsx)(r2,{doc:t,cardId:r,cardIndex:n,cardJSON:e,onCreate:e=>{c(r,e)}},r):null})]}):null},r2=e=>{let{cardId:t,cardIndex:n,cardJSON:i,doc:r,onCreate:l}=e,a=(0,I.jL)(),[d,c]=(0,y.useState)(null),{userMessage:u}=rJ(),h=(0,r$.F)({editor:d});(0,y.useEffect)(()=>{d&&h({doc:d.state.doc,cardId:t,message:u})},[h,d,t,n,u]);let x=(0,y.useMemo)(()=>(0,rF.createDocWithCards)({},[i]),[i]),p=(0,I.GV)((0,rX.vE)(t));(0,t$.Vg)(()=>{if(!d||!p)return;let e=(0,tj.W0)(d,t);e&&d.commands.command(t=>{let{tr:n}=t,i=rM.bP.fromJSON(d.schema,p.card);return n.replaceWith(e.pos,e.pos+e.node.nodeSize,i),!0})},[d,p,t],[p]);let m=(0,y.useCallback)(e=>{let{cardId:n,variationId:i}=e;d&&n===t&&a((0,rX.S6)({cardId:t,variantId:i}))},[a,d,t]);return(null==r?void 0:r.id)?(0,s.jsxs)(o.s,{className:"ai-variation-editor-".concat(t),alignItems:"flex-start",sx:rU.o,my:-8,children:[(0,s.jsx)(rQ,{cardId:t,onClick:m}),(0,s.jsx)(rB.b,{initialContent:x,onCreate:e=>{let{editor:t}=e;c(t),l(t)},doc:r,docId:r.id,scrollingParentSelector:".".concat(r1),readOnly:!0,isStatic:!0,animationsEnabled:!1,extensions:[],shouldSupportMenus:!1})]}):null},r5=e=>{let{isOpen:t,onClose:n,onOpen:i}=(0,nz.E)({id:"cardSuggestionDrawer"}),r=(0,I.GV)(ep.SJ),[o]=(0,y.useState)(()=>(0,rN.U1)({reducer:I.Ki}));return(0,s.jsx)(C.Kq,{store:o,children:(0,s.jsx)(r3,{...e,isOpen:t,onClose:n,onOpen:i,theme:r})})},r3=(i=e=>{let{doc:t,editor:n,theme:i,isOpen:r,onClose:o,onOpen:l}=e,[a,c]=(0,y.useState)([]),[u,h]=(0,y.useState)(null),{getAllCards:x,setUserMessage:p}=rJ(),f=(0,y.useCallback)(()=>{o(),c([]),h(null)},[o]),g=(0,y.useCallback)(()=>{if(f(),!n)return;let e={type:"document",content:x()};console.log("[handleConfirm] contentToUse",e);let t=1,i=n.state.doc.nodeSize-2,r=(0,tj.W0)(n,u);if(r){i=(t=r.pos)+r.node.nodeSize;let n=e.content.find(e=>{var t;return(null===(t=e.attrs)||void 0===t?void 0:t.id)===u});if(!n){console.warn("[handleConfirm] Count not find card to use");return}e=n}n.commands.command(r=>{let{tr:s}=r;return s.replaceRangeWith(t,i,rM.bP.fromJSON(n.schema,e)),!0})},[f,n,u,x]),j=(0,y.useCallback)(async(e,t,n)=>{l(),h(t),c(e.toJSON().content[0].content.filter(e=>{var n;return null===t||(null===(n=e.attrs)||void 0===n?void 0:n.id)===t})),p(n)},[l,p]);return(0,y.useEffect)(()=>{if(n)return rV.R.on("openSuggestionEditor",e=>{let{cardId:t,userMessage:i}=e;j(n.view.state.doc,t,i)})},[n,j]),(0,s.jsxs)(nS._,{placement:"bottom",onClose:o,isOpen:r,trapFocus:!0,isFullHeight:!0,children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nI.z,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,s.jsx)(nA.s,{zIndex:"10",backgroundColor:"white",mr:2,shadow:"md"}),(0,s.jsx)(nR.c,{p:0,h:"100%",children:a.length>0&&t?(0,s.jsx)(r6,{doc:t,cards:a,theme:i}):(0,s.jsx)(nH.Y,{})}),(0,s.jsx)(nQ.j,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,s.jsxs)(e7.e,{spacing:4,children:[(0,s.jsx)(d.$,{variant:"ghost",onClick:o,children:(0,s.jsx)(m.x6,{id:"dEgA5A"})}),(0,s.jsx)(d.$,{variant:"solid",onClick:g,children:(0,s.jsx)(m.x6,{id:"7VpPHA"})})]})})]})]})},(0,y.memo)(e=>(0,s.jsx)(rY,{children:(0,s.jsx)(i,{...e})})));var r4=n(9335),r8=n(45930),r7=n(78358),r9=n(37881),se=n(13166),st=n(11718);let sn=e=>{let{count:t,onClose:n,commentStatusFilter:i,setCommentStatusFilter:r}=e;return(0,s.jsxs)(o.s,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:16,tabIndex:0,outline:"none",children:[(0,s.jsx)(o.s,{flex:1,children:(0,s.jsxs)(e8.z,{spacing:4,children:[(0,s.jsx)(tO.N,{children:(0,s.jsx)(m.x6,{id:"eiUA4k",values:{count:t}})}),(0,s.jsxs)(rp.W,{closeOnSelect:!0,children:[(0,s.jsx)(rm.I,{as:d.$,size:"sm",rightIcon:(0,s.jsx)(st.D,{}),children:i===nC.EB6.Open?(0,s.jsx)(m.x6,{id:"dXB4UR"}):(0,s.jsx)(m.x6,{id:"jeFwPX"})}),(0,s.jsx)(rf.c,{zIndex:3,children:(0,s.jsxs)(rg.i,{defaultValue:i,title:f.Ru._({id:"0cVgUw"}),type:"radio",children:[(0,s.jsx)(rj.k,{onClick:()=>r(nC.EB6.Open),value:"open",children:(0,s.jsx)(m.x6,{id:"dXB4UR"})}),(0,s.jsx)(rj.k,{onClick:()=>r(nC.EB6.Closed),value:"closed",children:(0,s.jsx)(m.x6,{id:"jeFwPX"})})]})})]})]})}),(0,s.jsx)(tS.J,{onClick:n,"data-comment-feed-close-button":!0})]})};var si=n(39225),sr=n(79246),ss=n(6201);let so=e=>{let{user:t,editor:n}=e,[i,r]=(0,y.useState)(()=>{let e=(0,sr.tq)(n,nd.S5);return e&&e.length?e[0]:(0,sr.CD)(()=>nd.S5,n,"")});(0,y.useEffect)(()=>{if(i&&n)return()=>{var e,t;null===(e=(t=n.commands).createDraftComment)||void 0===e||e.call(t,i)}},[i,n]);let o=(0,ss.Zb)({draftComment:i,clearDraftComment(){var e,t,s,o;i&&(null===(s=(o=n.commands).removeDraftComments)||void 0===s||s.call(o,[i]));let l=(0,sr.CD)(()=>nd.S5,n,"");null===(e=(t=n.commands).createDraftComment)||void 0===e||e.call(t,l),r(l)},editor:n}),l=(0,y.useCallback)(e=>{let{editor:t}=e;r(e=>e?{...e,json:t.view.state.doc.toJSON(),text:t.view.state.doc.textContent}:e)},[]);return(0,s.jsx)(si.h,{draftComment:i,user:t,onCommentDraftUpdate:l,onCommentSave:o,commentIdToHighlight:null})},sl=()=>({today:f.Ru._({id:"ecUA8p"}),thisWeek:f.Ru._({id:"yByRxz"}),earlier:f.Ru._({id:"HPqZkW"})}),sa=e=>{var t;let{onClose:n,editor:i}=e,r=(0,I.GV)(ep.Jo),{isConnected:l}=(0,E.u)(),[a,d]=(0,y.useState)(nC.EB6.Open),u=null==r?void 0:r.comments,h=null==r?void 0:null===(t=r.comments)||void 0===t?void 0:t.filter(e=>e.status===a),x=(0,I.GV)(ep.wC),p=(0,er.Iy)("comment",r)&&l,{user:f}=(0,er.ur)(),g=(0,k.h6)(r,f),j=(0,y.useMemo)(()=>(0,se.WP)({items:h||[],sortBy:se.VJ,latestTimeGetterFn:se.wS}),[h]);return u&&r&&i?(0,s.jsxs)(o.s,{direction:"column",h:"100%",overflowX:"hidden",className:r8.V,w:"100%",children:[(0,s.jsx)(sn,{commentStatusFilter:a,setCommentStatusFilter:d,count:(null==h?void 0:h.length)||0,onClose:n}),(0,s.jsxs)(o.s,{direction:"column",className:"comments-list",flex:1,overflowY:"auto",tabIndex:0,outline:"none",children:[(0,s.jsx)(eK.r,{description:(0,s.jsx)(m.x6,{id:"pQvCbR"}),isConnected:l,mx:6}),g&&!f&&r&&(0,s.jsx)(r9.W,{doc:r,accessLink:g}),p&&(0,s.jsx)(c.az,{px:6,py:2,children:(0,s.jsx)(so,{user:f,editor:i})}),!(null==h?void 0:h.length)&&(0,s.jsx)(K.o,{p:6,children:(0,s.jsx)(iX.p,{size:"sm",title:"open"===a?(0,s.jsx)(m.x6,{id:"0Bm90s"}):(0,s.jsx)(m.x6,{id:"QnXc6h"}),description:(0,s.jsx)(m.x6,{id:"iB9OEi"})})}),Object.entries(j).filter(e=>{let[,t]=e;return t.length}).map(e=>{let[t,l]=e;return(0,s.jsxs)(o.s,{direction:"column",children:[(0,s.jsx)(X._x,{px:6,pt:4,pb:2,position:"sticky",top:-2,bg:"white",zIndex:2,children:sl()[t]}),(0,s.jsx)(o.s,{direction:"column",children:l.map(e=>(0,s.jsx)(r7.h,{instanceType:"feed",userCanComment:p,editor:i,comment:e,selfUser:f,docId:null==r?void 0:r.id,editorMode:x,onClose:n,isRootComment:!0,pt:6,px:6,pb:4},e.id))})]},t)})]})]}):null},sd=e=>{let{closePanel:t}=e,{editor:n}=(0,tk.m)();return(0,y.useEffect)(()=>{let e=e=>{let{open:n}=e;n&&t()};return r4.LF.on(r4.DN.POPUP_COMMENT_TOGGLED,e),()=>{r4.LF.on(r4.DN.POPUP_COMMENT_TOGGLED,e)}},[t]),(0,s.jsx)(t_.Z,{bgColor:"white","data-panelid":"comment-feed-panel",children:(0,s.jsx)(sa,{onClose:t,editor:n})})};sd.panelPosition="right",sd.panelName="comment-feed";let sc=()=>{let{togglePanel:e,isPanelOpen:t}=(0,eJ.ww)(sd);return{toggleCommentsPanel:e,isCommentsPanelOpen:t}};var su=n(12567),sh=n(83894),sx=n.n(sh),sp=n(53898),sm=n(33916);let sf=()=>{var e,t;let n=(0,I.GV)(ep.Jo),{user:i}=(0,il.ur)(),r=(0,il.Iy)("manage",n)&&!!i,s=null==n?void 0:null===(e=n.docGenerateInput)||void 0===e?void 0:e.docGeneration;if(n&&s&&(null===(t=n.createdBy)||void 0===t?void 0:t.id)===(null==i?void 0:i.id)&&r)return(0,L.o0)(s)};var sg=n(84607),sj=n(39761),sv=n(8723);let sb=e=>{let{onClose:t}=e;return(0,s.jsxs)(l.B,{flex:1,align:"center",justify:"center",p:6,spacing:6,children:[(0,s.jsx)(iA._,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/b4b04402416f4ec8b5c1dc24f4c2a3d6/optimized/Sal-Spaceship-Riding.png",px:12}),(0,s.jsx)(sv.q,{children:(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"jVQv+Q"})})}),(0,s.jsx)(d.$,{variant:"ghost",colorScheme:"blackAlpha",leftIcon:(0,s.jsx)(x.g,{icon:h.Jyw}),onClick:t,children:(0,s.jsx)(m.x6,{id:"pqZJT2"})})]})},sy=()=>(0,s.jsxs)(nO.F,{status:"warning",mt:12,minH:20,flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",borderRadius:"lg",borderWidth:"1px",children:[(0,s.jsx)(sg.X,{children:(0,s.jsx)(m.x6,{id:"rvbk/4"})}),(0,s.jsx)(sj.T,{children:(0,s.jsx)(m.x6,{id:"XNkIFY"})})]});var sC=n(63633),sw=n(81570);let sE="40px",sk=e=>{let{value:t,onChange:n,onSubmit:i,isLoading:r,editor:o,resetMessages:l}=e;(0,nx.lC)(o);let{selection:d,doc:c}=o.state,u=c.textBetween(d.from,d.to,"\n"),h=(0,eq.ez)("unlimited_credits"),p=(0,y.useRef)(null),[g,j]=(0,y.useState)(!1),v=d instanceof sw.nh,b=d instanceof sw.U3,C=v&&"card"===d.node.type.name,w=d.empty||C?f.Ru._({id:"XrfE9D"}):v?f.Ru._({id:"CsUli9"}):b&&u?f.Ru._({id:"+NPPZN",values:{0:function(e,t){return e.length>50?e.slice(0,50)+"...":e}(u,0)}}):f.Ru._({id:"/fY1js"}),E=(0,y.useCallback)(()=>{p.current&&(p.current.style.height=sE,p.current.style.height="".concat(p.current.scrollHeight,"px"))},[]);return(0,y.useEffect)(()=>(o.on("selectionUpdate",E),()=>{o.off("selectionUpdate",E)}),[o,E]),(0,y.useEffect)(()=>{g?E():setTimeout(()=>{j(!0),E()},400)},[g,w,E,t]),(0,s.jsxs)(e8.z,{align:"end",children:[(0,s.jsx)(iN.M,{size:"md",children:(0,s.jsx)(sC.T,{"data-gamma-child-tiptap-editor":!0,id:"ai-chat-input",h:sE,minH:sE,ref:p,resize:"none",maxH:g?32:sE,bg:"white",shadow:"md",autoFocus:!0,placeholder:w,value:t,onKeyPress:e=>{"Enter"!==e.key||!(t.length>0)||r||e.shiftKey||(e.preventDefault(),i())},onChange:e=>n(e.target.value),paddingInlineEnd:12})}),(0,s.jsx)(X.Tz,{placement:"top",label:(0,s.jsxs)(tI.T,{spacing:0,children:[(0,s.jsx)(m.x6,{id:"4k2VbT"}),!h&&(0,s.jsx)(a.E,{color:"gray.400",children:(0,s.jsx)(m.x6,{id:"jxCfNz",components:{0:(0,s.jsx)(tR.G,{type:"chatSuggestion",ml:0})}})}),(0,s.jsx)(X.iM,{shortcut:"Enter"})]}),children:(0,s.jsx)(J.K,{"aria-label":"Send message",isDisabled:!t||r,size:"sm",h:sE,w:sE,variant:"solid",icon:(0,s.jsx)(x.g,{icon:tA.fmP,fixedWidth:!0}),onClick:i})})]})};var sS=n(55369),sI=n(56897),sT=n(33e3);let sA=e=>{let{editor:t,scrollSelector:n,onClose:i}=e,[r,a]=(0,y.useState)(""),d=(0,D.u)("openAiStatus"),c=(0,I.jL)(),u=(0,et.O2)("editor"),p=(0,I.CU)(),f=(0,I.GV)(sI.Lt),g=(0,I.GV)(sI.Wp),[j,v]=(0,y.useState)(null),C=(0,y.useCallback)(()=>(0,sI.Lt)(p.getState()),[p]),w=(0,y.useCallback)(e=>{let t={timestamp:Date.now(),...e};c((0,sI.tj)({message:t}))},[c]),E=(0,y.useCallback)(()=>{c((0,sI.cL)())},[c]),{status:k,sendMessage:S}=(0,sT.g)({addMessage:w,getMessageHistory:C,editor:t});(0,y.useEffect)(()=>{let e=n&&document.querySelector(n);e&&requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight})},[n,f]);let T="idle"!==k;(0,y.useEffect)(()=>{if(!g.length||T)return;let{task:e,id:t}=g[0];!1===e.submit?a(e.message):S({message:e.message}),c((0,sI.nD)({id:t}))},[T,S,c,g]);let A=(0,y.useCallback)(()=>{if(!j||!t)return;let e=document.querySelector('[data-card-id="'.concat(j,'"]')),n=(0,et.cH)(e,100);null!=n&&n.yAxisInView||u.scrollElementIntoView({element:e})},[t,u,j]),R=(0,y.useCallback)(e=>{A(),S({message:e})},[A,S]),_=(0,y.useCallback)(()=>{R(r),a("")},[R,r]),O=(0,tH.tO)(_,"chatSuggestion",en.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT);(0,y.useEffect)(()=>{if(!t)return;let e=()=>{let e=(0,tF.hT)(t.state.doc,t.state.selection.from);e&&v(e.node.attrs.id)};return e(),t.on("selectionUpdate",e),()=>{t.off("selectionUpdate",e)}},[t]);let z=sf();return t?"DOWN"===d?(0,s.jsx)(sb,{onClose:i}):(0,s.jsxs)(o.s,{direction:"column",h:"100%",w:"100%",px:6,pb:2,children:["DEGRADED"===d&&(0,s.jsx)(sy,{}),(0,s.jsx)(sS.Mf,{scrollSelector:n,messages:f,editor:t,sendMessage:R,isLoading:T,onClose:i}),(0,s.jsxs)(l.B,{pos:"sticky",bottom:0,py:2,pt:4,bg:"gray.50",children:[(0,s.jsx)(sk,{editor:t,value:r,onChange:a,onSubmit:O,isLoading:T,resetMessages:E}),(0,s.jsx)(sm.f,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:en.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT})]}),(0,s.jsxs)(e7.e,{position:"absolute",top:1,insetInlineStart:4,variant:"ghost",colorScheme:"blackAlpha",children:[(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"5eg0kp"}),placement:"top",children:(0,s.jsx)(J.K,{color:"currentColor","aria-label":"reset-chat",icon:(0,s.jsx)(x.g,{icon:h.XAi}),onClick:E,isRound:!0})}),z&&(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"pC3anp",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}}),placement:"top",children:(0,s.jsx)(J.K,{color:"currentColor","aria-label":"source-prompt",icon:(0,s.jsx)(x.g,{icon:h.LjI}),as:b(),href:z,target:(0,P.sX)()?"_self":"_blank",isRound:!0})})]})]}):null},sR=e=>{let{onClose:t}=e;return(0,s.jsx)(o.s,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:8,tabIndex:0,outline:"none",position:"absolute",top:0,children:(0,s.jsx)(tS.J,{"data-design-partner-close-button":!0,position:"absolute",top:2,insetInlineEnd:6,zIndex:1,onClick:t})})},s_=sx()(async()=>(await n.e(269).then(n.bind(n,70269))).BuddyChatPane,{loadableGenerated:{webpack:()=>[70269]},ssr:!1}),sO="design-partner-panel-wrapper",sD=()=>{let{togglePanel:e,isPanelOpen:t}=(0,eJ.ww)(sz),{editor:n}=(0,tk.m)(),i=(0,D.u)("aiChat"),r=(0,I.jL)();(0,y.useEffect)(()=>()=>{r((0,sI.cL)())},[]);let s=(0,I.GV)(ep.nD);return(0,y.useEffect)(()=>{!s&&t&&e()},[s,t,e]),(0,y.useEffect)(()=>{var e,i;n&&(null===(e=(i=n.commands).setSalOpen)||void 0===e||e.call(i,t))},[n,t]),(0,y.useEffect)(()=>{if(i)return sp.R.on("toggle",t=>{let{config:n}=t;e(n)})},[e,i]),(0,y.useEffect)(()=>{if(i)return r4.LF.on("queueDesignPartnerTask",t=>{r((0,sI.UT)({task:t})),e({disableTransition:!1,override:"open"}),console.log("queueDesignPartnerTask",t)})},[r,i,e]),(0,y.useEffect)(()=>{if(!i||!s)return;let t=(0,su.Ay)("mod+shift+S");return eY.WC.on("keydown","DESIGN_PARTNER_PANEL",n=>!!t(n)&&(e(),!0))},[e,i,s]),{isDesignPartnerPanelOpen:t}},sz=e=>{let{closePanel:t}=e,{editor:n}=(0,tk.m)(),i=(0,D.u)("buddyEdit");return(0,y.useEffect)(()=>eY.WC.on("keydown","DESIGN_PARTNER_PANEL",e=>!!document.activeElement.closest('[data-panelid="design-partner-panel"]')&&"Escape"===e.key&&(t(),!0)),[t]),(0,s.jsx)(t_.Z,{bgColor:"gray.50","data-panelid":"design-partner-panel",borderInlineStartWidth:"1px",children:(0,s.jsxs)(o.s,{direction:"column",h:"100%",overflowY:"auto",overflowX:"hidden",className:"".concat(sO," buddy-scroll"),w:"100%",children:[i&&(0,s.jsx)(s_,{}),!i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sR,{onClose:t}),(0,s.jsx)(sA,{editor:n,scrollSelector:".".concat(sO),onClose:t})]})]})})};sz.panelPosition="right",sz.panelName="chat";let sP=e=>{let{disabled:t=!1,docId:n}=e;if(!t)return null;let i="https://metabase.internal.gamma.app/question/1558-workspace-lookup-by-id?org_id=none&doc_id=".concat(n);return(0,s.jsxs)(o.s,{direction:"row",bg:"red.500",color:"white",py:3,px:4,align:"center",fontSize:"sm",children:[(0,s.jsxs)(tI.T,{flex:"1",align:"start",spacing:0,children:[(0,s.jsxs)(a.E,{fontWeight:"bold",children:["This ",ev.TP," is disabled."]}),(0,s.jsx)(a.E,{opacity:"0.7",fontSize:"xs",children:"It is only visible to Gamma support personnel. For more information, check the admin site."})]}),(0,s.jsx)(d.$,{variant:"plain",size:"sm",mr:4,rightIcon:(0,s.jsx)(x.g,{icon:h.Ju_}),onClick:()=>{i&&window.open(i,"_blank")},children:"Admin page"})]})};var sL=n(27559),sN=n(87825),sM=n(78872),sV=n(21036),sF=n(79407),sG=n(29639),sW=n(52509),sB=n(44240),sU=n(55729),sH=n(14643),sq=n(50080);let sK=e=>{let{onGenerateSuccess:t}=e,[n,i]=(0,y.useState)("createWithAI"),[r,o]=(0,y.useState)([]),[l,a]=(0,y.useState)(void 0),d=(0,y.useMemo)(()=>({goToScreen:(e,t)=>{a(null==t?void 0:t.generateId),o(e=>[...e,n]),i(e)},navEnabled:"createGenerate"!==n,webpageOnly:!0,skipThemeStep:!0,onGenerateSuccess:t}),[n,t]),c=(0,y.useMemo)(()=>{switch(n){case"createWithAI":return sB.m;case"createImport":return sW.D;case"createPaste":return sU.b;case"promptEditor":return function(){return(0,s.jsx)(sH.y,{id:l,children:(0,s.jsx)(sF.V,{})})};case"createGenerate":return function(){return l?(0,s.jsx)(sH.y,{id:l,children:(0,s.jsx)(sG.r,{autosetLocale:!1})}):(0,s.jsx)(sG.r,{autosetLocale:!0})};default:throw Error("invalid page")}},[l,n]);return(0,s.jsx)(sq.lW.Provider,{value:d,children:(0,s.jsx)(c,{})})},sJ=e=>{let{isOpen:t,onClose:n}=e;return(0,s.jsx)(X.L8,{isDark:!1,children:(0,s.jsxs)(nS._,{isOpen:t,placement:"bottom",onClose:n,isFullHeight:!0,children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nI.z,{h:"calc(var(--100vh) - 24px)",p:0,children:[(0,s.jsx)(nA.s,{zIndex:"sticky"}),(0,s.jsx)(nR.c,{p:0,children:(0,s.jsx)(sK,{onGenerateSuccess:n})})]})]})})},sY=e=>{var t;let{doc:n}=e,i=(0,ei.rd)(),r=(0,nk.d)(),o=null==n?void 0:null===(t=n.accessLinks)||void 0===t?void 0:t[0],a=(0,y.useMemo)(()=>(0,L.LN)({docTitle:null==n?void 0:n.title,docId:null==n?void 0:n.id,token:null==o?void 0:o.token,absolute:!0}),[n,null==o?void 0:o.token]),{onCopy:c}=(0,sM.i)(a),u=(0,y.useCallback)(()=>{(0,sV.d)({docId:null==n?void 0:n.id,source:"docWizardFooter",type:"tokenUrl"}),c(),r({title:(0,s.jsx)(m.x6,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==n?void 0:n.id,c,r]),p=sf();return(0,s.jsxs)(l.B,{spacing:4,textAlign:"center",children:[(0,s.jsx)(q.D,{size:"md",children:(0,s.jsx)(m.x6,{id:"bB+DHs"})})," ",(0,s.jsx)(d.$,{as:b(),target:(0,P.sX)()?"_self":"_blank",variant:"solid",colorScheme:i?"blackAlpha":"whiteAlpha",leftIcon:(0,s.jsx)(x.g,{icon:h.QLR}),href:"/create",children:(0,s.jsx)(m.x6,{id:"xFxi2V"})}),p?(0,s.jsx)(d.$,{leftIcon:(0,s.jsx)(x.g,{icon:h.LjI}),variant:"plain",as:b(),target:(0,P.sX)()?"_self":"_blank",href:p,children:(0,s.jsx)(m.x6,{id:"550oRP"})}):(0,s.jsx)(d.$,{leftIcon:(0,s.jsx)(x.g,{icon:h.CQO}),variant:"plain",onClick:u,children:(0,s.jsx)(m.x6,{id:"RGCCrg"})})]})},sX=()=>{let{isOpen:e,onClose:t,onOpen:n}=(0,nz.E)({id:"add-page-ai-modal"}),i=(0,I.GV)(ts.Gd),r=(0,ta.dv)(i),{publishSite:o,isPublishing:a}=nV({site:i}),c=(0,ei.rd)();return(0,s.jsxs)(l.B,{spacing:4,textAlign:"center",children:[(0,s.jsx)(q.D,{size:"md",children:(0,s.jsx)(m.x6,{id:"bB+DHs"})}),(0,s.jsx)(d.$,{variant:"solid",colorScheme:c?"blackAlpha":"whiteAlpha",leftIcon:(0,s.jsx)(x.g,{icon:h.QLR}),onClick:n,children:(0,s.jsx)(m.x6,{id:"K3193W"})}),r&&(0,s.jsx)(d.$,{leftIcon:(0,s.jsx)(x.g,{icon:h.MNJ}),variant:"plain",onClick:o,isLoading:a,children:(0,s.jsx)(m.x6,{id:"2uGo/E"})}),(0,s.jsx)(sJ,{isOpen:e,onClose:t})]})},s$=()=>(0,s.jsx)(l.B,{spacing:4,textAlign:"center",children:(0,s.jsx)(q.D,{size:"md",children:(0,s.jsx)(m.x6,{id:"tL6yYg",values:{GAMMA_PROPER_NOUN:ev.On}})})}),sZ=e=>{var t,n;let{doc:i}=e,r=null==i?void 0:null===(n=i.docGenerateInput)||void 0===n?void 0:null===(t=n.docGeneration)||void 0===t?void 0:t.generationType;return i?r===nC.xbH.UploadPptV2?(0,s.jsx)(s$,{}):i.site?i.site&&!(0,P.Xb)()?(0,s.jsx)(sX,{}):null:(0,s.jsx)(sY,{doc:i}):null};var sQ=n(75857),s0=n.n(sQ),s1=n(87809),s6=n.n(s1),s2=n(30938),s5=n.n(s2),s3=n(91656);let s4=[{key:"content_quality",category:"content",label:(0,s.jsx)(m.x6,{id:"geq9gH"})},{key:"missing_content",category:"content",label:(0,s.jsx)(m.x6,{id:"n4zPFX"})},{key:"wrong_language",category:"content",label:(0,s.jsx)(m.x6,{id:"R2Ly6h"})},{key:"amount_of_text",category:"content",label:(0,s.jsx)(m.x6,{id:"pi+Tez"})},{key:"inaccurate_content",category:"content",label:(0,s.jsx)(m.x6,{id:"Qk+SyG"})},{key:"image_quality",category:"image",label:(0,s.jsx)(m.x6,{id:"ESjmDR"})},{key:"number_of_images",category:"image",label:(0,s.jsx)(m.x6,{id:"x6yr/9"})},{key:"layouts_and_templates",category:"layout",label:(0,s.jsx)(m.x6,{id:"5yz5Kl"})},{key:"theme_styling",category:"layout",label:(0,s.jsx)(m.x6,{id:"nTZNkL"})}],s8={key:"other",category:"other",label:(0,s.jsx)(m.x6,{id:"/IX/7x"})},s7=[{key:"missing_content",category:"content",label:(0,s.jsx)(m.x6,{id:"n4zPFX"})},{key:"inaccurate_content",category:"content",label:(0,s.jsx)(m.x6,{id:"04mUQ2"})},{key:"missing_images",category:"image",label:(0,s.jsx)(m.x6,{id:"CLDdsj"})},{key:"image_quality",category:"image",label:(0,s.jsx)(m.x6,{id:"ESjmDR"})},{key:"wrong-layout",category:"layout",label:(0,s.jsx)(m.x6,{id:"x2M7iY"})},{key:"colors-fonts",category:"layout",label:(0,s.jsx)(m.x6,{id:"nTZNkL"})},{key:"animations",category:"animations",label:(0,s.jsx)(m.x6,{id:"HgWdP3"})},{key:"import_speed",category:"performance",label:(0,s.jsx)(m.x6,{id:"YJPN3F"})},{key:"too-similar",category:"layout",label:(0,s.jsx)(m.x6,{id:"R5upbf"})}],s9=e=>{let{docId:t,isDark:n,generationType:i,interactionId:r}=e,o=(0,y.useMemo)(()=>{let e=i===nC.xbH.UploadPptV2?s7:s4;return s0()(s5()(s6()(s5()(e),"category"))).concat([s8])},[i]),l=(0,y.useCallback)(e=>{(0,tU.xN)({rating:e,doc_id:t,interactionId:r,generationType:i})},[t,i,r]),a=(0,y.useCallback)((e,n,s)=>{(0,tU.EQ)({feedback:n,tags:s,rating:e,doc_id:t,generationType:i,interactionId:r})},[t,i,r]);return(0,s.jsx)(s3.No,{feedbackTags:o,trackRating:l,trackFeedback:a,isDark:n})};var oe=n(79690),ot=n(59774),on=n(83479),oi=n(43125);let or=e=>{let[t]=(0,y.useState)(()=>(0,L.sF)()[e]);return(0,y.useEffect)(()=>{setTimeout(()=>{(0,on.g5)({query:{...(0,L.sF)(),[e]:void 0},emitChange:!1})})},[]),t},os=e=>{var t,n,i,r;let{editor:s}=e,o=s&&null!==(i=null===(t=(0,oi.lI)(s))||void 0===t?void 0:t.generateInfo)&&void 0!==i?i:{},l=or("source"),a=(0,I.GV)((0,ex.A0)(null==s?void 0:s.gammaDocId)),d=null,{user:c}=(0,er.ur)(),u=null==c?void 0:null===(n=c.settings)||void 0===n?void 0:n.needsEditorOnboarding;return(0,y.useEffect)(()=>{u&&l===ot.MH&&V.emit("triggerOnboarding",{reason:"aiGenerate"})},[u,l]),l===ot.MH?a&&("complete"===a.status||"error"===a.status)&&(d=a.id):l===oe.p&&(d=null!==(r=o.interactionId)&&void 0!==r?r:null),{interactionId:d}},oo=(0,y.memo)(e=>{var t,n;let{interactionId:i}=e,r=(0,I.GV)(nm.Jo),a=(0,D.u)("insertWidgetBottom"),c=(0,ei.rd)(),u=null==r?void 0:null===(n=r.docGenerateInput)||void 0===n?void 0:null===(t=n.docGeneration)||void 0===t?void 0:t.generationType,h=a?sN.PX:sN.C9,[x,p]=(0,y.useState)(!1),f=(0,y.useCallback)(()=>{p(!0)},[]),g=c?{background:"gray.900",color:"white",borderTop:"2px solid var(--chakra-colors-whiteAlpha-200)"}:{background:"white",color:void 0,borderTop:"2px solid var(--chakra-colors-blackAlpha-200)"};return r?(0,s.jsx)(X.L8,{isDark:c,children:(0,s.jsx)(o.s,{className:"chakra-dont-set-collapse","data-doc-wizard-footer":!0,w:"100%",mt:(0,P.Xb)()?void 0:"-".concat(h),children:(0,s.jsx)(sL.S,{in:!x,style:{width:"100%"},unmountOnExit:!0,children:(0,s.jsx)(o.s,{pt:[10,10,20],pb:[4,4,8],w:"100%",position:"relative",...g,children:(0,s.jsx)(nP.m,{maxW:"450px",children:(0,s.jsxs)(l.B,{spacing:8,children:[(0,s.jsx)(sZ,{doc:r}),(0,s.jsx)(s9,{docId:r.id,isDark:c,interactionId:i,generationType:u}),(0,s.jsx)(K.o,{pt:[0,0,4],w:"100%",children:(0,s.jsx)(d.$,{size:"sm",onClick:f,variant:"text",colorScheme:"blackAlpha",children:(0,s.jsx)(m.x6,{id:"vLyv1R"})})})]})})})})})}):null});oo.displayName="DocWizardFooterInner";let ol=e=>{let{editor:t}=e,{interactionId:n}=os({editor:t});return n?(0,s.jsx)(oo,{interactionId:n}):null};var oa=n(82451),od=n.n(oa),oc=n(36506);let ou=e=>{let{onCloneClick:t,onSignupClick:n,isLoggedIn:i}=e;return(0,s.jsx)(c.az,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",display:"column",p:4,position:"relative",children:i?(0,s.jsxs)(e8.z,{children:[(0,s.jsxs)(a.E,{mr:1,children:[(0,s.jsx)(m.x6,{id:"HMsJrS",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP},components:{0:(0,s.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,s.jsx)(d.$,{variant:"solid",onClick:t,children:(0,s.jsx)(m.x6,{id:"he3ygx"})})]}):(0,s.jsxs)(e8.z,{children:[(0,s.jsxs)(a.E,{mr:1,children:[(0,s.jsx)(m.x6,{id:"FEyEJk",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP,GAMMA_PROPER_NOUN:ev.On},components:{0:(0,s.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,s.jsx)(b(),{href:"/signup",passHref:!0,legacyBehavior:!0,children:(0,s.jsx)(d.$,{as:n5.N,onClick:n,variant:"solid",textDecoration:"none !important",children:(0,s.jsx)(m.x6,{id:"e+RpCP"})})})]})})},oh=e=>{let t=!(0,P.Xb)(),{user:n}=(0,er.ur)(),i=(0,nk.d)(),r=(0,y.useRef)(),s=(0,oc.Z)(),o=(0,y.useCallback)(()=>{e&&(null===en.zS||void 0===en.zS||en.zS.track(en.VV.EXAMPLE_SIGNUP_CLICKED,{doc_id:e.id,title:e.title}))},[e]),l=(0,y.useCallback)(()=>{s({docId:null==e?void 0:e.id,docTitle:null==e?void 0:e.title,source:"example_deck_clone_toast"})},[e,s]);(0,y.useEffect)(()=>()=>{r.current&&i.close(r.current)},[i]);let a=t&&e,d=!!n;(0,t$.Vg)(()=>{r.current&&i.close(r.current),a&&(r.current=i({position:"bottom",render:()=>ou({onCloneClick:l,isLoggedIn:d,onSignupClick:o}),isClosable:!0,duration:null}))},[e,t,l,o,a,n,i,d],[a,d])};var ox=n(51183),op=n(43167),om=n(49637);let of="sessionId1",og=tm.YY.create({addStorage:()=>({user:{}}),addCommands(){return{user:e=>()=>{let t=(0,I.KA)();return this.storage.user=od()({},this.storage.user,e),t.dispatch((0,ep.vK)({sessionId:of})),t.dispatch((0,ep._)({collaborators:[this.storage.user]})),!0}}}}),oj=e=>{var t;let{docId:n,snapshotId:i,scrollingParentSelector:r,onCreate:l}=e,a=(0,I.GV)(nm.Jo);oh(a);let[d]=(0,y.useState)(()=>[t9.Q,op.Li.configure({scrollerSelector:r}),og,ox.wg]),{user:u,anonymousUser:h,isUserLoading:x,color:p}=(0,er.ur)(),[m,f]=(0,y.useState)(),{data:g,loading:j,error:v}=(0,nC.YDl)({variables:{docId:n,snapshotId:i},skip:!i});(0,y.useEffect)(()=>{!x&&m&&m.commands.user({id:(null==u?void 0:u.id)||h.id,color:p.value,sessionId:of,idleSince:null,name:(null==u?void 0:u.displayName)||h.displayName||"",profileImageUrl:(null==u?void 0:u.profileImageUrl)||"",isReady:!x})},[m,u,p,x,h]);let b=g&&void 0!==g.snapshot&&!j&&a;return(0,s.jsxs)(c.az,{"data-testid":"example-static-editor-wrapper",flex:"1",height:"100%",children:[!b||v?(0,s.jsxs)(o.s,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!b&&(0,s.jsx)(t3.y,{}),v&&(0,s.jsxs)(K.o,{h:"100%",children:["There was an error loading this ",ev.TP,":"," ",v.message]})]}):(0,s.jsx)(c.az,{"data-testid":"example-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:b?1:0,children:(0,s.jsx)(td.bw,{doc:a,editorId:"main",docId:n,extensions:d,onCreate:e=>{let{editor:t}=e;f(t),setTimeout(()=>{l&&l(t)},10)},readOnly:!0,initialContent:null===(t=g.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:r})}),(0,s.jsx)(om.d,{forceShow:!0,abuseReportingEnabled:!1})]})};var ov=n(33683),ob=n(20731),oy=n(48637);let oC=e=>{var t;let{onClose:n,isOpen:i,site:r}=e,{replace:c}=(0,e9.useRouter)(),u=(0,nk.d)(),[h,{data:x,loading:p}]=(0,nC.GBQ)(),f=null==x?void 0:null===(t=x.archiveSite)||void 0===t?void 0:t.archived,g=(0,y.useCallback)(async()=>{if(null==r?void 0:r.id)try{await h({variables:{id:null==r?void 0:r.id}}),n()}catch(e){console.error("[DeleteGammaModal] Failed to archive site",e.message),u({title:(0,s.jsx)(m.x6,{id:"aBvGpM"}),description:(0,s.jsx)(m.x6,{id:"DVB9Jq"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}},[h,null==r?void 0:r.id,u]);return((0,y.useEffect)(()=>{f&&(n(),c("/#sites"),u({title:(0,s.jsx)(m.x6,{id:"oGP1Fe"}),description:(0,s.jsx)(m.x6,{id:"sqh0jP"}),status:"success",duration:5e3,isClosable:!0,position:"top"}))},[f,n,c,u,r]),p||f)?(0,s.jsx)(F.Z,{children:(0,s.jsx)(o.s,{w:"100%",h:"100%",zIndex:"overlay",position:"absolute",top:"0",left:"0",background:"whiteAlpha.800",flex:1,children:(0,s.jsx)(nH.Y,{})})}):(0,s.jsxs)(nX.aF,{onClose:n,isOpen:i,size:"lg",children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nZ.$,{children:[(0,s.jsx)(nT.r,{children:(0,s.jsx)(m.x6,{id:"cw2uO1",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})}),(0,s.jsx)(nA.s,{isDisabled:p}),(0,s.jsx)(nR.c,{children:(0,s.jsxs)(l.B,{spacing:4,children:[(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"87gjhX",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})}),(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"tOGRxi",values:{0:(null==r?void 0:r.name)?'"'.concat(null==r?void 0:r.name,'"'):""}})}),(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"MluQ97",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:ev.Ix},components:{0:(0,s.jsx)(n5.N,{color:"trueblue.500",colorScheme:"trueblue",href:"/#trash",textDecoration:"underline",isExternal:!0}),1:(0,s.jsx)(iL.p,{mx:"2px"})}})})]})}),(0,s.jsx)(nQ.j,{children:(0,s.jsxs)(e7.e,{children:[(0,s.jsx)(d.$,{variant:"ghost",onClick:n,children:(0,s.jsx)(m.x6,{id:"dEgA5A"})}),(0,s.jsx)(d.$,{variant:"ghost",color:"red.600",onClick:g,isLoading:p,children:(0,s.jsx)(m.x6,{id:"cnGeoo"})})]})})]})]})},ow=e=>{let{site:t}=e,{isOpen:n,onOpen:i,onClose:r}=(0,eP.j)({id:"trash-site-modal"}),[o]=(0,nC.BL9)(),l=(0,nN.Gx)(),a=null==t?void 0:t.archived,d=(0,y.useCallback)(()=>{(null==t?void 0:t.id)&&o({variables:{id:t.id},optimisticResponse:{unarchiveSite:{id:t.id,__typename:"Site"}}})},[null==t?void 0:t.id,o]);return l&&t?a?(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:tA.ub2}),onClick:d,children:(0,s.jsx)(m.x6,{id:"yKu/3Y"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ov.D,{color:"red.500",icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:h.yLS}),onClick:()=>{i()},children:(0,s.jsx)(m.x6,{id:"NOLglc",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})}),n&&(0,s.jsx)(oC,{isOpen:n,onClose:r,site:t})]}):(0,s.jsx)(s.Fragment,{})},oE=e=>({[tv.w.DOC_VIEW]:{buttonLabel:"present"===e?(0,s.jsx)(m.x6,{id:"eZb+lw"}):(0,s.jsx)(m.x6,{id:"rdUucN"}),shortcutIcon:tA.ijD,shortcutKeys:(0,X.lp)("Mod+Enter"),shortcutLabel:"present"===e?(0,s.jsx)(m.x6,{id:"MF+p5R"}):(0,s.jsx)(m.x6,{id:"V76CPb"})},[tv.w.SLIDE_VIEW]:{buttonLabel:(0,s.jsx)(m.x6,{id:"ydzS9x"}),shortcutIcon:tA.APi,shortcutKeys:"Esc",shortcutLabel:(0,s.jsx)(m.x6,{id:"IkakN2"})},[tv.w.DOC_PREVIEW]:{buttonLabel:(0,s.jsx)(m.x6,{id:"ydzS9x"}),shortcutIcon:tA.APi,shortcutKeys:"Esc",shortcutLabel:(0,s.jsx)(m.x6,{id:"nN6ipi"})}});var ok=n(78141),oS=n(73524),oI=n(59025),oT=n(69646),oA=n(46896),oR=n(45864);let o_=(0,su.Ay)("mod+Enter"),oO=(0,su.Ay)("Esc"),oD=(0,su.Ay)("mod+Esc"),oz=(0,su.Ay)("shift+mod+Enter"),oP=e=>function(t){t((0,ep.mF)({attached:!1})),t((0,ep.iY)({mode:e}))},oL=(e,t)=>{let n=document.querySelector(t);if(!n)return;let i=n.getBoundingClientRect();e.commands.scrollToNodeWithPin(document.elementFromPoint(i.width/2,100),100)},oN=e=>{let{editorWrapperEl:t,scrollingParentSelector:n,forceToolbarShownBecauseOnboarding:i}=e,r=(0,I.jL)(),[s,o]=(0,y.useState)(!1),[l,a]=(0,y.useState)(!1),{editor:d}=(0,t5.mi)(),c=(0,I.GV)(ep.wC),u=(0,y.useRef)(c);(0,y.useEffect)(()=>{u.current=c},[c]);let h=(0,I.GV)(ep.Zi),x=(0,I.GV)(ep.QF),p=(0,I.GV)(oS.AO),m=(0,en.st)(),f=(0,y.useCallback)(e=>{d&&!d.isDestroyed&&(e===tv.w.SLIDE_VIEW?((0,oT.jL)(d.state.doc,r),(0,oA.Hy)(d,!1),d.commands.spotlightCurrentCard()):(d.commands.turnOffSpotlight(!0),oL(d,n)),r(oP(e)))},[r,d,n]),g=(0,y.useCallback)(()=>{try{var e,t,n,i;if(null===(e=document.body)||void 0===e?void 0:e.requestFullscreen){null===(n=document.body)||void 0===n||n.requestFullscreen();return}(null===(t=document.body)||void 0===t?void 0:t.webkitRequestFullscreen)&&(null===(i=document.body)||void 0===i||i.webkitRequestFullscreen())}catch(e){console.debug("[PresentBlock] Error entering fullscreen:",e)}},[]),j=(0,y.useCallback)(()=>{try{if(document.fullscreenElement){document.exitFullscreen();return}document.webkitCurrentFullScreenElement&&document.webkitExitFullscreen&&document.webkitExitFullscreen()}catch(e){console.debug("[PresentBlock] Error exiting fullscreen:",e)}},[]),v=(0,D.u)("realUserMetrics"),{recordExitSlideModePerformance:b,recordEnterSlideModePerformance:C}=(0,oI.td)(v),w=(0,y.useCallback)(e=>{let{fullscreen:t=!1,presentAction:n="present"}=e;u.current!==tv.w.SLIDE_VIEW&&(f("preview"===n?tv.w.DOC_PREVIEW:tv.w.SLIDE_VIEW),t&&g(),null==m||m.trackDocEvent(en.VV.PRESENT_MODE_ENTERED,{presentAction:n}),C({isFullscreen:t}),r((0,ep.Ye)({zoomLevel:1})),setTimeout(()=>{document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}))},[f,g,m,C,r]),E=(0,y.useCallback)(()=>{u.current!==tv.w.DOC_VIEW&&(f(tv.w.DOC_VIEW),s&&j(),i&&requestAnimationFrame(()=>{_.R.emit("toggleOpen",{behavior:"open",skipTracking:!0})}),null==m||m.trackDocEvent(en.VV.PRESENT_MODE_EXITED),b({isFullscreen:s}))},[f,s,j,b,u,m,i]);return(0,y.useEffect)(()=>{let e=()=>{null!==document.fullscreenElement||l||E(),null!==document.webkitCurrentFullScreenElement||l||E(),o(e=>!e),a(!1)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e)}},[l,E,j]),(0,ok.w)(()=>{d&&!d.isDestroyed&&c===tv.w.DOC_VIEW&&requestAnimationFrame(()=>{let e=d.state.selection;e instanceof oR.J&&d.commands.command(t=>{let{tr:n}=t;return n.setSelection(e.createSelectionNear()),!0})})},[d,c]),(0,y.useEffect)(()=>eY.WC.on("keydown","PRESENT_BLOCK",e=>{var t,n,i;let r=u.current===tv.w.SLIDE_VIEW,s=u.current===tv.w.DOC_VIEW;if(!p){if(o_(e)){if(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),w({fullscreen:!1}),!0}if(oz(e)){if(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),w({fullscreen:!0}),!0}if(oD(e)&&r)return E(),!0;if(oO(e)&&!s&&!h&&!x){if(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.closest("[data-gamma-child-tiptap-editor]"))return;return E(),!0}}}),[w,E,g,h,x,t,p]),{enterSlideView:w,exitSlideView:E,enterFullscreen:g,exitFullscreen:j,exitedFullscreenByClick:l,isFullscreen:s,setIsFullscreen:o,setExitedFullscreenByClick:a}},oM=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,i=(0,I.GV)(ep.wC),r=(0,D.u)("presentFullScreen"),{shortcutIcon:o,shortcutKeys:l,buttonLabel:a}=oE("present")[i],{enterSlideView:d,exitSlideView:c}=oN({editorWrapperEl:t,scrollingParentSelector:n});return(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:o,fixedWidth:!0}),command:l,onClick:()=>{i===tv.w.SLIDE_VIEW?c():d({fullscreen:r,presentAction:"present"})},children:a})};var oV=n(78776),oF=n(62230),oG=n(10628);let oW="gray.700",oB=e=>{let{error:t,refetch:n,...i}=e;return(0,s.jsx)(c.az,{px:6,py:4,...i,children:(0,s.jsxs)(nO.F,{p:6,status:"error",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,s.jsx)(nD._,{mr:0,boxSize:"30px",alignSelf:"center"}),(0,s.jsx)(sg.X,{mt:4,mb:2,fontSize:"md",children:(0,s.jsx)(m.x6,{id:"uNQm3r"})}),(0,s.jsx)(sj.T,{maxWidth:"md",children:t.message}),(0,s.jsx)(d.$,{mt:4,onClick:()=>n(),children:(0,s.jsx)(m.x6,{id:"6gRgw8"})})]})})};var oU=n(28478);let oH=()=>f.Ru._({id:"QbrUIo"}),oq=()=>f.Ru._({id:"FbBkvL"}),oK=e=>{let{isAnalyticsLoading:t,hasError:n,view:i,setView:r,description:l}=e;return n?(0,s.jsx)(nT.r,{children:(0,s.jsx)(m.x6,{id:"ZlwDi6"})}):(0,s.jsxs)(o.s,{direction:"column",flex:1,children:[(0,s.jsx)(nT.r,{children:t?(0,s.jsx)(oJ,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.x6,{id:"ZlwDi6"}),(0,s.jsxs)(tI.T,{align:"stretch",spacing:4,children:[(0,s.jsx)(a.E,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:l}),(0,s.jsxs)(oU.B,{children:[(0,s.jsx)(oU.Q,{children:(0,s.jsx)(d.$,{leftIcon:(0,s.jsx)(x.g,{icon:tA.q9c,"aria-label":oH()}),variant:"ghost",fontWeight:"600",bg:"deckView"===i?"trueblue.50":"transparent",color:"deckView"===i?"trueblue.500":oW,onClick:()=>r("deckView"),children:oH()})}),(0,s.jsx)(oU.Q,{children:(0,s.jsx)(d.$,{leftIcon:(0,s.jsx)(x.g,{icon:tA.Mkm,"aria-label":oq()}),variant:"ghost",fontWeight:"600",bg:"cardEngagement"===i?"trueblue.50":"transparent",color:"cardEngagement"===i?"trueblue.500":oW,onClick:()=>r("cardEngagement"),children:oq()})})]})]})]})}),(0,s.jsx)(nA.s,{})]})},oJ=()=>(0,s.jsxs)(tI.T,{align:"stretch",spacing:4,children:[(0,s.jsx)(oF.E,{h:12,width:"30%"}),(0,s.jsx)(oF.E,{h:4,width:"80%"})]});var oY=n(1602),oX=n.n(oY),o$=n(39402);let oZ=e=>{let{degree:t,alpha:n=1,startColor:i="#ECC94B",endColor:r="#38A169"}=e;if(Number.isNaN(t))return oX()("#e5e0df").toHex8String();let s=oX()(i).toHsl(),o=oX()(r).toHsl();return oX()({h:(0,o$.Cc)(s.h,o.h,t),s:(0,o$.Cc)(s.s,o.s,t),l:(0,o$.Cc)(s.l,o.l,t),a:n}).toHex8String()},oQ=(e,t)=>e.reduce((e,n)=>(e[n.cardId]=n[t],e),{}),o0=(e,t)=>{let n=0;for(let r in e){var i;n+=null!==(i=t[r])&&void 0!==i?i:0,n+=o0(e[r],t)}return n},o1=(e,t)=>{let n=0;for(let r in e){var i;n=Math.max((null!==(i=t[r])&&void 0!==i?i:0)+o0(e[r],t),n)}return n};var o6=n(39324),o2=n.n(o6);let o5=e=>{let{cardsViewed:t,totalCards:n}=e,i=oZ({degree:t/n}),r=n>0;return(0,s.jsxs)(e8.z,{spacing:3,children:[(0,s.jsxs)(o.s,{flex:1,position:"relative",children:[(0,s.jsx)(eh.k,{h:4,flex:1,borderRadius:"sm",value:t,max:r?n:void 0,bg:"gray.200",sx:{"> div":{bg:i}}}),r&&t===n&&(0,s.jsx)(o4,{top:0,right:0,transform:"translate(50%,-50%)",position:"absolute"})]}),(0,s.jsx)(a.E,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",children:r?"".concat(t,"/").concat(n):(0,s.jsx)(m.x6,{id:"8Va3Pt"})})]})},o3=e=>{let{cardCount:t}=e,n=(0,y.useMemo)(()=>o2()(1,t),[t]);return(0,s.jsxs)(e8.z,{spacing:3,filter:"blur(3px)",children:[(0,s.jsx)(o.s,{flex:1,position:"relative",children:(0,s.jsx)(eh.k,{h:4,flex:1,borderRadius:"sm",value:n,max:t,bg:"gray.300",sx:{"> div":{bg:"gray.300"}}})}),(0,s.jsxs)(a.E,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",color:"gray.600",children:[n,"/",t]})]})},o4=e=>{let{...t}=e;return(0,s.jsx)(c.jl,{bg:"green.500",size:"18px",border:"2px solid white",color:"white",...t,children:(0,s.jsx)(x.g,{icon:tA.e68,"aria-label":f.Ru._({id:"y886Ns"}),size:"xs"})})},o8=e=>t=>(0,o$.Cc)(0,100,t/e),o7=e=>{let{cards:t,isColorized:n=!1,scaleToMax:i=!1,includeChildren:r,showViewersPercent:o=!1,leftLabel:l,rightLabel:a,tooltipLabel:d,cardLookupTable:u,onAnalyticsPanelClose:h}=e,x=o8(r?o1(t,u):Math.max(...Object.values(u))),p=(0,y.useCallback)(e=>x(e),[x]);return(0,s.jsxs)(c.az,{mt:6,mb:4,children:[(0,s.jsxs)(e8.z,{mb:3,children:[(0,s.jsx)(e8.z,{children:(0,s.jsx)(X._x,{children:l})}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(e8.z,{children:(0,s.jsx)(X.Tz,{placement:"top",label:d,children:(0,s.jsx)(e8.z,{children:(0,s.jsx)(X._x,{borderBottom:"0.125em dashed",borderBottomColor:"gray.400",children:a})})})})]}),(0,s.jsx)(c.az,{width:"100%",children:Object.entries(t).map(e=>{var t;let[l,a]=e;return(0,s.jsx)(o9,{id:l,childCards:a,percentage:null!==(t=u[l])&&void 0!==t?t:0,calculatePercentageScale:p,isColorized:n,cardLookupTable:u,scaleToMax:i,includeChildren:r,showViewersPercent:o,onAnalyticsPanelClose:h},l)})})]})},o9=e=>{let{id:t,cardLookupTable:n,childCards:i,percentage:r,calculatePercentageScale:d,isColorized:u,scaleToMax:p,includeChildren:f,showViewersPercent:g,onAnalyticsPanelClose:j}=e,[v,b]=(0,y.useState)(!1),C=(0,y.useCallback)(()=>{b(!v)},[v]),{title:w}=(0,tL.d)({cardId:t}),E=Object.values(i).length>0,k=0===r,S=f?r+o0(i,n):r,I=v?S:0,T=p?d(S):Math.min(100,I),A=v?r:S,R=p?d(A):Math.min(100,A),_={startColor:"#F6AD55",endColor:"#68D391"},O=u?oZ({degree:T/100,..._}):"trueblue.50",D=u?oZ({degree:R/100,..._}):"trueblue.100";return(0,s.jsxs)(l.B,{children:[(0,s.jsx)(o.s,{direction:"column",children:(0,s.jsxs)(o.s,{h:8,px:2,bg:"gray.100",borderRadius:"md",position:"relative",overflow:"hidden",alignItems:"center",_focusWithin:{shadow:"outline"},children:[(0,s.jsxs)(e8.z,{pos:"absolute",zIndex:1,children:[E&&(0,s.jsx)(J.K,{"aria-label":"expand-card",size:"xs",variant:"ghost",isRound:!0,colorScheme:"blackAlpha",icon:(0,s.jsx)(x.g,{icon:h.XkK}),transform:v?"rotate(90deg)":"",onClick:C,_focus:{shadow:"none"}}),!E&&(0,s.jsx)(o.s,{w:6,justifyContent:"center",alignItems:"center",children:k?(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"s+PDNe"}),children:(0,s.jsx)(c.az,{color:"blackAlpha.500",children:(0,s.jsx)(x.g,{icon:tA.k6j,size:"sm"})})}):(0,s.jsx)(c.az,{color:"blackAlpha.300",fontSize:"xx-small",children:(0,s.jsx)(x.g,{icon:tA.ZPt,size:"sm"})})}),(0,s.jsx)(a.E,{color:k?"blackAlpha.500":void 0,noOfLines:1,children:w||(0,s.jsx)(m.x6,{id:"wja8aL"})})]}),(0,s.jsxs)(c.az,{position:"absolute",w:"100%",height:"100%",top:0,left:0,pointerEvents:"none",children:[(0,s.jsx)(c.az,{position:"absolute",h:"100%",bg:k?"blackAlpha.200":O,w:"".concat(T,"%")}),(0,s.jsx)(c.az,{transitionProperty:"all",transitionDuration:"normal",position:"absolute",h:"100%",bg:k?"blackAlpha.300":D,w:"".concat(R,"%")})]}),u&&100===r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tT.h,{}),(0,s.jsx)(o4,{alignSelf:"center",zIndex:1})]})]})}),(0,s.jsx)(c.az,{pl:8,children:E&&Object.entries(i).map(e=>{var t;let[i,r]=e;return(0,s.jsx)(sL.S,{in:v,children:(0,s.jsx)(o9,{id:i,childCards:r,percentage:null!==(t=n[i])&&void 0!==t?t:0,cardLookupTable:n,calculatePercentageScale:d,scaleToMax:p,isColorized:u,includeChildren:f,showViewersPercent:g,onAnalyticsPanelClose:j})},i)})})]})},le=()=>(0,s.jsx)(l.B,{spacing:2,children:(0,s.jsx)(m.x6,{id:"QXJTby",components:{0:(0,s.jsx)(a.E,{}),1:(0,s.jsx)(a.E,{}),2:(0,s.jsx)(a.E,{})}})}),lt=e=>{let{timeInMS:t}=e;return void 0===t?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(m.x6,{id:"yXHI9B",values:{timeInSeconds:t/1e3}})},ln=(e,t)=>"viewTimePercent"===e?{chartDescription:(0,s.jsx)(m.x6,{id:"dpTE1c",values:{viewerCount:t}}),leftLabel:(0,s.jsx)(m.x6,{id:"ml51m3"}),rightLabel:(0,s.jsx)(m.x6,{id:"8R7bfR"})}:{chartDescription:(0,s.jsx)(m.x6,{id:"b2VMTo",values:{viewerCount:t}}),leftLabel:(0,s.jsx)(m.x6,{id:"kTgCTO"}),rightLabel:(0,s.jsx)(m.x6,{id:"AKDcmS"})},li=e=>{let{docId:t,viewerFilter:n,currentViewerFilterCount:i,onAnalyticsPanelClose:r}=e,o=(0,I.CU)().getState(),l=(0,ep.Ev)(o),{data:a,error:u,loading:p,refetch:f}=(0,nC.NI5)({variables:{docId:t}}),[g,j]=(0,y.useState)("viewTimePercent"),{chartDescription:v,rightLabel:b,leftLabel:C}=ln(g,i),w="viewersOnly"===n?"viewers":"everyone",E=(0,D.u)("cardViewedThreshold"),k=(0,y.useMemo)(()=>{var e;return(null==a?void 0:null===(e=a.docCardsStats)||void 0===e?void 0:e[w])||[]},[null==a?void 0:a.docCardsStats,w]),S=(0,y.useMemo)(()=>oQ(k,g),[k,g]),T=(0,y.useCallback)(()=>j("viewTimePercent"),[]),A=(0,y.useCallback)(()=>j("viewersPercent"),[]);return(0,s.jsxs)(c.az,{children:[(0,s.jsxs)(e8.z,{my:4,children:[(0,s.jsx)(d.$,{leftIcon:(0,s.jsx)(x.g,{icon:h.a$,"aria-label":"Time spend"}),variant:"ghost",fontWeight:"600",bg:"viewTimePercent"===g?"trueblue.50":"transparent",color:"viewTimePercent"===g?"trueblue.500":oW,onClick:T,children:(0,s.jsx)(m.x6,{id:"XyvAeS"})}),(0,s.jsx)(d.$,{leftIcon:(0,s.jsx)(x.g,{icon:tA.Bi7,"aria-label":"Percent viewed"}),variant:"ghost",fontWeight:"600",bg:"viewersPercent"===g?"trueblue.50":"transparent",color:"viewersPercent"===g?"trueblue.500":oW,onClick:A,children:(0,s.jsx)(m.x6,{id:"vXtpAZ"})})]}),(0,s.jsx)(ls,{description:v}),u&&(0,s.jsx)(oB,{error:u,refetch:f}),p&&!u&&(0,s.jsx)(lr,{}),!p&&!u&&(0,s.jsx)(o7,{cards:l.tree,cardLookupTable:S,scaleToMax:"viewTimePercent"===g,isColorized:"viewersPercent"===g,includeChildren:"viewTimePercent"===g,showViewersPercent:"viewersPercent"===g,rightLabel:b,leftLabel:C,tooltipLabel:"viewTimePercent"===g?(0,s.jsx)(le,{}):(0,s.jsx)(lt,{timeInMS:E}),onAnalyticsPanelClose:r})]})},lr=e=>{let{includeDescription:t=!1}=e;return(0,s.jsx)(o.s,{direction:"column",mt:6,mb:4,children:(0,s.jsxs)(tI.T,{align:"stretch",children:[t&&(0,s.jsx)(oF.E,{h:5,mb:3,w:"70%"}),[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(oF.E,{h:8},t))]})})},ls=e=>{let{description:t}=e;return(0,s.jsx)(a.E,{color:oW,children:t})};var lo=n(22128),ll=n(70652),la=n(48574),ld=n(70403),lc=n(56005),lu=n.n(lc),lh=n(40074),lx=n.n(lh);let lp=e=>{let{uniqueViewers:t,docCreatedDate:n}=e,i=(0,D.u)("cardViewedThreshold");return(0,s.jsx)(iv.d,{children:(0,s.jsxs)(ib.Tr,{children:[(0,s.jsx)(lm,{label:(0,s.jsx)(m.x6,{id:"LZHJAq",values:{uniqueViewers:t}}),tooltip:(0,s.jsx)(m.x6,{id:"aaiIlJ",values:{docCreatedDate:n}}),width:"40%"}),(0,s.jsx)(lm,{label:(0,s.jsx)(m.x6,{id:"pRGfP3"}),width:"35%"}),(0,s.jsx)(lm,{label:(0,s.jsx)(m.x6,{id:"QfqHuz"}),tooltip:(0,s.jsx)(lt,{timeInMS:i}),width:"25%"})]})})},lm=e=>{let{label:t,width:n,tooltip:i}=e,r=(0,s.jsx)(iy.Th,{w:n,children:(0,s.jsx)(a.E,{display:"inline",borderBottom:i?"0.125em dashed":void 0,borderBottomColor:i?"gray.400":void 0,children:t})});return i?(0,s.jsx)(X.Tz,{placement:"top",label:i,children:r}):r},lf=["Yesterday at 11:02 am","Today at 12:55 pm","Dec 12, 2020, 10:19 pm","Apr 14, 2023, 4:30 pm","Jan 1, 2021, 12:03 am","Dec 7, 1984, 12:03 am","May 14, 2002, 3:56 pm"],lg=e=>{let{viewers:t,currentViewerFilterCount:n,docCreatedDate:i,creatorId:r,contributors:o,cardCount:l,handleTableRowClick:d,hasIndividualAnalytics:c}=e,{user:u}=(0,er.ur)(),h=c?t:lx()(t,e=>{var t;return[(null===(t=e.user)||void 0===t?void 0:t.id)===(null==u?void 0:u.id)?0:1,-e.lastOpened]}).slice(0,3);return(0,s.jsx)(ll.K,{children:(0,s.jsxs)(ij.X,{colorScheme:"blackAlpha",children:[(0,s.jsx)(lp,{uniqueViewers:n,docCreatedDate:i}),(0,s.jsx)(iC.N,{children:h.map((e,n)=>{let{user:i,lastOpened:h,visitorId:x}=e,p=(null==i?void 0:i.id)===r,m=o.some(e=>e.user.id===(null==i?void 0:i.id)),g=i?i.displayName+(i.id===(null==u?void 0:u.id)?" "+f.Ru._({id:"dDUgzP"}):"")||"":f.Ru._({id:"VmjbJY"}),j=h?lu()((0,se.OG)(h)):f.Ru._({id:"/JO3xr"}),v={name:g,id:(null==i?void 0:i.id)||x||"",email:null==i?void 0:i.email,isCreator:p,isContributor:m,profileImg:null==i?void 0:i.profileImageUrl,lastOpened:j},b=n===t.length-1,y=(null==i?void 0:i.id)===(null==u?void 0:u.id),C=!c&&!y;return(0,s.jsxs)(ib.Tr,{cursor:"pointer",onClick:()=>d(v),_hover:{bg:"blackAlpha.50"},borderBottom:"none",children:[(0,s.jsx)(iw.Td,{borderBottom:b?"0 none":void 0,children:(0,s.jsx)(lj,{name:g,email:null==i?void 0:i.email,profileImg:null==i?void 0:i.profileImageUrl,isContributor:m,isCreator:p,isAnonymous:!i})}),(0,s.jsx)(iw.Td,{borderBottom:b?"0 none":void 0,children:C?(0,s.jsx)(a.E,{fontSize:"sm",filter:"blur(3px)",color:"gray.600",children:lf[n%lf.length]}):(0,s.jsx)(a.E,{fontSize:"sm",children:j})}),(0,s.jsx)(iw.Td,{borderBottom:b?"0 none":void 0,children:C?(0,s.jsx)(o3,{cardCount:l}):(0,s.jsx)(o5,{cardsViewed:e.cardsViewed||0,totalCards:l||0})})]},(null==i?void 0:i.id)||x)})})]})})},lj=e=>{let{name:t,profileImg:n,email:i="",isCreator:r=!1,isContributor:o=!1,isAnonymous:d=!1,...c}=e;return(0,s.jsxs)(e8.z,{...c,children:[(0,s.jsx)(la.e,{size:"sm",name:t,src:n}),(0,s.jsxs)(l.B,{spacing:.5,children:[(0,s.jsxs)(a.E,{children:[t,d&&(0,s.jsx)(X.qT,{label:(0,s.jsx)(m.x6,{id:"VHgG8W",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}}),ml:2})]}),(0,s.jsxs)(e8.z,{mt:1,children:[(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.500",children:i}),(r||o)&&(0,s.jsx)(ld.vw,{size:"sm",transform:"translate(0, 1.5px)",children:r?(0,s.jsx)(m.x6,{id:"UE2beD"}):(0,s.jsx)(m.x6,{id:"3L51iw"})})]})]})]})},lv=e=>{var t,n,i,r;let{user:o,onBackClick:l,docId:a,onAnalyticsPanelClose:u}=e,h=(0,I.CU)().getState(),x=(0,ep.Ev)(h),{data:p,error:f,loading:g,refetch:j}=(0,nC.NI5)({variables:{docId:a,userId:o.id},skip:!a||!o.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),v=null!==(r=null==p?void 0:null===(n=p.docCardsStats)||void 0===n?void 0:null===(t=n.everyone)||void 0===t?void 0:t.length)&&void 0!==r?r:0,b=null==p?void 0:null===(i=p.docCardsStats)||void 0===i?void 0:i.cardCount,C=(0,y.useMemo)(()=>{var e;return(null==p?void 0:null===(e=p.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==p?void 0:p.docCardsStats]),w=(0,y.useMemo)(()=>oQ(C,"viewTimePercent"),[C]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nT.r,{children:(0,s.jsx)(d.$,{"aria-label":"Back",leftIcon:(0,s.jsx)(lo.g,{}),variant:"ghost",onClick:l,children:(0,s.jsx)(m.x6,{id:"iH8pgl"})})}),(0,s.jsx)(nA.s,{}),(0,s.jsx)(n_.c,{}),(0,s.jsx)(nR.c,{children:(0,s.jsxs)(c.az,{children:[(0,s.jsx)(lb,{user:o,showLastOpened:!0}),b&&(0,s.jsx)(ls,{description:(0,s.jsx)(m.x6,{id:"YJOrjl",values:{cardsViewed:v,totalCards:b}})}),g&&!f&&(0,s.jsx)(lr,{includeDescription:!0}),f&&(0,s.jsx)(oB,{error:f,refetch:j}),!f&&!g&&(0,s.jsx)(o7,{cards:x.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,s.jsx)(m.x6,{id:"ml51m3"}),rightLabel:(0,s.jsx)(m.x6,{id:"8R7bfR"}),cardLookupTable:w,tooltipLabel:(0,s.jsx)(le,{}),onAnalyticsPanelClose:u})]})})]})},lb=e=>{let{user:t,showLastOpened:n}=e;return(0,s.jsxs)(e8.z,{align:"center",my:6,children:[(0,s.jsx)(lj,{name:t.name,profileImg:t.profileImg,email:t.email,isCreator:t.isCreator,isContributor:t.isContributor,width:n?"50%":void 0}),n&&(0,s.jsxs)(tI.T,{align:"flex-start",spacing:0,children:[(0,s.jsx)(X._x,{children:(0,s.jsx)(m.x6,{id:"pRGfP3"})}),(0,s.jsx)(a.E,{children:t.lastOpened})]})]})},ly=(e,t,n)=>"everyone"===e?f.Ru._({id:"1IE7uf",values:{everyone:t}}):"viewersOnly"===e?f.Ru._({id:"r/tA4Y",values:{viewersOnly:n}}):f.Ru._({id:"V9JX7d"}),lC={everyone:tA.USd,viewersOnly:tA.pS3,accessLinkOnly:tA.wic},lw=e=>{let{selected:t,handleMenuItemChange:n,everyoneCount:i,viewersOnlyCount:r}=e;return(0,s.jsxs)(rp.W,{children:[(0,s.jsx)(rm.I,{leftIcon:(0,s.jsx)(x.g,{size:"xs",icon:lC[t]}),as:d.$,size:"md",rightIcon:(0,s.jsx)(x.g,{size:"xs",icon:h.Jt$}),children:ly(t,i,r)}),(0,s.jsx)(rf.c,{zIndex:2,maxW:"380px",children:(0,s.jsxs)(rg.i,{defaultValue:t,value:t,onChange:e=>{Array.isArray(e)||n(e)},children:[(0,s.jsx)(rj.k,{value:"everyone",isDisabled:0===i,children:(0,s.jsxs)(o.s,{align:"center",children:[(0,s.jsx)(x.g,{icon:lC.everyone,size:"xs"}),(0,s.jsxs)(c.az,{ml:3,children:[(0,s.jsx)(a.E,{children:ly("everyone",i,r)}),(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"c5ESvc",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})})]})]})}),(0,s.jsx)(rj.k,{value:"viewersOnly",isDisabled:0===r,children:(0,s.jsxs)(o.s,{align:"center",children:[(0,s.jsx)(x.g,{icon:lC.viewersOnly,size:"xs"}),(0,s.jsxs)(c.az,{ml:3,children:[(0,s.jsx)(a.E,{children:ly("viewersOnly",i,r)}),(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"5hKO48",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})})]})]})}),!1]})})]})};var lE=n(69670),lk=n(13847),lS=n(62722),lI=n(32598),lT=n(33780),lA=n(28466),lR=n(77447),l_=n(6228),lO=n(4300),lD=n(34992),lz=n(36227),lP=n(21404),lL=n(14356),lN=n(50089),lM=n(12418),lV=n(59135);let lF={top:55,right:20,bottom:40,left:24},lG=e=>Math.round(e).toString(),lW=e=>Math.max(...e.map(e=>(0,lL.A)(e.toString(),{fontFamily:"body",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600"})||0)),lB={backgroundColor:"var(--chakra-colors-blackAlpha-800)",color:"var(--chakra-colors-gray-100)",fontFamily:"var(--chakra-fonts-body)",boxShadow:"var(--chakra-shadows-4)",fontSize:"var(--chakra-fontSizes-xs)",borderRadius:"var(--chakra-radii-sm)",fontWeight:"var(--chakra-fontWeights-semibold)",borderWidth:"1px",borderColor:"black",paddingRight:"var(--chakra-space-1-5)",paddingLeft:"var(--chakra-space-1-5)",paddingTop:"var(--chakra-space-0-5)",paddingBottom:"var(--chakra-space-0-5)",zIndex:"var(--chakra-zIndex-tooltip)",minWidth:"60px",lineHeight:"var(--chakra-lineHeights-base)"},lU="var(--chakra-colors-gray-500)",lH="var(--chakra-colors-gray-200)",lq=e=>e.map(e=>e.x),lK=e=>e.map(e=>e.y),lJ=e=>{let{width:t,height:n,margin:i=lF,chartData:r,TooltipInner:o,showZero:l,shouldRoundYValues:a,showMaxAndMiddle:d,barColor:u,customTooltipStyles:h,onClick:x=()=>{}}=e,{showTooltip:p,tooltipOpen:m,tooltipLeft:f,tooltipTop:g,tooltipData:j,hideTooltip:v}=(0,lN.A)(),b=(0,y.useRef)(),C=(0,y.useRef)();(0,y.useEffect)(()=>()=>{b.current&&clearTimeout(b.current),C.current&&clearTimeout(C.current)},[]);let w=lK(r),E=Math.max(...w),k=[E,Math.round(E/2)],S=lW(d?k:w),I=i.left+S,T=t-I-i.right,A=n-i.top-i.bottom,R={...lM.k,...lB,...h},_=(0,y.useMemo)(()=>(0,lO.A)({range:[0,T],domain:lq(r),padding:.3}),[T,r]),O=(0,y.useMemo)(()=>(0,lD.A)({range:[A,0],round:!0,domain:[0,E]}),[A,E]),D=l?O(Math.min(...w.filter(e=>0!==e))):A,z=l&&A-D>6;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.az,{children:(0,s.jsxs)("svg",{width:t,height:n,children:[(0,s.jsx)("rect",{x:0,y:0,rx:4,width:t,height:n,fill:"var(--chakra-colors-gray-100)"}),(0,s.jsx)(lR.A,{top:i.top,left:I,children:r.map(e=>{var t,n;let i=e.y,r=e.x,o="bar-".concat(r,"-").concat(i),a=_.bandwidth(),d=A-(null!==(t=O(i))&&void 0!==t?t:0),c=z&&0===d?6:d,h=null!==(n=_(r))&&void 0!==n?n:0,m=A-c;return(0,s.jsxs)(lR.A,{children:[(0,s.jsx)(lz.A,{x:h,y:m,width:a,height:c,radius:5,topLeft:!0,topRight:!0,fill:l&&0===i?lH:u,onMouseLeave:()=>{b.current=window.setTimeout(()=>{v()},300)},onMouseMove:t=>{b.current&&clearTimeout(b.current);let n=(0,lA.A)(t);p({tooltipData:e,tooltipTop:null==n?void 0:n.y,tooltipLeft:null==n?void 0:n.x})},onClick:t=>x(t,e)}),(0,s.jsx)(lP.A,{x:h,y:0,width:a,height:Math.max(0,A-c),opacity:0,onMouseLeave:()=>{C.current=window.setTimeout(()=>{v()},300)},onMouseMove:t=>{C.current&&clearTimeout(C.current);let n=(0,lA.A)(t);p({tooltipData:e,tooltipTop:null==n?void 0:n.y,tooltipLeft:null==n?void 0:n.x})}})]},o)})}),(0,s.jsx)(lI.A,{top:i.top,left:I,scale:O,stroke:lH,strokeWidth:2,tickValues:d?k:void 0,numTicks:d?void 0:2,hideZero:!0,tickFormat:a?lG:void 0,tickLength:6,tickStroke:lH,tickLabelProps:()=>({fill:lU,textAnchor:"end",fontFamily:"var(--chakra-fonts-body)",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:"0.33em",dx:-4})}),(0,s.jsx)(lT.A,{top:A+i.top,left:I,scale:_,stroke:lH,numTicks:4,tickStroke:lH,tickLabelProps:()=>({fill:lU,textAnchor:"middle",fontFamily:"var(--chakra-fonts-body)",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:4}),strokeWidth:2,tickLength:6})]})}),m&&j&&(0,s.jsx)(lV.A,{top:g,left:f,style:R,children:(0,s.jsx)(o,{x:j.x,y:j.y})})]})},lY=e=>{let{chartTitle:t,TooltipInner:n,showZero:i=!0,shouldRoundYValues:r=!0,showMaxAndMiddle:o=!0,data:l,barColor:d="var(--chakra-colors-trueblue-200)",customTooltipStyles:u,onClick:h=()=>{},...x}=e;return(0,s.jsxs)(c.az,{position:"relative",height:"300px",...x,children:[(0,s.jsx)(a.E,{size:"xs",color:"gray.500",fontWeight:"600",position:"absolute",top:3,left:"50%",transform:"translateX(-50%)",children:t}),(0,s.jsx)(l_.A,{children:e=>{let{width:t,height:a}=e;return t<10?null:(0,s.jsx)(lJ,{width:t,height:a,showZero:i,chartData:l,barColor:d,customTooltipStyles:u,onClick:h,TooltipInner:n,shouldRoundYValues:r,showMaxAndMiddle:o})}})]})},lX=(e,t)=>{let n="LLL d",i=new Date;i.setDate(i.getDate()-t+1);let r=[];for(let s=0;s<t;s++){let t=new Date(i);t.setDate(t.getDate()+s);let o=function(e,t){if(arguments.length<1)throw TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=(0,lE.A)(e);if(!(0,lk.A)(n))throw RangeError("Invalid time value");var i=t||{},r=null==i.format?"extended":String(i.format),s=null==i.representation?"complete":String(i.representation);if("extended"!==r&&"basic"!==r)throw RangeError("format must be 'extended' or 'basic'");if("date"!==s&&"time"!==s&&"complete"!==s)throw RangeError("representation must be 'date', 'time', or 'complete'");var o="",l="",a="extended"===r?"-":"";if("time"!==s){var d=(0,lS.A)(n.getDate(),2),c=(0,lS.A)(n.getMonth()+1,2),u=(0,lS.A)(n.getFullYear(),4);o="".concat(u).concat(a).concat(c).concat(a).concat(d)}if("date"!==s){var h=n.getTimezoneOffset();if(0!==h){var x=Math.abs(h),p=(0,lS.A)(Math.floor(x/60),2),m=(0,lS.A)(x%60,2);l="".concat(h<0?"+":"-").concat(p,":").concat(m)}else l="Z";var f=(0,lS.A)(n.getHours(),2),g=(0,lS.A)(n.getMinutes(),2),j=(0,lS.A)(n.getSeconds(),2),v=""===o?"":"T",b=[f,g,j].join("extended"===r?":":"");o="".concat(o).concat(v).concat(b).concat(l)}return o}(t,{representation:"date"}),l=e.find(e=>e.date===o);l?r.push({x:(0,nF.Yq)(l.date,n),y:l.uniqueVisitors?l.uniqueVisitors:0}):r.push({x:(0,nF.Yq)(o,n),y:0})}return r},l$=e=>{let{viewData:t,dayCount:n}=e,i=lX(t,n);return(0,s.jsx)(lY,{data:i,my:3,chartTitle:(0,s.jsx)(m.x6,{id:"mSEibf"}),TooltipInner:lZ})},lZ=e=>{let{x:t,y:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.E,{children:t}),(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"6MKtHx",values:{y:n}})})]})},lQ=e=>e.every(e=>0===e.uniqueVisitors),l0=(e,t)=>t&&t.dailyViews?"everyone"===e?t.dailyViews.everyone?t.dailyViews.everyone:[]:"viewersOnly"===e&&t.dailyViews.viewers?t.dailyViews.viewers:[]:[],l1=(e,t,n)=>{var i,r,s;if(!n)return 0;let o=null!==(r=n.uniqueViewers)&&void 0!==r?r:0,l=null!==(s=null===(i=e.editors)||void 0===i?void 0:i.length)&&void 0!==s?s:0;return"everyone"===t?o:"viewersOnly"===t?Math.max(0,o-l):0},l6=e=>{var t,n;let{doc:i,handleSharePanelOpen:r,onAnalyticsPanelClose:a,canShare:c}=e,{loading:u,data:h,error:x,refetch:p}=(0,nC.Y0k)({variables:{memoId:i.id},skip:!i.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),{user:g}=(0,er.ur)(),[j,v]=(0,y.useState)("deckView"),[b,C]=(0,y.useState)(null),[w,E]=(0,y.useState)("everyone"),k=(0,nF.Yq)(i.createdTime,"PPP"),S=i.title||(0,s.jsx)(m.x6,{id:"wja8aL"}),I=(null==h?void 0:h.memoStats.viewers)||[],T=(null==h?void 0:null===(t=h.memoStats.dailyViews)||void 0===t?void 0:t.dayCount)||0,A=l0(w,null==h?void 0:h.memoStats),R=(0,eq.ez)("individual_analytics",i.organization),{openUpsellModal:_}=(0,oG.I)(),O=lQ(A),D=I.filter(e=>{var t;return"everyone"===w||!(null===(t=i.editors)||void 0===t?void 0:t.some(t=>{var n,i;return(null===(n=e.user)||void 0===n?void 0:n.id)===(null===(i=t.user)||void 0===i?void 0:i.id)}))}),z=l1(i,w,null==h?void 0:h.memoStats),P=(0,y.useCallback)(e=>{E(e)},[]),L=(0,y.useCallback)(e=>{v(e)},[]),N=(0,y.useCallback)(e=>{if(!R&&e.id!==(null==g?void 0:g.id)){_({segmentEvent:en.VV.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS});return}C(e)},[_,R,g]),M=(0,y.useCallback)(()=>{C(null)},[]),V=void 0!==x;return(0,s.jsxs)(s.Fragment,{children:[b&&(0,s.jsx)(lv,{user:b,onBackClick:M,docId:i.id,onAnalyticsPanelClose:a}),!b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(oK,{hasError:V,isAnalyticsLoading:u,setView:L,view:j,description:(0,s.jsx)(m.x6,{id:"uEtUah",values:{docTitle:S,docCreatedDate:k}})}),V&&(0,s.jsx)(oB,{error:x,refetch:p}),!V&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n_.c,{}),(0,s.jsxs)(nR.c,{children:[u&&(0,s.jsx)(l2,{}),!u&&I.length<=1&&c&&(0,s.jsx)(l5,{handleSharePanelOpen:r}),!u&&(0,s.jsxs)(l.B,{direction:"column",mt:4,spacing:4,children:[(0,s.jsxs)(o.s,{direction:"row",justify:"space-between",align:"center",children:[(0,s.jsx)(q.D,{as:"h2",size:"md",children:"cardEngagement"===j?oq():oH()}),(0,s.jsx)(lw,{selected:w,handleMenuItemChange:P,everyoneCount:l1(i,"everyone",null==h?void 0:h.memoStats),viewersOnlyCount:l1(i,"viewersOnly",null==h?void 0:h.memoStats)})]}),"deckView"===j&&O&&(0,s.jsx)(l3,{handleSharePanelOpen:r,dayCount:T}),"deckView"===j&&!O&&(0,s.jsx)(l$,{viewData:A,dayCount:T}),"cardEngagement"===j&&(0,s.jsx)(li,{docId:i.id,viewerFilter:w,currentViewerFilterCount:z,onAnalyticsPanelClose:a}),(0,s.jsx)(lg,{creatorId:(null===(n=i.createdBy)||void 0===n?void 0:n.id)||"",viewers:D,currentViewerFilterCount:z,docCreatedDate:k,contributors:i.editors||[],cardCount:(null==h?void 0:h.memoStats.cardCount)||0,handleTableRowClick:N,hasIndividualAnalytics:R}),D.length>3&&!R&&(0,s.jsx)(d.$,{variant:"ghost",size:"sm",color:"gray.600",colorScheme:"gray",onClick:()=>_({segmentEvent:en.VV.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS}),children:(0,s.jsx)(m.x6,{id:"BKBX4n",values:{0:D.length-3}})}),!R&&(0,s.jsx)(nJ.c,{title:(0,s.jsx)(m.x6,{id:"h5AmZ4"}),segmentEvent:en.VV.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS,description:f.Ru._({id:"GYgPBy"})})]})]})]})]})]})},l2=()=>(0,s.jsxs)(o.s,{direction:"column",py:2,children:[(0,s.jsx)(oF.E,{h:10,width:"40%",mb:4}),(0,s.jsx)(oF.E,{h:40,mb:4}),(0,s.jsx)(tI.T,{align:"stretch",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(oF.E,{h:12},t))})]}),l5=e=>{let{handleSharePanelOpen:t}=e;return(0,s.jsx)(o.s,{p:3,px:4,mt:2,bg:"gray.100",color:oW,borderRadius:"base",children:(0,s.jsxs)(o.s,{align:"baseline",fontSize:"sm",children:[(0,s.jsx)(c.az,{pr:2,children:(0,s.jsx)(x.g,{icon:tA.X46,"aria-label":"user-icon",size:"sm"})}),(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"FNMh4I",components:{0:(0,s.jsx)(a.E,{as:"button",onClick:t,textDecoration:"underline",fontWeight:"600",color:"gray.800"})}})})]})})},l3=e=>{let{handleSharePanelOpen:t,dayCount:n}=e;return(0,s.jsxs)(nO.F,{my:4,p:6,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",colorScheme:"gray",children:[(0,s.jsx)(c.jl,{size:"30px",bg:"gray.500",children:(0,s.jsx)(x.g,{icon:tA.Vf1,color:"white"})}),(0,s.jsx)(sg.X,{mt:4,mb:2,fontSize:"md",children:(0,s.jsx)(m.x6,{id:"2OzAI5"})}),n>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sj.T,{maxWidth:"sm",children:(0,s.jsx)(m.x6,{id:"qQLmo7",values:{dayCount:n}})}),(0,s.jsx)(d.$,{mt:4,onClick:t,children:(0,s.jsx)(m.x6,{id:"6Jkfdh",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})})]})]})},l4=e=>{var t,n,i,r,o,l;let{doc:d,onAnalyticsPanelClose:u}=e,h=(0,I.CU)().getState(),x=(0,ep.Ev)(h),{user:p}=(0,er.ur)(),{data:f,error:g,loading:j,refetch:v}=(0,nC.NI5)({variables:{docId:d.id,userId:null==p?void 0:p.id},skip:!(null==p?void 0:p.id),pollInterval:9e5,notifyOnNetworkStatusChange:!0}),b=null!==(l=null==f?void 0:null===(n=f.docCardsStats)||void 0===n?void 0:null===(t=n.everyone)||void 0===t?void 0:t.length)&&void 0!==l?l:0,C=null==f?void 0:null===(i=f.docCardsStats)||void 0===i?void 0:i.cardCount,w=(0,y.useMemo)(()=>{var e;return(null==f?void 0:null===(e=f.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==f?void 0:f.docCardsStats]),E=(0,y.useMemo)(()=>oQ(w,"viewTimePercent"),[w]);if(!p)return null;let k=p.id===(null===(r=d.createdBy)||void 0===r?void 0:r.id),S=null===(o=d.editors)||void 0===o?void 0:o.some(e=>e.user.id===p.id),T={name:p.displayName,id:p.id,profileImg:p.profileImageUrl,email:p.email,isContributor:S,isCreator:k};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(nT.r,{children:[(0,s.jsx)(m.x6,{id:"ZlwDi6"}),(0,s.jsx)(a.E,{fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",color:"gray.500",noOfLines:1,children:d.title||(0,s.jsx)(m.x6,{id:"wja8aL"})})]}),(0,s.jsx)(nA.s,{}),(0,s.jsx)(n_.c,{}),(0,s.jsx)(nR.c,{children:(0,s.jsxs)(c.az,{children:[(0,s.jsx)(lb,{user:T}),void 0!==C&&(0,s.jsx)(ls,{description:(0,s.jsx)(m.x6,{id:"YJOrjl",values:{cardsViewed:b,totalCards:C}})}),j&&!g&&(0,s.jsx)(lr,{includeDescription:!0}),g&&(0,s.jsx)(oB,{error:g,refetch:v,px:0}),!g&&!j&&(0,s.jsx)(o7,{cards:x.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,s.jsx)(m.x6,{id:"ml51m3"}),rightLabel:(0,s.jsx)(m.x6,{id:"8R7bfR"}),cardLookupTable:E,tooltipLabel:(0,s.jsx)(le,{}),onAnalyticsPanelClose:u}),(0,s.jsxs)(nO.F,{children:[(0,s.jsx)(nD._,{}),(0,s.jsx)(m.x6,{id:"Znuvj3",values:{GAMMA_PROPER_NOUN:ev.On,GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})]})]})})]})},l8=(0,oV.A)(e=>{let{doc:t,mode:n,isAnalyticsPanelOpen:i,onAnalyticsPanelClose:r,onSharePanelOpen:l}=e,a=(0,eZ.h5)({base:"sm",md:"2xl",lg:"4xl"}),c=!!l&&"full"==n,u=(0,y.useCallback)(()=>{l&&(l(),r())},[l,r]);return(0,s.jsx)(X.L8,{isDark:!1,children:(0,s.jsxs)(nX.aF,{onClose:r,isOpen:i,size:a,blockScrollOnMount:!1,children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nZ.$,{mx:2,minW:0,children:["full"===n?(0,s.jsx)(l6,{doc:t,handleSharePanelOpen:u,onAnalyticsPanelClose:r,canShare:c}):(0,s.jsx)(l4,{doc:t,onAnalyticsPanelClose:r}),(0,s.jsx)(n_.c,{my:4}),(0,s.jsx)(nQ.j,{children:(0,s.jsxs)(o.s,{justifyContent:c?"space-between":"flex-end",flex:1,children:[c&&(0,s.jsx)(d.$,{leftIcon:(0,s.jsx)(x.g,{icon:h.t5Z}),variant:"ghost",onClick:u,children:(0,s.jsx)(m.x6,{id:"6Jkfdh",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})}),(0,s.jsx)(d.$,{variant:"solid",onClick:r,children:(0,s.jsx)(m.x6,{id:"DPfwMq"})})]})})]})]})})}),l7=e=>{let{doc:t,mode:n}=e,i=(0,en.st)(),{isOpen:r,onClose:o,onOpen:l}=(0,nz.E)({id:"analyticsPanelDisclosure"}),a=(0,y.useCallback)(()=>{null==i||i.track(en.VV.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:"toolbar_doc_menu",type:"personal"}),l()},[i,null==t?void 0:t.id,l]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.q9c,fixedWidth:!0}),onClick:a,children:(0,s.jsx)(m.x6,{id:"ZlwDi6"})}),t&&r&&(0,s.jsx)(l8,{doc:t,isAnalyticsPanelOpen:r,onAnalyticsPanelClose:o,mode:n})]})},l9=e=>{let{toggleCommentsPanel:t}=e;return(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.DN2,fixedWidth:!0}),onClick:t,children:(0,s.jsx)(m.x6,{id:"VbyRUy"})})};var ae=n(36830);let at=(0,y.memo)(e=>{let{isOpen:t,onClose:n,editor:i}=e,r=(0,ae.N)(i),{bodyStart:o}=(0,I.GV)(ep.BP),l=(0,y.useCallback)(e=>{null==i||i.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[i]);return(0,s.jsx)(X.L8,{isDark:!1,children:(0,s.jsxs)(nS._,{returnFocusOnClose:!1,isOpen:t,placement:"right",onClose:n,size:"lg",children:[(0,s.jsx)(n$.m,{background:"none"}),(0,s.jsxs)(nI.z,{onKeyDown:r,"data-testid":"custom-code-drawer",motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,s.jsx)(nA.s,{}),(0,s.jsx)(nT.r,{children:(0,s.jsx)(m.x6,{id:"E16GGw"})}),(0,s.jsx)(nR.c,{overflowX:"hidden",children:(0,s.jsx)(iK,{label:f.Ru._({id:"fC5kYg"}),helperText:f.Ru._({id:"0AZNtw"}),initialValue:o,updateValue:l,language:"html",height:"600px"})}),(0,s.jsx)(nQ.j,{children:(0,s.jsx)(d.$,{w:"100%",variant:"solid",onClick:n,children:(0,s.jsx)(m.x6,{id:"DPfwMq"})})})]})]})})});at.displayName="CustomCodeDrawer";let an=e=>{let{editor:t}=e,{isOpen:n,onOpen:i,onClose:r}=(0,nz.E)({id:"codeEditor"});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.jTw,fixedWidth:!0}),onClick:i,children:(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(m.x6,{id:"cnlGIm"}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(n1.E,{colorScheme:"green",ml:2,children:(0,s.jsx)(m.x6,{id:"YBt9YP"})})]})}),(0,s.jsx)(at,{editor:t,isOpen:n,onClose:r})]})},ai=e=>{let{doc:t}=e,[n]=(0,nC.fQ5)(),[i]=(0,nC.u6W)(),r=(0,y.useCallback)(e=>()=>{if(!t.id)return;let r={id:t.id};e?n({variables:r,optimisticResponse:{archiveDoc:{...r,archived:e,__typename:"Doc"}}}):i({variables:r,optimisticResponse:{unarchiveDoc:{...r,archived:e,__typename:"Doc"}}})},[n,t.id,i]);return t.archived?(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.IbX,fixedWidth:!0}),onClick:r(!1),children:(0,s.jsx)(m.x6,{id:"yKu/3Y"})}):(0,s.jsx)(ov.D,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,s.jsx)(x.g,{icon:h.yLS,fixedWidth:!0}),onClick:r(!0),children:(0,s.jsx)(m.x6,{id:"NOLglc",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})})};var ar=n(66820),as=n(77563),ao=n(75961);let al=e=>{var t,n;let{doc:i}=e,r=(null==i?void 0:i.createdTime)&&(0,ar.A)((0,as.A)(i.createdTime),"PPP"),o=(0,ao.B)(null==i?void 0:i.title);return(0,s.jsxs)(c.az,{px:4,py:2,maxW:"300px",children:[(0,s.jsx)(a.E,{noOfLines:6,children:o}),(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(m.x6,{id:"jlWdji",values:{createdTime:r}})}),(0,s.jsx)(X.Tz,{label:null==i?void 0:null===(t=i.createdBy)||void 0===t?void 0:t.email,children:(0,s.jsx)(a.E,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(m.x6,{id:"t490IT",values:{0:null==i?void 0:null===(n=i.createdBy)||void 0===n?void 0:n.displayName}})})})]})},aa=e=>{let{doc:t,editor:n}=e,i=(0,oc.Z)(),r=(0,y.useCallback)(()=>{if(!n)return;let e=n.getJSON();i({docId:t.id,initialContent:e,source:"editor_toolbar_doc_menu_duplicate",newWindow:!(0,P.sX)()})},[t.id,i,n]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.jPR,fixedWidth:!0}),onClick:r,children:(0,s.jsx)(m.x6,{id:"0Fcoqv",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})})})},ad=()=>(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.mHA,fixedWidth:!0}),onClick:()=>{nU.R.emit("openSharePanel",{view:"export"})},children:(0,s.jsx)(m.x6,{id:"U8WPSi"})}),ac=e=>{let{site:t,path:n,domain:i}=e,r=i?(0,ta.bO)({domain:i,path:n}):(0,ta.jY)({site:t,path:n});return r?(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"kcKqQj"}),placement:"top",children:(0,s.jsx)(J.K,{ms:-1,href:r,as:b(),target:"_blank","aria-label":f.Ru._({id:"WklWxF"}),variant:"ghost",color:"gray.500",size:"xs",icon:(0,s.jsx)(x.g,{icon:h.fLi}),pointerEvents:"auto",onClick:e=>{e.stopPropagation()}})}):null},au=e=>{var t,n;let{doc:i,site:r,showCreatedInfo:o}=e,l=(0,ao.B)(null==i?void 0:i.title),d=null===(t=r.routes)||void 0===t?void 0:t.find(e=>e.docId===i.id),u=(0,ta.SG)(i,r);return(0,s.jsxs)(c.az,{px:4,pb:2,maxW:"300px",children:[(0,s.jsxs)(e8.z,{align:"start",children:[(0,s.jsx)(a.E,{noOfLines:2,children:l}),u&&(0,s.jsx)(ac,{site:r,path:null==d?void 0:d.path})]}),d&&(0,s.jsx)(ah,{path:d.path}),o&&"createdTime"in i&&(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.500",noOfLines:1,mt:2,children:(0,s.jsx)(m.x6,{id:"oJFw5Q",values:{0:(0,nF.Bo)(i.createdTime)}})}),"createdBy"in i&&o&&(0,s.jsx)(a.E,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(m.x6,{id:"t490IT",values:{0:null==i?void 0:null===(n=i.createdBy)||void 0===n?void 0:n.displayName}})})]})},ah=e=>{let{path:t}=e;return"/"===t?(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"wFCbbC"})}):(0,s.jsx)(a.E,{fontFamily:"mono",fontSize:"sm",color:"gray.500",children:t})},ax=e=>{let{onClick:t,icon:n,label:i}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(ov.D,{icon:n||(0,s.jsx)(x.g,{icon:h.BH7,fixedWidth:!0}),onClick:t||(()=>{nU.R.emit("openPageSetup","cards")}),children:i||(0,s.jsx)(m.x6,{id:"Kx2GmY"})})})},ap=e=>{let{site:t}=e,n=(0,ar.A)((0,as.A)(t.createdTime),"PPP");return(0,s.jsxs)(c.az,{px:4,pb:2,maxW:"300px",children:[(0,s.jsx)(a.E,{noOfLines:6,children:t.name}),(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(m.x6,{id:"jlWdji",values:{createdTime:n}})})]})};var am=n(14291);let af=e=>{let{label:t=(0,s.jsx)(m.x6,{id:"sAalO9"}),showUpsellBadge:n,settingsTab:i="website"}=e,{openUpsellModal:r}=(0,oG.I)(),o=(0,y.useCallback)(()=>r({segmentEvent:en.VV.GAMMA_PRO_UPSELL_SITE_ADD_CUSTOM_DOMAIN}),[r]),l=(0,y.useCallback)(()=>{nU.R.emit("openSiteSettings",i)},[i]);return(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.Bwz,fixedWidth:!0}),onClick:n?o:l,children:(0,s.jsxs)(e8.z,{justifyContent:"space-between",alignItems:"center",children:[t,n&&(0,s.jsx)(c.az,{children:(0,s.jsx)(am.zL,{})})]})})};var ag=n(19727),aj=n(57812),av=n(92515),ab=n(38256);let ay=(e,t)=>{let n=[],i=e=>{if(t(e)&&n.push(e),e.content)for(let t of e.content)i(t)};return i(e),n},aC=()=>({today:f.Ru._({id:"ecUA8p"}),thisWeek:f.Ru._({id:"yByRxz"}),earlier:f.Ru._({id:"HGg4T/"})}),aw=()=>(0,s.jsxs)(l.B,{children:[(0,s.jsx)(oF.E,{w:"max(350px, 30%)",h:10}),(0,s.jsx)(oF.E,{w:"max(320px, 22%)",h:5})]}),aE=e=>{let{createdTime:t,editors:n,isLatest:i,onClick:r,showPaywall:l,paywallCount:d}=e;if(!n||!n.length)return(0,s.jsx)(s.Fragment,{});let u=l?"linear-gradient(rgb(0, 0, 0) 15%, transparent 100%)":"",h=(0,s.jsxs)(ag.o,{flexDirection:"row",borderRadius:"base",style:{WebkitMaskImage:u,maskImage:u},border:"none",isDisabled:l,opacity:"1 !important",onClick:r,alignItems:"flex-start",width:"100%",textAlign:"left",children:[(0,s.jsxs)(o.s,{w:"100%",direction:"column",children:[(0,s.jsx)(a.E,{fontSize:"sm",children:lu()((0,se.OG)(t))}),(0,s.jsx)(a.E,{fontSize:"xs",flex:1,children:n[0].displayName})]}),i&&(0,s.jsx)(n1.E,{colorScheme:"green",fontSize:"0.65em",children:(0,s.jsx)(m.x6,{id:"wL3cK8"})})]});return l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(X.Tz,{placement:"top",isDisabled:!l,label:l?(0,s.jsx)(m.x6,{id:"PYTBm5",values:{paywallCount:d}}):void 0,children:(0,s.jsx)(c.az,{mb:4,children:h})}),(0,s.jsx)(nJ.c,{isNarrow:!0,segmentEvent:en.VV.GAMMA_PRO_UPSELL_CALLOUT_CHANGE_HISTORY,description:(0,s.jsx)(m.x6,{id:"mVKYtH"})})]}):h},ak=e=>{var t;let n=[];return{groupedSnapshots:(0,y.useMemo)(()=>(0,se.WP)({items:e,sortBy:"createdTime"}),[e]),paywalledSnapshotId:null===(t=n[0])||void 0===t?void 0:t.id,paywallCount:n.length}},aS=e=>{let{groupedSnapshots:t,paywalledSnapshotId:n,paywallCount:i,onClick:r,showFetchMore:o,onFetchMoreClick:l,isFetchingMore:a}=e;return(0,s.jsxs)(aj.w,{w:"100%",children:[Object.entries(t).filter(e=>{let[,t]=e;return t.length}).map((e,t)=>{let[o,l]=e;return(0,s.jsxs)(y.Fragment,{children:[(0,s.jsx)(X._x,{px:4,py:2,mx:0,mt:2,children:aC()[o]}),l.map((e,o)=>{let{createdTime:l,editors:a,id:d}=e;return(0,s.jsx)(aE,{onClick:()=>r(d),isLatest:0===t&&0===o,createdTime:l,editors:a,showPaywall:n===d,paywallCount:i},d)})]},o)}),o&&(0,s.jsx)(d.$,{isLoading:a,onClick:l,children:(0,s.jsx)(m.x6,{id:"yQ2kGp"})})]})},aI=()=>(0,s.jsxs)(aj.w,{w:"100%",children:[(0,s.jsx)(oF.E,{h:16}),(0,s.jsx)(oF.E,{h:16,mt:2}),(0,s.jsx)(oF.E,{h:16,mt:2}),(0,s.jsx)(oF.E,{h:16,mt:2}),(0,s.jsx)(oF.E,{h:16,mt:2}),(0,s.jsx)(oF.E,{h:16,mt:2}),(0,s.jsx)(oF.E,{h:16,mt:2}),(0,s.jsx)(oF.E,{h:16,mt:2})]}),aT=e=>{let{title:t,createdBy:n,createdTime:i,numSnapshots:r}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.E,{mt:1,children:(0,s.jsx)(m.x6,{id:"yf//Op",values:{numSnapshots:r,0:(0,nF.Bo)(i),1:(0,nF.Bo)(i)}})}),(0,s.jsx)(a.E,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:(0,s.jsx)(m.x6,{id:"JVHTIo",values:{title:t,0:(null==n?void 0:n.displayName)?null==n?void 0:n.displayName:"Unknown",1:(0,nF.Yq)(i,"PPp")}})})]})},aA="snapshot-editor-root",aR=e=>{let{id:t,doc:n,content:i}=e,r=(0,y.useMemo)(()=>{if(i)return ay(i,e=>e.type===T.Qs).map(e=>{var t;return{__typename:"Card",id:(null===(t=e.attrs)||void 0===t?void 0:t.id)||"",docId:n.id,title:(0,rF.getCardTitle)(e),createdTime:n.createdTime,updatedTime:n.updatedTime,archived:!1}})},[i,n]);return(0,s.jsx)(td.u5,{reduxData:{cards:r},initialContent:i,doc:n,docId:n.id,scrollingParentSelector:".".concat(aA),isInsideDrawer:!0},t)},a_=e=>{var t;let{isOpen:n,onClose:i,doc:r}=e,l=(0,nk.d)(),{getCollaborativeEditorInstance:a}=(0,t5.mi)(),[u,h]=(0,y.useState)(!1),[x,{data:p}]=(0,nC.qob)();(0,t$.Vg)(()=>{x({variables:{id:r.id}})},[r.id,x,n],[n]);let f=null==p?void 0:null===(t=p.doc)||void 0===t?void 0:t.currentSnapshotId,{loading:g,data:j,called:v,fetchMore:b}=(0,nC.XSN)({variables:{docId:r.id,first:25},skip:!r||!n,fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),[C,{loading:w,data:E}]=(0,nC.Wzf)({nextFetchPolicy:"cache-only"}),k=(null==j?void 0:j.snapshots.edges.map(e=>e.node))||[],{groupedSnapshots:S,paywalledSnapshotId:I,paywallCount:T}=ak(k),A=null==j?void 0:j.snapshots.pageInfo,R=!!(!I&&v&&(null==A?void 0:A.hasNextPage)&&(null==A?void 0:A.endCursor)),_=(0,y.useCallback)(()=>{(null==A?void 0:A.hasNextPage)&&(null==A?void 0:A.endCursor)&&(h(!0),b({variables:{after:A.endCursor}}).finally(()=>{h(!1)}))},[b,null==A?void 0:A.endCursor,null==A?void 0:A.hasNextPage]),O=k[0];(0,y.useEffect)(()=>{(null==O?void 0:O.id)&&C({variables:{snapshotId:O.id,docId:r.id}})},[r.id,C,null==O?void 0:O.id]);let D=(0,ao.B)(null==r?void 0:r.title),z="createdBy"in r?r.createdBy:void 0,P=null==r?void 0:r.createdTime,L=null==E?void 0:E.snapshot,N=L&&L.id===f,M=(0,nr.A)(ab.H4);return(0,s.jsx)(X.L8,{isDark:!1,children:(0,s.jsxs)(nS._,{placement:"bottom",onClose:i,isOpen:n,trapFocus:!0,isFullHeight:!0,blockScrollOnMount:!1,children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nI.z,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,s.jsx)(nA.s,{}),(0,s.jsxs)(nT.r,{borderBottom:"1px solid #000",borderColor:"gray.200",children:[g&&(0,s.jsx)(aw,{}),!g&&r&&k&&(0,s.jsx)(aT,{numSnapshots:(null==k?void 0:k.length)||0,createdBy:z,createdTime:P,title:D})]}),(0,s.jsx)(nR.c,{p:0,h:"100%",children:(0,s.jsxs)(o.s,{direction:"row",h:"100%",children:[(0,s.jsx)(c.az,{p:2,w:"17rem",overflowY:"auto",bg:"gray.50",children:(0,s.jsxs)(av.t,{variant:"soft-rounded",orientation:"vertical",size:"md",children:[g&&(0,s.jsx)(aI,{}),!g&&k&&(0,s.jsx)(aS,{onClick:e=>{C({variables:{snapshotId:e,docId:r.id}})},groupedSnapshots:S,paywalledSnapshotId:I,paywallCount:T,showFetchMore:R,onFetchMoreClick:_,isFetchingMore:u})]})}),(0,s.jsx)(o.s,{flex:1,bg:"gray.100",overflowY:"scroll",justifyContent:"center",alignContent:"center",alignItems:"flex-start",width:"100%",height:"100%",className:aA,css:{"--editor-width":"100%","--editor-font-size":M},children:(0,s.jsxs)(o.s,{direction:"column",position:"relative",width:"100%",height:"100%",children:[(0,s.jsx)(rH.s,{}),(!L||w)&&(0,s.jsx)(nH.Y,{}),L&&!w&&(0,s.jsx)(aR,{id:L.id,doc:r,content:null==L?void 0:L.content.default})]})})]})}),(0,s.jsx)(nQ.j,{borderTop:"1px solid #000",borderColor:"gray.200",bg:"var(--drawer-bg)",zIndex:1,children:(0,s.jsxs)(e7.e,{spacing:4,children:[(0,s.jsx)(d.$,{variant:"ghost",onClick:i,children:(0,s.jsx)(m.x6,{id:"dEgA5A"})}),(0,s.jsx)(X.Tz,{label:N?(0,s.jsx)(m.x6,{id:"HJo72u"}):(0,s.jsx)(m.x6,{id:"sonTm1"}),shouldWrapChildren:!0,children:(0,s.jsx)(d.$,{variant:"solid",isDisabled:!L||N,onClick:()=>{var e;if(!L)return;let t=null==k?void 0:null===(e=k.find(e=>e.id===L.id))||void 0===e?void 0:e.createdTime,n=a();if(!n)return;n.commands.setContent(L.content.default,!0);let{annotationsAbsolute:r}=L.content;r?n.commands.restoreAnnotations(r):n.commands.clearAnnotations(),i(),l({title:(0,s.jsx)(m.x6,{id:"7ovf4C"}),description:(0,s.jsx)(m.x6,{id:"DTim6X",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP,0:t?(0,nF.Yq)(t,"PPp"):"selected snapshot"}}),status:"success",duration:5e3,isClosable:!0})},children:(0,s.jsx)(m.x6,{id:"yKu/3Y"})})})]})})]})]})})},aO=e=>{let{doc:t}=e,{isOpen:n,onClose:i,onOpen:r}=(0,nz.E)({id:"snapshotsDrawer"});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.a$,fixedWidth:!0}),onClick:r,children:(0,s.jsx)(m.x6,{id:"6Z5x06"})}),t&&(0,s.jsx)(a_,{doc:t,isOpen:n,onClose:i})]})},aD=()=>{let e=sf();return e?(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.LjI,fixedWidth:!0}),as:n5.N,textDecoration:"none !important",href:e,target:(0,P.sX)()?"_self":"_blank",children:(0,s.jsx)(m.x6,{id:"7U0bM7"})}):null},az=()=>(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.fyG,fixedWidth:!0}),onClick:()=>r4.LF.emit(r4.DN.OPEN_THEME_DRAWER,{}),children:(0,s.jsx)(m.x6,{id:"90/Rx7"})}),aP=e=>{let{editor:t}=e,n=(0,y.useCallback)(()=>{t&&t.commands.undo()},[t]);return(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.V3T,fixedWidth:!0}),onClick:n,command:(0,X.lp)("Mod+Z"),children:(0,s.jsx)(m.x6,{id:"9uI/rE"})})},aL=e=>{let{doc:t,toggleCommentsPanel:n,editorWrapperEl:i,scrollingParentSelector:r}=e,{isConnected:o,isInOfflineMode:l}=(0,E.u)(),a=(0,D.u)("editDocAI"),{user:d}=(0,er.ur)(),u=(0,er.Iy)("view",t),h=(0,er.Iy)("comment",t),x=(0,er.Iy)("edit",t),p=(0,er.Iy)("manage",t),f=(0,I.GV)(ts.Gd),g=(0,nN.zm)(),j=(0,I.GV)(ep.wC)===tv.w.SLIDE_VIEW,{editor:v}=(0,tk.m)(),b=(0,I.GV)(ep.nD),y=!!a||!p,C=!!d&&y&&!t.site,w=!!a&&h,k=!!(d&&0!==d.workspaceMemberships.length&&!t.site),S=u&&!!d,T=(0,D.u)("docCustomCode")&&x,A=x&&v;if(!o){let e=A&&l&&!f,i=b&&l&&!f,r=w&&l&&!f,o=i||e||r;return(0,s.jsx)(aN,{children:(0,s.jsxs)(oy.r,{children:[f?(0,s.jsx)(c.az,{pt:2,children:(0,s.jsx)(ap,{site:f})}):(0,s.jsx)(al,{doc:t}),o&&(0,s.jsx)(rv.N,{}),i&&(0,s.jsx)(aP,{editor:v}),e&&(0,s.jsx)(ax,{}),r&&(0,s.jsx)(l9,{toggleCommentsPanel:n})]})})}let R=t.site?(0,s.jsx)(m.x6,{id:"gKmuNS"}):void 0;return(0,s.jsxs)(rf.c,{zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"360px",overflow:"auto",children:[(0,s.jsxs)(oy.r,{children:[f?(0,s.jsx)(au,{doc:t,site:f}):(0,s.jsx)(al,{doc:t}),(0,s.jsx)(rv.N,{}),b&&(0,s.jsx)(aP,{editor:v}),x&&(0,s.jsx)(aO,{doc:t}),t.site&&(0,s.jsx)(oM,{editorWrapperEl:i,scrollingParentSelector:r}),(0,s.jsx)(aD,{}),g&&!j&&(0,s.jsx)(az,{}),A&&(0,s.jsx)(ax,{}),S&&(0,s.jsx)(ad,{}),T&&(0,s.jsx)(an,{editor:v})]}),f?(0,s.jsx)(rv.N,{}):null,(0,s.jsxs)(oy.r,{children:[f&&(0,s.jsx)(ap,{site:f}),f?null:(0,s.jsx)(rv.N,{}),w&&(0,s.jsx)(l9,{toggleCommentsPanel:n}),C&&(0,s.jsx)(l7,{doc:t,mode:p?"full":"personal"}),p&&(0,s.jsx)(af,{label:R}),k&&(0,s.jsx)(aa,{doc:t,editor:v}),p&&(0,s.jsx)(ow,{site:f}),!t.site&&p?(0,s.jsx)(ai,{doc:t}):null]})]})},aN=e=>{let{children:t}=e;return(0,s.jsxs)(rf.c,{zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"360px",overflow:"auto",children:[(0,s.jsx)(eK.r,{description:(0,s.jsx)(m.x6,{id:"0CAvhs"}),isConnected:!1,maxWidth:"300px"}),t]})},aM=e=>{let{onSuccess:t,onError:n=()=>{}}=e,[i,r]=(0,y.useState)(()=>()=>Promise.resolve());return{setDoneFn:r,doActionIfVerified:(0,y.useCallback)(()=>{i().then(t,n)},[i,t,n])}},aV=e=>{let{length:t,idealLength:n,maxLength:i}=e;return(0,s.jsxs)(a.E,{fontSize:"xs",color:t>=i?"red.400":"gray.500",children:[t>=i&&(0,s.jsx)(x.g,{icon:tA.QJT})," ",t,"/",n]})};var aF=n(22844),aG=n(22938),aW=n(67489),aB=n(4013);let aU=e=>{let{onClose:t,onDiscard:n,onSave:i}=e;return(0,s.jsx)(X.L8,{isDark:!1,children:(0,s.jsxs)(nX.aF,{onEsc:t,onClose:t,closeOnOverlayClick:!0,isOpen:!0,isCentered:!0,children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nZ.$,{children:[(0,s.jsx)(nT.r,{children:(0,s.jsx)(m.x6,{id:"fhv6Ac"})}),(0,s.jsx)(nA.s,{onClick:t}),(0,s.jsx)(nR.c,{children:(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"dkIYZO"})})}),(0,s.jsx)(nQ.j,{children:(0,s.jsxs)(l.B,{spacing:2,direction:"row",align:"center",children:[(0,s.jsx)(d.$,{onClick:n,children:(0,s.jsx)(m.x6,{id:"bzSI52"})}),(0,s.jsx)(d.$,{variant:"solid",onClick:i,children:(0,s.jsx)(m.x6,{id:"GkU8It"})})]})})]})]})})},aH=(e,t)=>{var n;return null==e?void 0:null===(n=e.routes.find(e=>e.docId===t))||void 0===n?void 0:n.path},aq=e=>{let{openOtherDocModal:t,registerDoneFn:n}=e,i=(0,B.dU)("gray.200","gray.600"),r=(0,nk.d)(),[o,u]=(0,y.useState)(!1),h=(0,nY.Fd)(),x=(0,I.GV)(nm.Jo),p=(0,I.GV)(ts.Gd),[f,{loading:g}]=(0,nC.Imo)(),j=aH(p,null==x?void 0:x.id),[v,b]=(0,y.useState)(()=>(0,ta.nx)(j||"")),[C,w]=(0,y.useState)(()=>(0,ta.nx)(j||"")),E=(0,ta.Gu)({routes:(null==p?void 0:p.routes)||[],path:(0,ta.wK)(v),docId:null==x?void 0:x.id}),k=!!E,S=C!==v&&!k,T=(0,y.useCallback)(()=>{b(C)},[C]),[A,R]=(0,y.useState)(new aB.c),_=(0,y.useCallback)(()=>{if(!S)return;if(!(null==p?void 0:p.id)||!(null==x?void 0:x.id)){console.error("Missing site or doc");return}let e=(0,ta.GM)(v);f({variables:{input:{siteId:p.id,docId:x.id,path:e}},refetchQueries:["GetSite"]}).then(()=>{w((0,ta.nx)(e)),b((0,ta.nx)(e)),u(!0),A.resolve(),R(new aB.c)}).catch(e=>{r({status:"error",title:(0,s.jsx)(m.x6,{id:"dl5vwx"}),description:e.message}),A.reject(e),R(new aB.c),console.error("[UrlSlugForm] Error setting route",e.message)})},[S,null==x?void 0:x.id,v,f,null==p?void 0:p.id,r,A,R]),{isOpen:O,onClose:D,onOpen:z}=(0,nz.E)({id:"unsaved-page-metadata-modal"});return((0,y.useEffect)(()=>{n(()=>()=>(S?z():A.resolve(),A.promise))},[n,A,S,z]),h)?(0,s.jsxs)(l.B,{children:[(0,s.jsx)(l.B,{direction:"row",children:(0,s.jsxs)(a.E,{children:[(0,s.jsx)(m.x6,{id:"dq8+qI"})," "]})}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(l.B,{spacing:2,children:(0,s.jsx)(e8.z,{spacing:1,children:(0,s.jsxs)(n7.MJ,{as:"fieldset",isInvalid:k,children:[(0,s.jsx)(e8.z,{children:(0,s.jsxs)(iN.M,{children:[(0,s.jsx)(aG.G6,{children:"/"}),(0,s.jsx)(nK.p,{isDisabled:g,flex:2,value:v,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),_())},onChange:e=>{b((0,ie.Fw)(e.currentTarget.value))},borderColor:i}),(0,s.jsx)(aW.s,{in:S,unmountOnExit:!0,children:(0,s.jsx)(c.az,{ms:2,children:(0,s.jsxs)(e7.e,{w:"100%",children:[(0,s.jsx)(d.$,{variant:"solid",isLoading:g,isDisabled:k,onClick:_,children:(0,s.jsx)(m.x6,{id:"tfDRzk"})}),(0,s.jsx)(d.$,{onClick:T,children:(0,s.jsx)(m.x6,{id:"dEgA5A"})})]})})})]})}),E?(0,s.jsx)(iH.Wt,{justifyContent:"flex-end",alignItems:"flex-start",children:(0,s.jsx)(a.E,{fontSize:"xs",children:(0,s.jsx)(m.x6,{id:"DQaTdC",components:{0:(0,s.jsx)(n5.N,{textDecoration:"underline",onClick:()=>t&&t(E.docId)})}})})}):(0,s.jsxs)(l.B,{spacing:2,children:[(0,s.jsx)(n7.eK,{fontSize:"sm",children:(0,s.jsx)(m.x6,{id:"ZMlbHK"})}),o&&(0,s.jsxs)(nO.F,{status:"warning",variant:"left-accent",fontSize:"sm",children:[(0,s.jsx)(nD._,{}),(0,s.jsx)(sj.T,{children:(0,s.jsx)(m.x6,{id:"ZyBxCy"})})]})]})]})})}),O&&(0,s.jsx)(aU,{onDiscard:()=>{D(),A.resolve(),R(new aB.c)},onClose:()=>{D(),A.reject(),R(new aB.c)},onSave:_})]}):(0,s.jsx)(s.Fragment,{})},aK=e=>{var t;let{inModal:n=!1,openOtherDocModal:i,setVerifyURLPathChangesDone:r}=e,{editor:o}=(0,tk.m)(),{isInOfflineMode:a}=(0,E.u)(),d=(0,y.useCallback)((e,t)=>{null==o||o.commands.updateNestedAttributesAtPos(0,{settings:{[e]:t}})},[o]),{metaDescription:c}=(0,I.GV)(ep.Uu),u=(0,I.GV)(ep.Jo),h=(0,I.GV)((0,aF.Jn)(null==u?void 0:u.id)),x=(0,I.GV)(aF.E5),[p,g]=(0,y.useState)(()=>(null==u?void 0:u.title)||""),[j,v]=(0,y.useState)(()=>c||""),b=u&&!!u.site&&(0,ta.dv)(u.site),[C]=(0,nC.cGn)(),w=(0,y.useCallback)(e=>{u&&C({variables:{id:u.id,title:e,titleEdited:!0}})},[u,C]),k=(0,t$.lW)(w,300),S=(0,y.useCallback)(e=>{g(e.target.value.substring(0,ik.tS)),k(e.target.value.substring(0,ik.tS))},[k]),T=(0,y.useCallback)(e=>{d("metaDescription",e)},[d]),A=(0,t$.lW)(T,300),R=null==u?void 0:null===(t=u.titleCard)||void 0===t?void 0:t.previewUrl,_=(0,eq.nk)(null==u?void 0:u.organization),O=(0,eO.E)(p||h,_),D=(0,eO.C)(j||x,_),z=(0,B.dU)("gray.200","gray.600");return(0,s.jsxs)(l.B,{spacing:4,children:[(0,s.jsxs)(n7.MJ,{children:[(0,s.jsxs)(e8.z,{justifyContent:"center",children:[(0,s.jsx)(n9.l,{flex:"1",children:(0,s.jsx)(m.x6,{id:"MHrjPM"})}),(0,s.jsx)(aV,{length:p.length||0,idealLength:ik.GF,maxLength:ik.tS})]}),(0,s.jsx)(nK.p,{value:p,placeholder:h||f.Ru._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"},onKeyDown:e=>{"Enter"===e.key&&w(p)},onChange:S,isDisabled:a,"data-title-input":!0,borderColor:z})]}),(null==u?void 0:u.site)&&(0,s.jsx)(aq,{openOtherDocModal:i,registerDoneFn:r}),(0,s.jsxs)(n7.MJ,{children:[(0,s.jsxs)(e8.z,{justifyContent:"center",children:[(0,s.jsx)(n9.l,{flex:"1",pt:0,children:(0,s.jsx)(m.x6,{id:"Nu4oKW"})}),(0,s.jsx)(aV,{length:j.length||0,idealLength:ik.Od,maxLength:ik.Lj})]}),(0,s.jsx)(sC.T,{rows:n?2:4,value:j,placeholder:(null==x?void 0:x.trim())||f.Ru._({id:"2VBqT4"}),onChange:e=>{v(e.target.value.substring(0,ik.Lj)),A(e.target.value.substring(0,ik.Lj))},borderColor:z})]}),(0,s.jsx)(aJ,{previewTitle:O,previewDescription:D,screenshotUrl:R,isInOfflineMode:a,isSiteOn:b,inModal:n}),!a&&(0,s.jsx)(iD.w,{label:(0,s.jsx)(m.x6,{id:"ebOoCq",values:{GAMMA_PROPER_NOUN:ev.On}}),segmentEvent:tK.VV.GAMMA_PRO_UPSELL_PAGE_SETUP_REMOVE_WATERMARK,doc:u})]})},aJ=e=>{let{previewTitle:t,previewDescription:n,screenshotUrl:i,isInOfflineMode:r,isSiteOn:o,inModal:d}=e,c=(0,ei.rd)();return(0,s.jsxs)(l.B,{p:4,pt:3,bg:c?"gray.800":"gray.100",borderRadius:"md",direction:d?"row":"column",spacing:3,children:[(0,s.jsxs)(l.B,{spacing:2,flex:1,children:[(0,s.jsx)(a.E,{size:"sm",children:(0,s.jsx)(m.x6,{id:"h8sMnd"})}),(0,s.jsx)(aY,{title:t,description:n,screenshotUrl:i,isOffline:r})]}),o&&(0,s.jsxs)(l.B,{spacing:2,flex:1,ps:d?3:void 0,pt:d?void 0:3,borderStart:d?"1px solid":void 0,borderTop:d?void 0:"1px solid",borderColor:c?"gray.700":"gray.200",children:[(0,s.jsx)(a.E,{size:"sm",children:(0,s.jsx)(m.x6,{id:"d3xOlk"})}),(0,s.jsx)(aX,{title:t,description:n,screenshotUrl:i,isOffline:r}),(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"Ubf8D8"})})]})]})},aY=e=>{let{title:t,description:n,screenshotUrl:i,isOffline:r}=e,o=(0,ei.rd)();return(0,s.jsxs)(c.az,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:o?"gray.700":"gray.200",borderRadius:"md",overflow:"hidden",children:[(0,s.jsx)(rl.g,{ratio:1200/630,bg:"gray.300",borderBottom:"1px solid",borderColor:"gray.200",children:(0,s.jsx)(c.az,{bgColor:"gray.200",bgImage:"url(".concat(i,")"),backgroundSize:"cover",position:"relative",children:r&&(0,s.jsx)(x.g,{icon:h.seF,size:"lg"})})}),(0,s.jsxs)(l.B,{px:4,py:3,spacing:1,children:[(0,s.jsx)(a.E,{color:"gray.800",fontSize:"md",fontWeight:"bold",noOfLines:2,children:t}),(0,s.jsx)(a.E,{color:"gray.800",fontSize:"xs",noOfLines:2,children:n})]})]})},aX=e=>{let{title:t,description:n}=e;return(0,s.jsxs)(l.B,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",px:4,py:3,spacing:1,pos:"relative",children:[(0,s.jsx)(a.E,{color:"blue.600",fontSize:"lg",lineHeight:1.3,noOfLines:2,children:t}),(0,s.jsx)(a.E,{color:"gray.700",fontSize:"sm",noOfLines:3,children:n})]})},a$=e=>{let{onPageMetadataModalClose:t,isPageMetadataModalOpen:n,openOtherDocModal:i}=e,r=(0,ei.rd)(),{setDoneFn:o,doActionIfVerified:l}=aM({onSuccess:t});return(0,s.jsx)(X.L8,{isDark:r,children:(0,s.jsxs)(nX.aF,{onEsc:l,isOpen:n,onClose:l,size:"3xl",returnFocusOnClose:!1,children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nZ.$,{mx:2,children:[(0,s.jsx)(nT.r,{children:(0,s.jsx)(m.x6,{id:"aBZSpm"})}),(0,s.jsx)(nA.s,{onClick:e=>{e.preventDefault(),l()}}),(0,s.jsx)(n_.c,{}),(0,s.jsx)(nR.c,{children:(0,s.jsx)(aK,{inModal:!0,openOtherDocModal:i,setVerifyURLPathChangesDone:o})}),(0,s.jsx)(n_.c,{}),(0,s.jsx)(nQ.j,{children:(0,s.jsx)(d.$,{onClick:e=>{e.preventDefault(),l()},variant:"solid",children:(0,s.jsx)(m.x6,{id:"DPfwMq"})})})]})]})})},aZ=e=>{let{children:t,currentEditorDocId:n}=e,[i,r]=(0,y.useState)({docId:null,pendingOpenFn:null}),{push:o}=(0,e9.useRouter)();(0,y.useEffect)(()=>{let{docId:e,pendingOpenFn:t}=i;e===n&&t&&(t(),r({docId:null,pendingOpenFn:null}))},[n,i]);let l=async(e,t)=>{if(e!==n){let n=(0,L.pF)({docId:e});await o(n),r({docId:e,pendingOpenFn:t})}else t()};return(0,s.jsx)(s.Fragment,{children:t(l)})},aQ=e=>{let{isDisabled:t,onClick:n,isPublishing:i}=e;return(0,s.jsx)(X.Tz,{placement:"top",label:(0,s.jsx)(m.x6,{id:"Bq2yPr"}),shouldWrapChildren:!0,isDisabled:!t,children:(0,s.jsx)(ov.D,{icon:(0,s.jsx)(c.az,{children:(0,s.jsx)(x.g,{icon:h.OFY,fixedWidth:!0})}),onClick:n,closeOnSelect:!1,isDisabled:i||t,children:(0,s.jsxs)(o.s,{direction:"row",w:"100%",justify:"space-between",align:"center",children:[(0,s.jsx)(m.x6,{id:"jNnwuI"}),i&&(0,s.jsx)(t3.y,{size:"xs"})]})})})},a0=e=>{let{title:t,path:n}=e;return(0,s.jsxs)(s.Fragment,{children:[t?"".concat(t," "):"",n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n4.C,{as:"span",fontFamily:"mono",children:n})," "]})]})},a1=e=>{let{onClose:t,doc:n,site:i,path:r}=e,{push:o}=(0,e9.useRouter)(),[c,{loading:u}]=(0,nC.QO)(),h=(0,nk.d)(),x=(0,I.GV)(ts.le),p=(0,y.useCallback)(async()=>{if((null==n?void 0:n.id)&&i){if(await c({variables:{id:n.id},refetchQueries:["GetSite","GetDoc"]}),h({title:(0,s.jsx)(m.x6,{id:"oMgC5V"}),description:(0,s.jsx)(m.x6,{id:"gw6aHP",components:{0:(0,s.jsx)(a0,{title:null==n?void 0:n.title,path:r})}}),status:"success",duration:1e4,position:"top",isClosable:!0}),x===n.id){let e=(0,L.BV)({site:i,docId:n.id});e&&await o(e)}t()}},[null==n?void 0:n.id,null==n?void 0:n.title,i,x,c,h,r,t,o]);return(0,s.jsx)(X.L8,{isDark:!1,children:(0,s.jsxs)(nX.aF,{onClose:t,isOpen:!0,size:"xl",children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nZ.$,{children:[(0,s.jsx)(nT.r,{children:(0,s.jsx)(m.x6,{id:"kbKU/5"})}),(0,s.jsx)(nA.s,{isDisabled:u}),(0,s.jsx)(nR.c,{children:(0,s.jsxs)(l.B,{spacing:4,children:[(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"YOtIqx",values:{0:null==n?void 0:n.title,1:r&&(0,s.jsx)(n4.C,{as:"span",fontFamily:"mono",colorScheme:"blackAlpha",children:r})}})}),(0,s.jsx)(a.E,{color:"red.500",children:(0,s.jsx)(m.x6,{id:"2xOCJW"})})]})}),(0,s.jsx)(nQ.j,{children:(0,s.jsxs)(e7.e,{children:[(0,s.jsx)(d.$,{variant:"ghost",onClick:t,children:(0,s.jsx)(m.x6,{id:"dEgA5A"})}),(0,s.jsx)(d.$,{variant:"hazardous",onClick:p,isLoading:u,children:(0,s.jsx)(m.x6,{id:"O1M1zi"})})]})})]})]})})},a6=e=>{var t;let{site:n,doc:i,path:r}=e,{isOpen:o,onOpen:l,onClose:a}=(0,eP.j)({id:"confirm-remove-page-modal"}),d=(null==n?void 0:n.routes)&&(null==n?void 0:null===(t=n.routes)||void 0===t?void 0:t.length)>1;return(0,s.jsxs)(s.Fragment,{children:[o&&(0,s.jsx)(a1,{site:n,doc:i,path:r,onClose:a}),(0,s.jsx)(X.Tz,{placement:"top",isDisabled:d,label:(0,s.jsx)(m.x6,{id:"PBFhJK"}),shouldWrapChildren:!0,children:(0,s.jsx)(ov.D,{color:"red.500",isDisabled:!d,icon:(0,s.jsx)(c.az,{children:(0,s.jsx)(x.g,{icon:h.yLS,fixedWidth:!0})}),onClick:l,children:(0,s.jsx)(m.x6,{id:"cnGeoo"})})})]})},a2=e=>{let{site:t,doc:n,route:i,isTopToolbar:r=!1,hasChanges:o,onToggleOffline:l,...a}=e,d=(0,ob.U)(),{editor:u}=(0,tk.m)(),{replace:p}=(0,e9.useRouter)(),{isConnected:f}=(0,nC.utY)(),g=(null==n?void 0:n.id)&&(0,ta.OF)({site:t,docId:n.id}),{publishDoc:j,isPublishing:v}=nV({doc:n,site:t,path:g}),b=(0,ta.dv)(t),C=(0,I.GV)(ep.Jo),w=(0,er.Iy)("edit",C),E=(0,er.Iy)("edit",C),k=(0,er.Iy)("manage",C),S=(0,nN.Gx)(),T=(0,I.GV)(ep.nD),A=(0,y.useCallback)(()=>{(null==n?void 0:n.id)&&d({path:(0,ta.X)({path:i.path,routes:t.routes}),siteId:t.id,routes:t.routes,sourceDocId:n.id})},[d,null==n?void 0:n.id,i.path,t.id,t.routes]),{isOpen:R,onClose:_,onOpen:O}=(0,nz.E)({id:"page-metadata-modal"});return f?(0,s.jsx)(F.Z,{children:n&&(0,s.jsx)(rf.c,{...a,zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"380px",overflow:"auto",children:(0,s.jsx)(aZ,{currentEditorDocId:null==C?void 0:C.id,children:e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(au,{doc:n,site:t,showCreatedInfo:!0}),(0,s.jsx)(rv.N,{}),E&&u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.n2$,fixedWidth:!0}),onClick:()=>e(i.docId,O),children:(0,s.jsx)(m.x6,{id:"aBZSpm"})}),(0,s.jsx)(a$,{isPageMetadataModalOpen:R,onPageMetadataModalClose:_,openOtherDocModal:t=>e(t,O)})]}),E&&u&&(0,s.jsx)(ax,{onClick:()=>e(i.docId,()=>nU.R.emit("openPageSetup","cards"))})," ",(0,s.jsx)(rv.N,{}),S&&!i.offline&&(o||v)&&(0,s.jsx)(aQ,{onClick:j,isDisabled:!b,isPublishing:v}),(0,s.jsx)(ov.D,{icon:(0,s.jsx)(c.az,{children:(0,s.jsx)(x.g,{icon:tA.qtl,fixedWidth:!0})}),onClick:()=>{p((0,L.pF)({docId:n.id,preview:!0}),void 0,{shallow:!0})},children:(0,s.jsx)(m.x6,{id:"rdUucN"})}),!!l&&(0,s.jsx)(ov.D,{onClick:l,icon:(0,s.jsx)(c.az,{children:(0,s.jsx)(x.g,{icon:i.offline?h.A4h:h.buE,fixedWidth:!0})}),children:i.offline?(0,s.jsx)(m.x6,{id:"i/zQgj"}):(0,s.jsx)(m.x6,{id:"ySCSAn"})}),(0,s.jsx)(rv.N,{}),E&&u&&(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.jPR,fixedWidth:!0}),onClick:A,children:(0,s.jsx)(m.x6,{id:"IVskn1"})}),T&&r&&(0,s.jsx)(aP,{editor:u}),w&&r&&(0,s.jsx)(aO,{doc:n}),k&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rv.N,{}),(0,s.jsx)(a6,{site:t,doc:n,path:g})]})]})})})}):(0,s.jsx)(aN,{})},a5=e=>{if(!e)return{path:"untitled-page",title:f.Ru._({id:"kveQAJ"})};if(0===e.filter(e=>e.path.startsWith("/untitled-page")).length)return{title:f.Ru._({id:"kveQAJ"}),path:"untitled-page"};let t=Math.max(...e.map(e=>{let[t,n]=e.path.match(/^\/untitled-page-?(\d+)/)||["","1"];return Number(n)}));return{title:f.Ru._({id:"kveQAJ"})+" "+String(t+1),path:"untitled-page-".concat(t+1)}},a3=e=>{let{site:t}=e,n=(0,ob.U)(),{isOpen:i,onClose:r,onOpen:o}=(0,nz.E)({id:"add-page-ai-modal"}),[d,c]=(0,y.useState)(!1),u=(0,y.useCallback)(()=>{o()},[o]),p=(0,y.useCallback)(()=>{let{path:e}=a5(null==t?void 0:t.routes);c(!0),n({path:(0,ta.GM)(e),siteId:null==t?void 0:t.id,routes:null==t?void 0:t.routes}).then(()=>{c(!1)})},[n,null==t?void 0:t.id,null==t?void 0:t.routes]);return(0,s.jsxs)(rp.W,{children:[(0,s.jsx)(X.Tz,{label:f.Ru._({id:"yLRlZm"}),placement:"bottom",children:(0,s.jsx)(rm.I,{as:J.K,isRound:!0,size:"xs",isLoading:d,onFocus:e=>e.preventDefault(),"data-testid":"add-page",icon:(0,s.jsx)(x.g,{icon:h.QLR}),sx:{span:{flexGrow:0}}})}),(0,s.jsx)(F.Z,{children:(0,s.jsx)(rf.c,{maxW:"350px",zIndex:"tooltip",children:(0,s.jsxs)(oy.r,{title:f.Ru._({id:"yLRlZm"}),children:[(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:tA.p7g,fixedWidth:!0}),onClick:u,children:(0,s.jsxs)(e8.z,{align:"flex-start",children:[(0,s.jsxs)(l.B,{spacing:0,children:[(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"OppH33"})}),(0,s.jsx)(a.E,{fontSize:"xs",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"P/o+t+"})})]}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(n1.E,{h:"fit-content",colorScheme:"trueblue",ml:2,children:(0,s.jsx)(m.x6,{id:"jsQZMk"})})]})}),(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.QLR,fixedWidth:!0}),onClick:p,children:(0,s.jsxs)(l.B,{spacing:0,children:[(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"SSZKB9"})}),(0,s.jsx)(a.E,{fontSize:"xs",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"S65lUr"})})]})})]})})}),(0,s.jsx)(sJ,{isOpen:i,onClose:r})]})},a4=e=>{if(!e)return{path:"untitled-page",title:f.Ru._({id:"kveQAJ"})};if(0===e.filter(e=>e.path.startsWith("/untitled-page")).length)return{title:f.Ru._({id:"kveQAJ"}),path:"untitled-page"};let t=Math.max(...e.map(e=>{let[t,n]=e.path.match(/^\/untitled-page-?(\d+)/)||["","1"];return Number(n)}));return{title:f.Ru._({id:"kveQAJ"})+" "+String(t+1),path:"untitled-page-".concat(t+1)}},a8=e=>{let{isOpen:t,onClose:n,site:i}=e,r=(0,ob.U)(),[o,c]=(0,y.useState)(()=>a4(null==i?void 0:i.routes).title),[u,h]=(0,y.useState)(()=>a4(null==i?void 0:i.routes).path),x=(0,y.useRef)(null),[p,g]=(0,y.useState)(!1),j=((null==i?void 0:i.routes.map(e=>e.path))||[]).includes("/".concat(u)),v=(0,B.dU)("gray.900","gray.50"),b=(0,y.useCallback)(()=>{p||j||(g(!0),r({title:o,path:(0,ta.GM)(u),siteId:null==i?void 0:i.id,routes:null==i?void 0:i.routes}).then(()=>{g(!1),n()}))},[r,j,p,n,u,null==i?void 0:i.id,null==i?void 0:i.routes,o]);return((0,y.useEffect)(()=>{t&&setTimeout(()=>{x.current&&x.current.select()},50)},[t]),i)?(0,s.jsxs)(nX.aF,{isOpen:t,onClose:n,size:"xl",children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nZ.$,{color:v,children:[(0,s.jsx)(nT.r,{children:(0,s.jsxs)(l.B,{children:[(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"yLRlZm"})}),(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.500",fontWeight:"normal",letterSpacing:"normal",children:(0,s.jsx)(m.x6,{id:"7TUZvz"})})]})}),(0,s.jsx)(nA.s,{}),(0,s.jsx)(nR.c,{children:(0,s.jsxs)(l.B,{spacing:4,children:[(0,s.jsxs)(n7.MJ,{children:[(0,s.jsxs)(e8.z,{justifyContent:"center",children:[(0,s.jsx)(n9.l,{flex:"1",children:(0,s.jsx)(m.x6,{id:"MHrjPM"})}),(0,s.jsx)(aV,{length:o.length||0,idealLength:ik.GF,maxLength:ik.tS})]}),(0,s.jsx)(nK.p,{ref:x,value:o,onChange:e=>{c(e.target.value),h((0,ie.Fw)(e.target.value))},_placeholder:{opacity:1,color:"gray.500"},onKeyDown:e=>{"Enter"===e.key&&b()}})]}),(0,s.jsxs)(n7.MJ,{isInvalid:j,children:[(0,s.jsx)(e8.z,{justifyContent:"center",children:(0,s.jsx)(n9.l,{flex:"1",children:(0,s.jsx)(m.x6,{id:"dq8+qI"})})}),(0,s.jsxs)(iN.M,{children:[(0,s.jsx)(aG.G6,{children:"/"}),(0,s.jsx)(nK.p,{fontFamily:"mono",value:u,onKeyDown:e=>{"Enter"===e.key&&b()},onChange:e=>{h((0,ie.Fw)(e.target.value))},placeholder:f.Ru._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"}})]}),j&&!p&&(0,s.jsx)(iH.Wt,{children:(0,s.jsx)(m.x6,{id:"hw1fjn"})})]})]})}),(0,s.jsx)(nQ.j,{children:(0,s.jsxs)(e7.e,{children:[(0,s.jsx)(d.$,{colorScheme:"gray",variant:"ghost",onClick:n,children:(0,s.jsx)(m.x6,{id:"dEgA5A"})}),(0,s.jsx)(d.$,{onClick:b,isDisabled:j,variant:"solid",isLoading:p,children:(0,s.jsx)(m.x6,{id:"yLRlZm"})})]})})]})]}):(0,s.jsx)(s.Fragment,{})},a7=e=>{let{site:t}=e,{isOpen:n,onClose:i,onOpen:r}=(0,eP.j)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.az,{bgColor:"gray.50",textAlign:"center",p:4,m:2,children:[(0,s.jsx)(a.E,{fontSize:"sm",children:(0,s.jsx)(m.x6,{id:"6TCEnS"})}),(0,s.jsx)(a.E,{fontSize:"sm",mt:2,fontWeight:"bold",children:(0,s.jsx)(n5.N,{color:"trueblue.600",href:"#",onClick:r,children:(0,s.jsx)(m.x6,{id:"S0WoXy"})})})]}),n&&(0,s.jsx)(a8,{isOpen:n,onClose:i,site:t})]})},a9=e=>{let{icon:t,isSelected:n,children:i,href:r}=e,o=(0,y.useRef)(null),a=(0,B.dU)("gray.600","gray.50"),u=(0,B.dU)("trueblue.50","whiteAlpha.100"),h=(0,B.dU)("gray.900","gray.50"),x=(0,B.dU)("blackAlpha.50","whiteAlpha.100"),p=(0,B.dU)("gray.600","gray.50"),m=(0,B.dU)("trueblue.400","trueblue.200");(0,y.useEffect)(()=>{if(!n||!(null==o?void 0:o.current))return;let{inView:e}=(0,et.cH)(o.current)||{};e||o.current.scrollIntoView()},[n]);let f=(0,y.useCallback)(e=>{e.target.closest('[data-id="sidebar-item-menu-button"]')&&e.preventDefault(),e.target.closest('[data-id="sidebar-item-menu-list"]')&&e.stopPropagation()},[]);return(0,s.jsx)(b(),{href:r,passHref:!0,shallow:!0,children:(0,s.jsx)(d.$,{ref:o,onClick:f,variant:"secondary",justifyContent:"flex-start",fontWeight:"500",w:"100%",size:"sm",color:n?h:a,bgColor:n?u:"transparent",_hover:{bgColor:n?u:x,color:n?h:p},h:"auto",py:1.5,px:2,role:"group",children:(0,s.jsxs)(e8.z,{alignItems:"start",justify:"flex-start",w:"100%",spacing:2,children:[(0,s.jsx)(c.az,{color:n?m:a,mt:"0.2em",w:4,children:t}),(0,s.jsx)(l.B,{flex:1,direction:"row",minW:0,align:"start",justifyContent:"flex-start",children:i})]})})})},de=e=>{let{title:t,children:n}=e;return(0,s.jsxs)(e8.z,{justify:"space-between",children:[(0,s.jsx)(a.E,{fontSize:"sm",fontWeight:"600",px:1,py:1.5,color:"gray.500",children:t}),n&&n]})},dt=(e,t,n)=>n?(0,s.jsx)(t3.y,{size:"xs"}):e?(0,s.jsx)(x.g,{icon:h.hLE,fixedWidth:!0}):t?(0,s.jsx)(x.g,{icon:h.Eur,fixedWidth:!0}):(0,s.jsx)(x.g,{icon:h.A4h,fixedWidth:!0}),dn=e=>{let{site:t,isSelected:n,doc:i,route:r,hasChanges:o,onToggleOffline:l}=e,a=(0,B.dU)("trueblue.50","whiteAlpha.200"),d=(0,B.dU)("trueblue.100","whiteAlpha.200");return(0,s.jsx)(rp.W,{modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["right"]}}],children:e=>{let{isOpen:u}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rm.I,{"data-id":"sidebar-item-menu-button",ml:3,as:J.K,isRound:!0,variant:"ghost",py:2,size:"xs",_hover:{bgColor:n?d:a},icon:(0,s.jsx)(c.az,{className:"ellipsis-icon",transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1},_hover:{opacity:1},_active:{opacity:1},opacity:u?1:0,children:(0,s.jsx)(x.g,{icon:h.Dwc,fixedWidth:!0})})}),(0,s.jsx)(F.Z,{children:(0,s.jsx)(a2,{site:t,doc:i,route:r,hasChanges:o,"data-id":"sidebar-item-menu-list",onToggleOffline:l})})]})}})},di=e=>{var t;let{route:n,isHome:i,isSelected:r}=e,{docId:d,doc:c}=n,u=(0,t$.En)(),h=(0,I.GV)(ts.Gd),x=(0,I.GV)((0,ts.B4)(d)),p=(0,y.useRef)(null),f=(0,I.GV)(ts.le),[g,{loading:j}]=(0,nC.Imo)(),v=dt(i,x,j),b="currentColor",C=(0,B.dU)("gray.500","gray.400"),w=(0,B.dU)("trueblue.400","trueblue.200"),E=(0,y.useCallback)(async()=>{if(!(null==c?void 0:c.id)||!h)return;let e=!(null==n?void 0:n.offline);await g({variables:{input:{siteId:h.id,docId:c.id,offline:e,path:null==n?void 0:n.path}}})},[null==c?void 0:c.id,n,g,h]);(0,y.useEffect)(()=>{if(!p.current||f!==d)return;let{inView:e}=(0,et.cH)(p.current)||{};e||p.current.scrollIntoView()},[f,d]);let k=(0,L.pF)({docId:d});return(0,s.jsxs)(a9,{icon:v,"data-sidebar-doc":d,isSelected:r,href:k,children:[(0,s.jsxs)(l.B,{flex:1,spacing:"3px",alignItems:"flex-start",justifyContent:"flex-start",w:"100%",minW:0,children:[(0,s.jsx)(a.E,{textAlign:"left",color:r?w:b,noOfLines:2,maxW:"100%",whiteSpace:"normal",children:(0,ao.B)(null===(t=n.doc)||void 0===t?void 0:t.title)}),(0,s.jsxs)(e8.z,{color:C,children:[x&&!n.offline?(0,s.jsx)(X.Tz,{label:(0,s.jsxs)(l.B,{spacing:1,children:[(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"cFW7WD"})}),(0,s.jsx)(a.E,{fontSize:"xs",color:"whiteAlpha.700",children:(0,s.jsx)(m.x6,{id:"qliBJ3"})})]}),placement:"top",children:(0,s.jsx)(o.s,{bg:r?w:b,minW:1.5,minH:1.5,borderRadius:"full"})}):null,(0,s.jsx)(a.E,{mt:"-1px",textAlign:"left",noOfLines:1,fontFamily:i?void 0:"mono",fontSize:"xs",whiteSpace:"normal",wordBreak:"break-all",dir:"ltr",children:i?(0,s.jsx)(m.x6,{id:"i0qMbr"}):n.path})]})]}),E&&u&&h&&(0,s.jsx)(dn,{site:h,doc:c,route:n,hasChanges:x,isSelected:r,onToggleOffline:E})]})},dr=()=>{let e=(0,I.GV)(ts.Gd),{openSiteSettings:t}=(0,nE.ip)(),n=(0,I.GV)(ts.le),{onlineRoutes:i,offlineRoutes:r}=(0,y.useMemo)(()=>{let t=((null==e?void 0:e.routes)?[...e.routes]:[]).sort(function(e,t){return e.path<t.path?-1:e.path>t.path?1:0}).sort((e,t)=>"/"===e.path?-1:"/"===t.path?1:0);return{onlineRoutes:t.filter(e=>!e.offline),offlineRoutes:t.filter(e=>e.offline)}},[null==e?void 0:e.routes]);return e?(0,s.jsxs)(l.B,{spacing:2,w:"100%",p:0,children:[(0,s.jsx)(nB,{context:"pages",openSiteSettings:()=>t("website")}),(0,s.jsxs)(de,{title:(0,s.jsx)(m.x6,{id:"wRR604"}),children:[(0,s.jsx)(tT.h,{}),(0,s.jsx)(a3,{site:e})]}),(0,s.jsxs)(l.B,{spacing:1,px:0,children:[0===i.length&&(0,s.jsx)(a7,{site:e}),i.map(e=>{let t=e.docId===n;return(0,s.jsx)(di,{route:e,isHome:"/"===e.path,isSelected:t},e.id)}),r.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(de,{title:(0,s.jsx)(m.x6,{id:"1DdXjE"})}),r.map(e=>{let t=e.docId===n;return(0,s.jsx)(di,{route:e,isHome:"/"===e.path,isSelected:t},e.id)})]})]})]}):(0,s.jsx)(s.Fragment,{})},ds=()=>{let e=(0,ei.rd)();return(0,s.jsx)(X.L8,{isDark:e,children:(0,s.jsx)(t_.Z,{bg:e?"gray.900":"white",borderRight:"1px solid",borderColor:e?"gray.800":"gray.200","data-panelid":"pages-panel",overflowX:"hidden",px:6,pt:4,children:(0,s.jsx)(dr,{})})})};ds.panelPosition="left",ds.panelName="pages";let dl=()=>{let e=(0,nN.Gx)(),{togglePanel:t,isPanelOpen:n}=(0,eJ.ww)(ds,e),i=(0,C.d4)(ep.wC),r=(0,I.GV)(ts.Gd),{editor:s}=(0,t5.mi)(),o=(0,I.GV)(te.og),l=!!(r&&!(null!==o)&&r.routes.length>1&&s);return(0,t$.Vg)(()=>{l&&t({override:"open",disableTransition:!1})},[t,l],[l]),(0,y.useEffect)(()=>{i!==tv.w.DOC_VIEW&&t({override:"closed",disableTransition:!0})},[i,t]),{togglePagesPanel:t,isPagesPanelOpen:n}};var da=n(22470);let dd=[{transform:"translateX(0px)"},{transform:"translateX(10px)"},{transform:"translateX(0px)"},{transform:"translateX(-10px)"},{transform:"translateX(0px)"},{transform:"translateX(10px)"},{transform:"translateX(0px)"},{transform:"translateX(-10px)"},{transform:"translateX(0px)"}],dc={duration:400,easing:"ease-in-out"},du=e=>{var t;let{docId:n}=e,{onClose:i}=(0,eP.j)(),{onPasswordSubmitted:r}=(0,tk.m)(),[c,u]=(0,y.useState)(!1),[p,g]=(0,y.useState)(""),[j,v]=(0,y.useState)(!1),[b,C]=(0,y.useState)(""),w=(0,y.useRef)(null),[E,{data:k}]=(0,nC.tS1)();(0,y.useEffect)(()=>{E({variables:{docId:n}})},[n,E]);let S=(0,y.useCallback)(()=>{j||null==r||r(p).then(e=>{var t;let[n]=e;(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.doc)?v(!0):(w.current&&w.current.animate(dd,dc),C(f.Ru._({id:"jvNV6s",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})))})},[p,j,C,v,r]);return(0,s.jsxs)(nX.aF,{isOpen:!0,onClose:i,isCentered:!0,size:"xl",children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nZ.$,{ref:w,p:8,children:[(0,s.jsx)(nT.r,{children:(0,s.jsxs)(l.B,{alignItems:"center",children:[(0,s.jsx)(la.e,{src:(null==k?void 0:null===(t=k.publicDoc)||void 0===t?void 0:t.logoUrl)||da.A.src,size:"lg"}),(0,s.jsx)(q.D,{children:(0,s.jsx)(m.x6,{id:"GZ6qi2"})}),(0,s.jsx)(a.E,{fontSize:"md",letterSpacing:"normal",fontWeight:"500",children:(0,s.jsx)(m.x6,{id:"rp/zfh"})})]})}),(0,s.jsx)(nR.c,{display:"flex",flexDirection:"column",alignItems:"center",children:(0,s.jsx)(l.B,{as:"form",spacing:4,onSubmit:e=>{e.preventDefault(),p.length&&S()},w:"100%",children:(0,s.jsxs)(n7.MJ,{isInvalid:!!b,children:[(0,s.jsx)(n9.l,{children:(0,s.jsx)(m.x6,{id:"8ZsakT"})}),(0,s.jsxs)(iN.M,{children:[(0,s.jsx)(nK.p,{type:c?"text":"password",placeholder:"Enter the password",value:p,onChange:e=>{g(e.target.value)},borderColor:b?"red":"gray.200"}),(0,s.jsx)(iM.t,{children:(0,s.jsx)(J.K,{variant:"ghost",size:"sm",onClick:()=>u(!c),"aria-label":f.Ru._({id:"tniYMG"}),icon:c?(0,s.jsx)(x.g,{icon:h.k6j}):(0,s.jsx)(x.g,{icon:h.pS3}),_focus:{outline:"none"}})})]}),b&&(0,s.jsx)(iH.Wt,{children:b}),!b&&(0,s.jsx)(n7.eK,{color:"gray.600",children:(0,s.jsx)(m.x6,{id:"tSTf2H",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})})]})})}),(0,s.jsx)(nQ.j,{flex:1,w:"100%",children:(0,s.jsx)(o.s,{flex:1,align:"center",justify:"center",textAlign:"center",children:(0,s.jsx)(d.$,{w:"100%",variant:"solid",isDisabled:!p.length,onClick:S,children:(0,s.jsx)(m.x6,{id:"xGVfLh"})})})})]})]})},dh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=(0,I.jL)(),i=(0,et.O2)("editor"),r=(0,eJ.t3)(),s=(0,I.GV)(ep.kn,tP()),o=(0,I.GV)(ep.FI,tP()),l=!!(null==o?void 0:o.pos);(0,y.useEffect)(()=>{if(!e)return;let t=tr()(()=>{s&&n((0,ep.mF)({attached:!1}))},500,{leading:!0}),i=(0,es.Ei)({topOffset:100,requiredCookie:"spotlightScrollDebug=true"});return document.addEventListener("wheel",t,!0),()=>{i(),t.cancel(),document.removeEventListener("wheel",t,!0)}},[e,n,s,l,t]);let a=(0,I.GV)(ep.e4,tP());(0,y.useEffect)(()=>{if(!e||a)return;let t=tr()(()=>{if(i.inProgress)return;let t=(0,rI.MY)(e,100,r);if(!t){console.debug("[useHandleScrollAndSelectionChange][handleScroll] Unable to find topPosPct.");return}n((0,ep.m7)(t))},250,{trailing:!0,maxWait:500}),s=tr()(()=>{if(e.state.selection instanceof oR.J)return;let t=document.querySelector(i.scrollSelector||""),r=null==t?void 0:t.getBoundingClientRect(),s=e.state.selection.from,o=(0,rI.jB)(e,s);if(!t||!r||!o){console.debug("[useHandleScrollAndSelectionChange][handleSelectionChange] missing data",{domNodeToUse:o});return}let l=o.getBoundingClientRect(),a=parseFloat(((e.view.coordsAtPos(s).top-l.y)/l.height).toFixed(2));n((0,ep.m7)({pos:s,pct:a}))},250,{trailing:!0,maxWait:500});return t(),e.on("selectionUpdate",s),window.addEventListener("scroll",t,!0),()=>{e.off("selectionUpdate",s),window.removeEventListener("scroll",t,!0)}},[e,n,i,a,r])},dx=()=>{let e=(0,nk.d)(),t=(0,I.jL)();return(0,y.useCallback)(n=>{let{collaborator:i,localIsFollowing:r,localIsAttached:l}=n,d={attached:!0};r?l?d.following=null:e.closeAll():(d.following=i.sessionId,e.closeAll(),e({duration:2e3,position:"bottom",render:function(){return(0,s.jsxs)(o.s,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,s.jsx)(la.e,{size:"sm",src:i.profileImageUrl,border:"solid 2px ".concat(i.color),color:oX()(i.color).isDark()?"white":"black",bg:i.color}),(0,s.jsx)(a.E,{ml:2,children:(0,s.jsx)(m.x6,{id:"lULvWe",values:{0:i.name}})})]})}})),console.debug("[CollaboratorsPanel] Clicked on collaborator ".concat(i.name,". Setting following to ").concat(d)),t((0,ep.mF)(d))},[e,t])},dp=e=>{let{editor:t,collaborators:n,user:i}=e,r=(0,y.useRef)(!1),s=dx(),o=new URLSearchParams(window.location.search),l=o.get("following_id"),a=o.get("follow_on_start");(0,y.useEffect)(()=>{if(r.current||!a||(null==i?void 0:i.id)===l||!t)return;let e=n.find(e=>e.id===l);e&&(s({collaborator:e,localIsAttached:!1,localIsFollowing:!1}),r.current=!0)},[l,a,t,n,i,s])},dm="sessionId1",df=tm.YY.create({addStorage:()=>({user:{}}),addCommands(){return{user:e=>()=>{let t=(0,I.KA)();return this.storage.user=od()({},this.storage.user,e),t.dispatch((0,ep.vK)({sessionId:dm})),t.dispatch((0,ep._)({collaborators:[this.storage.user]})),!0}}}}),dg=e=>{var t;let{docId:n,snapshotId:i,scrollingParentSelector:r,onCreate:l,theme:a,hideMadeWithGammaBadge:d=!1}=e,[u]=(0,y.useState)(()=>[t9.Q,op.Li.configure({scrollerSelector:r}),df,ox.wg]),{user:h,isUserLoading:x,anonymousUser:p,color:m}=(0,er.ur)(),[f]=(0,em.M)(ef.E.gammaDocPasswords,{}),[g,j]=(0,y.useState)(),{data:v,loading:b,error:C}=(0,nC.YDl)({variables:{docId:n,snapshotId:i,password:f[n]},skip:!i}),w=(0,I.GV)(nm.Jo);(0,y.useEffect)(()=>{!x&&g&&g.commands.user({id:(null==h?void 0:h.id)||p.id,color:m.value,sessionId:dm,idleSince:null,name:(null==h?void 0:h.displayName)||p.displayName||"",profileImageUrl:(null==h?void 0:h.profileImageUrl)||"",isReady:!x})},[g,h,m,x,p]);let E=v&&void 0!==v.snapshot&&!b&&w;return(0,s.jsxs)(c.az,{"data-testid":"public-static-editor-wrapper",flex:"1",height:"100%",children:[!E||C?(0,s.jsxs)(o.s,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!E&&(0,s.jsx)(t3.y,{}),C&&(0,s.jsxs)(K.o,{h:"100%",children:["There was an error loading this ",ev.TP,":"," ",C.message]})]}):(0,s.jsx)(c.az,{"data-testid":"public-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:E?1:0,children:(0,s.jsx)(td.bw,{doc:w,editorId:"main",docId:n,theme:a||void 0,extensions:u,onCreate:e=>{let{editor:t}=e;j(t),setTimeout(()=>{l&&l(t)},10)},readOnly:!0,initialContent:null===(t=v.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:r})}),g&&(0,s.jsx)(tC,{editor:g,backoffFactor:2}),!d&&(0,s.jsx)(om.d,{docWorkspace:null==w?void 0:w.organization})]})},dj={[tv.w.DOC_VIEW]:"doc",[tv.w.SLIDE_VIEW]:"present",[tv.w.DOC_PREVIEW]:"preview"},dv=Object.fromEntries(Object.entries(dj).map(e=>{let[t,n]=e;return[n,t]})),db=e=>{let t=(0,C.wA)(),n=(0,L.sF)().mode,i=(0,I.GV)(ep.wC),r=(0,y.useCallback)(e=>{let t=e||i,{mode:n}=(0,L.sF)(),r=dj[t];n!==r&&(0,on.g5)({query:{...(0,L.sF)(),mode:r},emitChange:!1})},[i]);(0,ok.w)(r,[i]),(0,y.useEffect)(()=>on.uE.on("changed",()=>r()),[r]),(0,t$.Vg)(function(){if(!e)return;let i=dv[n],{cardId:s}=(0,L.$9)();i===tv.w.SLIDE_VIEW&&(s?(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCardById:",s),e.commands.spotlightCardById(s)):(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCurrentCard"),e.commands.spotlightCurrentCard())),i&&t((0,ep.iY)({mode:i})),r(i)},[e,t,n,r],[e])};var dy=n(119),dC=n.n(dy),dw=n(80245);let dE=(e,t)=>e.docChanged?(0,dw.A)(e).flatMap(n=>{let i={from:n.newStart,to:n.newEnd};return function(e,t,n){let i=[];if(t.from===t.to){let n=e.nodeAt(t.from);n&&i.push({node:n,pos:t.from})}return e.nodesBetween(t.from,t.to,(e,t)=>{n(e)&&i.push({node:e,pos:t})}),i}(e.doc,i,t)}):[];var dk=n(387);let dS="disable-card-size-animations",dI=()=>{let e=(0,I.GV)(ep.yh),t=(0,I.GV)(ep.We),n=(0,I.GV)(ep.Uu),i=(0,nk.d)(),{min:r}=rO(),[o,l]=(0,y.useState)(null),[a,d]=(0,y.useState)(null);return(0,y.useEffect)(()=>{t<=r&&n.scaleContentToFit&&(a&&i.close(a),l(i({title:(0,s.jsx)(m.x6,{id:"IxUcyZ"}),description:(0,s.jsx)(m.x6,{id:"v9rGLj"}),status:"info",position:"top",duration:3e3})))},[t,n.scaleContentToFit,r,i,a]),(0,y.useEffect)(()=>{if(o&&t>r&&n.scaleContentToFit){i.close(o);let e=i({title:(0,s.jsx)(m.x6,{id:"oWpmCA"}),description:(0,s.jsx)(m.x6,{id:"S0DQn7"}),status:"success",position:"top",duration:3e3});l(null),d(e)}},[o,n.scaleContentToFit,r,i,t]),!e||t<=r},dT=e=>{let{editor:t}=e,n=(0,I.CU)(),i=(0,rC.t)(),r=dI(),s=(0,y.useCallback)(e=>{var s;let{transaction:o}=e;if(!o.docChanged||o.getMeta("scaleContentToFit")||(0,dk.he)(o)||r||o.getMeta("rearrangeCards"))return;let l=null===(s=(0,oi.iS)(o.doc))||void 0===s?void 0:s.attrs.settings;if(!l||!(null==l?void 0:l.scaleContentToFit))return;if(o.steps.some(e=>"attr"in e&&"settings"===e.attr&&l.scaleContentToFit&&"fluid"!==l.cardDimensions)||(0,dk.Xq)(o)){let e=(0,tm.Nx)(o.doc,{from:0,to:o.doc.lastChild.nodeSize},tj.jg);requestAnimationFrame(()=>{e.forEach(e=>{let{node:r}=e;dA({id:r.attrs.id,editor:t,cardFontScale:r.attrs.fontScale,isTopLayout:"top"===r.attrs.layout,docSettingsFromTransaction:l,viewportScaleFactor:i,store:n})})});return}let a=dE(o,tj.jg);a.length&&a.forEach(e=>{let{node:r}=e;dR({id:r.attrs.id,editor:t,cardFontScale:r.attrs.fontScale,isTopLayout:"top"===r.attrs.layout,docSettingsFromTransaction:l,viewportScaleFactor:i,store:n})})},[t,n,i,r]);return(0,y.useEffect)(()=>{if(t&&!t.isThumbnail)return t.on("update",s),()=>{t.off("update",s)}},[t,s]),null},dA=async e=>{let{id:t,editor:n,cardFontScale:i,isTopLayout:r,docSettingsFromTransaction:s,viewportScaleFactor:o,store:l}=e;if(!n)return;let a=(0,tj.W0)(n,t);if(!a)return;let d=(0,rI.jB)(n,a.pos);if(!d)return;let c=d_({cardElt:d,cardFontScale:i,isTopLayout:r,docSettingsFromTransaction:s,viewportScaleFactor:o,store:l});c!==i&&n.chain().updateAttributesAtPos(a.pos,{fontScale:c}).setMeta("scaleContentToFit",!0).setMeta("addToHistory",!1).run()},dR=eV()(dA,250,{leading:!0}),d_=e=>{let{cardElt:t,cardFontScale:n,isTopLayout:i,docSettingsFromTransaction:r,viewportScaleFactor:s,store:o}=e,l=(0,ep.We)(o.getState()),a=(0,ep.SJ)(o.getState()),d=1,c=null==t?void 0:t.querySelector("[data-card-id]"),u=null==t?void 0:t.querySelector("[data-card-body]"),h=dO({docSettingsFromTransaction:r,zoomLevel:l,viewportScaleFactor:s,theme:a});if(!c||!u||!h)return n||d;if(Math.abs(h-function(e,t){let n=e.querySelector('[data-layout-item-id="body"]'),i=null==n?void 0:n.querySelector("[data-node-view-content]"),r=e.querySelector('[data-layout-item-id="accent"]');if(t&&r){let e=r.clientHeight,t=null==i?void 0:i.clientHeight;return t?t+e:0}return(null==i?void 0:i.clientHeight)||0}(t,i))<1.01*h-h/1.01)return n;for(document.body.classList.add(dS),d+=.05;d>T.o5&&(d=dC()(d-.05,2),c.style.setProperty("--card-font-scale",d.toString()),!(u.scrollHeight<=1.01*h)););return document.body.classList.remove(dS),requestAnimationFrame(()=>{c.style.removeProperty("--card-font-scale")}),d},dO=ry()(function(e){let{docSettingsFromTransaction:t,zoomLevel:n,viewportScaleFactor:i,theme:r}=e,s=null==t?void 0:t.cardDimensions,o=s?p.VM[s]:16/9;if(o)return rS({zoomLevel:n,docSettingsFontSize:null==t?void 0:t.fontSize,defaultContentWidth:null==t?void 0:t.defaultContentWidth,viewportScaleFactor:i,theme:r})/o});var dD=n(31201),dz=n(90406),dP=n(12408),dL=n(2250),dN=n(35987),dM=n(59707),dV=n(83060);let dF=e=>{let{isOpen:t,onClose:n,onSaveSuccess:i,docId:r}=e,o=(0,nk.d)(),a=(0,y.useRef)(null),[c,u]=(0,y.useState)(""),[h,{loading:x}]=(0,nC.cGn)(),p=()=>{h({variables:{id:r,title:c}}).then(()=>{u(()=>""),i()}).catch(e=>{console.error(e),o({title:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m.x6,{id:"AToAqe",values:{0:e.message}})}),position:"top",status:"error"})})};return(0,s.jsxs)(nX.aF,{returnFocusOnClose:!1,onClose:n,closeOnOverlayClick:!0,isOpen:t,initialFocusRef:a,children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nZ.$,{children:[(0,s.jsx)(nT.r,{children:(0,s.jsx)(m.x6,{id:"kq/0Sg",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})}),(0,s.jsx)(nA.s,{}),(0,s.jsx)(nR.c,{children:(0,s.jsx)(nK.p,{ref:a,value:c,required:!0,placeholder:(0,ao.B)(),onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&p()}})}),(0,s.jsx)(nQ.j,{children:(0,s.jsx)(l.B,{spacing:2,direction:"row",align:"center",children:(0,s.jsx)(d.$,{isLoading:x,isDisabled:x||!c||!c.length,onClick:()=>{p()},children:(0,s.jsx)(m.x6,{id:"tfDRzk"})})})})]})]})},dG=(0,y.memo)(e=>{let{doc:t}=e,n=(0,y.useCallback)(()=>nU.R.emit("openSharePanel",{view:"invite"}),[]),{isOpen:i,onClose:r,onOpen:l}=(0,nz.E)({id:"analyticsModalDisclosure"}),{isOpen:a,onOpen:d,onClose:c}=(0,nz.E)({id:"titleModalDisclosure"}),{isInOfflineMode:u}=(0,E.u)(),p=(0,en.st)(),{user:g}=(0,er.ur)(),j=(0,er.Iy)("manage",t)&&!!g,v=(0,D.u)("editDocAI"),b=(0,y.useCallback)(()=>{t&&(t.title&&""!==t.title?n():d())},[t,n,d]),C=(0,y.useCallback)(e=>()=>{null==p||p.track(en.VV.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:e,type:"full"}),l()},[p,null==t?void 0:t.id,l]);return j&&t&&!v?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.s,{children:(0,s.jsx)(X.Tz,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,s.jsx)(m.x6,{id:"YaUqUV"}),children:(0,s.jsx)(dV.f,{"data-guider-highlight":"view-analytics-button","aria-label":f.Ru._({id:"YaUqUV"}),isDisabled:u,onMouseDown:dM.Fw,onClick:C("toolbar_analytics_block"),icon:(0,s.jsx)(x.g,{icon:h.q9c})})})}),a&&(0,s.jsx)(dF,{onClose:c,isOpen:a,onSaveSuccess:()=>{c(),n()},docId:null==t?void 0:t.id}),i&&(0,s.jsx)(l8,{doc:t,onSharePanelOpen:b,onAnalyticsPanelClose:r,isAnalyticsPanelOpen:i,mode:"full"})]}):null});var dW=n(43980),dB=n(23970),dU=n(67419),dH=n(31595),dq=n(72252);let dK=(0,y.createContext)(null);var dJ=n(18877);let dY=e=>!e.isLayoutDirty&&e.willUpdate(!1),dX=e=>!0===e,d$=e=>dX(!0===e)||"id"===e,dZ=({children:e,id:t,inheritId:n,inherit:i=!0})=>{void 0!==n&&(i=n);let r=(0,y.useContext)(dq.L),s=(0,y.useContext)(dK),[o,l]=(0,dJ.C)(),a=(0,y.useRef)(null),d=r.id||s;null===a.current&&(d$(i)&&d&&(t=t?d+"-"+t:d),a.current={id:t,group:dX(i)&&r.group||function(){let e=new Set,t=new WeakMap,n=()=>e.forEach(dY);return{add:i=>{e.add(i),t.set(i,i.addEventListener("willUpdate",n))},remove:i=>{var r;e.delete(i),null===(r=t.get(i))||void 0===r||r(),t.delete(i),n()},dirty:n}}()});let c=(0,y.useMemo)(()=>({...a.current,forceRender:o}),[l]);return y.createElement(dq.L.Provider,{value:c},e)},dQ=()=>{let{user:e,anonymousUser:t}=(0,er.ur)(),n=(0,C.wA)(),i=(0,nk.d)(),{editor:r}=(0,t5.mi)(),{collaborators:l,followers:c}=(0,I.GV)((0,ep.iH)((null==e?void 0:e.id)||t.id));dp({editor:r,collaborators:l,user:e});let u=(0,I.GV)(ep.Kc),h=(0,I.GV)(ep.ys),x=(0,I.GV)(ep.kn),p=(0,I.GV)(ep.Ji),g=(0,I.GV)(ep.QF);(0,y.useEffect)(()=>{u.forEach(e=>{i({duration:2e3,position:"bottom",render:function(){return(0,s.jsxs)(o.s,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,s.jsx)(la.e,{size:"sm",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),color:oX()(e.color).isDark()?"white":"black",bg:e.color,ignoreFallback:!0}),(0,s.jsx)(a.E,{ml:2,children:(0,s.jsx)(m.x6,{id:"DSaSKH",values:{0:e.name}})})]})}})})},[u,i]),(0,y.useEffect)(()=>{let e=!x&&p&&!g;if(!r||!e)return;i.closeAll();let t=i({id:"detached-toast",render:()=>(0,s.jsxs)(o.s,{bg:"gray.50",p:3,px:6,m:4,justify:"flex-end",align:"center",borderRadius:"md",shadow:"md",children:[(0,s.jsx)(a.E,{size:"sm",mr:6,children:(0,s.jsx)(m.x6,{id:"PjodLp"})}),(0,s.jsxs)(e7.e,{size:"sm",alignItems:"center",children:[(0,s.jsx)(d.$,{onClick:()=>{n((0,ep.mF)({attached:!0}))},variant:"solid",children:(0,s.jsx)(m.x6,{id:"f/C2ic"})}),(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"5JWVnj"}),children:(0,s.jsx)(J.K,{isRound:!0,variant:"ghost",size:"xs","aria-label":f.Ru._({id:"5JWVnj"}),icon:(0,s.jsx)(dB.U,{}),onClick:()=>{n((0,ep.mF)({attached:!1,following:null}))}})})]})]}),position:"bottom",duration:null});return()=>{i.close(t)}},[r,x,p,g,i,n]),(0,y.useEffect)(()=>{p||!r||r.isDestroyed||n((0,ep.mF)({following:null}))},[r,p,n]);let j=(0,eZ.h5)({base:4,md:6,xl:8})||6,v=j/(c.length?2:1),b=j/(l.length?2:1);return(0,s.jsx)(o.s,{children:(0,s.jsxs)(e8.z,{divider:(0,s.jsx)(dU.G,{borderColor:"gray.200"}),children:[c.length&&(0,s.jsx)(d1,{type:"FOLLOWERS",collaborators:c,max:b,isEveryone:0===l.length,localCollaborator:h,localIsAttached:x}),l.length&&(0,s.jsx)(d1,{type:"COLLABORATORS",collaborators:l,max:v,isEveryone:0===c.length,localCollaborator:h,localIsAttached:x})]})})};var d0=function(e){return e.FOLLOWERS="FOLLOWERS",e.COLLABORATORS="COLLABORATORS",e}(d0||{});let d1=e=>{let{collaborators:t,localCollaborator:n,localIsAttached:i,type:r,max:l,isEveryone:d}=e,c=dx(),u="FOLLOWERS"===r,h=t.length>l,x=h?t.slice(0,l-1):t,p=h?t.length-l+1:0,g=e=>{let{localIsFollowing:t,collaborator:n}=e;u||c({localIsFollowing:t,localIsAttached:i,collaborator:n})};return(0,s.jsx)(dZ,{children:(0,s.jsxs)(dH.Z,{size:"sm",spacing:u?-2:0,children:[u&&(0,s.jsx)(d6,{isEveryone:d}),x.map((e,t)=>{var r;let l=(null==n?void 0:null===(r=n.memoState)||void 0===r?void 0:r.following)===e.sessionId,d=!!e.idleSince,c=!u&&(h||x.length-1!==t);return(0,s.jsx)(X.Vc,{ignoreFallback:!0,name:e.name,label:(0,s.jsxs)(o.s,{direction:"column",justify:"center",align:"center",children:[(0,s.jsx)(a.E,{children:e.name}),(0,s.jsx)(a.E,{fontSize:"xs",children:u?(0,s.jsx)(m.x6,{id:"iRohzP"}):l&&i?(0,s.jsx)(m.x6,{id:"1QTvS5"}):(0,s.jsx)(m.x6,{id:"2Ldadb"})})]}),pointerEvents:d?"none":"auto",opacity:d?.4:1,transitionProperty:"common",transitionDuration:"normal",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),nubbin:l&&i,bg:e.color,shadow:"base",color:oX()(e.color).isDark()?"white":"black",cursor:u?"":"pointer",boxProps:c?{marginEnd:-2}:{},onClick:()=>g({localIsFollowing:l,collaborator:e})},e.sessionId)}),p>0&&(0,s.jsxs)(X.oQ,{tooltipLabel:f.Ru._({id:"25VyZX"}),onClick:e=>{var i;let r=t.find(t=>t.id===e.id);g({localIsFollowing:!!(r&&(null==n?void 0:null===(i=n.memoState)||void 0===i?void 0:i.following)===r.sessionId),collaborator:r})},avatars:t,count:p,disabled:u,children:[(0,s.jsx)(a.E,{px:2,children:u?(0,s.jsx)(m.x6,{id:"vliZud",values:{0:t.length}}):(0,s.jsx)(m.x6,{id:"sC4bhw",values:{0:t.length}})}),!u&&(0,s.jsx)(a.E,{px:2,fontSize:"sm",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"miJbY4"})}),(0,s.jsx)(rv.N,{})]})]})})},d6=e=>{let{isEveryone:t}=e,[n,i]=(0,y.useState)(!1),[r,o]=(0,y.useState)(!1),[l,a]=(0,y.useState)(!1);return((0,y.useEffect)(()=>{!n&&t&&(o(!0),i(!0),setTimeout(()=>{o(!1)},3e3))},[t,n]),t)?(0,s.jsx)(c.az,{fontSize:"sm",color:"",px:2,mr:2,children:(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"w7dTyp"}),isOpen:l||r,children:(0,s.jsx)(c.az,{mr:2,px:1,bg:"green.300",color:"green.900",borderRadius:"full",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:(0,s.jsx)(x.g,{icon:h.pS3})})})}):(0,s.jsx)(c.az,{fontSize:"sm",color:"gray.700",pr:4,children:(0,s.jsx)(x.g,{icon:h.pS3})})};var d2=n(13945);let d5=(0,i2.P)(c.az),d3=e=>{let{commentFeedItems:t,editor:n,doc:i,user:r}=e;return n&&r?(0,s.jsx)(l.B,{p:2,children:(0,s.jsx)(i5.N,{initial:!1,children:t.map(e=>(0,s.jsx)(d5,{layout:!0,initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},bg:"gray.100",borderColor:"gray.200",borderWidth:"1px",borderRadius:"md",shadow:"sm",children:(0,s.jsx)(r7.h,{comment:e,editor:n,selfUser:r,docId:i.id,userCanComment:!1,instanceType:"notification"},e.id)},e.id))})}):null};var d4=n(24586);function d8(e,t,n,i,r,s,o){try{var l=e[s](o),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(i,r)}function d7(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var s=e.apply(t,n);function o(e){d8(s,i,r,o,l,"next",e)}function l(e){d8(s,i,r,o,l,"throw",e)}o(void 0)})}}var d9=n(26660),ce=n.n(d9),ct=n(37124);function cn(e,t,n,i,r,s,o){try{var l=e[s](o),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(i,r)}function ci(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var s=e.apply(t,n);function o(e){cn(s,i,r,o,l,"next",e)}function l(e){cn(s,i,r,o,l,"throw",e)}o(void 0)})}}function cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function cs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(n),!0).forEach(function(t){var i;i=n[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var co="axios-retry";function cl(e){return!e.response&&!!e.code&&"ECONNABORTED"!==e.code&&ct(e)}var ca=["get","head","options"],cd=ca.concat(["put","delete"]);function cc(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&e.response.status<=599)}function cu(e){return!!e.config&&cc(e)&&-1!==cd.indexOf(e.config.method)}function ch(e){return cl(e)||cu(e)}function cx(){return 0}function cp(e){var t=e[co]||{};return t.retryCount=t.retryCount||0,e[co]=t,t}function cm(){return(cm=ci(function*(e,t,n,i){var r=n.retryCount<e&&t(i);if("object"==typeof r)try{return yield r,!0}catch(e){return!1}return r})).apply(this,arguments)}function cf(e,t){var n;e.interceptors.request.use(e=>(cp(e).lastRequestTime=Date.now(),e)),e.interceptors.response.use(null,(n=ci(function*(n){var{config:i}=n;if(!i)return Promise.reject(n);var{retries:r=3,retryCondition:s=ch,retryDelay:o=cx,shouldResetTimeout:l=!1}=cs(cs({},t),i[co]),a=cp(i);if(yield function(e,t,n,i){return cm.apply(this,arguments)}(r,s,a,n)){a.retryCount+=1;var d=o(a.retryCount,n);if(e.defaults.agent===i.agent&&delete i.agent,e.defaults.httpAgent===i.httpAgent&&delete i.httpAgent,e.defaults.httpsAgent===i.httpsAgent&&delete i.httpsAgent,!l&&i.timeout&&a.lastRequestTime){var c=Date.now()-a.lastRequestTime;i.timeout=Math.max(i.timeout-c-d,1)}return i.transformRequest=[e=>e],new Promise(t=>setTimeout(()=>t(e(i)),d))}return Promise.reject(n)}),function(e){return n.apply(this,arguments)}))}cf.isNetworkError=cl,cf.isSafeRequestError=function(e){return!!e.config&&cc(e)&&-1!==ca.indexOf(e.config.method)},cf.isIdempotentRequestError=cu,cf.isNetworkOrIdempotentRequestError=ch,cf.exponentialDelay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=100*Math.pow(2,e),n=.2*t*Math.random();return t+n},cf.isRetryableError=cc;var cg=n(63113);class cj{constructor(e){(0,d4.A)(this,"host",void 0),(0,d4.A)(this,"apiKey",void 0),(0,d4.A)(this,"userToken",void 0),(0,d4.A)(this,"axiosClient",void 0),(0,d4.A)(this,"socket",void 0),(0,d4.A)(this,"socketConnected",!1),this.host=e.host,this.apiKey=e.apiKey,this.userToken=e.userToken||null,this.axiosClient=ce().create({baseURL:this.host,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey),"X-Knock-User-Token":this.userToken}}),this.socket=new cg.Socket("".concat(this.host.replace("http","ws"),"/ws/v1"),{params:{user_token:this.userToken,api_key:this.apiKey}}),cf(this.axiosClient,{retries:3,retryCondition:this.canRetryRequest,retryDelay:cf.exponentialDelay})}connectSocket(){this.socketConnected||(this.socket.connect(),this.socket.onOpen(()=>{this.socketConnected=!0}))}disconnectSocket(){this.socket.disconnect()}createChannel(e,t){return this.socket.channel(e,t)}makeRequest(e){var t=this;return d7(function*(){try{var n=yield t.axiosClient(e);return{statusCode:n.status<300?"ok":"error",body:n.data,error:void 0,status:n.status}}catch(e){return console.error(e),{statusCode:"error",status:500,body:void 0,error:e}}})()}canRetryRequest(e){return!!cf.isNetworkError(e)||!!e.response&&(e.response.status>=500&&e.response.status<=599||429===e.response.status)}}var cv=n(28985),cb=n.n(cv);function cy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function cC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cy(Object(n),!0).forEach(function(t){(0,d4.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}!function(e){e.loading="loading",e.fetchMore="fetchMore",e.ready="ready",e.error="error"}(r||(r={}));var cw={shouldSetPage:!0,shouldAppend:!1};function cE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function ck(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cE(Object(n),!0).forEach(function(t){(0,d4.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class cS{constructor(e,t,n){this.knock=e,this.feedId=t,(0,d4.A)(this,"apiClient",void 0),(0,d4.A)(this,"userFeedId",void 0),(0,d4.A)(this,"channelConnected",!1),(0,d4.A)(this,"channel",void 0),(0,d4.A)(this,"broadcaster",void 0),(0,d4.A)(this,"defaultOptions",void 0),(0,d4.A)(this,"store",void 0),this.apiClient=e.client(),this.feedId=t,this.userFeedId=this.buildUserFeedId(),this.store=function(e){let t;let n=new Set,i=(e,i)=>{let r="function"==typeof e?e(t):e;if(r!==t){let e=t;t=i?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,s=(e,i=r,s=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let o=i(t);function l(){let n=i(t);if(!s(o,n)){let t=o;e(o=n,t)}}return n.add(l),()=>n.delete(l)},o={setState:i,getState:r,subscribe:(e,t,i)=>t||i?s(e,t,i):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(i,r,o),o}(e=>({items:[],networkStatus:r.ready,loading:!1,metadata:{total_count:0,unread_count:0,unseen_count:0},pageInfo:{before:null,after:null,page_size:50},setLoading:t=>e(()=>({loading:t})),setNetworkStatus:t=>e(()=>({networkStatus:t,loading:t===r.loading})),setResult:function(t){var{entries:n,meta:i,page_info:s}=t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cw;return e(e=>{var t;return{items:o.shouldAppend?(t={},e.items.concat(n).reduce((e,n)=>t[n.id]?e:(t[n.id]=!0,[...e,n]),[])).sort((e,t)=>new Date(t.inserted_at).getTime()-new Date(e.inserted_at).getTime()):n,metadata:i,pageInfo:o.shouldSetPage?s:e.pageInfo,loading:!1,networkStatus:r.ready}})},setMetadata:t=>e(()=>({metadata:t})),setItemAttrs:(t,n)=>{var i=t.reduce((e,t)=>cC(cC({},e),{},{[t]:n}),{});return e(e=>({items:e.items.map(e=>i[e.id]?cC(cC({},e),i[e.id]):e)}))}})),this.broadcaster=new(cb()),this.defaultOptions=n,this.apiClient.connectSocket(),this.channel=this.apiClient.createChannel("feeds:".concat(this.userFeedId),this.defaultOptions)}listenForUpdates(){return this.channelConnected||(this.channel.join().receive("ok",()=>{this.channelConnected=!0}),this.channel.on("new-message",e=>this.onNewMessageReceived(e))),()=>{try{this.channel.leave()}catch(e){console.error("error while leaving channel",e)}}}on(e,t){this.broadcaster.on(e,t)}off(e,t){this.broadcaster.off(e,t)}getState(){return this.store.getState()}markAsSeen(e){var t=this;return d7(function*(){var n=new Date().toISOString();return t.optimisticallyPerformStatusUpdate(e,"seen",{seen_at:n},"unseen_count"),t.makeStatusUpdate(e,"seen")})()}markAsUnseen(e){var t=this;return d7(function*(){return t.optimisticallyPerformStatusUpdate(e,"unseen",{seen_at:null},"unseen_count"),t.makeStatusUpdate(e,"unseen")})()}markAsRead(e){var t=this;return d7(function*(){var n=new Date().toISOString();return t.optimisticallyPerformStatusUpdate(e,"read",{read_at:n},"unread_count"),t.makeStatusUpdate(e,"read")})()}markAsUnread(e){var t=this;return d7(function*(){return t.optimisticallyPerformStatusUpdate(e,"unread",{read_at:null},"unread_count"),t.makeStatusUpdate(e,"unread")})()}markAsArchived(e){var t=this;return d7(function*(){var{getState:n,setState:i}=t.store,r=n(),s=!0!==t.defaultOptions.include_archived,o=Array.isArray(e)?e:[e],l=o.map(e=>e.id),a=o.filter(e=>!e.seen_at).length,d=o.filter(e=>!e.read_at).length,c=ck(ck({},r.metadata),{},{total_count:r.metadata.total_count-o.length,unseen_count:r.metadata.unseen_count-a,unread_count:r.metadata.unread_count-d});if(s){var u=r.items.filter(e=>!l.includes(e.id));i(e=>e.setResult({entries:u,meta:c,page_info:e.pageInfo}))}else i(e=>{e.setMetadata(c),e.setItemAttrs(l,{archived_at:new Date().toISOString()})});return t.makeStatusUpdate(e,"archived")})()}markAsUnarchived(e){var t=this;return d7(function*(){return t.optimisticallyPerformStatusUpdate(e,"unarchived",{archived_at:null}),t.makeStatusUpdate(e,"unarchived")})()}fetch(){var e=arguments,t=this;return d7(function*(){var n=e.length>0&&void 0!==e[0]?e[0]:{},{setState:i,getState:s}=t.store,{networkStatus:o}=s();if(![r.loading,r.fetchMore].includes(o)){i(e=>{var t;return e.setNetworkStatus(null!==(t=n.__loadingType)&&void 0!==t?t:r.loading)});var l=ck(ck({},t.defaultOptions),n),a=yield t.apiClient.makeRequest({method:"GET",url:"/v1/users/".concat(t.knock.userId,"/feeds/").concat(t.feedId),params:l});if("error"===a.statusCode)return i(e=>e.setNetworkStatus(r.error)),{status:a.statusCode,data:a.error||a.body};var d={entries:a.body.entries,meta:a.body.meta,page_info:a.body.page_info};if(n.before){var c={shouldSetPage:!1,shouldAppend:!0};i(e=>e.setResult(d,c))}else if(n.after){var u={shouldSetPage:!0,shouldAppend:!0};i(e=>e.setResult(d,u))}else i(e=>e.setResult(d));return t.broadcast("messages.new",d),{data:d,status:a.statusCode}}})()}fetchNextPage(){var e=this;return d7(function*(){var{getState:t}=e.store,{pageInfo:n}=t();n.after&&e.fetch({after:n.after,__loadingType:r.fetchMore})})()}broadcast(e,t){this.broadcaster.emit(e,t)}onNewMessageReceived(e){var t=this;return d7(function*(){var{metadata:n}=e,{getState:i,setState:r}=t.store,s=i().items[0];r(e=>e.setMetadata(n)),t.fetch({before:null==s?void 0:s.__cursor})})()}buildUserFeedId(){return"".concat(this.feedId,":").concat(this.knock.userId)}optimisticallyPerformStatusUpdate(e,t,n,i){var{getState:r,setState:s}=this.store,o=Array.isArray(e)?e.map(e=>e.id):[e.id];if(i){var{metadata:l}=r(),a=t.startsWith("un")?o.length:-o.length;s(e=>e.setMetadata(ck(ck({},l),{},{[i]:Math.max(0,l[i]+a)})))}s(e=>e.setItemAttrs(o,n))}makeStatusUpdate(e,t){var n=this;return d7(function*(){if(Array.isArray(e)){var i=e.map(e=>e.id);return yield n.apiClient.makeRequest({method:"POST",url:"/v1/messages/batch/".concat(t),data:{message_ids:i}})}return yield n.apiClient.makeRequest({method:t.startsWith("un")?"DELETE":"PUT",url:"/v1/messages/".concat(e.id,"/").concat(t)})})()}}class cI{constructor(e){(0,d4.A)(this,"instance",void 0),this.instance=e}initialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new cS(this.instance,e,t)}}var cT="default";function cA(e){return"object"==typeof e?e:{subscribed:e}}class cR{constructor(e){(0,d4.A)(this,"instance",void 0),this.instance=e}getAll(){var e=this;return d7(function*(){var t=yield e.instance.client().makeRequest({method:"GET",url:"/v1/users/".concat(e.instance.userId,"/preferences")});return e.handleResponse(t)})()}get(){var e=arguments,t=this;return d7(function*(){var n=(e.length>0&&void 0!==e[0]?e[0]:{}).preferenceSet||cT,i=yield t.instance.client().makeRequest({method:"GET",url:"/v1/users/".concat(t.instance.userId,"/preferences/").concat(n)});return t.handleResponse(i)})()}set(e){var t=arguments,n=this;return d7(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||cT,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i),data:e});return n.handleResponse(r)})()}setChannelTypes(e){var t=arguments,n=this;return d7(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||cT,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/channel_types"),data:e});return n.handleResponse(r)})()}setChannelType(e,t){var n=arguments,i=this;return d7(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||cT,s=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/channel_types/").concat(e),data:{subscribed:t}});return i.handleResponse(s)})()}setWorkflows(e){var t=arguments,n=this;return d7(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||cT,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/workflows"),data:e});return n.handleResponse(r)})()}setWorkflow(e,t){var n=arguments,i=this;return d7(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||cT,s=cA(t),o=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/workflows/").concat(e),data:s});return i.handleResponse(o)})()}setCategories(e){var t=arguments,n=this;return d7(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||cT,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/categories"),data:e});return n.handleResponse(r)})()}setCategory(e,t){var n=arguments,i=this;return d7(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||cT,s=cA(t),o=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/categories/").concat(e),data:s});return i.handleResponse(o)})()}handleResponse(e){if("error"===e.statusCode)throw Error(e.error||e.body);return e.body}}class c_{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.apiKey=e,(0,d4.A)(this,"host",void 0),(0,d4.A)(this,"userToken",void 0),(0,d4.A)(this,"apiClient",null),(0,d4.A)(this,"userId",void 0),(0,d4.A)(this,"feeds",new cI(this)),(0,d4.A)(this,"preferences",new cR(this)),this.host=t.host||"https://api.knock.app",this.apiKey&&this.apiKey.startsWith("sk_"))throw Error("[Knock] You are using your secret API key on the client. Please use the public key.")}client(){return this.userId||this.userToken||console.warn("[Knock] You must call authenticate(userId, userToken) first before trying to make a request.\n        Typically you'll see this message when you're creating a feed instance before having called\n        authenticate with a user Id and token. That means we won't know who to issue the request\n        to Knock on behalf of.\n        "),this.apiClient||(this.apiClient=new cj({apiKey:this.apiKey,host:this.host,userToken:this.userToken})),this.apiClient}authenticate(e,t){this.userId=e,this.userToken=t}teardown(){this.apiClient&&this.apiClient.disconnectSocket()}}let cO=e=>!!e.comment&&null!==e.timeout,cD=e=>{let{user:t,docId:n,docComments:i=[],pauseExiration:r=!1,duration:s=5e3}=e,o=(0,nk.d)(),l=null==t?void 0:t.id,a=(0,y.useMemo)(()=>{if(!l)return null;let e=new c_(O.$.KNOCK_PUBLIC_KEY);return e.authenticate(l),e},[l]),[d,c]=(0,y.useState)({}),u=(0,y.useRef)(!0),h=(0,y.useRef)(r);h.current=r,(0,y.useEffect)(()=>()=>{u.current=!1},[]);let x=(0,y.useCallback)(()=>c({}),[]),p=(0,y.useCallback)(e=>{c(t=>Object.entries(t).reduce((t,n)=>{let[i,r]=n;return(!0===e?-1===r.timeout:i===e)||(t[i]=r),t},{}))},[]);(0,y.useEffect)(()=>{r||p(!0)},[p,r]),(0,y.useEffect)(()=>{Object.entries(d).forEach(e=>{let[t,{entry:n,timeout:r}]=e;if(null===r){let e=n.data.commentId,r=null==i?void 0:i.find(t=>t.id===e);if(r){let e=setTimeout(()=>{u.current&&(h.current?c(e=>{let n={...e};return n[t].timeout=-1,n}):p(t))},s);c(i=>({...i,[t]:{entry:n,comment:r,timeout:e}}))}}})},[d,i,s,p]),(0,y.useEffect)(()=>{if(!a||!n)return;let e=a.feeds.initialize(O.$.KNOCK_FEED_ID,{source:"new-comment",status:"unseen"}),t=e.listenForUpdates();return e.on("messages.new",t=>{let{entries:i}=t,[r]=i;r.data.docId===n&&(c(e=>({...e,[r.id]:{entry:r,timeout:null}})),e.markAsSeen(r).then(()=>{console.debug("New notification marked as seen")}).catch(e=>{console.error("Unable to mark notification as seen",e)}))}),()=>{t()}},[n,o,a]);let{isConnected:m}=(0,E.u)();return(0,y.useEffect)(()=>{if(!a||!n)return;let e=a.client();m?e.connectSocket():e.disconnectSocket()},[n,m,a]),{reset:x,comments:Object.values(d).filter(cO).map(e=>e.comment)}},cz=e=>{var t;let{toggleCommentsPanel:n,isCommentsPanelOpen:i,doc:r,mode:o}=e,{user:l}=(0,er.ur)(),{editor:a}=(0,t5.mi)(),d=(0,D.u)("editDocAI"),[c,u]=(0,t$.Mk)(),{comments:p,reset:m}=cD({user:l,docId:null==r?void 0:r.id,docComments:null==r?void 0:r.comments,pauseExiration:u}),f=!!(a&&r&&r.comments);(0,y.useEffect)(()=>{if(!f)return;let{commentId:e}=(0,L.$9)();e&&r4.LF.emit(r4.DN.OPEN_POPUP_COMMENT,{commentId:e,highlightComment:!0})},[f]),(0,y.useEffect)(()=>{(i||o===tv.w.SLIDE_VIEW)&&m()},[i,m,o]);let g=!!p.length&&!i&&o!==tv.w.SLIDE_VIEW,j=(null==r?void 0:null===(t=r.comments)||void 0===t?void 0:t.filter(e=>e.status===nC.EB6.Open).length)||0;return d&&0===j?null:(0,s.jsxs)(G.A,{isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,isOpen:g,placement:"bottom",children:[(0,s.jsx)(eu.W,{children:(0,s.jsx)(dV.I,{onMouseDown:dM.Fw,onClick:n,icon:(0,s.jsx)(x.g,{icon:h.DN2}),isActive:i,"aria-label":i?"Hide comments":"Show comments",children:j})}),(0,s.jsx)(F.Z,{children:r&&(0,s.jsxs)(U.h,{bg:"white",shadow:"lg",border:"none",ref:c,children:[(0,s.jsx)(d2.R,{bg:"white"}),(0,s.jsx)(d3,{editor:a,user:l,commentFeedItems:p,doc:r})]})})]})},cP=()=>{let{isInOfflineMode:e}=(0,E.u)();return(0,s.jsx)(o.s,{children:(0,s.jsx)(X.Tz,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,s.jsx)(m.x6,{id:"EVnzPs"}),children:(0,s.jsx)(dV.f,{"data-guider-highlight":"design-partner-button","aria-label":"Edit with AI",variant:"plain",isDisabled:e,onClick:()=>{sp.R.emit("toggle",{})},icon:(0,s.jsx)(x.g,{icon:h.p7g})})})})};var cL=n(12917),cN=n(15326),cM=n(31171),cV=(0,cM.B)("div",{baseStyle:{fontSize:"0.24em",top:"50%",left:"50%",width:"100%",textAlign:"center",position:"absolute",transform:"translate(-50%, -50%)"}});cV.displayName="CircularProgressLabel";let cF=(e,t)=>{let n=e.querySelector(".chakra-progress__indicator");if(!n)return;let i=(null!=t?t:0)/100,r=(null!=i?i:0)*264,s="".concat(r," ").concat(264-r);n.setAttribute("stroke-dasharray",s)},cG=e=>{let{duration:t=10,onClose:n,onMouseEnter:i,enabled:r,...o}=e,l=(0,y.useRef)(null),a=(0,B.dU)("gray.200","gray.700"),d=(0,B.dU)("trueblue.400","trueblue.300"),u=(0,B.dU)("var(--chakra-colors-gray-700)","var(--chakra-colors-gray-300)");return(0,y.useEffect)(()=>{let e,i;let s=l.current;if(!s||!r)return;cF(s,0);let o=r=>{e||(e=r);let l=Math.min(100,(r-e)/(10*t));cF(s,l),l<100?i=requestAnimationFrame(o):null==n||n()};return i=requestAnimationFrame(o),()=>{cancelAnimationFrame(i)}},[n,r,t]),(0,s.jsx)(c.az,{ref:l,onMouseEnter:i,cursor:"pointer",sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1,display:r?"block":"none",stroke:d},".chakra-progress__track":{display:r?"block":"none",stroke:a}},...o,children:(0,s.jsx)(cN.P,{display:"block",size:"24px",thickness:"10px",onClick:n,children:(0,s.jsx)(cV,{children:(0,s.jsx)(x.g,{icon:h.Jyw,fontSize:"14px",style:{color:u,borderRadius:"6px"}})})})})};var cW=n(33617),cB=n(14452),cU=n(21450),cH=n(76546),cq=n(33630),cK=n(71797),cJ=n(78821),cY=n(90854),cX=n(7225),c$=n(87122);let cZ=()=>{let{generate:e}=(0,tB.pt)("EditCardParallel",{}),{generate:t}=(0,tB.pt)("TranslateCardParallel",{});return(0,y.useCallback)((n,i)=>(null==i?void 0:i.key)==="edit.translate"?t({...n,variables:{...n.variables,language:n.variables.request}}):e(n),[e,t])},cQ=e=>{var t;let{editor:n}=e,i=cZ(),r=(0,I.GV)(ep.Jo),s=(0,I.GV)(ep.SJ),o=(0,I.CU)(),l=(0,I.GV)(rX.xI),a=(0,oi.lI)(n),d=(0,oi.zK)(a),c=(0,y.useCallback)(async e=>{var t,n,l;let{instructions:c="",inputHtml:u,operation:h}=e,x=(null===(t=a.aiOptions.imageOptions)||void 0===t?void 0:t.provider)||D.of.get("aiGeneratorDefaultImageProvider")||void 0;if(!r||!r.organization)throw Error("Doc or organization not found");let p=r.organization.id,m=(0,tU.$F)(),f=performance.now(),g=(0,tJ.u)(o),j={interface:"edit-card-parallel",interactionId:m,inputContent:u,inputMessage:c,inputData:{custom:!!h,operation:null==h?void 0:h.key,operationGroup:null==h?void 0:h.group,format:d,imageProvider:x},product:(0,cJ.A4)(r.organization),docId:r.id};try{let{promise:e}=i({workspaceId:r.organization.id,variables:{inputHtml:u,request:c,format:d,outline:g,imageProvider:x,model:D.of.get("editCardModel"),reasoningEffort:D.of.get("editCardReasoningEffort")},interactionId:m},h),t=null===(l=r.docGenerateInput)||void 0===l?void 0:null===(n=l.settings)||void 0===n?void 0:n.imageStyle;!t&&"aiGenerated"===x&&s&&(t=(0,cY.xI)(s)),(0,tU.rl)(j);let o=await e;console.log("[EditCardParallel] Response",o);let a=(0,cB.dg)(o);return console.log("[EditCardParallel] Parsing HTML",a),{output:await Promise.all(a.map(async e=>(0,cU.Lm)(e,{docFormatKey:d,loadImages:!1,context:{workspaceId:p,docId:r.id,interactionId:m},imageOptions:{provider:x,generateStyle:t},theme:s}))),interactionId:m}}catch(e){throw(0,tU.tB)({...j,errorMessage:e.message,errorCode:e.code,errorName:e.name,outputMessage:"Error editing doc",latency:performance.now()-f}),e}},[d,null===(t=a.aiOptions.imageOptions)||void 0===t?void 0:t.provider,r,o,i,s]),u=(0,y.useCallback)(async e=>{let{instructions:t,operation:i}=e,r=(0,tj.aJ)(n.state.doc),s=t||(null==i?void 0:i.instructions);if(r&&s)try{o.dispatch((0,rX.Tn)(!0));let e=[];r.forEach(t=>{var r;o.dispatch((0,rX.Ic)({cardId:t.node.attrs.id,suggestions:{status:"loading",loadingMessage:null==i?void 0:null===(r=i.loadingMessage)||void 0===r?void 0:r.call(i),variants:[]}})),e.push((0,tW.K)(n,t.node))});let t=e.join();console.log("[EditCardParallel] Input HTMLParts",e);let{output:l,interactionId:a}=await c({instructions:s,operation:i,inputHtml:t});if(console.log("[EditCardParallel] New cards",l),l.length!==r.length)throw Error("[EditCardParallel] Mismatch in number of cards");let d={};r.forEach((e,t)=>{var n;let r=l[t];r.attrs=(0,c$.p5)(e.node.attrs,r.attrs),d[e.node.attrs.id]=r,o.dispatch((0,rX.Ic)({cardId:e.node.attrs.id,suggestions:{status:"done",interactionId:a,selected:"v1",operation:i,instructions:s,variants:[{label:f.Ru._({id:"HxF6Fk"}),isOriginal:!0,id:"original",card:e.node.toJSON()},{label:(null==i?void 0:null===(n=i.variationName)||void 0===n?void 0:n.call(i))||f.Ru._({id:"YledUl"}),isOriginal:!1,id:"v1",card:r}]}}))}),c1(n,d)}catch(e){console.error("[EditCardParallel] Error regenerating card",e),r.forEach(e=>{o.dispatch((0,rX.Ic)({cardId:e.node.attrs.id,suggestions:{status:"error",variants:[]}}))})}finally{o.dispatch((0,rX.Tn)(!1))}},[n,c,o]);return(0,y.useEffect)(()=>cq.R.on("translate",e=>{let{type:t,language:n}=e,i=cX.Jz.find(e=>"edit.translate"===e.key);"doc"===t&&i&&u({instructions:"".concat(n.englishName," (").concat(n.key,")"),operation:i})}),[u]),{editDoc:u,acceptAll:(0,y.useCallback)(()=>{o.dispatch((0,rX.YB)({}))},[o]),rejectAll:(0,y.useCallback)(()=>{c0(n,o.getState(),!0),o.dispatch((0,rX.YB)({}))},[n,o]),status:l}},c0=(e,t,n)=>{let i=(0,rX.yL)(t),r=e.chain();return Object.entries(i).forEach(t=>{let[i,s]=t,o=(0,tj.W0)(e,i),l=s.variants.find(e=>!!e.isOriginal===n);o&&l&&l.id!==s.selected&&r.command(t=>{let{tr:n}=t,i=rM.bP.fromJSON(e.schema,l.card),r=n.mapping.map(o.pos);return n.replaceWith(r,r+o.node.nodeSize,i),!0})}),r.run()},c1=(e,t)=>{let n=(0,tj.aJ)(e.state.doc);if(!n)return;let i=n.map(n=>{let i=t[n.node.attrs.id];if(!i){console.warn("[useGenerateCard] Card not found. It may have been deleted while generating.");return}let r=rM.bP.fromJSON(e.state.schema,i),s=(0,ep.SJ)((0,I.KA)().getState());return(0,cH.de)(e,r,s),i}).filter(e=>!!e);console.log("[replaceDocWithCardVariants] content",i),e.chain().setMeta("isEditCardVariant",!0).setMeta("cardNotesHandled",!0).insertContentAt({from:1,to:e.state.doc.nodeSize-2},i).run()},c6=()=>{let e=!!(0,I.GV)(ts.Gd),{isOpen:t,onClose:n,onOpen:i}=(0,nz.E)({id:"TranslateDocDisclosure"}),r=(0,y.useCallback)(e=>{cq.R.emit("translate",{type:"doc",language:e}),n()},[n]);return{translateDocModal:t?(0,s.jsx)(cK.Q,{isSite:e,isFullDoc:!0,onClose:n,startTranslation:r}):null,onTranslateDocOpen:i}};var c2=n(60204);let c5=(0,i2.P)(tI.T),c3=e=>{let{editor:t}=e,{isInOfflineMode:n}=(0,E.u)(),{openUpsellModal:i}=(0,oG.I)(),{editDoc:r,status:l,acceptAll:a,rejectAll:d}=cQ({editor:t}),c=(0,ei.rd)(),u=(0,y.useRef)(null),h=(0,y.useRef)(null),p=(0,D.u)("editCard2"),[g,j]=(0,y.useState)(),v=(0,y.useCallback)(()=>j(void 0),[]),{isGammaAdminUser:b}=(0,c2.u)(),C=(0,eq.ez)("edit_doc_ai")||b,{translateDocModal:w,onTranslateDocOpen:k}=c6(),S="loading"===l,I=(0,y.useCallback)(e=>{var t;if(!C){i({segmentEvent:en.VV.GAMMA_PRO_UPSELL_CALLOUT_EDIT_DOC_AI});return}if(a(),j(e.operation||"Editing"),(null===(t=e.operation)||void 0===t?void 0:t.key)==="edit.translate"){k();return}r(e)},[a,C,r,k,i]);return p?(0,s.jsxs)(X.L8,{isDark:c,children:[(0,s.jsx)(rp.W,{placement:"bottom-end",isLazy:!0,initialFocusRef:h,onOpen:()=>{j(void 0)},children:e=>{let{onClose:i}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.s,{direction:"column",children:[(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"nIHiKm"}),placement:"bottom",children:(0,s.jsx)(rm.I,{as:dV.f,position:"relative","aria-label":f.Ru._({id:"nIHiKm"}),isDisabled:S||n,icon:S?(0,s.jsx)(t3.y,{size:"sm"}):(0,s.jsx)(x.g,{icon:cL.p7g})})}),(0,s.jsx)(c8,{currentOperation:g,onConfirm:a,onReject:d,onClose:v})]}),(0,s.jsx)(F.Z,{children:(0,s.jsxs)(rf.c,{"data-doc-ai-menu":!0,minWidth:"320px",width:"fit-content",maxWidth:"min(360px, 80vw)",fontFamily:"body",fontSize:"md",border:"none",children:[(0,s.jsx)(cW.u,{firstItemRef:u,inputRef:h,editCardIfAllowed:I,onClose:i,isDisabled:S,opacityFadeUpsell:!C,groups:["writing"],showCreditCosts:!1,editor:t}),!C&&(0,s.jsx)(nJ.c,{isNarrow:!0,mb:0,segmentEvent:en.VV.GAMMA_PRO_UPSELL_CALLOUT_EDIT_DOC_AI,title:(0,s.jsx)(m.x6,{id:"mpbrVv",values:{GAMMA_PRO_PROPER_NOUN:ev.Ol}}),description:(0,s.jsx)(m.x6,{id:"gNaWbA",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})})]})})]})}}),w]}):null},c4={initial:{opacity:0,y:10},animate:{opacity:1,transition:{duration:.4,ease:[.21,1.02,.73,1]},y:0},exit:{opacity:0,scale:.9},transition:{duration:.4,ease:[.06,.71,.55,1]}},c8=e=>{var t,n,i;let{currentOperation:r,onConfirm:l,onReject:c,onClose:u}=e,p=(0,I.GV)(rX.pw),[g,j]=(0,y.useState)(!0),v="Edited"===r?r:"object"==typeof r?null===(t=r.completionMessage)||void 0===t?void 0:t.call(r):(0,s.jsx)(m.x6,{id:"MRZxAn"}),b=null!==(n=p.done)&&void 0!==n?n:0,C=null!==(i=p.error)&&void 0!==i?i:0,w=!!((b||C)&&r);(0,y.useEffect)(()=>{w||j(!0)},[w]);let E={activeColor:(0,B.dU)("trueblue.500","trueblue.300"),hoverColorCloseButton:(0,B.dU)(C?"red.200":"gray.100","whiteAlpha.200"),bg:(0,B.dU)("white","gray.900"),bgError:(0,B.dU)("red.100","red.700"),textColor:(0,B.dU)("blackAlpha.800","whiteAlpha.900"),textErrorColor:(0,B.dU)("red.500","red.100"),iconColor:(0,B.dU)("blackAlpha.800","whiteAlpha.800")};return(0,s.jsx)(i5.N,{children:w&&(0,s.jsxs)(c5,{position:"absolute",bg:C?E.bgError:E.bg,borderRadius:"md",boxShadow:"md",overflow:"hidden",top:14,insetEnd:6,flexDirection:"row",spacing:2,p:2,onMouseEnter:()=>j(!1),...c4,children:[C>0?(0,s.jsxs)(e8.z,{spacing:0,children:[(0,s.jsx)(o.s,{mx:2,justifyContent:"center",alignItems:"center",color:E.textErrorColor,children:(0,s.jsx)(x.g,{icon:h.QJT,size:"lg"})}),(0,s.jsxs)(tI.T,{mx:2,spacing:0,alignItems:"flex-start",children:[(0,s.jsx)(a.E,{fontSize:"sm",color:E.textErrorColor,children:(0,s.jsx)(m.x6,{id:"nwtY4N"})}),(0,s.jsx)(a.E,{fontSize:"xs",color:E.textErrorColor,children:(0,s.jsx)(m.x6,{id:"xbrcey"})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(tI.T,{spacing:0,alignItems:"flex-start",children:[(0,s.jsxs)(o.s,{mx:2,justifyContent:"center",alignItems:"center",children:[(0,s.jsx)(x.g,{icon:cL.p7g,color:"var(--chakra-colors-trueblue-400)"}),(0,s.jsx)(a.E,{fontSize:"sm",mx:2,color:E.textColor,children:v})]}),(0,s.jsx)(o.s,{mx:2,children:(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"Dj1qYd",values:{doneCount:b}})})})]}),(0,s.jsxs)(e7.e,{spacing:0,children:[(0,s.jsx)(X.Tz,{label:f.Ru._({id:"I1yW7+"}),placement:"top",children:(0,s.jsx)(J.K,{"aria-label":f.Ru._({id:"yWDjkv"}),variant:"ghost",colorScheme:"gray",size:"sm",mx:1,icon:(0,s.jsx)(x.g,{icon:h.U23}),onClick:c})}),(0,s.jsx)(X.Tz,{label:f.Ru._({id:"kOU1RP"}),placement:"top",children:(0,s.jsx)(d.$,{"aria-label":f.Ru._({id:"aIcRZZ"}),variant:"plain",size:"sm",mx:1,rightIcon:(0,s.jsx)(x.g,{icon:h.FK2}),onClick:l,children:(0,s.jsx)(m.x6,{id:"PHWHEO"})})})]})]}),(0,s.jsx)(o.s,{mt:-6,me:-1,children:(0,s.jsx)(X.Tz,{label:f.Ru._({id:"1QfxQT"}),placement:"top",shouldWrapChildren:!0,children:(0,s.jsx)(cG,{onClose:u,enabled:g&&!C,duration:30,borderRadius:"full",_hover:{bg:E.hoverColorCloseButton,color:E.textColor}})})})]},"confirm-edit-doc-toast")})},c7=(0,i2.P)(c.az),c9=()=>{let e=(0,I.GV)(ep.oz),t=(0,I.GV)(ep.kn),n=e&&t;return(0,s.jsx)(i5.N,{initial:!1,children:n&&(0,s.jsx)(c7,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},position:"absolute",pointerEvents:"none",borderTop:"solid ".concat(4,"px ").concat(e.color),top:0,left:0,bottom:0,right:0,height:"var(--100vh)"})})},ue=e=>{let{doc:t,toggleCommentsPanel:n,editorWrapperEl:i,scrollingParentSelector:r}=e;return(0,s.jsxs)(rp.W,{placement:"bottom-end","data-testid":"doc-toolbar-menu",modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["left"]}}],children:[(0,s.jsx)(rm.I,{as:dV.f,icon:(0,s.jsx)(x.g,{icon:h.vHW}),onMouseDown:dM.Fw,"data-testid":"doc-toolbar-menu-button"}),(0,s.jsx)(F.Z,{children:t&&(0,s.jsx)(aL,{doc:t,toggleCommentsPanel:n,scrollingParentSelector:r,editorWrapperEl:i})})]})},ut=e=>{let{docId:t,enabled:n,enterSlideView:i}=e,r=(0,I.GV)(ep.ys),s=(0,y.useRef)(null),o=(0,nk.d)();return(0,y.useEffect)(()=>{!n&&s.current&&s.current.close()},[n]),(0,y.useEffect)(()=>{let e=()=>{var e;null===(e=s.current)||void 0===e||e.close()};return window.addEventListener("beforeunload",e),()=>{var t;window.removeEventListener("beforeunload",e),null===(t=s.current)||void 0===t||t.close()}},[]),{handlePresentViewClick:(0,y.useCallback)(()=>{if(!t||!(null==r?void 0:r.sessionId))return;let e=(0,L.WC)({docId:t,sessionId:r.sessionId}),n=window.open(e,"present-view","popup,left=0,top=0,width=720,height=580");n?s.current=n:(o({title:"Failed to open presenter view.",description:"Please allow popups for this site and try again.",status:"error",position:"top",duration:5e3}),console.error("[usePresenterViewToggle] Failed to open presenter view")),i({fullscreen:!1})},[t,i,null==r?void 0:r.sessionId,o])}};var un=n(83292),ui=n(44913);function ur(){let e=(0,un._)(["\n    0% { transform: scale(1.0); filter: brightness(1.0);  }\n    3% { transform: scale(1.0); filter: brightness(1.0);  }\n    8% {  transform: scale(0.90); filter: brightness(1.30);  }\n    18% { transform: scale(1.05); filter: brightness(1.0); }\n    30% { transform: scale(1.0); filter: brightness(1.0); }\n  "]);return ur=function(){return e},e}let us=e=>({followOnStart:!0,followingId:e}),uo=e=>{switch(e){case"edit":return f.Ru._({id:"UZN1cZ"});case"comment":return f.Ru._({id:"jFTs0A"});case"view":return f.Ru._({id:"Ya6CJ0"});default:return f.Ru._({id:"Txd1qM"})}},ul=e=>{var t,n;let{isOpen:i,onClose:r,accessLinkUrl:o,onPlayClick:u}=e,h=(0,ee.fW)(),{user:p}=(0,er.ur)(),{replace:g}=(0,e9.useRouter)(),j=us(null==p?void 0:p.id),[v]=(0,y.useState)(j),b=(0,L.an)(o,v),{user:C,color:w}=(0,er.ur)(),E=(0,I.GV)(nm.Jo),k=null==E?void 0:null===(n=E.accessLinks)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.permission,S=(0,Y.i7)(ur());return(0,s.jsx)(X.L8,{isDark:!1,children:(0,s.jsxs)(nX.aF,{isOpen:i,onClose:r,size:"lg",children:[(0,s.jsx)(n$.m,{}),(0,s.jsxs)(nZ.$,{children:[(0,s.jsx)(nT.r,{children:(0,s.jsx)(m.x6,{id:"88XnIQ"})}),(0,s.jsx)(nA.s,{}),(0,s.jsx)(n_.c,{}),(0,s.jsx)(nR.c,{pt:"6",children:(0,s.jsxs)(l.B,{spacing:"4",children:[(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"oYTLJe",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP,0:uo(k)},components:{0:(0,s.jsx)(a.E,{as:"span",fontWeight:"bold",borderBottom:"1px dashed",borderColor:"gray.400",display:"inline-block"}),1:(0,s.jsx)(X.Tz,{label:f.Ru._({id:"8LnpqL"}),placement:"top"})}})}),(0,s.jsx)(c.az,{mb:"2",children:(0,s.jsx)(ui.X,{url:b,variant:"solid",paddingLeft:h?20:void 0})}),(0,s.jsxs)(nO.F,{children:[(0,s.jsx)(nD._,{}),(0,s.jsxs)(e8.z,{flexBasis:"100%",alignItems:"top",children:[(0,s.jsx)(a.E,{fontSize:"sm",width:"100%",children:(0,s.jsx)(m.x6,{id:"EApNIe"})}),(0,s.jsxs)(c.az,{position:"relative",textShadow:"sm",children:[(0,s.jsx)(la.e,{animation:"".concat(S," 2s infinite ease-out"),name:null==C?void 0:C.displayName,src:null==C?void 0:C.profileImageUrl,size:"md",border:"solid 3px ".concat(w.value),shadow:"lg"}),(0,s.jsx)(c.az,{position:"absolute",top:"1.75rem",left:"1.75rem",outline:"0 0 2px rgba(255,255,255,1.0)",sx:{path:{stroke:"white",strokeWidth:48}},color:"black",children:(0,s.jsx)(x.g,{icon:tA.eX_,fixedWidth:!0})})]})]})]})]})}),(0,s.jsx)(nQ.j,{children:(0,s.jsxs)(e7.e,{children:[(0,s.jsx)(d.$,{variant:"ghost",colorScheme:"gray",onClick:()=>{r()},children:(0,s.jsx)(m.x6,{id:"DPfwMq"})}),(0,s.jsx)(d.$,{variant:"solid",onClick:()=>{r(),u(),g(b,b,{shallow:!0})},leftIcon:(0,s.jsx)(x.g,{icon:tA.ijD}),children:(0,s.jsx)(m.x6,{id:"tbDuNX"})})]})})]})]})})},ua=e=>{var t,n,i,r;let{doc:d,docEditorType:u,isCollaborativeEditor:p,enterSlideView:g,exitSlideView:j,setExitedFullscreenByClick:v,isFullscreen:b,enterFullscreen:C,exitFullscreen:w,shouldHide:k}=e,{onOpen:S,onClose:T,isOpen:A}=(0,nz.E)({id:"meetModal"}),{user:R}=(0,er.ur)(),_=(0,I.GV)(ep.wC),O=(0,y.useRef)(_),{presentAction:z,secondaryPresentAction:P}=ud(u),L=(0,D.u)("docPreview");(0,y.useEffect)(()=>{O.current=_},[_]);let{shortcutLabel:N,shortcutIcon:M,shortcutKeys:V,buttonLabel:G}=oE(z)[_],W=null==d?void 0:null===(n=d.accessLinks)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.url,B=!!(null==d?void 0:null===(r=d.accessLinks)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.permission),U=(0,er.Iy)("comment",d||void 0),H=(0,er.Iy)("manage",d||void 0),q=p&&R&&W&&H,K=_===tv.w.SLIDE_VIEW,J=_===tv.w.DOC_VIEW,Y=U&&u!==t2.i.PUBLIC_STATIC,{isInOfflineMode:$}=(0,E.u)(),{handlePresentViewClick:Z}=ut({docId:null==d?void 0:d.id,enabled:K,enterSlideView:g}),Q=(0,D.u)("presentFullScreen"),ee=["present"===P&&J&&(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.vGi,fixedWidth:!0}),onClick:()=>g({fullscreen:Q,presentAction:"present"}),isDisabled:$,children:(0,s.jsxs)(l.B,{spacing:"0",children:[(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"hXFTMR"})}),(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(m.x6,{id:"kNbT4w"})})]})},"other_ways_to_share_present"),"preview"===P&&J&&L&&(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.hZM,fixedWidth:!0}),onClick:()=>g({fullscreen:Q,presentAction:"preview"}),children:(0,s.jsxs)(l.B,{spacing:"0",children:[(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"t7wjm2"})}),(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(m.x6,{id:"oVzEKG"})})]})},"other_ways_to_share_preview"),q&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(X.Tz,{isDisabled:B,label:(0,s.jsx)(m.x6,{id:"zk6wKo"}),children:(0,s.jsx)(c.az,{children:(0,s.jsx)(ov.D,{onClick:()=>{var e;(null==d?void 0:null===(e=d.accessLinks)||void 0===e?void 0:e[0].permission)&&S()},isDisabled:!B||$,icon:(0,s.jsx)(x.g,{icon:h.Gk0,fixedWidth:!0}),children:(0,s.jsx)(l.B,{spacing:"0",children:(0,s.jsx)(m.x6,{id:"z7gRub",components:{0:(0,s.jsx)(a.E,{}),1:(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.600"})}})})})})}),(0,s.jsx)(ul,{isOpen:A,onClose:T,accessLinkUrl:W,onPlayClick:()=>{g({fullscreen:!1,presentAction:z})}})]})].filter(Boolean);return(0,s.jsxs)(o.s,{display:k?"none":"flex",children:[(0,s.jsxs)(e7.e,{isAttached:!0,size:"sm","data-guider-highlight":"present-button-group","data-editor-mode":K?"slide":"doc",children:[(0,s.jsx)(X.Tz,{closeOnMouseDown:!1,closeOnClick:!1,label:N,shortcut:V,children:(0,s.jsx)(dV.I,{fontWeight:"normal",size:"sm",variant:"solid",onClick:()=>{J?g({fullscreen:Q,presentAction:z}):j()},onMouseDown:dM.Fw,icon:(0,s.jsx)(x.g,{icon:M}),"data-present-button":!0,children:G})}),(0,s.jsxs)(rp.W,{children:[(0,s.jsx)(rm.I,{variant:"solid",as:dV.f,icon:(0,s.jsx)(x.g,{icon:h.Jt$})}),(0,s.jsx)(F.Z,{children:(0,s.jsxs)(rf.c,{zIndex:"popover",children:[J&&(0,s.jsxs)(oy.r,{title:"present"===z?f.Ru._({id:"tbDuNX"}):f.Ru._({id:"Mn9aLv"}),children:[(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.u0F,fixedWidth:!0}),command:(0,X.lp)("Mod+Enter"),onClick:()=>g({fullscreen:!1,presentAction:z}),children:(0,s.jsx)(m.x6,{id:"LRFe2O"})}),(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.ArK,fixedWidth:!0}),command:(0,X.lp)("Mod+Shift+Enter"),onClick:()=>g({fullscreen:!0,presentAction:z}),children:(0,s.jsx)(m.x6,{id:"OwIqiD"})}),Y&&(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.hZM,fixedWidth:!0}),onClick:Z,isDisabled:$,children:(0,s.jsxs)(l.B,{spacing:"0",children:[(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"T+GUKl"})}),(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(m.x6,{id:"ACelDx"})})]})})]}),K&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:tA.APi,fixedWidth:!0}),command:(0,X.lp)("Esc"),onClick:j,children:(0,s.jsx)(m.x6,{id:"5Rfo7J"})}),(Y||q)&&(0,s.jsx)(rv.N,{}),Y&&(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.hZM,fixedWidth:!0}),onClick:Z,children:(0,s.jsxs)(l.B,{spacing:"0",children:[(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"T+GUKl"})}),(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(m.x6,{id:"ACelDx"})})]})})]}),ee.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rv.N,{}),(0,s.jsx)(oy.r,{title:f.Ru._({id:"+w9NSz"}),children:ee})]})]})})]})]}),K&&(0,s.jsx)(o.s,{ms:2,children:(0,s.jsx)(X.Tz,{label:b?(0,s.jsx)(m.x6,{id:"IkOhTI"}):(0,s.jsx)(m.x6,{id:"q8ARHN"}),children:(0,s.jsx)(dV.f,{"aria-label":b?f.Ru._({id:"IkOhTI"}):f.Ru._({id:"q8ARHN"}),icon:(0,s.jsx)(x.g,{icon:b?h.gr3:h.oZK}),onClick:b?()=>{v(!0),w()}:C})})})]})},ud=e=>{let t=(0,D.u)("docPreview"),n=e===t2.i.COLLABORATIVE&&t,i=(0,I.GV)(ep.sA).presentAction;n||"preview"!==i||(i="present");let r="present"===i?"preview":"present";return{presentAction:i,secondaryPresentAction:r}},uc=e=>{switch(e){case nC.mOX.Pending:return{icon:h.$Xz,label:f.Ru._({id:"JKsafh"})};case nC.mOX.Verified:return{icon:h.e68,label:f.Ru._({id:"DKrUGB"})};case nC.mOX.Failed:return{icon:h.S2b,label:f.Ru._({id:"ojSx8e"})}}},uu=e=>{let{domain:t,isLive:n,site:i,docId:r}=e,o=(0,ta.tO)({site:i,docId:r}),l=(0,y.useMemo)(()=>uc(t.status),[t.status]);return i&&r?(0,s.jsxs)(e8.z,{color:"gray.500",pointerEvents:"none",justifyContent:"flex-start",w:"full",children:[(0,s.jsx)(X.Tz,{label:l.label,placement:"left",children:(0,s.jsx)(J.K,{variant:"ghost",size:"xs",mx:-1,me:-2,color:"gray.500","aria-label":l.label,_hover:{bg:"transparent"},_active:{bg:"transparent"},children:(0,s.jsx)(x.g,{icon:l.icon,size:"xs",pointerEvents:"auto",fixedWidth:!0,spin:t.status===nC.mOX.Pending})})}),(0,s.jsx)(X.Tz,{label:t.name,placement:"top",openDelay:500,closeOnClick:!1,children:(0,s.jsx)(c.az,{fontSize:"xs",pointerEvents:"auto",children:uh(t.name,33)})}),n&&t.status===nC.mOX.Verified&&(0,s.jsx)(ac,{site:i,path:(0,ta.wK)(o),domain:t})]}):null},uh=(e,t)=>{if(e.length<=t)return e;let n=e.replace(/^https?:\/\//,"").split("."),i=n.slice(-2).join("."),r=n.slice(0,-2).join("."),s=t-i.length-3;if(s<=0)return i;let o=r.slice(0,s);return"".concat(o).concat("...").concat(i)},ux=e=>{let{onClick:t,doc:n,isLive:i}=e,r=null==n?void 0:n.site,o=(0,ta.H3)(null==r?void 0:r.domains),l=i?(0,s.jsx)(m.x6,{id:"3TQHDg",values:{0:o.length}}):(0,s.jsx)(m.x6,{id:"1EeNDU"});return(0,s.jsxs)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.MNJ,fixedWidth:!0}),onClick:t,alignItems:"baseline",children:[l,r&&(null==n?void 0:n.id)&&o.map(e=>(0,s.jsx)(uu,{domain:e,isLive:i,site:r,docId:n.id},e.id))]})},up=e=>{let{doc:t}=e,{replace:n}=(0,e9.useRouter)(),{isInOfflineMode:i}=(0,nC.utY)(),r=(0,er.Iy)("manage",t),d=(0,I.GV)(ts.Gd),u=null==t?void 0:t.id,p=(0,ta.tO)({site:d,docId:u}),{publishDoc:g,publishSite:j,isPublishing:v}=nV({doc:t,site:d,path:p}),{statusText:b,statusIcon:C,statusColor:w,lastPublishedTime:E,needsPublish:k,publishEnabled:S}=nW(v),T=d&&(0,ta.SG)(t,d),A=(0,y.useCallback)(()=>{u&&n((0,L.pF)({docId:u,preview:!0}),void 0,{shallow:!0})},[u,n]);if(!d)return null;let R=(0,eq.vT)("custom_domains");return(0,s.jsx)(o.s,{children:(0,s.jsxs)(e7.e,{isAttached:!0,size:"sm",children:[(0,s.jsx)(X.Tz,{closeOnMouseDown:!1,closeOnClick:!1,isDisabled:!S,label:k&&!v?(0,s.jsxs)(l.B,{children:[b,(0,s.jsx)(a.E,{color:"gray.400",children:(0,s.jsx)(m.x6,{id:"FmP7uY"})})]}):(0,s.jsx)(m.x6,{id:"o+bOqE"}),children:(0,s.jsx)(dV.I,{fontWeight:"normal",size:"sm",variant:"solid",onClick:j,onMouseDown:dM.Fw,isDisabled:!S||i,isLoading:v,icon:k?(0,s.jsx)(x.g,{icon:h.MNJ}):(0,s.jsx)(x.g,{icon:h.e68}),"data-publish-button":!0,children:k?(0,s.jsx)(m.x6,{id:"EEYbdt"}):(0,s.jsx)(m.x6,{id:"u3wRF+"})})}),(0,s.jsxs)(rp.W,{children:[(0,s.jsx)(rm.I,{variant:"solid",as:dV.f,isDisabled:!S||i,icon:(0,s.jsx)(x.g,{icon:h.Jt$})}),(0,s.jsx)(F.Z,{children:(0,s.jsxs)(rf.c,{zIndex:"popover",minW:"320px",maxW:"360px",children:[(0,s.jsx)(oy.r,{children:(0,s.jsxs)(tI.T,{alignItems:"flex-start",children:[(0,s.jsxs)(e8.z,{px:3,pt:2,alignItems:"center",color:w,children:[C&&(0,s.jsx)(c.az,{marginEnd:1.5,display:"inline-flex",children:C}),(0,s.jsx)(c.az,{children:(0,s.jsx)(a.E,{fontWeight:"semibold",children:b})})]}),E&&(null==t?void 0:t.site)&&(0,s.jsxs)(e8.z,{pb:2,mt:-1,children:[(0,s.jsx)(tT.h,{marginEnd:2,px:3,w:13}),(0,s.jsx)(a.E,{fontSize:"xs",color:"gray.500",children:T?E:(0,s.jsx)(m.x6,{id:"0bSVwO"})})]})]})}),r&&t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rv.N,{}),(0,s.jsxs)(oy.r,{title:f.Ru._({id:"1EeNDU"}),children:[(0,s.jsx)(ux,{onClick:j,doc:t,isLive:!!T}),(0,s.jsx)(af,{label:(0,s.jsx)(m.x6,{id:"A/QS9E"}),showUpsellBadge:!R,settingsTab:"domains"})]})]}),(0,s.jsx)(rv.N,{}),(0,s.jsx)(oy.r,{title:f.Ru._({id:"Pf2dn/"}),children:(0,s.jsx)(ov.D,{icon:(0,s.jsx)(x.g,{icon:h.OFY,fixedWidth:!0}),onClick:g,alignItems:"baseline",children:(0,s.jsx)(m.x6,{id:"szmTdw"})})}),(0,s.jsx)(rv.N,{}),(0,s.jsx)(oy.r,{title:f.Ru._({id:"rdUucN"}),children:(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"aChIoL"}),children:(0,s.jsx)(c.az,{children:(0,s.jsx)(ov.D,{onClick:A,icon:(0,s.jsx)(x.g,{icon:tA.qtl,fixedWidth:!0}),alignItems:"baseline",children:(0,s.jsx)(l.B,{spacing:"0",children:(0,s.jsx)(m.x6,{id:"EEOIfz",components:{0:(0,s.jsx)(a.E,{})}})})})})})})]})})]})]})})};var um=n(41717),uf=n(73938),ug=n(6066),uj=n(81112);let uv=e=>{var t,n;let{doc:i,showAnalytics:r=!0,showSharePublic:o=!0,showEmbed:l=!0,showButton:d=!0}=e,{isOpen:u,onClose:h,onOpen:x}=(0,nz.E)({id:"analyticsModalDisclosure"}),{isSharePanelOpen:p,onSharePanelOpen:f,onSharePanelClose:g,view:j,setView:v}=(0,uf.R)(),{isInOfflineMode:b}=(0,E.u)(),{user:C,currentWorkspace:w}=(0,er.ur)(),{editor:k}=(0,t5.mi)(),S=(0,er.Iy)("view",i),I=(0,er.Iy)("edit",i),T=(0,er.Iy)("manage",i),A=(0,en.st)(),[R,_]=(0,y.useState)(""),{query:O}=(0,e9.useRouter)();(0,z.o)("showAnalytics"),(0,y.useEffect)(()=>nU.R.on("openSharePanel",e=>{let{view:t,options:n}=e;f(),v(t),(null==n?void 0:n.cardRangesInput)&&_(n.cardRangesInput)}),[f,v]);let D=(0,y.useCallback)(()=>{null==A||A.track(en.VV.DOC_ANALYTICS_VIEWED,{docId:null==i?void 0:i.id,source:"true"===O.showAnalytics?"query_param":"share_panel",type:T?"full":"personal"}),x()},[A,O,T,null==i?void 0:i.id,x]);if((0,y.useEffect)(()=>{(null==i?void 0:i.site)||"true"!==O.showAnalytics||D()},[O,i,D]),!S||!C||!i)return null;let P=i.collaborators||[],L=i.channels||[],N=(0,uj.e7)([...P].sort((e,t)=>e.user.id===C.id?-1:t.user.id===C.id?1:0).map(e=>e.user.id===C.id?"You":e.user.displayName||"").concat(i.orgAccess?L.map(e=>{let{name:t}=e;return t||""}):[])),M=(0,ug.ZP)(i,C),V=M?(0,ug.bC)()[M]:null,F=(0,ug.D5)(i,w);return null===V?(console.error("[SharePanel] Unknown VisibilityValue for doc",i),null):(0,s.jsxs)(s.Fragment,{children:[d&&(0,s.jsx)(X.Tz,{label:(0,s.jsxs)(s.Fragment,{children:[F&&(0,s.jsx)(a.E,{fontWeight:"bold",children:(0,s.jsx)(m.x6,{id:"OS9x6e",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})}),V.title(null==i?void 0:null===(t=i.organization)||void 0===t?void 0:t.name)?(0,s.jsx)(a.E,{children:V.title(null==i?void 0:null===(n=i.organization)||void 0===n?void 0:n.name)}):null,(0,s.jsx)(a.E,{fontSize:"xs",children:V.subtitle?V.subtitle(N||""):""})]}),children:(0,s.jsx)("span",{children:(0,s.jsx)(dV.I,{"data-guider-highlight":"share-button",onMouseDown:dM.Fw,icon:(0,s.jsx)(c.az,{children:(0,s.jsx)(um.li,{visibility:V,isFromOtherOrg:F})}),isDisabled:!I||b,onClick:f,children:(0,s.jsx)(m.x6,{id:"Z8lGw6"})})})}),(0,s.jsx)(um._j,{doc:i,editor:k,isSharePanelOpen:p,onSharePanelOpen:f,onSharePanelClose:g,onAnalyticsPanelOpen:D,view:j,setView:v,showAnalytics:r,showSharePublic:o,showEmbed:l,cardRangesInput:R,setCardRangesInput:_}),u&&(0,s.jsx)(l8,{doc:i,onSharePanelOpen:f,onAnalyticsPanelClose:h,isAnalyticsPanelOpen:u,mode:T?"full":"personal"})]})};var ub=n(85025);let uy=(0,y.memo)(e=>{let{doc:t,onClick:n}=e,{isConnected:i,isInOfflineMode:r}=(0,E.u)(),c=(null==t?void 0:t.title)||"";return(0,s.jsxs)(o.s,{flex:1,w:32,children:[(0,s.jsx)(X.Tz,{label:(0,s.jsxs)(l.B,{spacing:0,children:[(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"g/+TNk"})}),(0,s.jsx)(a.E,{color:"gray.500",children:(0,s.jsx)(m.x6,{id:"ZfQLKw"})})]}),isDisabled:r,"aria-label":f.Ru._({id:"g/+TNk"}),children:(0,s.jsx)(d.$,{size:"sm",variant:"ghost",colorScheme:"gray",fontWeight:"normal",ml:-1,leftIcon:(0,s.jsx)(x.g,{icon:h.Nnc}),onClick:n,isDisabled:r,children:(0,s.jsx)(a.E,{isTruncated:!0,whiteSpace:"nowrap",textOverflow:"ellipsis",w:"100%",children:c})})}),!i&&(0,s.jsx)(X.Tz,{label:(0,s.jsxs)(l.B,{spacing:0,children:[(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"ysdDIA"})}),r&&(0,s.jsx)(a.E,{color:"gray.500",children:(0,s.jsx)(m.x6,{id:"+QNhGE"})})]}),"aria-label":f.Ru._({id:"IcHxhR"}),children:(0,s.jsx)(o.s,{color:"gray.500",alignItems:"center",mr:2,children:(0,s.jsx)(x.g,{icon:h.seF})})})]})});uy.displayName="EditableDocTitle";let uC=e=>(0,s.jsx)(uw,{...e}),uw=(0,y.memo)(e=>{let{doc:t,togglePagesPanel:n}=e,i=(0,ee.fW)(),[r]=(0,ub.F)(ef.E.lastHomeUrl,"/"),l=(0,I.GV)(ts.Gd),{confirmNavigation:d}=(0,t5.mi)(),{push:u}=(0,e9.useRouter)(),p={as:b(),href:r||"/",colorScheme:"gray",fontWeight:"normal","data-testid":"toolbar-home-link"},m=(0,B.dU)("gray.800","gray.100");return(0,s.jsx)(e8.z,{flex:1,children:(0,s.jsxs)(e8.z,{spacing:2,divider:(0,s.jsx)(c.az,{border:"none",as:x.g,icon:i?h.Wzs:h.XkK,size:"sm",color:"gray.300"}),w:"100%",color:m,children:[(0,s.jsx)(c.az,{...p,children:(0,s.jsx)(n5.N,{as:dV.I,href:p.href,onClick:e=>{!e.shiftKey&&(e.metaKey||e.ctrlKey)||(e.preventDefault(),d().then(()=>{u(p.href)}))},marginInlineStart:-1,colorScheme:"gray",children:(0,s.jsx)(x.g,{size:"1x",icon:h.v02})})}),l&&(null==l?void 0:l.routes.length)>1&&(0,s.jsx)(o.s,{flexGrow:0,flexShrink:1,children:(0,s.jsx)(a.E,{noOfLines:1,fontWeight:"normal",fontSize:"sm",children:null==l?void 0:l.name})}),(0,s.jsx)(uy,{doc:t,onClick:()=>{null==n||n()}})]})})});uw.displayName="PageBreadcrumbGroup";let uE=e=>{let{spotlightingByBlock:t}=e,{editor:n}=(0,t5.mi)(),i=(0,y.useCallback)(()=>{t?null==n||n.commands.turnOffSpotlight():null==n||n.commands.spotlightNextBlock()},[n,t]);return(0,s.jsx)(o.s,{children:(0,s.jsx)(X.Tz,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"S",label:t?(0,s.jsx)(m.x6,{id:"CzYGrQ"}):(0,s.jsx)(m.x6,{id:"X1FNEK"}),children:(0,s.jsx)(dV.I,{isSelected:t,onClick:e=>{i(),e.target.blur()},icon:(0,s.jsx)(x.g,{icon:h.lnn}),children:(0,s.jsx)(m.x6,{id:"k04a2t"})})})})};var uk=n(2735);let uS=()=>{let e=(0,nk.d)(),[t]=(0,nC.vlJ)(),n=(0,I.GV)(ts.df),{docId:i,getCollaborativeEditorInstance:r}=(0,t5.mi)(),o=(0,I.GV)(ep.SJ),l=r(),a=(0,en.st)(),{updateDocThemeWithAccentImages:d}=(0,ei.Kt)({docId:i,editor:l}),c=(0,y.useCallback)(e=>{n&&e.id!==o.id&&t({variables:{input:{siteId:n,themeId:e.id}},update:(t,i)=>{let{data:r}=i,s=t.readFragment({id:"Theme:".concat(e.id),fragment:nC.qaq,fragmentName:"DefaultThemeFields"});t.updateQuery({query:nC.zLA,variables:{id:n}},e=>e&&e.site&&s?{...e,site:{...e.site,...null==r?void 0:r.updateSite,theme:s}}:e)}}).then(()=>{})},[n,o.id,t]),u=(0,y.useCallback)(t=>{t.id!==o.id&&d(t.id).then(()=>{null==a||a.track(en.VV.DOC_THEME_UPDATED,{doc_id:i,theme_id:t.id})}).catch(t=>{console.error(t),e({title:(0,s.jsx)(m.x6,{id:"Fulf8b",values:{0:t.message}}),position:"top",status:"error"})})},[a,o.id,i,e,d]);return(0,y.useCallback)(e=>n?c(e):u(e),[n,u,c])};var uI=n(6402),uT=n(24383);let uA=(0,y.memo)(e=>{let{closePanel:t}=e,n=uS(),i=(0,I.GV)(ep.SJ),r=(0,y.useCallback)(()=>{null==t||t(),r4.LF.emit(r4.DN.OPEN_PAGE_SETUP,"background")},[t]);return(0,s.jsx)(X.L8,{isDark:!1,children:(0,s.jsx)(t_.Z,{bgColor:"white",w:"100%","data-panelid":"doc-theme-drawer",pt:4,position:"relative","data-doc-theme-drawer":!0,children:(0,s.jsxs)(o.s,{direction:"column","data-testid":"doc-theme-drawer",overflowX:"hidden",w:"100%",children:[(0,s.jsx)(o.s,{px:6,children:(0,s.jsx)(uT.D,{title:(0,s.jsx)(m.x6,{id:"FEr96N"}),description:(0,s.jsx)(a.E,{fontSize:"sm",fontWeight:"500",mt:"-2",letterSpacing:0,color:"gray.700",children:(0,s.jsx)(m.x6,{id:"S9uQm/"})}),closePanel:t,currentTheme:i,usePanelHeading:!0})}),(0,s.jsx)(o.s,{overflowY:"auto",direction:"column",h:"100%",flex:1,"data-theme-picker-scroll-container":!0,px:6,mt:4,children:(0,s.jsx)(uI.oz,{currentTheme:i,openBackgroundPanel:r,setTheme:n})})]})})})});uA.displayName="DocThemePanelMemoized";let uR=e=>{let{closePanel:t}=e;return(0,s.jsx)(uA,{closePanel:t})};uR.displayName="DocThemePanel",uR.panelPosition="right",uR.panelName="doc-theme-drawer";let u_=()=>{let{togglePanel:e,isPanelOpen:t}=(0,eJ.ww)(uR);return(0,y.useEffect)(()=>{let t=()=>{e({override:"open"})},n=nU.R.on("toggleThemeBlock",t),i=r4.LF.on(r4.DN.OPEN_THEME_DRAWER,t);return()=>{n(),i()}},[e]),{toggleDocThemePanel:e,isDocThemePanelOpen:t}},uO=(0,y.memo)(()=>{u_();let{getCollaborativeEditorInstance:e}=(0,tk.m)(),t=uS();return(0,s.jsx)(o.s,{children:(0,s.jsx)(uk.n,{onThemeCreated:t,getCollaborativeEditorInstance:e})})}),uD=(0,y.memo)(()=>{let{isConnected:e}=(0,nC.utY)();return(0,s.jsx)(X.Tz,{label:e?(0,s.jsx)(m.x6,{id:"JkEyR8"}):(0,s.jsx)(m.x6,{id:"GvC+mL",components:{0:(0,s.jsx)(a.E,{}),1:(0,s.jsx)(a.E,{color:"gray.300"})}}),"aria-label":f.Ru._({id:"JkEyR8"}),children:(0,s.jsx)(c.az,{children:(0,s.jsx)(dV.I,{"data-guider-highlight":"toolbar-theme-button",onClick:()=>{nU.R.emit("toggleThemeBlock",!0)},isDisabled:!e,icon:(0,s.jsx)(x.g,{icon:h.fyG}),"data-testid":"toolbar-theme-button",children:(0,s.jsx)(m.x6,{id:"FEr96N"})})})})});uD.displayName="ThemeToolbarButton";let uz=()=>{let{isConnected:e}=(0,nC.utY)();return(0,s.jsxs)(s.Fragment,{children:[e&&(0,s.jsx)(uO,{}),(0,s.jsx)(uD,{})]})};uO.displayName="ThemeDrawers";let uP=[.5,.8,.9,1,1.1,1.2,1.5,2],uL=e=>"".concat((100*e).toFixed(0),"%"),uN=()=>{let e=(0,D.u)("presentZoom"),{editor:t}=(0,t5.mi)(),n=(0,en.st)(),i=(0,C.wA)(),r=(0,I.GV)(ep.eo),o=(0,y.useCallback)(e=>{i((0,ep.ed)({zoomLevel:e})),i((0,ep.i)({enabled:!1})),null==n||n.track(en.VV.DOC_ZOOMED,{direction:"set",level:e})},[i,n]),l=(0,y.useCallback)(()=>{i((0,ep.i)({enabled:!0}))},[i]),c=(0,y.useCallback)(()=>{let e=Math.min(T.ih,uM(r)+.1);i((0,ep.ed)({zoomLevel:e})),i((0,ep.i)({enabled:!1})),null==n||n.track(en.VV.DOC_ZOOMED,{direction:"in",level:e})},[i,n,r]),u=(0,y.useCallback)(()=>{let e=Math.max(T.At,uM(r)-.1);i((0,ep.ed)({zoomLevel:e})),i((0,ep.i)({enabled:!1})),null==n||n.track(en.VV.DOC_ZOOMED,{direction:"in",level:e})},[i,n,r]),p=(0,y.useCallback)(()=>{let e=T.vN;i((0,ep.ed)({zoomLevel:e})),i((0,ep.i)({enabled:!1})),null==n||n.track(en.VV.DOC_ZOOMED,{direction:"reset",level:e})},[i,n]),g=(0,I.GV)(oS.AO),j=(0,rT.Lt)();return((0,y.useEffect)(()=>{if(e)return eY.WC.on("keydown","PRESENT_BLOCK",e=>{let n=e.target instanceof HTMLElement&&(0,es.fg)(e.target);return!(g||!t||(0,rI.We)(t))&&!n&&((0,su.Ay)("=")(e)?(c(),e.preventDefault(),!0):(0,su.Ay)("-")(e)?(u(),e.preventDefault(),!0):(0,su.Ay)("0")(e)?(p(),e.preventDefault(),!0):!!(0,su.Ay)("9")(e)&&(l(),e.preventDefault(),!0))})},[g,e,t,c,u,p,l]),e)?(0,s.jsxs)(e7.e,{spacing:"0",size:"sm",variant:"ghost",isAttached:!0,borderWidth:"1px",borderRadius:"full",children:[(0,s.jsx)(X.Tz,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"-",label:f.Ru._({id:"FjkaiT"}),children:(0,s.jsx)(J.K,{"aria-label":f.Ru._({id:"FjkaiT"}),fontWeight:"normal",onClick:u,icon:(0,s.jsx)(x.g,{icon:h.EZy})})}),(0,s.jsxs)(rp.W,{closeOnSelect:!0,children:[(0,s.jsx)(X.Tz,{label:f.Ru._({id:"VZ3UQG"}),children:(0,s.jsx)(rm.I,{minW:20,as:d.$,variant:"ghost",fontWeight:"400",size:"sm",rightIcon:(0,s.jsx)(x.g,{icon:h.Jt$}),children:j?(0,s.jsx)(m.x6,{id:"R9Khdg"}):uL(r)})}),(0,s.jsxs)(rf.c,{maxW:"220px",children:[(0,s.jsx)(rg.i,{value:j?"auto":r.toString(),type:"radio",children:(0,s.jsx)(rj.k,{value:"auto",onClick:l,children:(0,s.jsxs)(e8.z,{children:[(0,s.jsxs)(a.E,{children:[(0,s.jsx)(m.x6,{id:"R9Khdg"})," ",(0,s.jsx)(a.E,{as:"span",color:"gray.500",children:(0,s.jsx)(m.x6,{id:"P9Cyl9"})})]}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(a.E,{as:"span",opacity:"0.6",children:"9"})]})})}),(0,s.jsx)(rv.N,{}),(0,s.jsx)(rg.i,{value:j?"auto":r.toString(),type:"radio",children:uP.map(e=>(0,s.jsx)(rj.k,{value:(e/100).toString(),onClick:()=>{o(e)},children:(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(a.E,{children:uL(e)}),(0,s.jsx)(tT.h,{}),e===T.vN&&(0,s.jsx)(a.E,{as:"span",opacity:"0.6",children:"0"})]})},e))})]})]}),(0,s.jsx)(X.Tz,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"+",label:f.Ru._({id:"AWOSPo"}),children:(0,s.jsx)(J.K,{fontWeight:"normal","aria-label":f.Ru._({id:"AWOSPo"}),onClick:c,icon:(0,s.jsx)(x.g,{icon:h.QLR})})})]}):null},uM=e=>Math.round(10*e)/10,uV=(0,y.memo)(function(e){let{editor:t,scrollingParentSelector:i,toggleCommentsPanel:r,isCommentsPanelOpen:l,isPagesPanelOpen:a,togglePagesPanel:d,editorWrapperEl:c,docEditorType:u,isDark:h}=e,[x]=(0,dL.U)(["(max-width: 840px)","(min-width: 841px)"]),p=(0,D.u)("editDocAI"),m=(0,eZ.h5)({base:!0,lg:!1}),f=(0,I.GV)(ep.wC),g=(0,I.GV)(nm.Jo),j=(0,I.GV)(ts.Gd),{isGammaAdminUser:v}=(0,er.ur)(),b=(0,er.Iy)("comment",g),C=(0,nN.Gx)(),w=(0,nN.zm)(),{enabled:E}=(0,dN.k)(t),[k,S]=(0,y.useState)(void 0),T=(0,ta.dv)(j),A="SLIDE_VIEW"!==f,R=(0,I.GV)(ep.nD),O=u===t2.i.COLLABORATIVE,z=(0,I.GV)(ep.VJ),L=(0,I.GV)((0,e1.DP)("left")),N=(0,I.GV)((0,e1.DP)("right")),M=(0,D.u)("aiChat"),{enterSlideView:V,exitSlideView:F,setExitedFullscreenByClick:G,isFullscreen:W,enterFullscreen:B,exitFullscreen:U}=oN({editorWrapperEl:c,scrollingParentSelector:i,forceToolbarShownBecauseOnboarding:k});window.exportToPptx=async e=>{if(!t)return;let{exportToPptx:i}=await Promise.all([n.e(8944),n.e(6018),n.e(489)]).then(n.bind(n,4863));return i(t,e)},(0,y.useEffect)(()=>_.R.on("isInOnboardingChecklist",e=>{S(e)}),[]);let H=eW((0,y.useCallback)(e=>{let t=q.current;return!!t&&(!!(t.querySelector("[data-active]")||t.querySelector('[aria-expanded="true"]')||L||N)||e.clientY<100)},[L,N]),!z,5e3),q=(0,y.useRef)(null),K=!z||z&&H||k,J=!(0,P.Xb)(),Y=!1===p&&!x&&m&&O&&R&&M;return(0,s.jsx)(X.L8,{isDark:h,children:(0,s.jsxs)(o.s,{"data-editor-toolbar":!0,ref:q,bg:"neutral.toolbar.background",borderBottomWidth:"1px",borderBottomColor:h?"gray.800":"blackAlpha.100",zIndex:e$.$.toolbar,insetStart:0,insetEnd:0,py:1.5,alignItems:"center",p:2,pe:6,gap:2,transform:K?void 0:"translateY(-100%)",pointerEvents:"none",sx:{"&:focus-within":{marginTop:0},"> *":{pointerEvents:"auto"},"> #toolbar-spacer":{pointerEvents:"none"}},transitionProperty:"transform",transitionDuration:"normal",transitionTimingFunction:"ease-in-out","data-print-hidden":!0,children:[(0,s.jsx)(c9,{}),(0,s.jsx)(e8.z,{flex:1,children:j?(0,s.jsx)(uC,{doc:g,pagesPanelEnabled:C,isPagesPanelOpen:a,togglePagesPanel:d}):(0,s.jsx)(dW.$x,{doc:g})}),(0,s.jsxs)(e8.z,{children:[!x&&(0,s.jsx)(dQ,{}),!x&&!A&&(0,s.jsx)(uN,{}),!x&&!A&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(uE,{spotlightingByBlock:E})}),!x&&O&&R&&w&&(0,s.jsx)(uz,{}),(O||v)&&(0,s.jsx)(uv,{doc:g,showButton:!x}),J&&!T&&(0,s.jsx)(ua,{doc:g,isCollaborativeEditor:O,editorWrapperEl:c,scrollingParentSelector:i,enterSlideView:V,exitSlideView:F,setExitedFullscreenByClick:G,isFullscreen:W,enterFullscreen:B,exitFullscreen:U,shouldHide:x,docEditorType:u}),J&&T&&C&&(0,s.jsx)(up,{doc:g}),O&&b&&(0,s.jsx)(cz,{doc:g,mode:f,isCommentsPanelOpen:l,toggleCommentsPanel:r}),p&&(R||v)?(0,s.jsx)(c3,{editor:t}):Y?(0,s.jsx)(cP,{}):null,!x&&O&&!T&&(0,s.jsx)(dG,{doc:g}),!x&&(O||v)&&(0,s.jsx)(ue,{doc:g,toggleCommentsPanel:r,editorWrapperEl:c,scrollingParentSelector:i}),(0,s.jsx)(o.s,{children:(0,s.jsx)(nH.X,{showRing:!0})})]})]})})}),uF={src:"/_next/static/media/CustomCursorPointer.288ac219.svg"},uG=e=>!!(e.target&&e.target instanceof HTMLElement&&"IFRAME"===e.target.tagName),uW=(e,t)=>{var n;let i=Math.max((null===(n=t.posAtCoords(e))||void 0===n?void 0:n.inside)||-1);if(-1!=i)try{return t.state.doc.resolve(i)}catch(e){return}},uB=e=>"card"===e.type.name?!!(0,oT.Wq)(e.attrs.id):!!((0,ox.nf)(e)||["button","buttonGroup","tableOfContents","toggleSummary","docMention","cardMention"].includes(e.type.name)),uU=e=>!!(e.dataset.contentReference||e.dataset.zoomClickCapture),uH=(e,t)=>{if(!(null==t?void 0:t.nodeAfter))return!1;let n=t.nodeAfter;if("paragraph"===n.type.name)return!!(e.classList.contains("link")||e.closest(".link"));if(!(uB(n)||(0,tm.eL)(t,e=>uB(e))))return!1;if((0,dz.bi)(n.type)){let t=e.closest(".react-renderer");return!!t&&!!(uU(e)||(0,es.xX)(e,t,uU))}return"gallery"!==n.type.name||!!e.closest(".gallery-content")},uq=(0,y.memo)(e=>{let{editor:t}=e,[n,i]=(0,y.useState)(!0),r=(0,y.useRef)({x:0,y:0}),l=(0,y.useRef)(null),a=(0,y.useRef)(null),d=(0,y.useRef)(null),u=(0,y.useRef)("none"),h=(0,I.GV)(D.Gm),x=(0,I.GV)(ep.uF),p=x[0],m=x[x.length-1],f=(0,I.GV)(ep.$i),g=(0,y.useRef)("middle"),j=(0,I.GV)(ep.eo),v=(0,I.GV)(ep.G7),b=(0,I.GV)(e=>{var t;return!!(null===(t=(0,ep.FI)(e))||void 0===t?void 0:t.pos)}),C=!1===v?Math.max(.75,j):1;g.current=f===p?"first":f===m?"last":"middle",(0,y.useEffect)(()=>{let e,n;let s=e=>{l.current&&d.current&&(l.current.style.opacity=e?"1":"0",d.current.disabled=!e)},o=()=>{cancelAnimationFrame(e),e=requestAnimationFrame(()=>{if(!l.current||!a.current)return;let e=r.current.x-30*C/2,t=r.current.y-30*C/2;l.current.style.transform="translate(".concat(e,"px, ").concat(t,"px)"),"left"===u.current&&(l.current.style.transform+=" scaleX(-1)"),s("none"!==u.current)})},c=()=>{i(!0),clearTimeout(n),n=setTimeout(()=>{i(!1),o()},2e3)},h=e=>{c(),e&&(r.current={x:e.clientX,y:e.clientY});let n=r.current.x,i=r.current.y,s=null==e?void 0:e.target;if(!t||!l.current||!d.current||!s)return;if(e&&uG(e)){u.current="none",o();return}let a=n/window.innerWidth*100;if(a>20&&a<80||i<=51||!s.closest(".ProseMirror")||b||uH(s,uW({left:n,top:i},t.view))){u.current="none",o();return}u.current=a<=20?"left":"right",o()},x=()=>{u.current="none",o()},p=e=>{uG(e)&&(u.current="none",o())},m=e=>{if(c(),!t||e.button>1||(0,dP.Qj)(t.view))return;let n=(0,I.KA)().getState(),i=!!(0,ep.YL)(n),r=(0,ep.nD)(n);!i&&!r&&["left","right"].includes(u.current)&&(e.preventDefault(),e.stopPropagation(),t.commands.spotlightNextCard("left"===u.current))};return h(),document.body.addEventListener("mousemove",h),document.body.addEventListener("mouseleave",x),document.body.addEventListener("mouseup",m),document.body.addEventListener("mouseover",p),()=>{document.body.removeEventListener("mousemove",h),document.body.removeEventListener("mouseleave",x),document.body.removeEventListener("mouseup",m),document.body.removeEventListener("mouseover",p),clearTimeout(n)}},[t,C,f,b]);let w="".concat(30*C,"px"),E="".concat(30*C,"px");return(0,s.jsxs)(F.Z,{children:[(0,s.jsx)("style",{ref:d,children:"html * { cursor: none!important}"}),(0,s.jsx)(uK,{position:"left",enabled:h}),(0,s.jsx)(uK,{position:"right",enabled:h}),(0,s.jsx)(o.s,{ref:l,position:"absolute",top:"0",left:"0",alignItems:"center",justifyContent:"center",className:"gamma-custom-cursor",width:w,height:E,pointerEvents:"none",willChange:"transform",verticalAlign:"middle",zIndex:"tooltip",filter:"drop-shadow(3px 1px 2px rgb(0 0 0 / 0.1))",outline:h?"2px solid pink":void 0,children:(0,s.jsx)(c.az,{ref:a,position:"absolute",width:w,height:E,sx:{"::before":{content:'""',opacity:n?1:0,transition:"opacity 0.2s",display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundImage:"url(".concat(uF.src,")"),width:"100%",height:"100%"}}})})]})}),uK=e=>{let{position:t,enabled:n}=e;return n?(0,s.jsx)(c.az,{position:"absolute",top:"0",bottom:"0",left:"left"===t?"calc(".concat(20,"% - 1px)"):void 0,right:"right"===t?"calc(".concat(20,"% - 1px)"):void 0,width:"2px",height:"100%",zIndex:"tooltip",pointerEvents:"none",borderLeft:"2px dashed red"}):null};var uJ=n(73059);let uY=e=>{let t=(0,I.GV)(ep.Er),n=(0,I.GV)(ep.ys),{handlePresentNavigationEvent:i}=(0,uJ.e)(tK.Y2.PRESENTER_VIEW_POPUP);(0,y.useEffect)(()=>{if(!t)return;let r=t=>{let{payload:r}=t;if(e)try{let{payload:e}=JSON.parse(r),{action:t,eventKey:s,method:o,toSessionId:l,fromUserId:a}=e;if(l!==(null==n?void 0:n.sessionId)||a!==(null==n?void 0:n.id))return;switch(t){case"goToCard":{let{cardId:n}=e;if(!n)break;i({eventType:t,eventKey:s,method:o,payload:{cardId:n}});break}case"toggleSpotlight":case"arrowRight":case"arrowLeft":case"arrowDown":case"arrowUp":case"restart":case"toggleExpanded":case"cancelCurrentAction":i({eventType:t,eventKey:s,method:o});break;default:console.warn("[usePresenterViewMessages] Unknown message type",e)}}catch(e){console.error("[usePresenterViewMessages] Error parsing message",e)}};return t.on("stateless",r),()=>{t.off("stateless",r)}},[e,null==n?void 0:n.sessionId,null==n?void 0:n.id,i,t])},uX=e=>{let{editor:t,enabled:n}=e,i=(0,I.jL)(),r=(0,y.useRef)(null),[s,o]=(0,y.useState)(!1),[l,a]=(0,y.useState)([0,0]),[d,c]=(0,y.useState)("bottom"),u=(0,I.GV)(ep.YL),h=(0,y.useCallback)(()=>{o(!1)},[]),x=(0,y.useCallback)(()=>{a([0,0]),c("bottom")},[]),p=(0,y.useCallback)(e=>{o(!0),a(e)},[]),m=(0,y.useCallback)(e=>{var t;e.preventDefault(),p([e.clientX,e.clientY]);let n=null===(t=r.current)||void 0===t?void 0:t.offsetHeight;if(null==n)return;let i=window.innerHeight<e.clientY+n,s=e.clientY<n;i&&!s?c("top"):i&&s?c("center"):c("bottom")},[r,p]);(0,y.useEffect)(()=>{u||o(!1)},[u]),(0,y.useEffect)(()=>{if(t&&n)return r4.LF.on(r4.DN.OPEN_PRESENT_MODE_CONTEXT_MENU,e=>{let{e:t,pos:n,cardId:r}=e;m(t),i((0,ep.dd)({pos:n,cardId:r}))})},[t,n,m,i]);let f=(0,y.useMemo)(()=>{var e;let t=l[1],n=null===(e=r.current)||void 0===e?void 0:e.offsetHeight,i=n?window.innerHeight-(t+n+8):void 0,s="center"===d&&i?"translateY(".concat(i,"px)"):"top"===d?"translateY(-100%)":void 0;return{left:l[0],top:l[1],transform:s,transformOrigin:"top"}},[d,l]);return{menuRef:r,isPresentModeMenuOpen:s,onPresentModeMenuClose:h,handleContextMenu:m,menuRootStyles:f,clearPositioning:x}};var u$=n(3367),uZ=n(51416),uQ=n(41510);let u0=e=>{let{children:t,icon:n,onClick:i,shouldHide:r=!1,...o}=e;return r?null:(0,s.jsx)(ov.D,{icon:n,onClick:i,...o,children:t})},u1=(0,y.forwardRef)((e,t)=>{let{editor:n,isOpen:i,onClose:r,readOnly:o,clearPositioning:l,rootStyles:a}=e,[d,c]=(0,y.useState)(null),u=(0,uZ.S)(t,c),{pos:p,cardId:f}=(0,I.GV)(ep.P$),{enabled:g}=(0,op.kY)(n),{editCardInPresentMode:j}=(0,uQ.V)({editor:n}),v=(0,ei.rd)(),b=(0,y.useCallback)(()=>{g?null==n||n.commands.turnOffSpotlight():p?null==n||n.commands.spotlightNodeAtPos(p):f&&(null==n||n.commands.spotlightNextBlock()),r()},[g,p,f,r,null==n?void 0:n.commands]);return(0,y.useEffect)(()=>{var e;null==d||null===(e=d.parentElement)||void 0===e||e.addEventListener("contextmenu",e=>{e.preventDefault(),e.stopPropagation()})},[d]),(0,s.jsx)(F.Z,{children:(0,s.jsx)(X.L8,{isDark:v,children:(0,s.jsx)(rp.W,{isOpen:i,closeOnBlur:!1,isLazy:!0,children:(0,s.jsxs)(rf.c,{onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},zIndex:"popover",ref:u,rootProps:{style:a},w:"260px",overflowY:"auto",onTransitionEnd:()=>{i||l()},children:[(0,s.jsx)(u0,{"data-testid":"present-mode-menu-item-edit",command:(0,X.lp)("E"),shouldHide:o,icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:h.zLW}),onClick:j,children:(0,s.jsx)(m.x6,{id:"IkOuqb"})}),(0,s.jsx)(u0,{"data-testid":"present-mode-menu-item-spotlight",command:(0,X.lp)("S"),icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:h.lnn}),onClick:b,children:g?(0,s.jsx)(m.x6,{id:"CzYGrQ"}):p?(0,s.jsx)(m.x6,{id:"LoLA00"}):f?(0,s.jsx)(m.x6,{id:"X1FNEK"}):null})]})})})})});u1.displayName="PresentModeContextMenuComponent";let u6=(0,y.memo)(u1);var u2=n(81853),u5=n(76272),u3=n.n(u5),u4=n(5508),u8=n(17228),u7=n.n(u8);let u9={easeOutLinear:o$.GA,easeOutSine:o$.ED,easeOutCubic:o$.p_,easeOutCirc:o$.cY,easeOutQuad:o$.WD,easeOutQuart:o$.Mj,easeOutExpo:o$.lu,bezierCustom1:u3()(.13,.97,.035,.73),bezierCustom2:u3()(.105,1.15,.15,.355)},he={UP:"up",DOWN:"down"},ht=e=>e?+new Date-+new Date(e):1/0,hn=(e,t)=>{let n=(0,y.useMemo)(()=>new u4.Lethargy(6,120,.3,150),[]),{easing:i="easeOutCubic",touchpadFactor:r=1.5,triggerThreshold:s=1200}=t||{},o=(0,et.O2)("editor"),l=(0,I.GV)(ep.$i),a=(0,y.useRef)(null),d=(0,y.useRef)(null),c=(0,y.useRef)(null),u=(0,y.useRef)(!1),h=(0,y.useRef)(null),x=(0,y.useRef)(null),[p,m]=(0,y.useState)(!1),[f,g]=(0,y.useState)(!1),j=(0,y.useRef)({counterTarget:0,counterCurrent:0,direction:he.DOWN}),v=(0,y.useCallback)(()=>{var e;if(!a.current)return;let{counterTarget:t}=j.current,n=t/s*100,i=(null!=n?n:0)*2.64,r="".concat(i," ").concat(264-i),o=null===(e=a.current.querySelector(".chakra-progress"))||void 0===e?void 0:e.lastElementChild,l=a.current.querySelector(".chakra-progress__indicator");l&&l.setAttribute("stroke-dasharray",r),o&&(o.innerHTML="".concat(n.toFixed(0),"%"))},[s]),b=(0,y.useCallback)(()=>{let e=c.current,t=d.current;if(!t||!e)return;let n=e.querySelector(".chakra-progress__indicator"),r=t.querySelector(".chakra-progress__indicator");if(!n||!r)return;let o=j.current.counterCurrent/s,l=(550>ht(x.current)?1:null!=o?o:0)*264,a="".concat(l," ").concat(264-l),u=Math.max(56-56*u9[i](Math.min(o,1)),0);e.style.transform="translateY(".concat(u,"px)"),t.style.transform="translateY(-".concat(u,"px)"),r.setAttribute("stroke-dasharray",a),n.setAttribute("stroke-dasharray",a)},[i,s]),C=(0,y.useCallback)(()=>{let e;if(u.current)return;let t=n=>{let i=e?n-e:0;if(e=n,.1>Math.abs(j.current.counterTarget-j.current.counterCurrent)){j.current.counterCurrent=j.current.counterTarget,b(),u.current=!1;return}j.current.counterCurrent=(0,o$.Cc)(j.current.counterCurrent,j.current.counterTarget,u7()(60/(i?1e3/i:60)*.3,.3,1)),b(),requestAnimationFrame(t)};requestAnimationFrame(t)},[b]),w=(0,y.useCallback)(()=>{j.current.counterTarget=0,m(!1),g(!1),v(),C()},[C,v]);return(0,y.useEffect)(()=>{let t,i;if(!l||!e)return w();let a=document.querySelector((0,T.OB)(l));if(!a)return w();let u=t=>{if(t.target.closest("[data-comments-wrapper]"))return;let l=n.check(t);if(null===c.current||null===d.current)return;let a=ht(h.current);if(a<500||a<1e3&&!1===l)return;let u=ht(x.current);if(u<500||u<1e3&&!1===l)return;let p=0===Math.abs(t.deltaY)?j.current.direction:t.deltaY>0?he.DOWN:he.UP;if(!("down"===p?o.isAtBottom():o.isAtTop()))return;clearTimeout(i);let f=t.wheelDeltaY?t.wheelDeltaY===-3*t.deltaY:0===t.deltaMode,b=Math.abs(void 0!==t.deltaY?t.deltaY:40)*(f?r:1);if(p!==j.current.direction){j.current.direction=p,w();return}g(p===he.DOWN),m(p===he.UP),j.current.counterTarget+=b,j.current.direction=p,j.current.counterTarget/s>=1?(e.commands.spotlightNextCard(p===he.UP,p===he.UP?"bottom":"top"),x.current=+new Date,setTimeout(()=>{w(),v()},250),setTimeout(()=>{x.current=null},1e3)):i=setTimeout(w,500),C(),v()},p=()=>{h.current=+new Date,clearTimeout(t),w(),t=setTimeout(()=>{h.current=null},1e3)};return a.addEventListener("scroll",p),a.addEventListener("wheel",u,{passive:!0}),v(),()=>{a.removeEventListener("scroll",p),a.removeEventListener("wheel",u)}},[e,n,C,i,r,s,o,v,b,w,l]),{debugRef:a,nextCardRef:c,prevCardRef:d,showNextCard:f,showPrevCard:p}},hi=e=>{let{editor:t}=e,n=(0,D.u)("debugLogging"),[i,r]=(0,y.useState)("easeOutExpo"),[o,l]=(0,y.useState)(1.5),[a,d]=(0,y.useState)(1200),{debugRef:c,nextCardRef:u,prevCardRef:h,showNextCard:x,showPrevCard:p}=hn(t,{easing:i,touchpadFactor:o,triggerThreshold:a}),{prevCard:m,nextCard:f}=(0,I.GV)(e=>{let t=(0,ep.$i)(e)||"",n=(0,ep.Ev)(e),i=Object.keys((n.parents[t]||[]).reduce((e,t)=>e[t],n.tree)),r=null,s=null;return i.forEach((e,o)=>{if(e!==t)return;let l=n.parents[t];0===o?l.length&&(r={cardId:l[l.length-1],isSibling:!1}):r={cardId:i[o-1],isSibling:!0},o===i.length-1?l.length&&(s={cardId:l[l.length-1],isSibling:!1}):s={cardId:i[o+1],isSibling:!0}}),{prevCard:r,nextCard:s}},tP()),g=null==f?void 0:f.cardId,j=null==m?void 0:m.cardId,v=(0,y.useMemo)(()=>{let e=null,n=null;return t&&t.state.doc.descendants(t=>!(0,tj.jg)(t)||(t.attrs.id===j?e=t:t.attrs.id===g&&(n=t),!!(!e&&j)||!!(!n&&g))),{prev:e,next:n}},[t,g,j]);return(0,s.jsxs)(s.Fragment,{children:[n&&(0,s.jsx)(hr,{ref:c,setEasing:r,setTouchpadFactor:l,setTriggerThreshold:d}),(0,s.jsx)(hs,{ref:h,direction:"up",node:v.prev,enabled:p,offset:16}),(0,s.jsx)(hs,{ref:u,direction:"down",node:v.next,enabled:x,offset:24})]})},hr=y.forwardRef((e,t)=>{let{setEasing:n,setTouchpadFactor:i,setTriggerThreshold:r}=e;return(0,s.jsxs)(o.s,{position:"absolute",alignItems:"center",bg:"gray.100",left:2,bottom:16,zIndex:"overlay",borderRadius:"md",border:"solid 2px var(--chakra-colors-trueblue-300)",p:1,children:[(0,s.jsxs)(rp.W,{closeOnSelect:!1,children:[(0,s.jsx)(rm.I,{as:d.$,colorScheme:"trueblue",children:"Options"}),(0,s.jsxs)(rf.c,{minWidth:"240px",children:[(0,s.jsx)(X.Tz,{label:"How much total scrolling work do we need to do to trigger next/prev card?",placement:"right",children:(0,s.jsxs)(a.E,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Scroll Threshold"," ",(0,s.jsxs)("i",{children:["(default=",1200,")"]})]})}),(0,s.jsxs)(u2.Q7,{defaultValue:1200,min:100,max:1e4,precision:0,step:100,onChange:(e,t)=>r(t),children:[(0,s.jsx)(u2.OO,{}),(0,s.jsxs)(u2.lw,{children:[(0,s.jsx)(u2.Q0,{}),(0,s.jsx)(u2.Sh,{})]})]}),(0,s.jsx)(rv.N,{}),(0,s.jsx)(X.Tz,{label:"How much extra weight do we give to touchpad scroll events?",placement:"right",children:(0,s.jsxs)(a.E,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Touchpad Multiplier"," ",(0,s.jsxs)("i",{children:["(default=",1.5,")"]})]})}),(0,s.jsxs)(u2.Q7,{defaultValue:1.5,min:1,max:10,precision:1,step:.1,onChange:(e,t)=>i(t),children:[(0,s.jsx)(u2.OO,{}),(0,s.jsxs)(u2.lw,{children:[(0,s.jsx)(u2.Q0,{}),(0,s.jsx)(u2.Sh,{})]})]}),(0,s.jsx)(rv.N,{}),(0,s.jsxs)(rg.i,{defaultValue:"easeOutExpo",title:"Easing (of peek element)",type:"radio",onChange:e=>n(e),children:[(0,s.jsx)(rj.k,{value:"easeOutLinear",children:"easeOutLinear"}),(0,s.jsx)(rj.k,{value:"easeOutSine",children:"easeOutSine"}),(0,s.jsx)(rj.k,{value:"easeOutCubic",children:"easeOutCubic"}),(0,s.jsx)(rj.k,{value:"easeOutCirc",children:"easeOutCirc"}),(0,s.jsx)(rj.k,{value:"easeOutQuad",children:"easeOutQuad"}),(0,s.jsx)(rj.k,{value:"easeOutQuart",children:"easeOutQuart"}),(0,s.jsx)(rj.k,{value:"easeOutExpo",children:"easeOutExpo"}),(0,s.jsx)(rj.k,{value:"bezierCustom1",children:"bezierCustom1"}),(0,s.jsx)(rj.k,{value:"bezierCustom2",children:"bezierCustom2"})]})]})]}),(0,s.jsx)(o.s,{ref:t,direction:"column",alignItems:"center",width:"85px",ml:1,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:(0,s.jsx)(cN.P,{value:40,color:"trueblue.500",children:(0,s.jsx)(cV,{})})})]})});hr.displayName="PeekDebugger";let hs=y.forwardRef((e,t)=>{let{direction:n,enabled:i,node:r,offset:l}=e,[d,c]=(0,y.useState)(!1),[u,p]=(0,y.useState)(r);(0,y.useEffect)(()=>{c(!0);let e=setTimeout(()=>{c(!1),p(r)},550);return()=>{clearTimeout(e)}},[r]);let m=(0,y.useMemo)(()=>u?(0,rF.getCardTitle)(u.toJSON()):"",[u]),f=!!u;return(0,s.jsx)(o.s,{ref:t,pointerEvents:"none",position:"absolute",justifyContent:"center",width:"100%",zIndex:"overlay",top:"up"===n?"".concat(l,"px"):"inherit",bottom:"down"===n?"".concat(l,"px"):"inherit",children:(0,s.jsxs)(o.s,{bg:"gray.100",borderRadius:"md",boxShadow:"md",h:"".concat(40,"px"),maxWidth:"450px",justifyContent:"center",opacity:i?1:0,transition:"opacity ".concat(300,"ms ease-out"),textAlign:"center",alignItems:"center",direction:"row",px:2,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:[(0,s.jsx)(cN.P,{display:f?"block":"none",color:"trueblue.500",size:"20px",thickness:"16px",children:(0,s.jsx)(cV,{visibility:d?"visible":"hidden",children:(0,s.jsx)(x.g,{icon:h.QRE,fontSize:"14px",style:{color:"var(--chakra-colors-gray-100)",backgroundColor:"var(--chakra-colors-trueblue-500)",borderRadius:"10px"}})})}),f||"up"!==n?f||"down"!==n?null:(0,s.jsx)(x.g,{icon:h.uZL,size:"xs",color:"var(--chakra-colors-gray-600)"}):(0,s.jsx)(x.g,{icon:h.o9H,size:"xs",color:"var(--chakra-colors-gray-600)"}),(0,s.jsx)(o.s,{width:1}),(0,s.jsx)(a.E,{noOfLines:1,textOverflow:"ellipsis",overflowX:"hidden",fontSize:"md",color:f?"gray.800":"gray.600",px:2,children:f?m:"down"===n?"End of presentation":"Start of presentation"})]})})});hs.displayName="PeekCardTab";let ho=()=>{let[e,t]=(0,y.useState)(["",[],{}]),n=(0,I.CU)();return(0,y.useEffect)(()=>n.subscribe(()=>{let e=n.getState(),i=(0,ep.Ev)(e),r=(0,ep.$i)(e)||"",s=i.parents[r]||[],o={};Object.keys(i.tree).forEach(e=>{let t=[],n=e=>{Object.keys(e).forEach(i=>{t.push(i),n(e[i])})};n(i.tree[e]),o[e]=t}),t([r,s,o])}),[n]),e},hl=()=>{let[e,t,n]=ho(),i=(0,I.GV)(aF.ow),r=Object.keys(n).filter(e=>{var t;return!(null==i?void 0:null===(t=i[e])||void 0===t?void 0:t.hidden)});return(0,s.jsx)(e8.z,{position:"fixed",bottom:0,w:"100vw",zIndex:10,background:"blackAlpha.200",px:"6px",py:"2px",align:"end",spacing:"2px",opacity:e?1:0,transitionProperty:"opacity",transitionDuration:"normal",children:r.map((i,o)=>{let l=[...t,e][0],a=r.indexOf(l),d=n[l],c=0,u=100;return e&&d&&-1===r.indexOf(e)&&(c=(d.indexOf(e)+1)/d.length*100,u=1/d.length*100),(0,s.jsx)(hc,{cardId:i,state:o===a?"current":o<=a?"prev":"next",percent:c,unit:u},i)})})},ha="var(--chakra-colors-trueblue-200)",hd="var(--chakra-colors-trueblue-100)",hc=e=>{let{cardId:t,state:n,percent:i,unit:r}=e,l="linear-gradient(to right, ".concat(ha," 0% ").concat(i,"%, ").concat("var(--chakra-colors-trueblue-300)"," ").concat(i,"% ").concat(i+r,"%, ").concat(hd," ").concat(i+r,"% 100%)");return(0,s.jsx)(o.s,{borderRadius:"2px",flex:"1",h:"6px",bg:"current"===n?l:"prev"===n?ha:hd},t)},hu=(0,su.Ay)("Esc"),hh=e=>{let{editor:t,showNavigationControls:n}=e,[i,r]=(0,y.useState)(null),l=(0,C.d4)(ep.QF),c=(0,y.useRef)(l),u=(0,C.wA)(),h=(0,nx.UT)("edit"),x=(0,S.u)("presentModeCursor"),p=(0,u$.SQ)({enabled:!l,setActiveKey:r});uY(t);let{menuRef:f,isPresentModeMenuOpen:g,onPresentModeMenuClose:j,menuRootStyles:v,clearPositioning:b}=uX({editor:t,enabled:!0});return(0,y.useEffect)(()=>(u((0,ep._b)({isEditingInSlideView:!1})),()=>{u((0,ep._b)({isEditingInSlideView:!1}))}),[u]),c.current=l,(0,y.useEffect)(()=>eY.WC.on("keydown","SLIDE_VIEW",e=>!!(c.current&&hu(e))&&(u((0,ep._b)({isEditingInSlideView:!1})),e.preventDefault(),!0)),[u]),(0,rT.FM)(),(0,dD.j)({ref:f,enabled:g,handler(e){e instanceof MouseEvent&&2!==e.button&&j()}}),(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)(u6,{ref:f,editor:t,readOnly:!h,isOpen:g,onClose:j,clearPositioning:b,rootStyles:v}),(0,s.jsx)(hi,{editor:t}),(0,s.jsx)(hl,{}),(0,s.jsx)(o.s,{position:"absolute",inset:0,width:"100%",height:"100%",pointerEvents:"none",justify:"flex-end",children:(0,s.jsxs)(o.s,{bg:"gray.50",position:"fixed",bottom:6,right:6,p:3,px:6,justify:"flex-end",align:"center",opacity:l?1:0,pointerEvents:l?"auto":"none",transitionProperty:"opacity, transform",transitionDuration:"normal",transitionTimingFunction:"ease",transform:l?"translate(0,0)":"translate(0,100%)",borderRadius:"md",shadow:"md",zIndex:"overlay",children:[(0,s.jsx)(a.E,{size:"sm",marginEnd:3,children:(0,s.jsx)(m.x6,{id:"DjD/sG"})}),(0,s.jsx)(d.$,{size:"sm",variant:"solid",onClick:()=>u((0,ep._b)({isEditingInSlideView:!1})),children:(0,s.jsx)(m.x6,{id:"DPfwMq"})})]})}),x&&!l&&(0,s.jsx)(uq,{editor:t}),n&&(0,s.jsx)(u$.Lh,{activeKey:i,spotlightingByBlock:p})]})};var hx=n(13139),hp=n(64315),hm=n(35459);let hf=e$.$.filmstrip,hg=e$.$.filmstrip-1,hj={duration:.25,delay:.75},hv={duration:.25},hb="filmstrip-root",hy=".".concat(hb),hC="filmstrip-scroller",hw=".".concat(hC);var hE=n(89489);let hk=(0,y.createContext)(null);var hS=n(29164),hI=n(44261),hT=n(24384);let hA=(0,y.forwardRef)(function({children:e,as:t="ul",axis:n="y",onReorder:i,values:r,...s},o){let l=(0,hS.M)(()=>(0,i2.P)(t)),a=[],d=(0,y.useRef)(!1);return(0,hE.V)(!!r,"Reorder.Group must be provided a values prop"),(0,y.useEffect)(()=>{d.current=!1}),y.createElement(l,{...s,ref:o},y.createElement(hk.Provider,{value:{axis:n,registerItem:(e,t)=>{t&&-1===a.findIndex(t=>e===t.value)&&(a.push({value:e,layout:t[n]}),a.sort(h_))},updateOrder:(e,t,n)=>{if(d.current)return;let s=function(e,t,n,i){if(!i)return e;let r=e.findIndex(e=>e.value===t);if(-1===r)return e;let s=i>0?1:-1,o=e[r+s];if(!o)return e;let l=e[r],a=o.layout,d=(0,hT.j)(a.min,a.max,.5);return 1===s&&l.layout.max+n>d||-1===s&&l.layout.min+n<d?(0,hI.Pe)(e,r,r+s):e}(a,e,t,n);a!==s&&(d.current=!0,i(s.map(hR).filter(e=>-1!==r.indexOf(e))))}}},e))});function hR(e){return e.value}function h_(e,t){return e.layout.min-t.layout.min}var hO=n(17170),hD=n(95989);function hz(e){let t=(0,hS.M)(()=>(0,hO.O)(e)),{isStatic:n}=(0,y.useContext)(hD.Q);if(n){let[,n]=(0,y.useState)(e);(0,y.useEffect)(()=>t.on("change",n),[])}return t}var hP=n(91943);let hL=e=>"object"==typeof e&&e.mix,hN=e=>hL(e)?e.mix:void 0;var hM=n(80471),hV=n(42220);function hF(e,t){let n=(0,hS.M)(()=>[]);return function(e,t){var n,i;let r=hz(t()),s=()=>r.set(t());return s(),n=()=>hV.OH.update(s,!1,!0),i=()=>hV.eO.update(s),(0,hM.E)(()=>{let t=e.map(e=>e.on("change",n));return()=>{t.forEach(e=>e()),i()}}),r}(e,()=>{n.length=0;let i=e.length;for(let t=0;t<i;t++)n[t]=e[t].get();return t(n)})}var hG=n(41115);function hW(e,t=0){return(0,hG.S)(e)?e:hz(t)}let hB={Group:hA,Item:(0,y.forwardRef)(function({children:e,style:t={},value:n,as:i="li",onDrag:r,layout:s=!0,...o},l){let a=(0,hS.M)(()=>(0,i2.P)(i)),d=(0,y.useContext)(hk),c={x:hW(t.x),y:hW(t.y)},u=function(e,t,n,i){let r="function"==typeof t?t:function(...e){let t=!Array.isArray(e[0]),n=t?0:-1,i=e[0+n],r=e[1+n],s=e[2+n],o=e[3+n],l=(0,hP.G)(r,s,{mixer:hN(s[0]),...o});return t?l(i):l}(t,void 0,void 0);return Array.isArray(e)?hF(e,r):hF([e],([e])=>r(e))}([c.x,c.y],([e,t])=>e||t?1:"unset"),h=(0,y.useRef)(null);(0,hE.V)(!!d,"Reorder.Item must be a child of Reorder.Group");let{axis:x,registerItem:p,updateOrder:m}=d;return(0,y.useEffect)(()=>{p(n,h.current)},[d]),y.createElement(a,{drag:x,...o,dragSnapToOrigin:!0,style:{...t,x:c.x,y:c.y,zIndex:u},layout:s,onDrag:(e,t)=>{let{velocity:i}=t;i[x]&&m(n,c[x].get(),i[x]),r&&r(e,t)},onLayoutMeasure:e=>{h.current=e},ref:l},e)})};var hU=n(16120),hH=n(55108);let hq=e=>{let{content:t,selection:n}=(0,hU.S)(e),i=!!(null==t?void 0:t.content),r=(0,y.useMemo)(()=>{var e;if(!i)return[];let n=t.content,r=(null==n?void 0:n[0].content)||[],s=null===(e=t.content)||void 0===e?void 0:e[0].attrs;return r.map(e=>{var t;return s&&(null===(t=e.attrs)||void 0===t?void 0:t.id)?{cardId:e.attrs.id,isDragging:!1,displayBehavior:"normal"}:null}).filter(e=>null!==e)},[t,i]),s=(0,I.GV)(hH.j2,(e,t)=>tP()(e,t)).map(e=>r.find(t=>t.cardId===e.cardId)?{...e}:null).filter(e=>null!==e),o=(0,I.GV)(hH.u9);return{isDragging:o,cards:o?s:r,editorContent:t,selection:n,isLoaded:i}};var hK=n(71096),hJ=n(41737),hY=n(3583),hX=n(67965),h$=n(89985),hZ=n(46108),hQ=n.n(hZ),h0=n(49880),h1=n(77256),h6=n(66159),h2=n(88459),h5=n(27649),h3=n(96061),h4=n(16928),h8=n(20277);let h7=(e,t)=>{let n=hY.Mj.getState(e.state).undoManager,i=n.undoStack[n.undoStack.length-1];i&&i.meta.set("filmstripState",t)},h9=e=>{let t=(0,I.GV)(no.Mj),n=(0,I.GV)(no.Nx),i=(0,I.jL)(),r=(0,I.CU)(),o=(0,nk.d)(),l=(0,h0.T)(),d=(0,y.useCallback)(n=>{if(!e)return;let i=(0,tj.V4)(e,t);if(!i.length)return;let r=rM.FK.from(i);if(!(0,h3.E)(r,e,n)){o({title:n?(0,s.jsx)(m.x6,{id:"33a+2Q"}):(0,s.jsx)(m.x6,{id:"FntfNT"}),status:"error",duration:3e3,position:"top"});return}o({title:n?(0,s.jsx)(m.x6,{id:"VG4BD6",values:{0:i.length,1:i.length}}):(0,s.jsx)(m.x6,{id:"GtH+14",values:{0:i.length,1:i.length}}),status:"success",duration:3e3,position:"top"})},[e,t,o]),c=(0,y.useCallback)(()=>{d(!1)},[d]),u=(0,y.useCallback)(()=>{if(!e)return;let n=(0,tj.V4)(e,t);n.length&&l(n)},[e,l,t]),h=(0,y.useCallback)(function(){let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return;let r=(0,no.zT)((0,I.KA)().getState());i((0,no.Cj)()),e.commands.deleteCardsById(t,n),h7(e,r)},[i,e,t]),x=(0,y.useCallback)(()=>{if(!e||0===t.length)return;let n="";if(1===t.length){let i=(0,tj.W0)(e,t[0]);i&&(n=(0,h$.getCardTitle)(i.node.toJSON())||"")}h();let i=n?'"'.concat(n,'"'):f.Ru._({id:"FyJPFh"}),r=o({title:(0,s.jsxs)(e8.z,{children:[(0,s.jsx)(a.E,{noOfLines:1,children:(0,s.jsx)(m.x6,{id:"OJTPnC",values:{displayTitle:i,0:t.length,1:t.length}})}),(0,s.jsx)(n5.N,{textDecoration:"underline",onClick:()=>{(0,hX.tN)(e.state),o.close(r)},children:(0,s.jsx)(m.x6,{id:"9uI/rE"})})]}),status:"info",duration:3e3,position:"top"})},[h,e,t,o]),p=(0,y.useCallback)(()=>{0!==t.length&&(d(!0),h(!0))},[h,d,t]),g=(0,y.useCallback)(()=>{if(!e||0===t.length)return;let r=(0,tj.V4)(e,t);if(r.length){let t=(0,tj.W0)(e,n),l=t?t.pos+t.node.nodeSize:e.state.doc.content.size-1,a=r.map(e=>(0,to.RE)(hQ()(e.toJSON()))).map(e=>(0,h5.iM)(e)),d=(0,no.zT)((0,I.KA)().getState());e.chain().insertContentAt(l,a,{updateSelection:!1}).command(e=>{let{tr:t}=e,n=(0,h8.s)(t.doc.resolve(l));return n&&(t=t.setSelection(n)),t.setMeta(h4._,!0),t.setMeta(h6.G,!0),!0}).scrollIntoView().run(),h7(e,d),i((0,no.B6)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:a.length})),o({title:(0,s.jsx)(m.x6,{id:"ClnFsQ",values:{0:r.length,1:r.length}}),status:"success",duration:3e3,position:"top"})}},[i,e,n,o,t]);return{handleAddCard:(0,y.useCallback)(t=>{if(!e)return;let n=(0,no.Nx)((0,I.KA)().getState());n||(n=(0,no.gM)((0,I.KA)().getState()));let r=(0,tj.W0)(e,n);if(!r)return;let{pos:s}=r,o=e.view.state.doc.nodeAt(s);if(!o){console.error("[Filmstrip] Cannot append card. Node unknown");return}let l=s+o.nodeSize,{cardToAdd:a,command:d}=(0,h2.j)(t);(0,h1.Jb)(d,tK.oU.FILMSTRIP_CARD_MENU);let c=(0,no.zT)((0,I.KA)().getState());e.chain().insertContentAt(l,(0,h5.iM)(a),{updateSelection:!1}).command(e=>{let{tr:t}=e,n=(0,h8.s)(t.doc.resolve(l));return n&&(t=t.setSelection(n)),t.setMeta(h4._,!0),t.setMeta(h6.G,!0),!0}).scrollIntoView().run(),e.commands.focus(),h7(e,c),i((0,no.B6)({beforeCardId:null==r?void 0:r.node.attrs.id,cardCount:1}))},[i,e]),handleCopy:c,handleCopyCardsToDeck:u,handleCut:p,handleDelete:x,handleDuplicate:g,handleExport:(0,y.useCallback)(()=>{if(!e||0===t.length)return;let n=(0,ep.uF)(r.getState()),i=t.map(e=>(n.indexOf(e)+1).toString());nU.R.emit("openSharePanel",{view:"export",options:{cardRangesInput:i.join(",")}})},[e,t,r])}},xe=e=>({backgroundColor:e?"gray.700":"gray.200",activeButtonColor:e?"gray.50":"trueblue.500",inactiveButtonColor:e?"gray.50":"gray.900",closeButtonColorScheme:e?"gray":"blackAlpha"}),xt=e=>{let{onClose:t,isDark:n,viewPreference:i,setViewPreference:r,editor:l}=e,a="list"===i,{activeButtonColor:u,inactiveButtonColor:p,backgroundColor:g,closeButtonColorScheme:j}=xe(n),v=(0,en.st)(),b=(0,y.useCallback)(e=>()=>{r(e),null==v||v.track(en.VV.FILMSTRIP_TOGGLE_VIEW,{view:e})},[v,r]),{handleAddCard:C}=h9(l),{onContextMenu:w,menuProps:E}=(0,hK.E)(),k=(0,y.useMemo)(()=>[{label:f.Ru._({id:"wTR0O5"}),icon:(0,s.jsx)(x.g,{icon:h.p7g}),key:"add-card-with-ai",onClick:()=>{E.onClose(),setTimeout(()=>{C("aiCardAfter")},100)}},{label:f.Ru._({id:"TL4TtA"}),icon:(0,s.jsx)(x.g,{icon:h.swh}),key:"add-card-from-template",items:[{key:"add-card-from-template-inner-menu",element:e=>(0,s.jsx)(c.az,{maxH:"50vh",overflowY:"scroll",w:"400px",p:0,borderRadius:"md","data-testid":"add-card-from-template-inner-menu",children:(0,s.jsx)(hJ.R,{editor:l,appendCard:t=>{null==e||e(),setTimeout(()=>{C(t)},100)}})})}]}],[C,E,l]),S=(0,y.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),E.isOpen?E.onClose():(e.nativeEvent.stopImmediatePropagation(),w(e))},[E,w]);return(0,s.jsxs)(o.s,{flexDirection:"column",children:[(0,s.jsxs)(o.s,{p:"8px",pb:"2px",children:[(0,s.jsxs)(e8.z,{spacing:0,bg:g,p:.5,borderRadius:"3xl",children:[(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"Rv+zkJ"}),children:(0,s.jsx)(d.$,{size:"xs",variant:a?"ghost":"plain",color:a?p:u,onClick:b("film"),"data-testid":"filmstrip-view-button",children:(0,s.jsx)(e8.z,{children:(0,s.jsx)(x.g,{icon:h.OxR})})})}),(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"5NZpX8"}),children:(0,s.jsx)(d.$,{size:"xs",variant:a?"plain":"ghost",color:a?u:p,onClick:b("list"),"data-testid":"list-view-button",children:(0,s.jsx)(e8.z,{children:(0,s.jsx)(x.g,{icon:h.ITF})})})})]}),(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"C8DFL7"}),shortcut:"Mod+\\",children:(0,s.jsx)(J.K,{variant:"ghost","aria-label":f.Ru._({id:"C8DFL7"}),"data-testid":"close-filmstrip-button",colorScheme:j,isRound:!0,size:"xs",icon:(0,s.jsx)(x.g,{icon:h.Jyw}),outlineOffset:"0px",marginInlineStart:"auto",onClick:e=>{e.stopPropagation(),t()},onMouseDown:dM.Fw})})]}),(0,s.jsxs)(o.s,{px:2,my:2,justify:"center",children:[(0,s.jsxs)(e7.e,{spacing:0,isAttached:!0,variant:"plain",size:"sm",flex:1,children:[(0,s.jsx)(X.Tz,{label:(0,s.jsx)(m.x6,{id:"bgN454"}),children:(0,s.jsx)(d.$,{fontSize:"xs",px:2,flex:1,leftIcon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:h.QLR}),onClick:()=>C(),children:(0,s.jsx)(m.x6,{id:"isRobC"})})}),(0,s.jsx)(J.K,{"aria-label":f.Ru._({id:"xi7ic1"}),borderInlineStart:"none",onClick:S,width:"20px",icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:h.Jt$,size:"xs"})})]}),(0,s.jsx)(hK.t,{menuItems:k,isOpen:E.isOpen,position:E.position,onClose:E.onClose,size:"small"})]})]})};var xn=n(67397),xi=n(16737),xr=n(22762);let xs=e=>{let{children:t,icon:n,onClick:i,shouldHide:r=!1,isDisabled:o=!1,...l}=e;return r?null:(0,s.jsx)(ov.D,{icon:n,onClick:i,isDisabled:o,...l,children:t})},xo=(0,y.memo)(e=>{let{isDark:t}=e;return(0,s.jsxs)(c.az,{as:"span",className:"fa-layers fa-fw",children:[(0,s.jsx)(x.g,{fixedWidth:!0,icon:h.vti}),(0,s.jsx)(x.g,{icon:tA.GEE,transform:"shrink-4 right-6 down-4",color:"var(--menu-bg, white)"}),(0,s.jsx)(x.g,{icon:tA.GEE,transform:"shrink-7 right-6 down-4"}),(0,s.jsx)(x.g,{icon:tA.QLR,color:t?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)",transform:"shrink-10 right-6 down-4"})]})});xo.displayName="AddCardIcon";let xl=(e,t)=>{if(0===e.length||!t)return null;if(1===e.length){let n=(0,tj.W0)(t,e[0]);return n?(0,rF.getCardTitle)(n.node.toJSON())||"Untitled card":null}return"Multiple cards selected"},xa=(0,y.forwardRef)((e,t)=>{let{editor:n,isOpen:i,onClose:r,readOnly:o,clearPositioning:l,rootStyles:d,isDark:c}=e,u=(0,I.GV)(ep.Jo),p=(0,nk.d)(),g=(0,xn.rY)(n),j=(0,D.u)("copyCardsToDeck"),{handleCopy:v,handleDelete:b,handleCut:C,handleDuplicate:w,handleAddCard:E,handleExport:k,handleCopyCardsToDeck:S}=h9(n),T=(0,I.GV)(no.Mj),A=(0,I.GV)(no.R8),R=(0,I.GV)(aF.NG),_=1===T.length,O=(0,y.useMemo)(()=>_?(0,L.Io)({cardId:T[0],docId:null==u?void 0:u.id,isPresentMode:!1}):"",[null==u?void 0:u.id,_,T]),{onCopy:z}=(0,sM.i)(O),P=(0,y.useCallback)(()=>{z(),p({title:(0,s.jsx)(m.x6,{id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},[z,p]),N=(0,xr.K)(),M=(0,y.useMemo)(()=>xl(T,n),[n,T]),V=(0,y.useMemo)(()=>c?{"--menu-bg":"var(--chakra-colors-gray-900)","&:focus":{"--menu-bg":"var(--chakra-colors-gray-800)"}}:{},[c]),F=(0,nx.UT)("edit"),G=T.every(e=>null==R?void 0:R[e]),W=A.every(e=>null==R?void 0:R[e]),B=G&&W,U=(0,y.useCallback)(()=>{let e=!G;T.forEach(t=>{let i=(0,tj.W0)(n,t);i&&n.commands.updateAttributesAtPos(i.pos,{hidden:e})}),g()},[G,n,T]);return(0,s.jsx)(rp.W,{isOpen:i,onClose:r,children:(0,s.jsxs)(rf.c,{className:"filmstrip-card-menu",onContextMenu:e=>{e.preventDefault()},zIndex:"popover",ref:t,rootProps:{style:d},w:"260px",overflowY:"auto",onTransitionEnd:()=>{i||l()},children:[M&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.E,{ps:3,color:c?"gray.400":"gray.600",noOfLines:1,"data-testid":"filmstrip-card-menu-card-title",children:M}),(0,s.jsx)(rv.N,{})]}),(0,s.jsx)(xs,{"data-testid":"filmstrip-card-menu-item-cut",shouldHide:o,command:(0,X.lp)("Mod+X"),icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:h.XGd}),onClick:C,children:(0,s.jsx)(m.x6,{id:"cCd8Bs"})}),(0,s.jsx)(xs,{"data-testid":"filmstrip-card-menu-item-copy",shouldHide:o,command:(0,X.lp)("Mod+C"),icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:h.jPR}),onClick:v,children:(0,s.jsx)(m.x6,{id:"he3ygx"})}),(0,s.jsx)(xs,{"data-testid":"filmstrip-card-menu-item-duplicate",shouldHide:o,command:(0,X.lp)("Mod+D"),icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:h.$3n}),onClick:w,children:(0,s.jsx)(m.x6,{id:"euc6Ns"})}),j&&(0,s.jsx)(xs,{"data-testid":"filmstrip-card-menu-item-copy-to-deck",shouldHide:o,icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:h.Rvk,flip:"horizontal"}),onClick:S,children:(0,s.jsx)(m.x6,{id:"Ur0Ose",values:{0:T.length}})}),(0,s.jsx)(xs,{"data-testid":"filmstrip-card-menu-item-add-card",shouldHide:o,icon:(0,s.jsx)(xo,{isDark:c}),onClick:()=>{r(),setTimeout(()=>{E()},150)},sx:V,children:(0,s.jsx)(m.x6,{id:"90n2YU"})}),(0,s.jsx)(xs,{"data-testid":"filmstrip-card-menu-item-export-card",shouldHide:o,icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:h.mHA}),onClick:k,sx:V,children:1===T.length?f.Ru._({id:"xRJ+bN"}):f.Ru._({id:"eMDlJX",values:{0:T.length}})}),!o&&(0,s.jsx)(rv.N,{}),(0,s.jsx)(xs,{"data-testid":"filmstrip-card-menu-item-copy-link",shouldHide:!_,icon:(0,s.jsx)(xi.E,{isLocked:!N,isDark:c}),onClick:P,children:(0,s.jsx)(m.x6,{id:"F0YmUY"})}),(0,s.jsx)(xs,{"data-testid":"filmstrip-card-menu-item-hide-card",isDisabled:!(F&&(!W||B)),icon:(0,s.jsx)(x.g,{fixedWidth:!0,icon:G?h.pS3:h.k6j}),onClick:U,children:G?(0,s.jsx)(m.x6,{id:"lpNzZq",values:{0:T.length}}):(0,s.jsx)(m.x6,{id:"KflWc8",values:{0:T.length}})}),(0,s.jsx)(xs,{"data-testid":"filmstrip-card-menu-item-delete",color:c?"red.300":"red.500",icon:(0,s.jsx)(x.g,{icon:h.yLS,fixedWidth:!0}),onClick:b,shouldHide:o,children:(0,s.jsx)(m.x6,{id:"cnGeoo"})})]})})});xa.displayName="FilmstripCardMenuComponent";let xd=(0,y.memo)(xa);var xc=n(21325),xu=n(32429);let xh=(0,i2.P)(c.az),xx=e=>{let{isEditorFocused:t,isFilmstripSelected:n,shouldHide:i,cardId:r,isDraggingCard:l,isDragInProgress:d,index:c,hidden:u}=e,h=(0,I.GV)(ep.Uu),x=(0,xu.iI)(h.cardDimensions).aspectRatio;return(0,s.jsxs)(o.s,{boxShadow:n?"var(--fs-item-selected-box-shadow)":t?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",transitionProperty:"common",transitionDuration:"normal",borderRadius:"sm",overflow:"hidden",display:i?"none":void 0,css:x?{aspectRatio:"".concat(x," / 1"),overflow:"hidden"}:void 0,children:[(0,s.jsx)(xc.N,{shouldFixHeight:!i&&d,cardId:r,hidden:u}),(0,s.jsx)(i5.N,{children:!i&&!l&&(0,s.jsx)(xh,{position:"absolute",exit:{opacity:0},transition:{duration:.2},bottom:1,insetStart:1,px:1.5,borderRadius:"md",boxShadow:"base",borderWidth:"1px",borderColor:"var(--fs-item-card-number-border-color)",bg:"var(--fs-item-card-number-background-color)",color:"var(--fs-item-card-number-color)",fontWeight:600,fontSize:"xs",children:(0,s.jsx)(a.E,{children:c})},c)})]})},xp=e=>{let{cardId:t,index:n,isEditorFocused:i,isFilmstripSelected:r,editor:l,readOnly:d,hidden:u=!1}=e,{title:p}=(0,tL.d)({cardId:t,editor:l});return(0,s.jsxs)(o.s,{className:"filmstrip-nav-item-wrapper",w:"var(--editor-width)",justifyContent:"flex-start",fontSize:"xs",borderRadius:"sm",boxShadow:r?"var(--fs-text-item-selected-box-shadow)":i?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",color:r?"trueblue.500":void 0,transitionProperty:"common",transitionDuration:"normal",_hover:{".filmstrip-text-item-number":{display:d?void 0:"none"},".filmstrip-text-drag-handle":{display:d?void 0:"block"}},children:[(0,s.jsxs)(o.s,{alignItems:"center",bg:r?"trueblue.100":"var(--fs-text-item-card-number-bg-color)",transitionProperty:"common",transitionDuration:"normal",children:[(0,s.jsx)(c.az,{className:"filmstrip-text-item-number",w:6,fontSize:n>=1e3?"0.6rem":void 0,textAlign:"center",overflow:"hidden",whiteSpace:"nowrap",children:n}),(0,s.jsx)(c.az,{className:"filmstrip-text-drag-handle",display:"none",textAlign:"center",w:6,fontSize:"md",_hover:{cursor:d?"default":"grab"},children:(0,s.jsx)(x.g,{icon:h.IMq})})]}),(0,s.jsx)(o.s,{"data-testid":"filmstrip-text-item-title",p:2,ps:"4px",flex:1,bg:r?"trueblue.50":"var(--fs-text-item-bg-color)",alignItems:"center",overflow:"hidden",transitionProperty:"common",transitionDuration:"normal",inert:"true",opacity:u?"0.4":"1.0",children:(0,s.jsx)(a.E,{noOfLines:1,children:p||(0,s.jsx)(m.x6,{id:"wja8aL"})})})]})},xm=e=>{let{filmstripItemRef:t,cardId:n,isFilmstripSelected:i,currentFocusedCard:r,isAnimating:s}=e,{editor:o}=(0,tk.m)(),l=(0,et.O2)("filmstrip"),a=(0,I.GV)(no.x7);(0,y.useEffect)(()=>{t.current&&n===r&&((null==o?void 0:o.isFocused)&&!s?l.scrollElementIntoView({element:t.current,offsetFromTop:120}):i&&n===a&&requestAnimationFrame(()=>{if(!t.current||!l.scroller)return;let e=l.scroller.getBoundingClientRect(),n=t.current.getBoundingClientRect(),i=n.top,r=n.bottom,s=n.height,o=0,a=t.current.closest(".reorder-item");if(a instanceof HTMLElement&&(o=a.offsetTop),r>=e.bottom){let e=Math.max(0,o+s-l.scroller.clientHeight+4);l.scrollTo({top:e})}else i<=e.top&&l.scrollTo({top:o})}))},[n,r,o,a,i,l,t,s])},xf=(0,i2.P)(o.s),xg=e=>{let{card:t,index:n,isFirst:i,isEditorFocused:r,currentFocusedCard:o,isFilmstripSelected:l,readOnly:d,shouldHide:u,isDragInProgress:p,numberOfCardsDragging:m,onContextClick:f,editor:g,isAnimating:j,showTextOnly:v}=e,{cardId:b,isDragging:C}=t,w=(0,y.useRef)(null);xm({filmstripItemRef:w,cardId:b,isFilmstripSelected:l,currentFocusedCard:o,isAnimating:j});let E=(0,I.jL)(),{previewWidth:k}=nh(),S=(0,ee.fW)()?"50%":"-50%",T=(0,y.useCallback)(e=>{if(!b)return;let t=e.shiftKey,n=!t&&(e.metaKey||e.ctrlKey);if(t&&!d)E((0,no.cb)({id:b,currentFocusedCard:o}));else if(n&&!d)E((0,no.aw)({id:b}));else{if(p)return;E((0,no.o5)({id:b})),E((0,ep.mF)({attached:!1})),g&&(0,tF.OM)({cardId:b,editor:g})}},[b,d,E,o,p,g]),A=(0,I.GV)(aF.NG),R=null==A?void 0:A[t.cardId];return(0,s.jsxs)(c.az,{className:"filmstrip-item","data-guider-highlight":"filmstrip-item",ref:w,pos:"relative",pt:v?void 0:1,mt:v?1.5:i?void 0:1,onClick:T,onContextMenu:f,cursor:"pointer",userSelect:"none",transitionProperty:"common",transitionDuration:"normal",display:u?"none":void 0,"data-filmstrip-selected":l,"data-filmstrip-view":v?"list":"filmstrip",css:{"--editor-width":"".concat(k,"px")},children:[R&&(0,s.jsx)(c.az,{pos:"absolute",top:"50%",insetInlineStart:v?"calc(100% - 1rem)":"50%",transform:"translate(".concat(S,", -50%)"),zIndex:"1",children:(0,s.jsx)(x.g,{opacity:.8,icon:h.k6j})}),(0,s.jsxs)(c.az,{children:[v&&(0,s.jsx)(xp,{cardId:b,index:n,isFilmstripSelected:l,isEditorFocused:r,editor:g,hidden:R,readOnly:d}),(0,s.jsx)(xx,{shouldHide:u||v,cardId:b,index:n,isDraggingCard:C,isDragInProgress:p,isFilmstripSelected:l,isEditorFocused:r,hidden:R}),(0,s.jsx)(i5.N,{children:m&&(0,s.jsx)(c.az,{position:"absolute",bottom:0,insetInlineStart:0,transform:"translate(".concat(S,", 50%)"),children:(0,s.jsx)(xf,{initial:{scale:.5,opacity:0},exit:{scale:.5,opacity:0},animate:{scale:1,opacity:1},h:5,minW:5,px:1,borderRadius:"full",bg:"trueblue.300",color:"white",fontSize:"xs",fontWeight:600,boxShadow:"sm",justify:"center",align:"center",children:(0,s.jsx)(a.E,{children:m})},"badge-number")})})]})]})};var xj=n(41551),xv=n(69771),xb=n(65053),xy=n(58599),xC=n(70184);let xw=(0,y.forwardRef)(function(e,t){let{reduxData:n,...i}=e,r=(0,xC.F)(n);return(0,s.jsx)(C.Kq,{store:r,children:(0,s.jsx)(xE,{ref:t,...i})})}),xE=(0,y.forwardRef)(function(e,t){let{parent:n,theme:i,portalComponent:r,parentIsStreaming:o}=e,l=(0,y.useMemo)(()=>(0,t7.C)(),[]),a=(0,I.jL)();(0,y.useEffect)(()=>{a((0,ep.Yl)({theme:i||null})),a((0,ep.kd)({isAllowedToEdit:!1})),a((0,ep.$j)({animationsEnabled:!1}))},[i,a]);let d=(0,xy.hG)({extensions:l,content:n.getJSON(),editable:!1});return t&&("function"==typeof t?t(d):t.current=d),d.isThumbnail=!0,(0,y.useEffect)(()=>{var e,t,i;let r=n.getJSON();if(!r||!d)return;let s=null===(t=n.state.selection)||void 0===t?void 0:null===(e=t.ranges)||void 0===e?void 0:e[0];d.commands.setContent(r),s&&d.commands.setTextSelection({from:s.$from.pos,to:s.$to.pos}),d.commands.command(()=>((0,oT.jL)(d.state.doc,a),!0)),null===(i=xv.U.getState(d.state))||void 0===i||i.compute(d.state.doc).processChanges(a)},[n,d,a]),(0,h6.J)({sourceEditor:n,targetEditor:d,isStreaming:o}),(0,s.jsx)(c.az,{className:"editor-preview-root","data-variation-preview":!0,"data-testid":"editor-preview-root",width:"100px",position:"relative",sx:xb.q,children:(0,s.jsx)(xy.$Z,{editor:d,portalComponent:r,style:{width:"100%",height:"100%"},className:"highlight-mask"})})}),xk=(0,y.memo)((0,y.forwardRef)((e,t)=>{let[n,i]=(0,y.useState)(!1),r=(0,I.GV)(ep.Jo);return((0,y.useEffect)(()=>{requestAnimationFrame(()=>{i(!0)})},[]),n)?(0,s.jsx)(xw,{...e,portalComponent:xj.m,ref:t,reduxData:{doc:r}}):null}));xk.displayName="TransactionalFilmstripPreviewEditor";let xS=(0,y.memo)(e=>{let{onClose:t,isDark:n,isResizing:i,setIsResizing:r,side:l}=e,{previewWidth:a}=nh(),d=(0,y.useRef)(null),u=(0,y.useRef)(a),h=(0,y.useRef)(null),x=(0,I.jL)(),p=(0,y.useCallback)(e=>{if(e.preventDefault(),!d.current||!u.current||!h.current)return;let{width:n,x:i}=d.current,r=(e.clientX-i)*("left"===l?1:-1);if(n+r<=30){t();return}let s=u7()(n+r,90,200);s!==u.current&&(u.current=s,h.current.innerHTML="\n          .filmstrip-nav-item-wrapper {\n            --editor-width: ".concat(s,"px;\n          }"))},[t,l]),m=(0,eo.wb)(p,30),f=(0,y.useCallback)(e=>{e.preventDefault(),d.current={x:e.clientX,width:u.current},r(!0);let t=()=>{d.current=null,h.current&&(h.current.innerHTML=""),x((0,no.TN)({width:u.current})),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",t),requestAnimationFrame(()=>{r(!1)})};document.addEventListener("mousemove",m),document.addEventListener("mouseup",t)},[x,r,m]);return(0,s.jsxs)(o.s,{className:"filmstrip-resizer",css:{"--resizer-width":"24px","--resizer-offset":"4px","--drag-handle-width":"4px"},pos:"absolute",top:0,bottom:0,insetInlineEnd:"calc(var(--resizer-width) * -1 + var(--resizer-offset))",opacity:0,w:"var(--resizer-width)",bg:n?"whiteAlpha.200":"blackAlpha.200",h:"100%",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease",justify:"center",alignItems:"center",borderTopEndRadius:"md",borderBottomEndRadius:"md",boxShadow:"md",_hover:{cursor:"ew-resize"},onMouseDown:f,zIndex:hg,children:[(0,s.jsx)("style",{ref:h}),(0,s.jsx)(c.az,{position:"relative",insetInlineStart:"calc(var(--resizer-offset) - (var(--drag-handle-width) / 2))",bg:"white",borderRadius:"full",w:"var(--drag-handle-width)",h:"40px",opacity:i?1:.6,transitionProperty:"common",transitionDuration:"normal"})]})});xS.displayName="FilmstripResizer";let xI=e=>({"--fs-item-border-color":e?"var(--chakra-colors-whiteAlpha-300)":"var(--chakra-colors-gray-200)","--fs-text-item-selected-border-color":"var(--chakra-colors-trueblue-100)","--fs-item-box-shadow":"0 0 0 1px var(--fs-item-border-color)","--fs-item-focused-box-shadow":"0 0 0 2px var(--chakra-ring-color)","--fs-item-selected-box-shadow":"0 0 0 2px var(--chakra-colors-trueblue-300)","--fs-text-item-selected-box-shadow":"0 0 0 1px var(--fs-text-item-selected-border-color)","--fs-item-card-number-border-color":e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-200)","--fs-item-selected-text-color":e?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-trueblue-500)","--fs-item-card-number-color":e?"var(--chakra-colors-gray-100)":"var(--chakra-colors-gray-800)","--fs-item-card-number-background-color":e?"var(--chakra-colors-gradient-dark)":"var(--chakra-colors-gradient-light)","--fs-text-item-bg-color":e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)","--fs-text-item-card-number-bg-color":e?"var(--chakra-colors-gray-700)":"var(--chakra-colors-gray-200)"}),xT=(e,t)=>{if(!e||!t)return{id:null,pos:null};let{$from:n,from:i,to:r}=e,s=null,o=null;return n.doc.nodesBetween(i,r,(e,t)=>{let i=n.doc.resolve(t).depth;return!(!s&&(0,tj.jg)(e))||1!==i||(s=e.attrs.id,o=t,!1)}),{id:s,pos:o}},xA=()=>{var e;return!!(null===(e=document.activeElement)||void 0===e?void 0:e.closest(hy))},xR=()=>{let e=(0,ee.fW)(),t=(0,y.useRef)(null),[n,i]=(0,y.useState)(!1),[r,s]=(0,y.useState)([0,0]),[o,l]=(0,y.useState)("bottom"),a=(0,I.jL)(),d=(0,y.useCallback)(()=>{i(!1)},[]),c=(0,y.useCallback)(()=>{s([0,0]),l("bottom")},[]),u=(0,y.useCallback)(e=>{i(!0),s(e)},[]),h=(0,y.useCallback)(e=>n=>{var i;n.preventDefault(),a((0,no.dW)({id:e})),u([n.clientX,n.clientY]);let r=null===(i=t.current)||void 0===i?void 0:i.offsetHeight;if(null==r)return;let s=window.innerHeight<n.clientY+r,o=n.clientY<r;s&&!o?l("top"):s&&o?l("center"):l("bottom")},[a,t,u]),x=(0,y.useMemo)(()=>{var n;let i=r[1],s=null===(n=t.current)||void 0===n?void 0:n.offsetHeight,l=s?window.innerHeight-(i+s+8):void 0,a="center"===o&&l?"translateY(".concat(l,"px)"):"top"===o?"translateY(-100%)":void 0;return{insetInlineStart:e?window.innerWidth-r[0]:r[0],top:r[1],transform:a,transformOrigin:"top"}},[o,r,e]);return{menuRef:t,isFilmstripCardMenuOpen:n,onFilmstripCardMenuClose:d,handleContextMenu:h,menuRootStyles:x,clearPositioning:c}},x_=tr()(tF.OM,200),xO=e=>{let{isFocused:t,readOnly:n,firstFocusedCardId:i,editor:r,isDragging:s}=e,{handleCopy:o,handleDelete:l,handleCut:a,handleDuplicate:d}=h9(r),c=(0,I.jL)(),u=(0,I.CU)();(0,y.useEffect)(()=>hp.WC.on("keydown","FILMSTRIP",e=>{if(!t)return!1;switch(e.key){case"Escape":if(s)return c((0,hH.O)()),!0;return!1;case"Backspace":case"Delete":if(!n)return l(),!0;return!1;case"a":case"A":if(!n&&(e.ctrlKey||e.metaKey))return e.preventDefault(),c((0,no.Ub)({currentFocusedCard:i})),!0;return!1;case"c":case"C":if(!n&&(e.ctrlKey||e.metaKey))return o(),!0;return!1;case"d":case"D":if(!n&&(e.ctrlKey||e.metaKey))return e.preventDefault(),d(),!0;return!1;case"x":case"X":if(!n&&(e.ctrlKey||e.metaKey))return a(),!0;return!1;case"ArrowDown":{c((0,no.G2)({direction:"down",withShift:!n&&e.shiftKey,currentFocusedCard:i}));let t=(0,no.Mj)(u.getState())[0];return!e.shiftKey&&r&&t&&(x_({cardId:t,editor:r}),c((0,ep.mF)({attached:!1}))),!0}case"ArrowUp":{c((0,no.G2)({direction:"up",withShift:!n&&e.shiftKey,currentFocusedCard:i}));let t=(0,no.Mj)(u.getState())[0];return!e.shiftKey&&r&&t&&(x_({cardId:t,editor:r}),c((0,ep.mF)({attached:!1}))),!0}default:return!1}}),[c,i,t,s,l,o,d,a,n,r,u])};var xD=n(65208),xz=n(19534);let xP=e=>{let t=(0,I.CU)(),n=(0,nk.d)(),i=(0,I.jL)();(0,y.useEffect)(()=>{let r=r=>{let o=t.getState();if(!e||!xA()||!(0,ep.nD)(o))return;let l=(0,xD.B)(r,e);if(!l)return;let a=(l.content.content||[]).filter(e=>(0,xz.jg)(e)).map(e=>hQ()(e.toJSON()));if(a.length){let t=(0,tj.W0)(e,(0,no.Nx)(o)),l=t?t.pos+t.node.nodeSize:e.state.doc.content.size-1,d=(0,no.zT)((0,I.KA)().getState());e.chain().insertContentAt(l,a,{updateSelection:!1}).command(e=>{let{tr:t}=e;t.setMeta("annotationEvent",{type:"filmstrip-paste",insertPos:l});let n=(0,h8.s)(t.doc.resolve(l));return n&&(t=t.setSelection(n)),!0}).scrollIntoView().run(),r.preventDefault(),h7(e,d),i((0,no.B6)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:a.length})),n({title:(0,s.jsx)(m.x6,{id:"3viq5b",values:{0:a.length,1:a.length}}),status:"success",duration:3e3,position:"top"})}};return document.addEventListener("paste",r),()=>{document.removeEventListener("paste",r)}},[i,e,t,n])};class xL{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,t){this.componentControls.forEach(n=>{n.start(e.nativeEvent||e,t)})}}let xN=()=>new xL,xM=()=>{let e=(0,hS.M)(xN),t=(0,y.useRef)(null),n=(0,y.useRef)(),i=(0,y.useRef)(),r=(0,y.useRef)(),s=(0,y.useCallback)(e=>{if(!r.current)return;let t=xF(r.current),s=e.target;if(!t||!s||void 0===n.current||void 0===i.current)return;let o=s.scrollTop-n.current.top;t.y=i.current-o},[]),o=(0,y.useCallback)((e,i)=>{var r,s;let o=t.current;if(!o)return;let l=o.getBoundingClientRect(),a=i.point.y,d=e.target;if(!(d instanceof Element))return;let c=d.closest("[draggable]"),u=null==c?void 0:c.parentElement;u&&(a<l.top+25&&(c!==u.firstElementChild||o.scrollTop>0)?o.scrollTop-=5:a>l.bottom-25&&o.scrollTop+l.height<(null!==(s=null===(r=n.current)||void 0===r?void 0:r.height)&&void 0!==s?s:o.scrollHeight)&&(o.scrollTop+=5))},[]),l=(0,y.useCallback)(()=>{let s=t.current,o=xV(e);if(!s||!o)return;r.current=o,n.current={top:s.scrollTop,height:s.scrollHeight};let l=xF(o);l&&(i.current=l.y)},[e]);return{scrollerRef:t,onScroll:s,dragControls:e,onDrag:o,onDragStart:l,onDragEnd:(0,y.useCallback)(()=>{n.current=void 0,i.current=void 0,r.current=void 0},[])}},xV=e=>{try{return Array.from(e.componentControls).find(e=>e.isDragging)}catch(e){console.error("[caught] findDraggingElementControls",e);return}},xF=e=>{try{return e.panSession.history[0]}catch(e){console.error("[caught] getDraggingElementStartPoint",e);return}},xG=(0,i2.P)(o.s),xW=(0,i2.P)(c.az),xB="data-".concat(nx.rc),xU=(e,t)=>({initial:{x:e*("left"===t?-1:1)+("left"===t?-16:16)},animate:{x:0,transition:hj},exit:{x:e*("left"===t?-1:1),transition:hv}}),xH=e=>{let{onClose:t,editor:n,readOnly:i,side:r}=e,[l,a]=(0,y.useState)(null),[d,u]=(0,y.useState)(!1),[h,x]=(0,em.M)(ef.E.filmstripViewPreference,"film"),p=(0,y.useRef)(null),m=(0,I.GV)((0,ex.pn)(null==n?void 0:n.gammaDocId)),{cards:f,isDragging:g,selection:j,isLoaded:v}=hq(null!=l?l:n),b=(0,nx.UT)("comment"),C=(0,nx.UT)("edit"),w=b&&!C,E=(0,I.GV)(aF.ow),k=(0,y.useMemo)(()=>f.filter(e=>{var t;return!((null==E?void 0:null===(t=E[e.cardId])||void 0===t?void 0:t.hidden)&&w)}),[f,w,E]),{id:S}=(0,y.useMemo)(()=>xT(j,n),[n,j]),T=(0,I.jL)(),A=(0,I.GV)(no.Mj),R=(0,I.GV)(hH.Kp),_=(0,I.GV)(hH.eH),O=(0,I.GV)(hH.$S),[D,z]=(0,y.useState)(!1),{menuRef:P,isFilmstripCardMenuOpen:L,onFilmstripCardMenuClose:N,clearPositioning:M,handleContextMenu:V,menuRootStyles:F}=xR(),G=(0,y.useCallback)(()=>{if(N(),d){var e;null===(e=p.current)||void 0===e||e.focus()}},[d,N]),{scrollerRef:W,onScroll:U,dragControls:H,onDrag:q,onDragStart:K,onDragEnd:J}=xM(),Y=(0,y.useCallback)(e=>()=>{if(z(!0),K(),W.current){let e=W.current.getBoundingClientRect().height;W.current.style.height="".concat(e,"px")}let t=A.includes(e)?A:[e];T((0,no.IE)({selectedCardIdsToDrag:t})),T((0,hH.Em)({cardIds:k.map(e=>e.cardId),leaderCardId:e,selectedCardIds:t}))},[k,T,A,K,W]),X=(0,y.useCallback)(()=>{n&&setTimeout(()=>{n.commands.rearrangeCardsById(k.map(e=>e.cardId),_,{viewPreference:h}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{T((0,hH.O)()),J()})})},100)},[n,k,_,h,T,J]),$=(0,y.useCallback)(()=>{W.current&&(W.current.style.height=""),z(!1)},[W]);xP(n),xO({isFocused:d,readOnly:i,firstFocusedCardId:S,editor:n,isDragging:g}),(0,dD.j)({ref:p,handler(e){var t,n,i,r;P.current&&P.current.contains(e.target)||(null===(n=e.target)||void 0===n?void 0:null===(t=n.closest)||void 0===t?void 0:t.call(n,"[data-menu-item-key]"))||(null===(r=e.target)||void 0===r?void 0:null===(i=r.closest)||void 0===i?void 0:i.call(r,'[data-testid="add-card-from-template-inner-menu"]'))||(L&&N(),T((0,no.gE)()))}});let Z=(0,I.GV)(ep.SJ),Q=(0,B.dU)("whiteAlpha.600","whiteAlpha.100"),ee=(0,B.dU)("#F9FAFBDD","gray.900"),en=(0,B.dU)("gray.800","gray.200"),ei=(0,B.dU)("blackAlpha.400","whiteAlpha.500"),{colorMode:er}=(0,B.G6)(),es="dark"===er,eo=(0,y.useMemo)(()=>xI(es),[es]),[el,ea]=(0,y.useState)(!1),{width:ed}=nh(),ec=xU(ed,r),eu=(0,y.useMemo)(()=>{let e=_.length;return g&&e>1?e:null},[g,_.length]),[eh,eg]=(0,y.useState)(!1),ej=(0,et.O2)("filmstrip");(0,y.useEffect)(()=>{ej.setScrollSelector(hw)},[ej]);let ev=(0,nc.Tq)(),eb=(0,ns.U)(),ey=!!ev.src&&!eb;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.s,{pointerEvents:"none",position:"absolute","data-guider-highlight":"filmstrip",direction:"column",top:14,bottom:ey?"".concat(ev.height+2*ev.paddingY,"px"):2,justifyContent:"center",color:en,insetInlineStart:2,children:[n&&(0,s.jsx)(xk,{parent:n,theme:Z,parentIsStreaming:m,ref:a}),(0,s.jsxs)(c.az,{pos:"relative",pointerEvents:"auto",_hover:{".filmstrip-resizer":{opacity:eh?0:1}},maxHeight:"100%",children:[(0,s.jsxs)(xG,{ref:p,"data-guider-highlight":"filmstrip",className:hb,[xB]:!0,pos:"relative",direction:"column",zIndex:hf,...ec,onAnimationStart:()=>{eg(!0)},onAnimationComplete:()=>{eg(!1)},tabIndex:0,_focus:{outline:"none"},onFocus:()=>{u(!0),null==n||n.commands.blur()},onBlur:e=>{var t,n;p.current&&(null===(t=p.current)||void 0===t?void 0:t.contains(e.relatedTarget))||(null===(n=P.current)||void 0===n?void 0:n.contains(e.relatedTarget))||u(!1)},borderRadius:"md",bg:ee,borderWidth:"1px",borderColor:Q,shadow:"lg",backdropFilter:"blur(20px)",maxHeight:"100%",alignSelf:"flex-start",children:[(0,s.jsx)(xt,{isDark:es,onClose:t,viewPreference:h,setViewPreference:x,editor:n}),(0,s.jsx)(xW,{className:hC,"data-guider-highlight":"filmstrip-scroller",layoutScroll:!0,overflowY:"auto",position:"relative",sx:{"&::-webkit-scrollbar":{opacity:1,width:"5px"},"&::-webkit-scrollbar-track":{opacity:0,width:"5px"},"&::-webkit-scrollbar-thumb":{background:ei,borderRadius:"full"},...eo},ref:W,onScroll:U,p:"8px",pt:0,children:(0,s.jsx)(hB.Group,{onReorder:e=>{let t=e.map(e=>e.cardId);T((0,hH.je)({reorderedCardIds:t}))},values:k,axis:"y",children:l&&n&&v&&k.map((e,t)=>{let{cardId:r,displayBehavior:o}=e,a=A.includes(r),d=O===r;return(0,s.jsx)(hB.Item,{drag:!i&&"y",value:e,onDragStart:Y(r),onDragEnd:X,onDragTransitionEnd:$,className:"reorder-item",dragControls:H,transition:{duration:0,ease:"linear"},onDrag:q,dragTransition:{bounceStiffness:2e3,bounceDamping:1e4},style:{position:"relative",listStyle:"none"},children:(0,s.jsx)(xg,{readOnly:i,editor:l,card:e,index:g&&void 0!==R[r]?R[r]:t+1,isFirst:0===t,shouldHide:"hidden"===o,isDragInProgress:D,isEditorFocused:S===r&&n.isFocused,isFilmstripSelected:!!a,currentFocusedCard:S,numberOfCardsDragging:d?eu:null,onContextClick:V(r),isAnimating:eh,showTextOnly:"list"===h})},r)})})})]}),(0,s.jsx)(xS,{onClose:t,isDark:es,isResizing:el,setIsResizing:ea,side:r})]})]}),n&&(0,s.jsx)(xd,{ref:P,editor:n,readOnly:i,isOpen:L,onClose:G,clearPositioning:M,rootStyles:F,isDark:es})]})},xq=()=>{let e=(0,I.jL)(),t=(0,I.GV)(no.lh),n=(0,eZ.h5)({base:!1,lg:!0})||!1,[i,r]=(0,y.useState)(!1),[s,o]=(0,y.useState)(!1),l=(0,y.useCallback)(()=>{e((0,no.$B)({isOpen:!1})),e((0,no.gE)()),o(!0)},[e]),a=(0,y.useCallback)(()=>{n||r(!0),e((0,no.$B)({isOpen:!0}))},[n,e]),d=!n&&i;return(0,y.useEffect)(()=>{let t=!n&&!i,r=n&&!s;t?e((0,no.$B)({isOpen:!1})):r&&e((0,no.$B)({isOpen:!0}))},[e,n,i,s]),{onClose:l,onOpen:a,isOpen:t&&(n||!n&&d)}},xK=(0,i2.P)(d.$),xJ=(0,y.memo)(()=>{let e=(0,ee.fW)(),{editor:t}=(0,t5.mi)(),{isOpen:n,onClose:i,onOpen:r}=xq(),{isGammaAdminUser:l}=(0,c2.u)(),a=(0,nx.UT)("edit"),d=(0,I.GV)(ep.nD),c=(0,ei.rd)(),[u,p]=(0,y.useState)(!1),f=(0,y.useCallback)(()=>{p(!0),setTimeout(()=>{r()}),setTimeout(()=>{p(!1)},750)},[r]);return(0,y.useEffect)(()=>_.R.on("openFilmStrip",()=>{r()}),[r]),(0,y.useEffect)(()=>hp.WC.on("keydown","FILMSTRIP",e=>!!(0,su.Ay)("Mod+\\")(e)&&(n?i():f(),!0)),[n,i,f]),(0,s.jsx)(hm.h,{children:(0,s.jsx)(X.L8,{isDark:c,children:(0,s.jsx)(i5.N,{children:n?(0,s.jsx)(xH,{onClose:i,editor:t,readOnly:!l&&(!a||!d),side:e?"right":"left"},"filmstrip"):(0,s.jsx)(X.Tz,{placement:"top-end",label:(0,s.jsx)(m.x6,{id:"7ShgZt"}),isDisabled:u,shortcut:"Mod+\\",children:(0,s.jsxs)(xK,{initial:{opacity:0},animate:{opacity:1,transition:hv},exit:{opacity:0,transition:hj},zIndex:hf,css:{"--trigger-height":"var(--chakra-sizes-14)"},tabIndex:-1,position:"fixed",insetInlineStart:2,top:"calc(50% - (var(--trigger-height) / 2) + var(--chakra-sizes-5))",borderRadius:"xl","data-guider-highlight":"filmstrip",h:"var(--trigger-height)",w:8,onClick:f,children:[(0,s.jsx)(hx.s6,{children:(0,s.jsx)(m.x6,{id:"7ShgZt"})}),u?(0,s.jsx)(o.s,{children:(0,s.jsx)(t3.y,{size:"sm"})}):(0,s.jsx)(x.g,{icon:h.OxR})]},"filmstrip-opener")})})})})});xJ.displayName="Filmstrip";var xY=n(71792),xX=n(96502),x$=n(59835),xZ=n(89240),xQ=n(15750),x0=n(22791),x1=n(6027),x6=n(37407),x2=n(76146);let x5=e=>{let{editor:t}=e,{cardMarginSettings:n}=(0,I.GV)(ep.Uu),{hideFromFirst:i,hideFromLast:r,...o}=n,d=(0,x2.Nk)(n),{isCardMarginsModalOpen:c,onOpenCardMarginsModal:u,onCloseCardMarginsModal:h,positionToHighlight:x,setPositionToHighlight:p}=(0,x1.g)(),f=(0,y.useCallback)(e=>()=>{p(e),u()},[p,u]);return(0,s.jsxs)(l.B,{dir:"ltr",minH:40,justifyContent:"space-between",p:2,bg:"gray.100",borderRadius:"md",cursor:"pointer",role:"group",_hover:{bg:"gray.200",color:"gray.900"},transitionProperty:"all",transitionDuration:"normal",color:"gray.600",onClick:f(void 0),children:[(0,s.jsx)(e8.z,{justifyContent:"space-between",h:8,children:["topLeft","topCenter","topRight"].map(e=>(0,s.jsx)(x3,{position:e,element:o[e],handleClick:f(e),hideFromFirst:!!i},e))}),(0,s.jsx)(a.E,{textAlign:"center",color:"gray.600",_groupHover:{color:"gray.800"},children:d?(0,s.jsx)(m.x6,{id:"Rl2UTZ"}):(0,s.jsx)(m.x6,{id:"ePK91l"})}),(0,s.jsx)(e8.z,{justifyContent:"space-between",h:8,children:["bottomLeft","bottomCenter","bottomRight"].map(e=>(0,s.jsx)(x3,{position:e,element:o[e],handleClick:f(e),hideFromFirst:!!i},e))}),c&&(0,s.jsx)(x0.v,{editor:t,isOpen:c,onClose:h,highlightPosition:x})]})},x3=e=>{let{element:t,position:n,handleClick:i,hideFromFirst:r}=e,{logoSrc:o}=(0,xQ.G)(),{flex:l,text:d}=(0,x2.o)(n),u=!t||"text"===t.type&&!t.content,p=(0,ee.fW)();return(0,s.jsx)(e8.z,{justifyContent:l,w:"100%",children:(0,s.jsx)(c.az,{borderRadius:"sm",children:u?(0,s.jsx)(J.K,{"aria-label":f.Ru._({id:"dBX3xu"}),icon:(0,s.jsx)(x.g,{icon:h.QLR,fontSize:"md"}),variant:"ghost",size:"sm",bg:"transparent",color:"gray.500",_hover:{bg:"blackAlpha.100",color:"black"},_groupHover:{color:"gray.700"},onClick:e=>{e.stopPropagation(),i()}}):(0,s.jsxs)(c.az,{px:2,py:1,children:["text"===t.type&&(0,s.jsx)(a.E,{color:"gray.900",fontSize:"xs",noOfLines:1,textAlign:d,dir:p?"rtl":void 0,children:t.content}),"cardNumbers"===t.type&&(0,s.jsx)(a.E,{color:"gray.900",fontSize:"xs",dir:p?"rtl":void 0,children:r?(0,s.jsx)(m.x6,{id:"fUJacZ",components:{0:(0,s.jsx)(cM.B.span,{opacity:.5})}}):(0,s.jsx)(m.x6,{id:"AaU8Ju"})}),"themeLogo"===t.type&&(o?(0,s.jsx)(iA._,{h:4,src:o}):(0,s.jsx)(x6.V,{}))]})})})};var x4=n(86136),x8=n(74451),x7=n(89932);let x9=[{key:"sm",name:()=>f.Ru._({id:"4Revpc"}),buttonText:()=>f.Ru._({id:"ZQA8ce"}),description:()=>f.Ru._({id:"N0rIpR"})},{key:"md",name:()=>f.Ru._({id:"agPptk"}),buttonText:()=>f.Ru._({id:"Tmu3kA"}),description:()=>f.Ru._({id:"3JV7Yt"})},{key:"lg",name:()=>f.Ru._({id:"k7rCa/"}),buttonText:()=>f.Ru._({id:"SMwD6s"}),description:()=>f.Ru._({id:"edeEjW"})}],pe=e=>{let{fontSize:t,setFontSize:n}=e;return(0,s.jsx)(e7.e,{isAttached:!0,size:"sm",display:"flex",children:x9.map(e=>{let i=e.key===t?"trueblue.100":void 0;return(0,s.jsx)(X.Tz,{label:(0,s.jsx)(X.c8,{label:e.name(),description:e.description()}),placement:"top",children:(0,s.jsx)(d.$,{"aria-label":e.name(),px:"2.5",boxShadow:"none",variant:"plain",bg:i,onClick:()=>{n(e.key)},children:e.buttonText()})},e.key)})})};var pt=n(6303),pn=n(12664);let pi=e=>{let{hideExtraLines:t}=e;return(0,s.jsxs)(l.B,{w:"100%",py:2,px:2.5,children:[(0,s.jsx)(c.az,{w:20,h:1.5,bg:"gray.200"}),(0,s.jsxs)(e8.z,{flex:"1",alignItems:"flex-start",children:[(0,s.jsx)(rl.g,{ratio:4/3,color:"gray.600",w:12,bg:"gray.200",children:(0,s.jsx)(c.az,{fontSize:"lg",children:(0,s.jsx)(x.g,{icon:h.Cyq})})}),(0,s.jsxs)(l.B,{flex:"1",spacing:"1",children:[(0,s.jsx)(c.az,{h:1,bg:"gray.200"}),(0,s.jsx)(c.az,{h:1,bg:"gray.200"}),(0,s.jsx)(c.az,{h:1,bg:"gray.200"}),(0,s.jsx)(c.az,{w:t?"80%":"100%",h:1,bg:"gray.200"}),!t&&(0,s.jsx)(c.az,{w:"80%",h:1,bg:"gray.200"})]})]})]})},pr=e=>{let{cardDimensions:t,showBackdrop:n,isWide:i,label:r,scaleCardUp:d,alignment:u}=e,h={boxShadow:"".concat(n?"sm":""),w:"".concat(i?"85%":"65%"),mx:"auto",borderRadius:"sm",bg:"white",transform:"".concat(d?"scale(1.15)":"none")};return(0,s.jsxs)(l.B,{flex:"1",alignItems:"center",sx:{"*":{transition:"all 0.2s ease"}},spacing:1.5,maxW:"50%",mx:"auto",children:[(0,s.jsx)(o.s,{bg:n?"gray.200":"white",borderWidth:"1px",borderColor:"gray.200",width:"100%",minH:32,borderRadius:"sm",alignItems:"center",py:2,overflow:"hidden",children:t.aspectRatio?(0,s.jsx)(rl.g,{...h,ratio:t.aspectRatio,children:(0,s.jsx)(c.az,{display:"flex",alignItems:u,style:{alignItems:u},children:(0,s.jsx)(pi,{hideExtraLines:i})})}):(0,s.jsx)(l.B,{...h,children:(0,s.jsx)(pi,{hideExtraLines:i})})}),(0,s.jsx)(a.E,{fontSize:"xs",color:"gray.700",children:r})]})};var ps=n(30046);let po=e=>{let{onClick:t,isSelected:n,icon:i,label:r,description:o,tooltip:d}=e,u=(0,s.jsxs)(l.B,{cursor:"pointer",onClick:t,p:"1.5",px:"2",alignItems:"center",spacing:"0",bg:n?"trueblue.50":"gray.50",borderWidth:"1px",borderColor:n?"trueblue.500":"gray.200",color:n?"trueblue.500":"black",borderRadius:"md",minW:"100px",justifyContent:"center",children:[(0,s.jsx)(c.az,{pb:"0",fontSize:"md",children:(0,s.jsx)(x.g,{icon:i})}),(0,s.jsx)(a.E,{fontSize:"xs",w:"100%",textAlign:"center",noOfLines:1,children:r}),o&&(0,s.jsx)(a.E,{fontSize:"xs",color:"blackAlpha.600",children:o})]});return d?(0,s.jsx)(ps.m,{label:d,placement:"top",children:u}):(0,s.jsx)(s.Fragment,{children:u})},pl=e=>{let{styleTemplateKeys:t,selectedStyleTemplateKey:n,onSelectNewStyle:i,onSelectCustomStyle:r}=e;return(0,s.jsxs)(s.Fragment,{children:[t.map(e=>{let t=pn.S9[e];return(0,s.jsx)(po,{label:t.label(),icon:t.icon,isSelected:n===e,description:t.cardDimensionsDesc(),tooltip:t.recommendedFor(),onClick:()=>i(e)},e)}),(0,s.jsx)(po,{label:f.Ru._({id:"8Tg/JR"}),icon:h._$s,isSelected:"custom"===n,onClick:r})]})},pa=e=>{let{title:t,description:n,icon:i,customIcon:r,children:o,value:l,onChange:d,stackProps:c}=e;return(0,s.jsxs)(e8.z,{pb:5,...c,children:[i&&(0,s.jsx)(x.g,{icon:i,fixedWidth:!0}),r&&r,(0,s.jsx)(a.E,{ms:1,children:t}),n&&(0,s.jsx)(X.qT,{label:n}),(0,s.jsx)(tT.h,{}),o,d&&(0,s.jsx)(x$.d,{isChecked:l,onChange:e=>d(e.target.checked)})]})},pd=e=>{let{selectedStyleTemplateKey:t,newTemplateKey:n,savedVerticalAlign:i,savedDefaultContentWidth:r,savedFontSize:s,savedScaleContentToFit:o}=e,l="custom"===t?{}:pn.S9[t].docSettings(),a="custom"===n?{}:pn.S9[n].docSettings(),d="fluid"===l.cardDimensions;return{...a,verticalAlign:d?a.verticalAlign:i,defaultContentWidth:d&&"custom"!==t?r:a.defaultContentWidth,fontSize:null!=s?s:a.fontSize,scaleContentToFit:null!=o?o:a.scaleContentToFit}},pc=e=>{let{editor:t}=e,n=(0,y.useCallback)((e,n)=>{null==t||t.commands.updateNestedAttributesAtPos(0,{format:e,settings:n})},[t]),i=(0,y.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,{settings:e})},[t]),r=(0,D.u)("scaleToFit"),o=(0,I.GV)(ep.Uu),{animationsEnabled:u,defaultContentWidth:p,verticalAlign:g,presentBackdrop:j,fontSize:v,cardDimensions:b,defaultFullBleed:C,scaleContentToFit:w}=o,{format:E}=(0,I.GV)(ep.zu),k=(0,D.u)("cardMarginElements")&&"webpage"!==E,S=(0,oi.Bi)(),T=E||"deck",A=(0,oi.zY)(T),R=(0,oi.Wu)(o,T)||"custom",_="fluid"===b,O="custom"===R,z=(0,x4.R)(),P="full"!==C||j;return(0,s.jsxs)(l.B,{spacing:5,divider:(0,s.jsx)(n_.c,{}),children:[(0,s.jsxs)(c.az,{w:"100%",children:[(0,s.jsx)(n9.l,{children:(0,s.jsx)(m.x6,{id:"oIhFvf"})}),(0,s.jsxs)(l.B,{spacing:4,children:[(0,s.jsxs)(rp.W,{children:[(0,s.jsx)(rm.I,{textAlign:"start",as:d.$,variant:"plain",size:"md",boxShadow:"none",minW:"120px",rightIcon:(0,s.jsx)(x.g,{icon:h.tdl}),leftIcon:(0,s.jsx)(x.g,{icon:A.icon}),w:"100%",children:A.name()}),(0,s.jsx)(rf.c,{children:(0,s.jsx)(rg.i,{title:"Format",children:S.map(e=>(0,s.jsxs)(ov.D,{onClick:()=>{let i=e.styleTemplates[0],r=pn.S9[i].docSettings();n(e.formatType,r),r.scaleContentToFit||t.commands.resetCardSettings({fontScale:void 0})},children:[(0,s.jsx)(x.g,{icon:e.icon,fixedWidth:!0}),(0,s.jsx)(c.az,{flex:1,ms:2,children:(0,s.jsx)(a.E,{children:e.name()})}),e.formatType===T&&(0,s.jsx)(x.g,{icon:h.e68})]},e.formatType))})})]}),(0,s.jsx)(oU.B,{children:(0,s.jsx)(pl,{styleTemplateKeys:A.styleTemplates,onSelectNewStyle:function(e){let n=pd({selectedStyleTemplateKey:R,newTemplateKey:e,savedVerticalAlign:g,savedDefaultContentWidth:p,savedFontSize:v,savedScaleContentToFit:w});i(n),n.scaleContentToFit||t.commands.resetCardSettings({fontScale:void 0})},onSelectCustomStyle:function(){i({stylesDerivedFrom:"custom"})},selectedStyleTemplateKey:R})})]}),(0,s.jsxs)(c.az,{mt:5,children:[(0,s.jsx)(sL.S,{in:O,children:(0,s.jsx)(pa,{title:f.Ru._({id:"iKM2jY"}),description:f.Ru._({id:"Q3Qdcd"}),icon:h.V4x,children:(0,s.jsx)(xu.uK,{cardDimensions:b,updateCardDimensions:e=>{let n="fluid"===e;i({cardDimensions:e,...n?{scaleContentToFit:!1}:{}}),n&&t.commands.resetCardSettings({fontScale:void 0})}})})}),(0,s.jsx)(sL.S,{in:O,children:(0,s.jsx)(pa,{title:f.Ru._({id:"lsVq2Z"}),description:f.Ru._({id:"a1DIUk"}),icon:h.Cpz,value:"full"===C,onChange:e=>{i({defaultFullBleed:e?"full":void 0}),t.commands.resetCardSettings({cardSize:"default"})}})}),(0,s.jsx)(sL.S,{in:_||O,children:(0,s.jsx)(pa,{title:f.Ru._({id:"cPp+Ef"}),icon:h.So7,children:(0,s.jsx)(pt.z,{contentWidth:p,setWidth:e=>{i({defaultContentWidth:e})},allowedWidths:"social"===E?["sm","md","lg"]:["md","lg"]})})}),(0,s.jsx)(pa,{title:f.Ru._({id:"vUBA/H"}),description:f.Ru._({id:"n68eVZ"}),icon:h.ecg,children:(0,s.jsx)(x7.c,{alignment:g,setAlignment:e=>{i({verticalAlign:e})}})}),(0,s.jsx)(pa,{title:(0,s.jsx)(s.Fragment,{children:r&&w?(0,s.jsx)(m.x6,{id:"heqtbT"}):(0,s.jsx)(m.x6,{id:"q3il6U"})}),icon:h.ACh,children:(0,s.jsx)(pe,{fontSize:v,setFontSize:e=>{i({fontSize:e})}})}),r&&(0,s.jsx)(sL.S,{in:!_,children:(0,s.jsx)(pa,{title:(0,s.jsx)(m.x6,{id:"+BgJPb"}),description:f.Ru._({id:"8uFsVy"}),icon:h.hLQ,children:(0,s.jsx)(x$.d,{isChecked:w,onChange:e=>{i({scaleContentToFit:e.target.checked}),e.target.checked||t.commands.resetCardSettings({fontScale:void 0})}})})}),P&&(0,s.jsx)(pa,{title:f.Ru._({id:"7VfbQM"}),description:f.Ru._({id:"XZHPlI"}),icon:h.pt,children:(0,s.jsxs)(G.A,{placement:"top",trigger:"hover",openDelay:200,children:[(0,s.jsx)(eu.W,{children:(0,s.jsx)(x$.d,{isChecked:j,onChange:e=>i({presentBackdrop:e.target.checked})})}),(0,s.jsx)(U.h,{w:"260px",borderRadius:"md",boxShadow:"lg",children:(0,s.jsx)(H.e,{p:1,children:(0,s.jsxs)(e8.z,{alignItems:"flex-start",spacing:"2",children:[(0,s.jsx)(pr,{label:f.Ru._({id:"wl99H6"}),alignment:g,cardDimensions:xu.xs[b],isWide:"lg"===p,showBackdrop:"full"!==C,scaleCardUp:!1}),(0,s.jsx)(pr,{label:f.Ru._({id:"GWjDlt"}),alignment:g,cardDimensions:xu.xs[b],isWide:"lg"===p,showBackdrop:j&&"full"!==C,scaleCardUp:!j||"full"===C})]})})})]})}),(0,s.jsxs)(pa,{title:f.Ru._({id:"HgWdP3"}),description:f.Ru._({id:"fkIS5+",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}}),icon:h.xQp,stackProps:{pb:0},children:[(0,s.jsx)(x$.d,{isChecked:(0,x8.h)({animationsEnabled:u}),onChange:e=>i({animationsEnabled:e.target.checked})}),"value="]})]})]}),k&&(0,s.jsxs)(l.B,{spacing:4,pb:5,children:[(0,s.jsx)(pa,{title:(0,s.jsxs)(e8.z,{spacing:"3",children:[(0,s.jsx)(m.x6,{id:"JQFgkZ"}),(0,s.jsx)(am.Ch,{canUseFeature:z,productFeature:"card_margin_elements"})]}),description:(0,s.jsx)(m.x6,{id:"Lkq14t"}),customIcon:(0,s.jsx)(xZ.m,{}),stackProps:{pb:0}}),(0,s.jsx)(x5,{editor:t})]})]})};var pu=n(40351),ph=n(26813);let px=e=>{let{editor:t}=e,n=(0,I.GV)(ep.SJ),i=(0,I.GV)(ep.rv),r=(0,y.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,e)},[t]);return(0,s.jsx)(pu.A,{editor:t,background:i,updateNestedAttributes:r,defaultMessage:(0,s.jsxs)(nO.F,{children:[(0,s.jsx)(nD._,{}),(0,s.jsx)(m.x6,{id:"dyXYfJ"})]}),defaultToNoBackgroundSource:i.type===ph.h.NONE,isDark:(0,rG.Mw)(n)})},pp=e=>{let{closePanel:t}=e,[n,i]=(0,y.useState)(0),{editor:r}=(0,tk.m)(),l=(0,I.GV)(ep.sX),a=(0,ae.N)(r),d=(0,y.useCallback)((e,t)=>{null==r||r.commands.updateNestedAttributesAtPos(0,{settings:{[e]:t}})},[r]),u=(0,nr.A)({base:"calc(100% - 1rem)",lg:"auto"}),{setDoneFn:p,doActionIfVerified:f}=aM({onSuccess:t});return r?(0,s.jsx)(X.L8,{isDark:!1,children:(0,s.jsx)(t_.Z,{bgColor:"white",w:"100%","data-panelid":"page-setup",pt:4,"data-page-setup":!0,children:(0,s.jsxs)(o.s,{direction:"column","data-testid":"page-setup-drawer",onKeyDown:a,h:u,overflowX:"hidden",w:"100%",children:[(0,s.jsxs)(o.s,{position:"relative",pb:4,px:6,children:[(0,s.jsx)(o.s,{flex:1,children:(0,s.jsx)(tO.N,{children:(0,s.jsx)(m.x6,{id:"fvaOtb"})})}),(0,s.jsx)(tS.J,{onClick:f})]}),(0,s.jsx)(o.s,{overflowY:"auto",direction:"column",h:"100%",flex:1,pt:5,children:(0,s.jsxs)(av.t,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,index:n,onChange:i,px:6,children:[(0,s.jsxs)(aj.w,{children:[(0,s.jsxs)(ag.o,{children:[(0,s.jsx)(c.az,{marginInlineEnd:2,children:(0,s.jsx)(x.g,{icon:h.vGi})}),(0,s.jsx)(m.x6,{id:"Ccpbzh"})]}),(0,s.jsxs)(ag.o,{children:[(0,s.jsx)(c.az,{marginInlineEnd:2,children:(0,s.jsx)(x.g,{icon:h.pt})}),(0,s.jsx)(m.x6,{id:"GtJbUa"})]}),(0,s.jsxs)(ag.o,{children:[(0,s.jsx)(c.az,{marginInlineEnd:2,children:(0,s.jsx)(x.g,{icon:h.Bwz})}),(0,s.jsx)(m.x6,{id:"rdUucN"})]})]}),(0,s.jsxs)(xY.T,{children:[(0,s.jsx)(xX.K,{p:2,mt:4,children:(0,s.jsx)(pc,{editor:r},l)}),(0,s.jsx)(xX.K,{p:2,mt:4,children:(0,s.jsx)(px,{editor:r,updateDocSetting:d},l)}),(0,s.jsx)(xX.K,{p:2,mt:4,children:(0,s.jsx)(aK,{setVerifyURLPathChangesDone:p},l)})]})]})})]})})}):null};pp.panelPosition="right",pp.panelName="page-setup",pp.minWidth=400;let pm=()=>{let{togglePanel:e,isPanelOpen:t}=(0,eJ.ww)(pp);return(0,y.useEffect)(()=>{let t=()=>{e({override:"open"})},n=nU.R.on("openPageSetup",t),i=r4.LF.on(r4.DN.OPEN_PAGE_SETUP,t);return()=>{n(),i()}},[e]),{togglePageSetupPanel:e,isPageSetupPanelOpen:t}};var pf=n(474),pg=n(34095);let pj=(0,su.Ay)("mod+S"),pv=(0,su.Ay)("mod+shift+O"),pb=()=>{let e=(0,nk.d)();(0,y.useEffect)(()=>{let t=t=>{pj(t)&&(t.preventDefault(),e.isActive("save_toast")||e({id:"save_toast",title:(0,s.jsx)(m.x6,{id:"w0nuvK",values:{GAMMA_PROPER_NOUN:ev.On}}),status:"success",duration:5e3,isClosable:!0}))},n=(0,es.Ei)({requiredCookie:"cardCollapseDebug=true"});return window.addEventListener("keydown",t),()=>{null==n||n(),window.removeEventListener("keydown",t)}},[e])},py=()=>{let e=(0,I.CU)(),t=(0,I.jL)(),{editor:n}=(0,t5.mi)();(0,y.useEffect)(()=>{if(!n)return;let i=i=>{if(!pv(i))return;i.preventDefault();let r=e.getState(),{cardIdMap:s,cardIds:o,memoState:{expandedCards:l}}=r.TipTap,a=(0,ep.$i)(r),{total:d,expanded:c,cardIds:u}=o.reduce((e,t)=>{let n=!0===l[t],i=s.parents[t]||[],r=i.length>0,o=!a||i.includes(a);return r&&o&&(e.cardIds.push(t),e.total++,e.expanded+=n?1:0),e},{total:0,expanded:0,cardIds:[]});t((0,ep.VO)({disable:!0})),setTimeout(()=>{t((0,ep.VO)({disable:!1}))},100);let h=d===c;pC(n,100,!h),(0,oT.wE)(u,h)};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[t,e,n])},pC=(e,t,n)=>{let i;let r=(0,et.H1)("editor");for(let t=200;t>0;t-=25){var s;let n;let o=(0,rI.ls)(e,r.scrollSelector,t);(null===(s=o.pos)||void 0===s?void 0:s.pos)&&(e.state.doc.nodeAt(o.pos.pos)?n=o.pos.pos:e.state.doc.nodeAt(o.pos.inside)&&(n=o.pos.inside),n&&(!i||n>i)&&(i=n))}if(!i){console.warn("[pinPageDuringAnimation] No result for getTopCenterIshNode");return}let o=pw(e,i,n);if(!o){console.warn("[pinPageDuringAnimation] No element for getElementToPin");return}(0,es.BX)({element:o,requiredCookie:"cardCollapseDebug=true"});let l=+new Date,a=r.scroller.scrollTop,d=(0,es.sR)(o,r.scrollSelector),c=a-d,u=c<0?0:Math.max(c+200,0),h=()=>{if(!o)return;let e=(0,es.sR)(o,r.scrollSelector);r.scroller.scroll({top:a+(e-d-u)}),+new Date-l<t&&requestAnimationFrame(h)};h()},pw=(e,t,n)=>{let i=e.state.doc.resolve(t),r=e.state.doc.nodeAt(t),s=(0,rI.jB)(e,t);if(!r){console.warn("[getElementToPin] nodeAt null for $pos",i);return}let o=(0,rI.TK)(i,()=>!0).reverse();for(o.push({start:i.start(i.depth+1),pos:t,depth:i.depth,node:r});o.length;){let t=o.shift();if(!t)continue;let i=(0,tj.jg)(t.node),r=(0,pf.X6)(t.node),l=(0,pg.hj)(t.node),a=i||t.node.isAtom?t.pos:t.start;if(s=(0,rI.jB)(e,a),!n&&i&&t.depth>2||r||l)break}for(;(null==s?void 0:s.offsetParent)===null&&s.parentElement;)s=s.parentElement;return s};var pE=n(39448),pk=n(66766),pS=n(53536),pI=n(91526),pT=n(19033),pA=n(70288);class pR extends pE.Rv{constructor(e){super({transform:async(t,n)=>{if("data"!==t.event){n.enqueue(t);return}let{content:i}=t.data,r=i.attrs.id,s=i.content.find(e=>"cardAccentLayoutItem"===e.type);s&&!s.attrs.background&&(s.attrs.background=(0,cU.tq)(e,r),(0,cU.wJ)(i)),n.enqueue(t)}})}}var p_=n(10028),pO=n(79893),pD=n(52207);class pz extends pE.Rv{async loadImage(e){let{editor:t,loadImageId:n,loadImageParams:i,cardIndex:r,cardId:s,node:o,theme:l,interactionId:a}=e,d=await (0,p_.ap)({loadImageId:n,loadImageParams:i,context:{docId:t.gammaDocId,workspaceId:t.gammaOrgId,interactionId:a}});if(this.streamingCardIndex===r){this.loadedImageAttrs[n]=(0,pO.wH)(o,d),"cardAccentLayoutItem"===o.type.name&&"error"===d.loadImageStatus&&(this.loadedImageAttrs[n]={...o.attrs,background:(0,cU.tq)(l,s)});return}requestAnimationFrame(()=>{(0,cH.AU)({editor:t,loadImageId:n,newAttrs:d,node:o,theme:l,cardId:s})})}constructor({editor:e,theme:t,interactionId:n}){super({transform:async(i,r)=>{if("data"!==i.event){r.enqueue(i);return}let{index:s,id:o}=i.data;this.streamingCardIndex=s,(0,pD.L)(i.data.content,i=>{var r;if("text"===i.type)return;let l=rM.bP.fromJSON(e.schema,{type:i.type,attrs:i.attrs}),a=(0,pO.um)(l);if(!a||"queued"!==a.loadImageStatus||!a.loadImageId||!a.loadImageParams)return;let{loadImageId:d,loadImageParams:c}=a;this.imageAttrs[d]||(this.imageAttrs[d]=l.attrs),this.loadImagePromises[d]||(this.loadImagePromises[d]=this.loadImage({editor:e,loadImageId:d,loadImageParams:c,cardIndex:s,cardId:o,theme:t,node:l,interactionId:n})),i.attrs=null!==(r=this.loadedImageAttrs[d])&&void 0!==r?r:this.imageAttrs[d]}),i.data.cardComplete&&this.streamingCardIndex++,r.enqueue(i)}}),this.streamingCardIndex=0,this.imageAttrs={},this.loadedImageAttrs={},this.loadImagePromises={}}}var pP=n(54268);let pL=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(0===t.length)throw Error("Cannot have empty path");let r=[...t],s={...e},o=s,l=0;for(;t.length>0;){if(!o.content)throw Error("Can't surround a node with children");let e=r.shift();if(0===r.length){let t=o.content.slice(0,e);t.push(n),o.content=t;break}if(l<i){let t=o.content.slice(0);t.splice(e,1,{...t[e]}),o.content=t,o=o.content[e]}else{let t=o.content.slice(0,e+1);t.splice(e,1,{...t[e]}),o.content=t,o=o.content[e]}l++}return s};class pN extends pE.Rv{constructor(e){super({transform:async(t,n)=>{if("done"===t.event||"cancel"===t.event){n.enqueue(t);return}let i=(0,I.KA)(),r=null;for(let s of function* e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if("text"===t.type){let e=t.text.split(" ");for(let t=0;t<e.length;t++){let s={type:"text",text:e.slice(0,t+1).join(" ")};yield pL(i,r,s,n)}return}if(!t.content){yield pL(i,r,t,n);return}let s=0;for(let o of t.content){for(let t of e(o,n,i,[...r,s]))yield t;s++}}(t.data.content,1)){if(!s)continue;r&&n.enqueue(r),r={id:t.id,event:"data",data:{...t.data,content:s,cardComplete:!1}};let o=(0,ex.qy)(e)(i.getState());await pM(o)}r&&n.enqueue({...r,data:{...r.data,cardComplete:!0}})}}),this.index=0,this.startTime=performance.now()}}let pM=e=>new Promise(t=>pP.wg(t,e));var pV=n(86507),pF=n(29557),pG=n(88203),pW=n(41057);let pB="[CONTENT_FILTER]",pU=()=>(0,s.jsxs)(nO.F,{status:"error",variant:"solid",children:[(0,s.jsx)(nD._,{}),(0,s.jsx)(sj.T,{children:(0,s.jsxs)(l.B,{children:[(0,s.jsx)("strong",{children:(0,s.jsx)(m.x6,{id:"7g5s/N"})}),(0,s.jsx)(a.E,{children:(0,s.jsx)(m.x6,{id:"Xp43Ei"})})]})})]}),pH=()=>(0,s.jsxs)(nO.F,{variant:"light",children:[(0,s.jsx)(t3.y,{size:"sm",me:2}),(0,s.jsxs)(sj.T,{children:[(0,s.jsx)("strong",{children:(0,s.jsx)(m.x6,{id:"n2cF1o"})})," ",(0,s.jsx)(m.x6,{id:"BFGwQA"})]})]}),pq=e=>{let{editor:t,content:n,cardId:i,cardIndex:r,cardComplete:s}=e,o=(0,tm.xe)(t.state.doc,e=>(0,xz.jg)(e))[0],l=(0,tm.xe)(t.state.doc,e=>(0,xz.jg)(e)&&e.attrs.id===i)[0];if(!o)throw Error("Doc does not have a first card");let a=l?{from:l.pos,to:l.pos+l.node.nodeSize}:0===r?{from:o.pos,to:o.pos+o.node.nodeSize}:t.state.doc.nodeSize-3;l&&(null==l?void 0:l.node.attrs.fontScale)&&(null==n?void 0:n.attrs)&&(n.attrs.fontScale=l.node.attrs.fontScale);try{if(t.commands.insertContentAt(a,n,{updateSelection:0===r}),s&&0===r){let e=(0,h8.s)(t.state.doc.resolve(o.pos));e&&t.commands.command(t=>{let{tr:n}=t;return n.setSelection(e),!0})}}catch(e){console.warn("[useCreateFromStream] ERROR updating card"),console.warn(e)}},pK=e=>{let{docId:t,aiOptions:n,store:i,generateInfo:r,editor:s,lazyImages:o}=e;if(!r.lastEventId||!r.streamId||!r.interactionId){console.error("Trying to resume stream for doc (id=".concat(t,") without lastEventId or streamId or interactionId"),{lastEventId:r.lastEventId,streamId:r.streamId,interactionId:r.interactionId});return}pI.B.trackRequestSent(i,{interface:"wizard",streaming:!0,interactionId:r.interactionId,isResuming:!0});let{stream:l}=(0,pS.yf)({interactionId:r.interactionId,lastEventId:r.lastEventId,streamId:r.streamId,retries:3}),a={preserveLayouts:!!n.preserveLayouts,imageOptions:n.imageOptions||{},docFormatKey:(0,oi.IZ)((0,oi.lI)(s)).formatType,lazyImages:o,theme:(0,ep.SJ)(i.getState())};return(0,pk.f6)({stream:l,docId:t,interactionId:r.interactionId,lastCompletedCardId:r.lastCompletedCardId,lastCompletedCardIndex:r.lastCompletedCardIndex,options:a,store:i})},pJ=(e,t)=>{let n=(0,I.GV)(ep.SJ),i=(0,I.CU)(),r=(0,I.jL)(),s=(0,I.GV)(ep.aQ),o=(0,D.u)("streamResumingEnabled"),l=(0,D.u)("generatorLazyImages"),a=(0,y.useRef)(!1),d=(0,D.u)("generatorLazyImages"),{isStreaming:c,onStreamData:u,onStreamDone:h,onStreamError:x,onStreamStart:p,onAbortStream:m}=pY({docId:e}),f=(0,pF.R)({enabled:c,type:"editor"}),g=(0,y.useCallback)(async r=>{let s,o;if(!t)return;p({editor:t});let l=pX({streamResponse:r,editor:t,store:i,theme:n,docId:e}).getReader();try{for(;!(s=await l.read()).done;)if(s.value){if(a.current){console.log("[AIStream] has aborted -- no longer reading stream");break}o=s.value,"data"===o.event&&(u({value:o.data,editor:t,streamResponse:r}),f())}}catch(e){x({err:e,streamResponse:r,editor:t});return}a.current||(o&&"done"!==o.event&&console.error('[AIStream] incomplete stream: last message received is not `event="done"`',{lastMessage:o}),h({editor:t,streamResponse:r}))},[e,t,u,h,x,p,f,i,n]);(0,pW.V)(()=>{if(!t||!s||c||!e)return;let n=(0,ex.A0)(e)(i.getState()),r=(0,ex.kg)(i.getState());if(n){"running"===n.status&&g(n);return}if(!o||r)return;let{generateInfo:l,generateStatus:a,aiOptions:u}=(0,oi.lI)(t);if("streaming"!==a){if(new URLSearchParams(window.location.search).get("restream")){let n=pK({docId:e,aiOptions:u,generateInfo:{interactionId:l.interactionId,streamId:l.streamId,lastEventId:"0",lastCompletedCardId:null,lastCompletedCardIndex:null},editor:t,store:i,lazyImages:d});n&&g(n)}return}let h=(0,ep.Jo)(i.getState());if((null==h?void 0:h.createdTime)&&Date.now()-new Date(h.createdTime).getTime()>36e5){t.commands.updateAttributesAtPos(0,{generateStatus:"done"});return}let x=pK({docId:e,generateInfo:l,editor:t,store:i,aiOptions:u,lazyImages:d});x&&g(x)},[e,t,i,s,p,x,u,h,o,g,c,l,d],[t,s]),(0,y.useEffect)(()=>()=>{let n=(0,ex.A0)(e)(i.getState());t&&n&&"running"===n.status&&(a.current=!0,m({editor:t,streamResponse:n}))},[r,e,m,t,i])},pY=e=>{let{docId:t}=e,n=(0,nk.d)(),i=(0,I.jL)(),r=(0,I.CU)(),o=(0,D.u)("aiWizardUploadImages"),[l,a]=(0,y.useState)(!1),d=(0,D.u)("debugLogging"),c=(0,y.useRef)(null);(0,y.useEffect)(()=>()=>{c.current&&(n.close(c.current),c.current=null)},[n]);let u=(0,y.useCallback)(()=>{c.current||(c.current=n({id:"ai-generating-toast",isClosable:!1,render:()=>pH(),position:"top",duration:null}))},[n]),h=(0,y.useCallback)(e=>{let{editor:t}=e;t&&(a(!0),t.commands.setAIGenerationRunning(!0),u())},[u]),x=(0,y.useCallback)(e=>{let{editor:t,value:n,streamResponse:i}=e;if(!i||!t)return;let{id:r,cardComplete:s,index:l,content:a}=n;pq({editor:t,content:a,cardId:r,cardIndex:l,cardComplete:s}),s&&o&&(0,cH.Yp)({editor:t,cardId:r})},[o]),p=(0,y.useCallback)(e=>{var t,o,l;let{editor:u,streamResponse:h}=e;if(!u||!h)return;let x=h.id,{aiOptions:p}=(0,oi.lI)(u);a(!1),u.commands.setAIGenerationRunning(!1),u.commands.updateAttributesAtPos(0,{generateStatus:"done"});let f=(0,pA.TV)(),g=f.debugInfo();d&&console.log("[AIStream] ImageStore DEBUG",{imageStore:f,debug:g}),(0,pA.O3)(),i((0,ex.m7)({id:x,status:"complete"}));let j=(0,pG.b)(u),v=new TextEncoder().encode(JSON.stringify(u.state.doc.toJSON())),b=j?j/v.byteLength:void 0;pI.B.trackStreamComplete(r,x,{imageProvider:null===(t=p.imageOptions)||void 0===t?void 0:t.provider,numImageSearches:g.requests.length,imageSearches:g.requests,ydocToJsonRatio:b});let y=(0,ep.Jo)(r.getState());y&&(null===(o=y.docGenerateInput)||void 0===o?void 0:o.id)?(0,tq.w)((null===(l=p.imageOptions)||void 0===l?void 0:l.provider)==="aiGenerated"?"generateV2WithImages":"generateV2",y.organization,x):(0,tq.w)("wizardCreation",null==y?void 0:y.organization,x),c.current&&n.update(c.current,{title:(0,s.jsx)(m.x6,{id:"nm7VEQ",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}}),status:"success",position:"top",duration:3e3,isClosable:!0})},[i,d,r,n]);return{isStreaming:l,onStreamStart:h,onStreamData:x,onStreamError:(0,y.useCallback)(e=>{let{err:o,editor:l,streamResponse:u}=e,h=u.id,{errorMessage:x,errorCode:p}=(0,pT._D)(o);console.error("StreamError: ",{interactionId:h,errorMessage:x,errorCode:p,stack:o.stack}),d&&console.log("StreamError: (".concat(p,") - ").concat(x),o.stack),a(!1),l.commands.setAIGenerationRunning(!1),l.commands.updateAttributesAtPos(0,{generateStatus:"done"}),(0,pA.O3)(),i((0,ex.m7)({id:h,status:"error"}));let f=(0,ex.U7)(h)(r.getState());if(f){let{latency:e,...n}=f;(0,tU.tB)({...n,errorName:"StreamError",errorMessage:x,errorCode:p,outputMessage:"",latency:e||performance.now()-n.startTime,isResuming:u.isResuming,docId:t})}c.current&&(x===pB?n.update(c.current,{render:pU,position:"top",duration:null,isClosable:!0}):(n.update(c.current,{title:(0,s.jsx)(m.x6,{id:"sbsGk/"}),status:"error",position:"top",duration:null,isClosable:!0}),(0,pV.EJ)(o,{customErrorType:"useCreateFromStream"})))},[i,t,d,r,n]),onStreamDone:p,onAbortStream:(0,y.useCallback)(e=>{let{editor:t,streamResponse:n}=e,s=n.id;a(!1),t.commands.setAIGenerationRunning(!1),pI.B.trackStreamAbort(r,{interactionId:s,abortReason:"leave-editor"}),i((0,ex.l0)({id:s}))},[i,r])}},pX=e=>{let{streamResponse:t,editor:n,store:i,docId:r,theme:s}=e,{id:o,stream:l}=t,a=!0;return l.pipeThrough(new pR(s)).pipeThrough(new pN(t.id)).pipeThrough(new pz({editor:n,theme:s,interactionId:o})).pipeThrough(new pE.Rv({transform(e,t){if("done"===e.event&&"content_filter"===e.finishReason){t.error(Error(pB));return}t.enqueue(e)}})).pipeThrough((0,pk.po)(e=>{a&&"data"===e.event&&(pI.B.trackStreamStart(i,{interactionId:o,docId:r}),t.isResuming&&(n.commands.deleteCardsAfter(t.lastCompletedCardId||null),t.lastCompletedCardId&&(console.log("[AIStream] refetchLazyImages",t.lastCompletedCardId),(0,cH.Gc)({editor:n,lastCompletedCardId:t.lastCompletedCardId,theme:s}))),a=!1),"data"===e.event&&e.data.cardComplete&&n.commands.updateNestedAttributesAtPos(0,{generateInfo:{lastEventId:e.id,lastCompletedCardId:e.data.id,lastCompletedCardIndex:e.data.index}})}))},p$="doc_archived_warning",pZ=(e,t)=>{let n=(0,nk.d)(),[i]=(0,nC.u6W)(),[r]=(0,nC.BL9)(),o=null==e?void 0:e.site;(0,y.useEffect)(()=>()=>{n.close(p$)},[]),(0,y.useEffect)(()=>{if(o&&!o.archived){n.close(p$);return}!e||e.site||e.archived||n.close(p$)});let l=(0,y.useCallback)(async()=>{if((null==o?void 0:o.id)&&await r({variables:{id:o.id},optimisticResponse:{unarchiveSite:{id:o.id,__typename:"Site"}}}),!(null==e?void 0:e.id))return;let t={id:e.id};await i({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:!1,__typename:"Doc"}}}),n({title:(0,s.jsx)(m.x6,{id:"o8va6N"}),status:"success",position:"top",isClosable:!0,duration:5e3})},[null==e?void 0:e.id,n,null==o?void 0:o.id,i,r]);(0,y.useEffect)(()=>{e&&t===t2.i.COLLABORATIVE&&((null==o?void 0:o.archived)||(null==e?void 0:e.archived))&&!n.isActive(p$)&&n({id:p$,title:(0,s.jsxs)(a.E,{"data-testid":"trash-confirmation-toast",children:[(0,s.jsx)(m.x6,{id:"fkHPZu"})," ",(0,s.jsx)(n5.N,{textDecoration:"underline",onClick:l,children:(0,s.jsx)(m.x6,{id:"7wfwc0"})})]}),status:"warning",position:"top",isClosable:!1,duration:null})},[e,t,l,o,n,i])};var pQ=n(33131),p0=n(43006),p1=n(50923);let p6=e=>{let{launchIntercomUI:t}=e;return function(e){let{onClose:n}=e;return(0,s.jsxs)(o.s,{p:4,color:"white",bg:"yellow.500",borderRadius:"md",alignItems:"center",position:"relative",children:[(0,s.jsx)(tS.J,{size:"sm",onClick:n,position:"absolute",insetEnd:1,top:1}),(0,s.jsx)(x.g,{icon:cL.lEd,size:"2x"}),(0,s.jsxs)(o.s,{direction:"column",ml:3,children:[(0,s.jsx)(c.az,{children:(0,s.jsx)(a.E,{lineHeight:6,fontSize:"sm",children:(0,s.jsx)(m.x6,{id:"4YARE9",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP},components:{0:(0,s.jsx)("b",{})}})})}),(0,s.jsx)(a.E,{lineHeight:6,fontSize:"sm",pt:2,children:(0,s.jsx)(m.x6,{id:"Enj8Kw",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP},components:{0:(0,s.jsx)(d.$,{as:n5.N,variant:"link",textDecoration:"underline",fontSize:"sm",onClick:()=>{t()},colorScheme:"white"})}})})]})]})}},p2="no-snapshot-warning",p5=(e,t)=>{let n=(0,p0.k)(),i=(0,nk.d)(),r=(0,p1.st)(),s=null==e?void 0:e.id,o=t===t2.i.COLLABORATIVE&&(null==e?void 0:e.currentSnapshotId)===null;(0,y.useEffect)(()=>{!o||i.isActive(p2)||(i({id:p2,render:p6({launchIntercomUI:n}),duration:null,position:"top",isClosable:!0}),null==r||r.track(en.ng.NO_CURRENT_SNAPSHOT,{docId:s}))},[r,s,n,o,i])},p3=e=>{let{togglePagesPanel:t,isPagesPanelOpen:n}=e,i=(0,I.jL)(),r=(0,I.CU)(),{asPath:s}=(0,e9.useRouter)(),o=(0,I.GV)(te.og),l=(0,y.useRef)(n),a=(0,ta.jv)(s),d=(0,y.useRef)(t);d.current=t,(0,ok.w)(()=>{let e=(0,e1.iZ)("pages")(r.getState()),t=d.current;a&&e?(t({override:"closed",disableTransition:!1}),l.current=!0):a||t({override:l.current?"open":"closed",disableTransition:!1})},[a]),(0,y.useEffect)(()=>{let e=a?(0,P.Xb)()?"mobile":o||"desktop":null;i((0,te.ey)({previewSize:e}))},[i,a,o])};var p4=n(95372);let p8=e=>{let t=(0,p4.m)(),n=(0,I.GV)((0,aF.Jn)(e));(0,y.useEffect)(()=>{n&&t.cache.updateQuery({query:nL.iVk,variables:{id:e}},e=>{if(!(null==e?void 0:e.doc))return e;let t=e.doc;return t.titleEdited?e:{doc:{...t,title:n}}})},[n,t,e])},p7=e=>{let{onDuplicateClick:t,loading:n}=e;return(0,s.jsxs)(nO.F,{status:"error",children:[(0,s.jsx)(nD._,{}),(0,s.jsxs)(l.B,{spacing:"0.5",children:[(0,s.jsxs)(sg.X,{fontSize:"md",children:["This ",(0,s.jsx)(m.x6,{id:"fqi2wk",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})]}),(0,s.jsx)(sj.T,{children:(0,s.jsxs)(tI.T,{align:"start",children:[(0,s.jsx)(m.x6,{id:"8NNo+O",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP},components:{0:(0,s.jsx)("br",{})}}),(0,s.jsx)(d.$,{size:"sm",mt:2,alignSelf:"flex-end",onClick:t,isLoading:n,rightIcon:(0,s.jsx)(x.g,{icon:h.Ju_}),children:(0,s.jsx)(m.x6,{id:"euc6Ns"})})]})})]})]})},p9=e=>{let t=(0,nk.d)(),n=(0,I.jL)(),[i,r]=(0,y.useState)(!1),[o,l]=(0,y.useState)(!1),a=(0,y.useRef)(null),d=(0,oc.Z)(),c=(0,y.useCallback)(()=>{l(!0),d({docId:e,source:"editor_y_doc_too_large_duplicate",newWindow:!0}).finally(()=>{l(!1)})},[d,e]);(0,y.useEffect)(()=>r4.LF.on(r4.DN.Y_DOC_IS_TOO_LARGE,()=>{r(!0)}),[]),(0,y.useEffect)(()=>{if(!i)return;n((0,nm.wm)({docEditorType:t2.i.PUBLIC_STATIC}));let e=()=>(0,s.jsx)(p7,{onDuplicateClick:c,loading:o});a.current?t.update(a.current,{render:e}):a.current=t({render:e,position:"top",duration:null})},[i,t,n,c,o])};var me=n(33684);let mt=(e,t)=>{let{isUnauthorized:n}=(0,tk.m)();(0,en.JQ)(i=>{!0!==n&&void 0!==n&&(i.track(en.VV.DOC_VIEWED,{doc_id:e}),t===t2.i.EXAMPLE_STATIC&&i.track(en.VV.EXAMPLE_VIEWED,{doc_id:e}))},[e,t,n]),(0,me.t)();let i=(0,D.u)("realUserMetrics"),r=t===t2.i.COLLABORATIVE&&i,s=(0,D.u)("rumKeystrokeSampleRate");(0,oI.Br)(r,s)},mn=e=>{let t=(0,C.wA)(),n=(0,en.st)();(0,y.useEffect)(()=>{let i;let r=()=>{let r=(0,I.KA)().getState();i=(0,ep.vy)(r),(0,oT.nO)(e),t((0,ep.B6)({isEditingDisabled:!0})),null==n||n.trackDocEvent(en.VV.DOC_PRINTED)},s=()=>{t((0,ep.B6)({isEditingDisabled:!1})),t((0,ep.x0)({expandedCardsMap:i}))};return window.addEventListener("beforeprint",r),window.addEventListener("afterprint",s),()=>{window.removeEventListener("beforeprint",r),window.removeEventListener("afterprint",s)}},[t,e,n])},mi="doc-root",mr=(0,y.memo)(function(e){let{isConnected:t}=e;return(0,s.jsx)(o.s,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.B,{spacing:"4",children:[(0,s.jsx)(a.E,{fontSize:"2xl",children:(0,s.jsx)(m.x6,{id:"svObPT",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}})}),(0,s.jsx)(d.$,{as:b(),href:"/",variant:"plain",alignSelf:"center",size:"lg",leftIcon:(0,s.jsx)(x.g,{icon:h.v02}),children:(0,s.jsx)(m.x6,{id:"RWLG6K"})})]}),(0,s.jsx)(eD.x,{children:(0,s.jsx)(ez.P,{showShortcuts:!1})})]}):(0,s.jsx)(eK.r,{isConnected:!1,description:(0,s.jsx)(m.x6,{id:"BBDdvg",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}}),size:"lg",bg:"none"})})}),ms=e=>{let{doc:t,user:n,docEditorType:i,editor:r,editorWrapperDiv:o,aspectRatioValue:l}=e,[a,d]=(0,y.useState)(!1),c=(0,k.h6)(t,n),u=(0,C.d4)(ep.wC),h=i===t2.i.COLLABORATIVE&&!c,x=h&&u===tv.w.SLIDE_VIEW,p=i===t2.i.COLLABORATIVE&&(!n||u===tv.w.DOC_PREVIEW);return(0,y.useEffect)(()=>_.R.on("isInOnboardingChecklist",e=>{d(e)}),[]),p?(0,s.jsx)(om.d,{docWorkspace:null==t?void 0:t.organization}):x?(0,s.jsx)(eH,{forceShow:a}):h?(0,s.jsx)(rL,{editor:r,editorWrapperDiv:o,aspectRatioValue:l}):null},mo=(0,t5.VL)(e=>{var t;let{docEditorType:n}=e,i=(0,I.jL)(),{docId:r,isUnauthorized:l,passwordRequired:a,setCollaborativeEditorInstance:d,editor:h}=(0,t5.mi)(),x=(0,I.GV)(nm.Jo),m=(0,I.GV)(ep.Uu),g=(0,D.u)("scaleToFit"),v="fluid"!==m.cardDimensions?p.VM[m.cardDimensions]:void 0,b=(0,I.GV)(ts.Gd),C=(0,I.GV)(ts.df),{isConnected:S}=(0,E.u)(),T=(0,nE.mm)(null==x?void 0:x.id),[_,O]=(0,y.useState)(null),z=(0,I.GV)(te.og),P=null!==z,N=(0,I.GV)(ep.wC),M=(0,I.GV)(ep.nD),V=(0,er.Iy)("manage",x),{user:F}=(0,er.ur)();pZ(x,n),p5(x,n),pJ(r,_===r?h:void 0),p8(r),mt(r,n),tl(h,n===t2.i.COLLABORATIVE),(0,pQ.K)(),pb();let{editorAnimationsClass:G,editorAnimationsCSSVars:W}=(0,tc.O)({editor:h,scrollingParentSelector:".".concat(mi),disabledOverride:P});py(),dh(h,".".concat(mi)),db(h),t6(),mn(h),(0,k.tr)(x,n===t2.i.COLLABORATIVE);let B=(0,y.useRef)(null),U=(0,ei.rd)(),H=(0,y.useMemo)(()=>(0,tu.Vx)(U),[U]),q=nf();console.debug("%c[DocEditorComponent] RENDER - ".concat(r),"background-color: gold");let{toggleCommentsPanel:K,isCommentsPanelOpen:J}=sc(),{togglePagesPanel:Y,isPagesPanelOpen:X}=dl(),{isDesignPartnerPanelOpen:$}=sD();pm(),t0(),p9(r),(0,y.useEffect)(()=>()=>{i((0,e1.fi)()),i((0,ts.cL)())},[i]),p3({togglePagesPanel:Y,isPagesPanelOpen:X});let Z=(0,ta.dv)(b)&&(null==b?void 0:b.navEnabled)&&!P&&N!==tv.w.SLIDE_VIEW,Q=(0,y.useCallback)(()=>!!(h&&h.state.selection.empty),[h]),{leftPanelLifecycle:ee,rightPanelLifecycle:et,globalPanelLifecycle:en}=(0,eJ.uR)(),es=(0,eq.nk)(null==x?void 0:x.organization),eo=(0,eO.E)(null==x?void 0:x.title,es),el=f.Ru._({id:"X6YCwz"}),ea=f.Ru._({id:"abr3hR"}),ed=ng(),ec=(0,y.useMemo)(()=>{let e=Z?{"--doc-padding-top":th.D0}:void 0;return{...H,...ed,...e}},[H,ed,Z]),eu=(null==x?void 0:x.disabled)||(null==x?void 0:x.archived)||(null==b?void 0:b.archived)||P,eh=!(0,L.fS)(window.location.href),ex=P&&C?(0,s.jsx)(tt,{docId:r}):eh&&h?(0,s.jsx)(uV,{isDark:U,editor:h,scrollingParentSelector:".".concat(mi),editorWrapperEl:B.current,docEditorType:n,isPagesPanelOpen:X,togglePagesPanel:Y,isCommentsPanelOpen:J,toggleCommentsPanel:K}):null,em=(ex?49:0)+((null==x?void 0:x.disabled)?63:0),ef=M&&g,eg=null==F?void 0:null===(t=F.settings)||void 0===t?void 0:t.needsEditorOnboarding,{buddyHandleDeckClick:ej}=R(h);return(0,s.jsx)(nE.Z0.Provider,{value:T,children:(0,s.jsx)(w.UU,{children:(0,s.jsxs)(o.s,{direction:"column",h:"100%",children:[(0,s.jsx)(sP,{disabled:null==x?void 0:x.disabled,docId:r}),(0,s.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,s.jsx)(j(),{children:(0,s.jsx)("title",{children:eo})}),ef&&(0,s.jsx)(dT,{editor:h}),(0,s.jsx)(tn.X2,{isEnabledFn:Q}),ex,a?(0,s.jsx)(du,{docId:r}):l?(0,s.jsx)(mr,{isConnected:S}):(0,s.jsxs)(o.s,{id:"doc-main",direction:"row",w:"100%",h:"calc(100% - ".concat(em,"px)"),sx:{"--editor-padding-top":"".concat(em,"px")},"data-testid":"doc-editor-root",ref:B,children:[eg&&M&&(0,s.jsx)(eR,{editor:h}),(0,s.jsx)(e4,{panelLifecycle:ee,editor:h}),(0,s.jsx)(o.s,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:(0,s.jsxs)(c.az,{flex:"1",overflowY:"auto",overflowX:"hidden",pos:"relative",minWidth:"0",onClick:ej,h:"100%",className:(0,u.cx)(mi,G,$&&"design-partner-panel-open"),style:{"--ai-editing-label":"'".concat(el,"'"),"--ai-generating-label":"'".concat(ea,"'"),...W},sx:ec,children:[P&&(0,s.jsx)(nb,{loading:r!==_,docId:r,editor:h,previewSize:z},"".concat(r,"__preview-editor")),n===t2.i.PUBLIC_STATIC?(0,s.jsx)(dg,{docId:r,snapshotId:null==x?void 0:x.currentSnapshotId,scrollingParentSelector:".".concat(mi),onCreate:d}):n===t2.i.EXAMPLE_STATIC?(0,s.jsx)(oj,{docId:r,snapshotId:null==x?void 0:x.currentSnapshotId,scrollingParentSelector:".".concat(mi),onCreate:d}):(0,s.jsxs)(eQ.Y.Provider,{value:en,children:[(0,s.jsx)(td.H2,{doc:x,docId:r,readOnly:eu,hideForPreview:P,onCreate:e=>{d(e),i((0,A.mO)({editor:e})),O(e.gammaDocId),e.on("destroy",()=>{O(null),i((0,A.mO)({editor:null}))})},scrollingParentSelector:".".concat(mi),animationsExtensionEnabled:!0},"".concat(r,"__collaborative-editor")),h&&(0,s.jsx)(tC,{editor:h})]}),Z&&(0,s.jsx)(nw,{}),!P&&(0,s.jsx)(ol,{editor:h},r)]})}),N===tv.w.SLIDE_VIEW&&(0,s.jsx)(hh,{editor:h}),(0,s.jsx)(e3,{panelLifecycle:et,editor:h}),(0,s.jsx)(tx.A,{editorId:"main",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ms,{doc:x,user:F,docEditorType:n,editor:h,editorWrapperDiv:B.current,aspectRatioValue:v}),q&&(0,s.jsx)(xJ,{})]})})]}),(0,s.jsx)(r5,{doc:x,editor:h}),V&&x&&n===t2.i.COLLABORATIVE&&(0,s.jsx)(ri,{doc:x})]})})})});var ml=n(46882),ma=n(92712),md=n(88085);let mc=e=>{let{theme:t,onClick:n,isChecked:i,index:r,startIndex:o}=e;return(0,s.jsxs)(c.az,{gridColumnStart:r+1-o,display:o>r?"none":"block",gridRow:1,as:ma.Q,p:2,transition:"all 0.2s ease-in-out",bgColor:i?"trueblue.100":"linen.50",textAlign:"left",tabIndex:0,borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_focus:{boxShadow:i?void 0:"outline"},outline:"none",onClick:n,_hover:{bgColor:i?"trueblue.100":"gray.100"},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&n()},"data-theme-id":t.id,"data-testid":i?"current-theme-preview":void 0,cursor:"pointer",children:[(0,s.jsx)(md.q,{theme:t}),(0,s.jsxs)(l.B,{direction:"row",spacing:1,pt:1,children:[i&&(0,s.jsx)(rZ.S,{w:3,h:"auto",mr:1,color:"trueblue.700"}),(0,s.jsx)(a.E,{fontSize:"sm",noOfLines:1,"data-testid":"theme-name",color:i?"trueblue.700":void 0,children:t.name})]})]})};mc.displayName="DemoDocThemePreview";let mu="linen.50",mh=e=>{let{templateTheme:t,setTheme:i,currentThemeId:r}=e,a=(0,C.d4)(ep.wC)===tv.w.SLIDE_VIEW,[c,u]=(0,y.useState)([]),[p,f]=(0,y.useState)(!1),[g,j]=(0,y.useState)(0),v=(0,eZ.h5)({base:3,md:4,lg:5})||3;(0,y.useEffect)(()=>{n.e(8116).then(n.bind(n,8116)).then(e=>{u(e.GLOBAL_THEMES)})},[]);let b=[...t?[t]:[],...c.filter(e=>e.id!==(null==t?void 0:t.id))],w=(0,y.useCallback)(e=>{1===e?j(e=>e+1):j(e=>e-1)},[]);return a?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(F.Z,{children:(0,s.jsxs)(o.s,{w:"100%",position:"absolute",bottom:0,left:0,bgColor:mu,zIndex:"sticky",direction:"column",borderTop:"3px solid var(--chakra-colors-trueblue-500)",minH:12,p:2,justifyContent:"center",children:[(0,s.jsx)(o.s,{alignItems:"flex-end",justify:"flex-end",children:(0,s.jsx)(d.$,{variant:"ghost",size:"sm",rightIcon:(0,s.jsx)(x.g,{icon:p?h.tdl:h.GF6}),onClick:()=>f(e=>!e),children:p?(0,s.jsx)(m.x6,{id:"yz7wBu"}):(0,s.jsx)(m.x6,{id:"x6tIe+"})})}),(0,s.jsx)(o.s,{justify:"flex-start",align:"flex-start",bgColor:mu,w:"100%",children:p&&(0,s.jsxs)(l.B,{direction:"row",align:"center",justify:"center",w:"100%",children:[(0,s.jsx)(J.K,{"aria-label":"Left",onClick:()=>w(-1),variant:"ghost",isDisabled:0===g,icon:(0,s.jsx)(x.g,{icon:h.Uec})}),(0,s.jsx)(ml.x,{w:"100%",flex:1,overflow:"hidden",padding:2,transition:"all 0.2s ease-in-out",templateColumns:["repeat(".concat(v,", calc(100% / ").concat(v," - 1em))")],gap:"0 1em",bgColor:mu,children:b.map((e,t)=>(0,s.jsx)(mc,{index:t,startIndex:g,isChecked:e.id===r,theme:e,onClick:()=>{i(e)}},e.id))}),(0,s.jsx)(J.K,{"aria-label":"Right",variant:"ghost",isDisabled:g+v>b.length,onClick:()=>w(1),icon:(0,s.jsx)(x.g,{icon:h.vmR})})]})})]})})};var mx=n(30504);let mp=[{description:(0,s.jsx)(m.x6,{id:"gtWy3j"}),shortcut:["←","→"]},{description:(0,s.jsx)(m.x6,{id:"UCxK2S"}),shortcut:["↑","↓"]},{description:(0,s.jsx)(m.x6,{id:"IkakN2"}),shortcut:"Esc"},{description:(0,s.jsx)(m.x6,{id:"CgmvBu"}),shortcut:"S"},{description:(0,s.jsx)(m.x6,{id:"rEj/lx"}),shortcut:"Enter"},{description:(0,s.jsx)(m.x6,{id:"dQU33K"}),shortcut:"Mod+Shift+O"},{description:(0,s.jsx)(m.x6,{id:"K0Oq/D"}),shortcut:"R"}],mm=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,{enterSlideView:i,exitSlideView:r,setExitedFullscreenByClick:o,isFullscreen:l,enterFullscreen:a,exitFullscreen:c}=oN({editorWrapperEl:t,scrollingParentSelector:n}),u=(0,I.GV)(ep.wC),p=(0,y.useRef)(u);return(0,y.useEffect)(()=>{p.current=u},[u]),(0,s.jsxs)(e8.z,{children:[(0,s.jsxs)(e7.e,{isAttached:!0,size:"sm",children:[(0,s.jsx)(X.Tz,{label:u===tv.w.DOC_VIEW?(0,s.jsx)(m.x6,{id:"ek5OwP",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}}):(0,s.jsx)(m.x6,{id:"43JI0J",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}}),children:(0,s.jsx)(d.$,{variant:u===tv.w.DOC_VIEW?"solid":"plain",cursor:u===tv.w.SLIDE_VIEW?"pointer":"auto",onClick:()=>{u===tv.w.SLIDE_VIEW&&r()},leftIcon:(0,s.jsx)(x.g,{icon:h.h8M}),children:(0,s.jsx)(m.x6,{id:"7Zdnlq"})})}),(0,s.jsx)(X.Tz,{label:u===tv.w.SLIDE_VIEW?(0,s.jsx)(m.x6,{id:"Zfr5aa",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}}):(0,s.jsx)(m.x6,{id:"rK6Cev",values:{GAMMA_ARTIFACT_PROPER_NOUN:ev.TP}}),children:(0,s.jsx)(d.$,{variant:u===tv.w.SLIDE_VIEW?"solid":"plain",cursor:u===tv.w.DOC_VIEW?"pointer":"auto",onClick:()=>{u===tv.w.DOC_VIEW&&i({fullscreen:!1})},leftIcon:(0,s.jsx)(x.g,{icon:h.UoT}),children:(0,s.jsx)(m.x6,{id:"FOoDGS"})})})]}),u===tv.w.SLIDE_VIEW&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n_.c,{orientation:"vertical"}),(0,s.jsx)(X.Tz,{label:l?(0,s.jsx)(m.x6,{id:"IkOhTI"}):(0,s.jsx)(m.x6,{id:"q8ARHN"}),children:(0,s.jsx)(J.K,{size:"sm","aria-label":l?f.Ru._({id:"IkOhTI"}):f.Ru._({id:"q8ARHN"}),borderRadius:"md",icon:(0,s.jsx)(x.g,{icon:l?h.gr3:h.oZK}),onClick:l?()=>{o(!0),c()}:a})}),(0,s.jsxs)(G.A,{children:[(0,s.jsx)(eu.W,{children:(0,s.jsx)(d.$,{size:"sm",variant:"plain",fontWeight:"normal",children:(0,s.jsx)(m.x6,{id:"77Emn0"})})}),(0,s.jsxs)(U.h,{border:"1px solid #eee !important",children:[(0,s.jsx)(d2.R,{}),(0,s.jsx)(rr.q,{}),(0,s.jsx)(H.e,{children:(0,s.jsx)(mx.c,{list:mp})})]})]})]})]})},mf=(0,y.memo)(function(e){let{scrollingParentSelector:t,editorWrapperEl:n}=e;(0,I.GV)(nm.Jo);let i=(0,y.useRef)(null);return(0,s.jsx)(o.s,{ref:i,bg:"white",borderBottom:"3px solid var(--chakra-colors-trueblue-600)",position:"absolute",zIndex:"overlay",top:0,left:0,right:0,p:2,alignItems:"flex-start",justifyContent:"flex-start",pr:6,children:(0,s.jsx)(o.s,{direction:"column",w:"100%",children:(0,s.jsx)(mm,{editorWrapperEl:n,scrollingParentSelector:t})})})});var mg=n(45173),mj=n(41259);let mv=e=>{let{toggleToCPanel:t,initializeToCPanel:n,isToCPanelOpen:i}=e,{breakpoints:{xl:r}}=(0,mj.D)(),s=(0,I.GV)(ep.wC),[o,l]=(0,y.useState)(s!==tv.w.SLIDE_VIEW),[a,d]=(0,y.useState)(!1),c=(0,C.wA)();(0,t$.Vg)(()=>{n()},[r,t,n,c],[]),(0,t$.Vg)(()=>{s===tv.w.SLIDE_VIEW?(l(i),t({disableTransition:!1,override:"closed"})):a&&s===tv.w.DOC_VIEW&&t({disableTransition:!1,override:o?"open":"closed"})},[t,i,o,s,a],[s])},mb="doc-root",my=(0,t5.VL)(e=>{var t;let{docEditorType:n=t2.i.COLLABORATIVE}=e,{docId:i,setCollaborativeEditorInstance:r,editor:l}=(0,t5.mi)(),a=(0,I.GV)(nm.Jo);mt(i,n),(0,pQ.K)(),pb(),py(),dh(l,".".concat(mb)),db(l),t6(),mn(l),(0,k.tr)(a,n===t2.i.COLLABORATIVE);let d=(0,y.useRef)(null),u=null==a?void 0:a.theme,[h,x]=(0,y.useState)(()=>u),p=(0,I.jL)(),m=(0,y.useRef)(!1),{data:f}=(0,nC.YDl)({variables:{docId:i,snapshotId:null==a?void 0:a.currentSnapshotId},skip:!(null==a?void 0:a.currentSnapshotId)}),g=null==f?void 0:null===(t=f.snapshot)||void 0===t?void 0:t.content.default;console.debug("%c[DemoDocEditorComponent] RENDER - ".concat(i),"background-color: gold"),(0,y.useEffect)(()=>{u&&!m.current&&(x(u),m.current=!0)},[u]),(0,y.useEffect)(()=>{if(!l)return;let e=null==h?void 0:h.config.accentBackgrounds;if(!e||0===e.length){g&&l.commands.setContent(g);return}l.commands.updateThemeAccentImages(e)},[l,h,g]);let{togglePanel:v,isPanelOpen:b,initPanel:C}=(0,eJ.ww)(mg.g);mv({toggleToCPanel:v,isToCPanelOpen:b,initializeToCPanel:C}),(0,y.useEffect)(()=>()=>{p((0,e1.fi)())},[p]);let{leftPanelLifecycle:w}=(0,eJ.uR)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,s.jsx)(j(),{children:(0,s.jsxs)("title",{children:["".concat(a?(0,ao.B)(a.title)+" | ":""),"Gamma"]})}),(0,s.jsxs)(o.s,{id:"doc-main",direction:"row",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:d,children:[(0,s.jsx)(e4,{panelLifecycle:w}),(0,s.jsxs)(o.s,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:[l&&(0,s.jsx)(mf,{scrollingParentSelector:".".concat(mb),editorWrapperEl:d.current,setTheme:x,currentThemeId:(null==h?void 0:h.id)||(null==u?void 0:u.id),templateTheme:u}),(0,s.jsxs)(c.az,{flex:"1",overflowY:"auto",overflowX:"hidden",minWidth:"0",h:"100%",className:mb,children:[(0,s.jsx)(dg,{docId:i,snapshotId:null==a?void 0:a.currentSnapshotId,scrollingParentSelector:".".concat(mb),onCreate:r,theme:h,hideMadeWithGammaBadge:!0}),(0,s.jsx)(hh,{editor:l,showNavigationControls:!0})]})]}),(0,s.jsx)(mh,{setTheme:x,currentThemeId:(null==h?void 0:h.id)||(null==u?void 0:u.id),templateTheme:u})]})]})}),mC="body",mw=e=>{let t=(0,I.GV)((0,ex.A0)(e)),[n,i]=(0,y.useState)(!1),r=(0,y.useCallback)(()=>{0===window.scrollY&&i(!0)},[]),s=(0,t$.wb)(r,100);return(0,y.useEffect)(()=>{if(!(0,P.Xb)()||(null==t?void 0:t.status)!=="complete"||n)return;let e=setTimeout(async()=>{window.scrollTo({top:0,behavior:"smooth"}),window.addEventListener("scroll",s)},1200);return()=>{clearTimeout(e),window.removeEventListener("scroll",s)}},[null==t?void 0:t.status,n,s]),n};var mE=n(82737);let mk=()=>{let[e,t]=(0,y.useState)("up");return(0,y.useEffect)(()=>{if(!window)return;let e=window.scrollY||0,n=t=>Math.abs(t-e)>0,i=t=>t>e&&!(e>0&&0===t)&&!(t>0&&0===e),r=()=>{let r=window.scrollY||0;n(r)&&(t(i(r)?"down":"up"),e=r>0?r:0)},s=eV()(()=>window.requestAnimationFrame(r),500,{leading:!0});return window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)},[]),e};var mS=n(43909);let mI=(0,y.memo)(()=>(0,s.jsx)(c.az,{w:"100%",h:"1px",bg:"gray.200",my:2,mx:-2,_first:{display:"none"},_last:{display:"none"}}));mI.displayName="MenuDivider";let mT=(0,y.memo)(e=>{let{icon:t,children:n,...i}=e;return(0,s.jsx)(c.az,{as:"button",w:"100%",textAlign:"start",px:2,py:2,fontWeight:"500",color:"gray.700",transition:"all 0.2s",_hover:{bg:"gray.100"},_focus:{outline:"none"},_active:{bg:"gray.200"},borderRadius:"md",...i,children:(0,s.jsxs)(e8.z,{children:[t&&(0,s.jsx)(c.az,{children:t}),(0,s.jsx)(c.az,{children:n})]})})});mT.displayName="MenuItem";let mA=e=>{var t,n,i;let{isOpen:r,onClose:d,doc:c,editingEnabled:u,commentsEnabled:p,onCommentFeedOpen:f}=e,{user:g}=(0,er.ur)(),{isConnected:j}=(0,nC.utY)(),v=(0,oc.Z)(),{editor:b}=(0,t5.mi)(),C=(0,ao.B)(null==c?void 0:c.title),w=(null==c?void 0:c.createdTime)&&(0,ar.A)((0,as.A)(c.createdTime),"PPP"),E=null==c?void 0:c.id,{isOpen:k,onClose:S,onOpen:I}=(0,nz.E)({id:"analyticsPanelDisclosure"}),[T]=(0,nC.fQ5)(),[A]=(0,nC.u6W)(),R=(0,en.st)(),_=(0,er.Iy)("manage",c)&&!!g,O=(0,er.Iy)("manage",c)&&!!g,z=!!(g&&0!==g.workspaceMemberships.length),P=(0,D.u)("mobileSharePanel"),L=(null==c?void 0:null===(t=c.comments)||void 0===t?void 0:t.filter(e=>e.status===nC.EB6.Open).length)||0,N=!!g&&O,M=(0,y.useCallback)(async()=>{if(!b)return;let e=b.getJSON();await v({docId:E,initialContent:e,source:"editor_toolbar_doc_menu_duplicate",newWindow:!1}),d()},[E,v,b,d]),V=(0,y.useCallback)(()=>{null==R||R.track(en.VV.DOC_ANALYTICS_VIEWED,{docId:E,source:"toolbar_doc_menu",type:"personal"}),I()},[R,E,I]),F=(0,y.useCallback)(e=>()=>{if(!E)return;let t={id:E};e?T({variables:t,optimisticResponse:{archiveDoc:{...t,archived:e,__typename:"Doc"}}}):A({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:e,__typename:"Doc"}}})},[T,E,A]);return(0,s.jsxs)(s.Fragment,{children:[c&&(0,s.jsx)(X.mr,{isOpen:r,onClose:d,children:(0,s.jsxs)(o.s,{w:"100%",h:r?"100%":void 0,direction:"column",children:[(0,s.jsxs)(e8.z,{align:"flex-start",p:6,children:[(0,s.jsxs)(l.B,{spacing:0,children:[(0,s.jsx)(a.E,{fontSize:"2xl",fontWeight:"bold",letterSpacing:"tight",noOfLines:6,children:C}),(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(m.x6,{id:"jlWdji",values:{createdTime:w}})}),(0,s.jsx)(X.Tz,{label:null==c?void 0:null===(n=c.createdBy)||void 0===n?void 0:n.email,children:(0,s.jsx)(a.E,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(m.x6,{id:"t490IT",values:{0:null==c?void 0:null===(i=c.createdBy)||void 0===i?void 0:i.displayName}})})})]}),(0,s.jsx)(tT.h,{}),(0,s.jsx)(tS.J,{mt:-2,onClick:e=>{e.stopPropagation(),d()}})]}),(0,s.jsxs)(l.B,{p:3,pt:0,children:[(0,s.jsx)(mI,{}),O&&!P&&(0,s.jsx)(mT,{icon:(0,s.jsx)(x.g,{icon:h.t5Z,fixedWidth:!0}),onClick:()=>{d(),nU.R.emit("openSharePanel",{view:"invite"})},children:(0,s.jsx)(m.x6,{id:"iyga2M"})}),p&&(0,s.jsx)(mT,{icon:(0,s.jsx)(x.g,{icon:h.DN2,fixedWidth:!0}),onClick:()=>{d(),f()},children:(0,s.jsxs)(e8.z,{spacing:2,children:[(0,s.jsx)(m.x6,{id:"VbyRUy"}),(0,s.jsx)(n1.E,{colorScheme:"gray",variant:"solid",borderRadius:"full",lineHeight:1,children:L})]})}),u&&(0,s.jsx)(mT,{icon:(0,s.jsx)(x.g,{icon:h.fyG,fixedWidth:!0}),onClick:()=>{d(),nU.R.emit("toggleThemeBlock",!0)},"data-testid":"mobile-theme-button",children:(0,s.jsx)(m.x6,{id:"W15e8B"})}),(0,s.jsx)(mI,{}),j&&(0,s.jsxs)(s.Fragment,{children:[N&&(0,s.jsx)(mT,{icon:(0,s.jsx)(x.g,{icon:h.q9c,fixedWidth:!0}),onClick:()=>{d(),V()},children:(0,s.jsx)(m.x6,{id:"qcxxQS"})}),z&&(0,s.jsx)(mT,{icon:(0,s.jsx)(x.g,{icon:h.jPR,fixedWidth:!0}),onClick:M,children:(0,s.jsx)(m.x6,{id:"euc6Ns"})}),_&&(0,s.jsx)(mT,{icon:(0,s.jsx)(x.g,{icon:h.mHA,fixedWidth:!0}),onClick:()=>{d(),nU.R.emit("openSharePanel",{view:"export"})},children:(0,s.jsx)(m.x6,{id:"U8WPSi"})}),O&&(0,s.jsx)(mI,{}),O?c.archived?(0,s.jsx)(mT,{icon:(0,s.jsx)(x.g,{icon:h.IbX,fixedWidth:!0}),onClick:F(!1),children:(0,s.jsx)(m.x6,{id:"yKu/3Y"})}):(0,s.jsx)(mT,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,s.jsx)(x.g,{icon:h.yLS,fixedWidth:!0}),onClick:F(!0),children:(0,s.jsx)(m.x6,{id:"1C/Yjq"})}):null]})]})]})}),c&&k&&(0,s.jsx)(l8,{doc:c,isAnalyticsPanelOpen:k,onAnalyticsPanelClose:S,mode:"full"}),u&&(0,s.jsx)(uO,{})]})},mR=e=>{let{doc:t,editor:n,commentsEnabled:i,editingEnabled:r,onCommentFeedOpen:o,onTocOpen:l,onEditClick:d}=e,[c]=(0,ub.F)(ef.E.lastHomeUrl,"/"),{user:u}=(0,er.ur)(),p=(0,er.Iy)("manage",t),m=p||r,f=mk(),g=(0,C.d4)(ep.SJ),j=(0,mS.mm)(g),v=(0,rG.Mw)(g)?"white":"gray.800",w=(0,rG.Mw)(g)?"trueblue.300":"trueblue.700",E=(0,y.useCallback)(()=>{n&&n.commands.undo()},[n]),{isOpen:k,onOpen:S,onClose:I}=(0,eP.j)(),T=(0,D.u)("mobileFTUXExperiment"),A=p&&("edit"===T||"congrats"===T);return t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(mA,{doc:t,isOpen:k,onClose:I,editingEnabled:r,commentsEnabled:i,onCommentFeedOpen:o}),(0,s.jsxs)(e8.z,{p:1,px:2,bg:"gray.50",shadow:"lg",w:"100%",position:"fixed",top:0,transitionProperty:"common",transitionDuration:"normal",transform:"up"==f?"translate(0px,0px)":"translate(0px,-100%)",opacity:"up"==f?1:0,zIndex:"sticky",sx:{...(0,mS.wL)(j,g,!0),border:"none",filter:"none",borderRadius:0},color:v,children:[u&&(0,s.jsx)(b(),{href:c,passHref:!0,legacyBehavior:!0,children:(0,s.jsx)(J.K,{as:n5.N,"aria-label":"Home",color:v,_hover:{bg:"transparent",color:w},icon:(0,s.jsx)(x.g,{icon:h.v02,size:"1x"}),variant:"ghost"})}),(0,s.jsx)(a.E,{flex:1,fontSize:"sm",noOfLines:1,ms:2,color:v,children:null==t?void 0:t.title}),(0,s.jsxs)(e7.e,{variant:"ghost",spacing:0,children:[A&&(0,s.jsx)(J.K,{color:v,_hover:{bg:"transparent",color:w},fontSize:"sm",onClick:d,icon:(0,s.jsx)(x.g,{icon:h.zLW}),"aria-label":"Edit"}),p&&u&&(0,s.jsx)(J.K,{color:v,"aria-label":"Share",_hover:{bg:"transparent",color:w},icon:(0,s.jsx)(x.g,{icon:h.t5Z}),onClick:()=>{nU.R.emit("openSharePanel",{view:"invite"})}}),r&&(0,s.jsx)(J.K,{color:v,"aria-label":"Undo",onClick:E,_hover:{bg:"transparent",color:w},icon:(0,s.jsx)(x.g,{icon:h.U23})}),!r&&(0,s.jsx)(J.K,{color:v,"aria-label":"Open table of contents",_hover:{bg:"transparent",color:w},onClick:l,icon:(0,s.jsx)(x.g,{icon:h.ITF})}),m&&(0,s.jsx)(J.K,{color:v,"aria-label":"Open toolbar",_hover:{bg:"transparent",color:w},onClick:S,icon:(0,s.jsx)(x.g,{icon:h.Dwc})})]})]})]}):null};var m_=n(37931);let mO="undefined"!=typeof navigator&&navigator.share,mD={logo:(0,s.jsx)(X.Fu,{w:"120px"}),title:(0,s.jsx)(m.x6,{id:"ytdpwT"}),titleIcons:(0,s.jsx)(()=>(0,s.jsx)(l.B,{direction:"row",spacing:3,children:[tA.YBv,tA.ArK].map((e,t)=>(0,s.jsx)(c.az,{bg:"gradient.brand.bg",as:"span",display:"inline-block",sx:{width:0===t?9:8,height:0===t?9:8,maskImage:"url(".concat((0,m_.Z)(e),")"),maskSize:"contain",maskRepeat:"no-repeat"}},t))}),{}),body:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.x6,{id:"w+pzcB",values:{GAMMA_PROPER_NOUN:ev.On}})," ",(0,s.jsx)("span",{role:"img","aria-label":"magic wand",children:"\uD83E\uDE84"})]}),helpText:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.x6,{id:"6Y8GST"})," ",(0,s.jsx)("span",{role:"img","aria-label":"email",children:"✉️"})]})},mz={edit:mD,congrats:{title:(0,s.jsx)(m.x6,{id:"edZUhQ"}),titleIcons:(0,s.jsx)(()=>(0,s.jsx)("span",{role:"img","aria-label":"celebration",children:"\uD83C\uDF89"}),{}),body:(0,s.jsx)(m.x6,{id:"4SLfBn",values:{GAMMA_PROPER_NOUN:ev.On}}),helpText:(0,s.jsx)(m.x6,{id:"b0JDPO"})},editFromToolbar:{...mD,helpText:(0,s.jsx)(m.x6,{id:"b0JDPO"})}},mP=e=>{let{variant:t,onClose:n}=e,i=(0,ee.fW)()?h.CeG:h.dmS,r=(0,I.GV)(ep.Jo)||null,o=(0,en.st)(),c=(0,y.useCallback)(async()=>{if(r)try{null==o||o.track(en.VV.MOBILE_EDITOR_SWITCH_TO_DESKTOP_DRAWER_SHARE_BUTTON_TAPPED,{doc_id:r.id,doc_title:r.title,source:t});let e=(0,L.LN)({docId:r.id,docTitle:r.title,absolute:!0});await navigator.share({title:r.title,url:"".concat(O.$.FRONTEND_URL,"/signin?redirect_to=").concat(encodeURIComponent(e))})}catch(e){console.error("Error sharing doc",e)}},[r,t,o]);(0,y.useEffect)(()=>{null==o||o.track(en.VV.MOBILE_EDITOR_SWITCH_TO_DESKTOP_DRAWER_VIEWED,{doc_id:null==r?void 0:r.id,doc_title:null==r?void 0:r.title,source:t})},[r,t,o]);let u=mz[t];return(0,s.jsxs)(l.B,{children:[(0,s.jsxs)(l.B,{spacing:2,alignItems:"start",children:[(0,s.jsxs)(l.B,{spacing:4,children:[u.logo&&u.logo,u.titleIcons]}),(0,s.jsx)(q.D,{size:"lg",variant:"fancy",textAlign:"start",children:u.title})]}),(0,s.jsx)(a.E,{children:u.body}),(0,s.jsxs)(l.B,{spacing:6,children:[u.helpText&&(0,s.jsx)(a.E,{fontSize:"sm",color:"gray.500",children:u.helpText}),(0,s.jsxs)(l.B,{spacing:2,children:[mO&&(0,s.jsx)(d.$,{width:"100%",onClick:c,size:"md",variant:"plain",leftIcon:(0,s.jsx)(x.g,{icon:h.Exz}),children:(0,s.jsx)(m.x6,{id:"Z8lGw6"})}),(0,s.jsx)(d.$,{width:"100%",onClick:n,size:"sm",variant:"ghost",colorScheme:"gray",rightIcon:(0,s.jsx)(x.g,{icon:i}),children:(0,s.jsx)(m.x6,{id:"xGe7OC"})})]})]})]})},mL=(0,y.memo)(e=>{let{isOpen:t,onClose:n,variant:i}=e;return(0,s.jsxs)(X.mr,{isOpen:t,onClose:n,drawerProps:{placement:"bottom",isFullHeight:!1},drawerContentProps:{h:"auto",w:"100%",p:6},children:[(0,s.jsx)(mP,{variant:i,onClose:n}),(0,s.jsx)(tS.J,{position:"absolute",insetEnd:3,top:3,onClick:n,"aria-label":"Close"})]})});mL.displayName="SwitchToDesktopDrawer";let mN=e=>{let{openDrawer:t,docId:n,hasScrolledToTop:i=!1}=e,{isFirstMobileDocGeneration:r}=(0,e9.useRouter)().query,s=(0,y.useRef)(!1),o=(0,I.GV)((0,ex.A0)(n)),l=(0,D.u)("mobileFTUXExperiment"),a="control"===l||!r||(null==o?void 0:o.status)!=="complete"||!i||s.current,d=(0,y.useCallback)(()=>{window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100>20&&(t(),s.current=!0)},[t]),c=(0,t$.wb)(d,100);(0,y.useEffect)(()=>{if("edit"===l&&!a)return window.addEventListener("scroll",c),()=>{window.removeEventListener("scroll",c)}},[c,a,l]),(0,y.useEffect)(()=>{if("congrats"!==l||a)return;let e=setTimeout(()=>{t(),s.current=!0},1e3);return()=>clearTimeout(e)},[l,t,a])},mM=e=>{let{doc:t,docEditorType:n,commentsEnabled:i=!0}=e,r=(0,D.u)("mobileFTUXExperiment"),[l,a]=(0,y.useState)(null),{docId:d,setCollaborativeEditorInstance:c,editor:u}=(0,t5.mi)(),{isOpen:h,onOpen:x,onClose:p}=(0,eP.j)({id:"mobile-comment-feed-panel-drawer"}),{isOpen:m,onOpen:f,onClose:g}=(0,eP.j)({id:"mobile-toc-drawer"}),[j,v]=(0,y.useState)(null),b=mw(d),{isOpen:C,onOpen:E,onClose:k}=(0,eP.j)({id:"switch-to-desktop-drawer"});mN({docId:d,openDrawer:E,hasScrolledToTop:b});let S=(0,y.useCallback)(()=>{E(),a("editFromToolbar")},[E]);console.debug("%c[MobileEditorWrapper] RENDER - ".concat(d),"background-color: gold");let I=(0,D.u)("mobileEditing"),T=(0,er.Iy)("edit",t),A=I&&T;return(0,s.jsx)(w.UU,{children:(0,s.jsxs)(o.s,{ref:(0,y.useCallback)(e=>v(e),[]),direction:"column",flex:1,mt:"48px",children:[(0,s.jsx)(mR,{doc:t,editor:u,onCommentFeedOpen:x,commentsEnabled:!A&&i,editingEnabled:A,onTocOpen:f,onEditClick:S}),n===t2.i.PUBLIC_STATIC?(0,s.jsx)(dg,{docId:d,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:mC,onCreate:c}):n===t2.i.EXAMPLE_STATIC?(0,s.jsx)(oj,{docId:d,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:mC,onCreate:c}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(td.H2,{doc:t,docId:d,readOnly:!A,onCreate:c,scrollingParentSelector:mC}),u&&(0,s.jsx)(tC,{editor:u})]}),"control"!==r&&C&&(0,s.jsx)(mL,{isOpen:C,onClose:k,variant:null!=l?l:"edit"===r?"edit":"congrats"===r?"congrats":"editFromToolbar"}),i&&h&&(0,s.jsx)(X.mr,{isOpen:h,onClose:p,drawerProps:{autoFocus:!1,returnFocusOnClose:!1},children:(0,s.jsx)(sa,{onClose:p,editor:u})}),m&&(0,s.jsx)(X.mr,{isOpen:m,onClose:g,drawerProps:{returnFocusOnClose:!1},children:(0,s.jsx)(mE.M,{rootElement:j,handleClose:g})}),(0,s.jsx)(uv,{doc:t,showButton:!1}),(0,s.jsx)(tx.A,{children:(0,s.jsx)(ol,{editor:u})})]})})},mV=(0,t5.VL)(e=>{let{docEditorType:t}=e,{docId:n,isUnauthorized:i,passwordRequired:r,editor:l}=(0,t5.mi)();mt(n,t);let{editorAnimationsClass:a,editorAnimationsCSSVars:d}=(0,tc.O)({editor:l,scrollingParentSelector:mC});pJ(n,l),(0,pQ.K)();let c=(0,y.useRef)(null),u=(0,I.GV)(nm.Jo);console.debug("%c[MobileDocViewerComponent] RENDER - ".concat(n),"background-color: gold");let h=t===t2.i.COLLABORATIVE;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(j(),{children:[(0,s.jsxs)("title",{children:["".concat(u?(0,ao.B)(u.title)+" | ":""),"Gamma"]}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, user-scalable=no"})]}),(0,s.jsx)(Y.mL,{styles:{html:{overflowX:"hidden"},body:{overflow:"hidden scroll",WebkitOverflowScrolling:"touch"}}}),r?(0,s.jsx)(du,{docId:n}):i?(0,s.jsxs)(o.s,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",p:6,textAlign:"center",children:["It looks like you don't have access to this"," ",ev.TP,"."]}):(0,s.jsx)(o.s,{id:"doc-main",direction:"column",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:c,flex:"1",className:a,style:{...d},children:(0,s.jsx)(mM,{doc:u,docEditorType:t,commentsEnabled:h})})]})})},54:()=>{},50405:()=>{},62770:()=>{},63113:function(e){var t;t=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,(function(t){return e[t]}).bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){(function(t){e.exports=t.Phoenix=n(2)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}return n}}(e,t)||s(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function l(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.r(t),n.d(t,"Channel",function(){return S}),n.d(t,"Serializer",function(){return I}),n.d(t,"Socket",function(){return T}),n.d(t,"LongPoll",function(){return A}),n.d(t,"Ajax",function(){return R}),n.d(t,"Presence",function(){return _});var c="undefined"!=typeof window?window:null,u=("undefined"!=typeof self?self:null)||c||void 0,h="closed",x="errored",p="joined",m="joining",f="leaving",g="phx_close",j="phx_error",v="phx_join",b="phx_reply",y="phx_leave",C=[g,j,v,b,y],w="websocket",E=function(e){return"function"==typeof e?e:function(){return e}},k=function(){function e(t,n,i,r){l(this,e),this.channel=t,this.event=n,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=r,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return d(e,[{key:"resend",value:function(e){this.timeout=e,this.reset(),this.send()}},{key:"send",value:function(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:"receive",value:function(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}},{key:"reset",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:"matchReceive",value:function(e){var t=e.status,n=e.response;e.ref,this.recHooks.filter(function(e){return e.status===t}).forEach(function(e){return e.callback(n)})}},{key:"cancelRefEvent",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:"cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:"startTimeout",value:function(){var e=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,function(t){e.cancelRefEvent(),e.cancelTimeout(),e.receivedResp=t,e.matchReceive(t)}),this.timeoutTimer=setTimeout(function(){e.trigger("timeout",{})},this.timeout)}},{key:"hasReceived",value:function(e){return this.receivedResp&&this.receivedResp.status===e}},{key:"trigger",value:function(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}}]),e}(),S=function(){function e(t,n,i){var r=this;l(this,e),this.state=h,this.topic=t,this.params=E(n||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new k(this,v,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new O(function(){r.socket.isConnected()&&r.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(function(){return r.rejoinTimer.reset()})),this.stateChangeRefs.push(this.socket.onOpen(function(){r.rejoinTimer.reset(),r.isErrored()&&r.rejoin()})),this.joinPush.receive("ok",function(){r.state=p,r.rejoinTimer.reset(),r.pushBuffer.forEach(function(e){return e.send()}),r.pushBuffer=[]}),this.joinPush.receive("error",function(){r.state=x,r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.onClose(function(){r.rejoinTimer.reset(),r.socket.hasLogger()&&r.socket.log("channel","close ".concat(r.topic," ").concat(r.joinRef())),r.state=h,r.socket.remove(r)}),this.onError(function(e){r.socket.hasLogger()&&r.socket.log("channel","error ".concat(r.topic),e),r.isJoining()&&r.joinPush.reset(),r.state=x,r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",function(){r.socket.hasLogger()&&r.socket.log("channel","timeout ".concat(r.topic," (").concat(r.joinRef(),")"),r.joinPush.timeout),new k(r,y,E({}),r.timeout).send(),r.state=x,r.joinPush.reset(),r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.on(b,function(e,t){r.trigger(r.replyEventName(t),e)})}return d(e,[{key:"join",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:"onClose",value:function(e){this.on(g,e)}},{key:"onError",value:function(e){return this.on(j,function(t){return e(t)})}},{key:"on",value:function(e,t){var n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:t}),n}},{key:"off",value:function(e,t){this.bindings=this.bindings.filter(function(n){return!(n.event===e&&(void 0===t||t===n.ref))})}},{key:"canPush",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:"push",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(t=t||{},!this.joinedOnce)throw Error("tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.join() before pushing events"));var i=new k(this,e,function(){return t},n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}},{key:"leave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=f;var n=function(){e.socket.hasLogger()&&e.socket.log("channel","leave ".concat(e.topic)),e.trigger(g,"leave")},i=new k(this,y,E({}),t);return i.receive("ok",function(){return n()}).receive("timeout",function(){return n()}),i.send(),this.canPush()||i.trigger("ok",{}),i}},{key:"onMessage",value:function(e,t,n){return t}},{key:"isLifecycleEvent",value:function(e){return C.indexOf(e)>=0}},{key:"isMember",value:function(e,t,n,i){return this.topic===e&&(!i||i===this.joinRef()||!this.isLifecycleEvent(t)||(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:n,joinRef:i}),!1))}},{key:"joinRef",value:function(){return this.joinPush.ref}},{key:"rejoin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=m,this.joinPush.resend(e))}},{key:"trigger",value:function(e,t,n,i){var r=this.onMessage(e,t,n,i);if(t&&!r)throw Error("channel onMessage callbacks must return the payload, modified or unmodified");for(var s=this.bindings.filter(function(t){return t.event===e}),o=0;o<s.length;o++)s[o].callback(r,n,i||this.joinRef())}},{key:"replyEventName",value:function(e){return"chan_reply_".concat(e)}},{key:"isClosed",value:function(){return this.state===h}},{key:"isErrored",value:function(){return this.state===x}},{key:"isJoined",value:function(){return this.state===p}},{key:"isJoining",value:function(){return this.state===m}},{key:"isLeaving",value:function(){return this.state===f}}]),e}(),I={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode:function(e,t){return t(e.payload.constructor===ArrayBuffer?this.binaryEncode(e):JSON.stringify([e.join_ref,e.ref,e.topic,e.event,e.payload]))},decode:function(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));var n=r(JSON.parse(e),5);return t({join_ref:n[0],ref:n[1],topic:n[2],event:n[3],payload:n[4]})},binaryEncode:function(e){var t=e.join_ref,n=e.ref,i=e.event,r=e.topic,s=e.payload,o=this.META_LENGTH+t.length+n.length+r.length+i.length,l=new ArrayBuffer(this.HEADER_LENGTH+o),a=new DataView(l),d=0;a.setUint8(d++,this.KINDS.push),a.setUint8(d++,t.length),a.setUint8(d++,n.length),a.setUint8(d++,r.length),a.setUint8(d++,i.length),Array.from(t,function(e){return a.setUint8(d++,e.charCodeAt(0))}),Array.from(n,function(e){return a.setUint8(d++,e.charCodeAt(0))}),Array.from(r,function(e){return a.setUint8(d++,e.charCodeAt(0))}),Array.from(i,function(e){return a.setUint8(d++,e.charCodeAt(0))});var c=new Uint8Array(l.byteLength+s.byteLength);return c.set(new Uint8Array(l),0),c.set(new Uint8Array(s),l.byteLength),c.buffer},binaryDecode:function(e){var t=new DataView(e),n=t.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.push:return this.decodePush(e,t,i);case this.KINDS.reply:return this.decodeReply(e,t,i);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,i)}},decodePush:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=t.getUint8(3),o=this.HEADER_LENGTH+this.META_LENGTH-1,l=n.decode(e.slice(o,o+i));o+=i;var a=n.decode(e.slice(o,o+r));o+=r;var d=n.decode(e.slice(o,o+s));return o+=s,{join_ref:l,ref:null,topic:a,event:d,payload:e.slice(o,e.byteLength)}},decodeReply:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=t.getUint8(3),o=t.getUint8(4),l=this.HEADER_LENGTH+this.META_LENGTH,a=n.decode(e.slice(l,l+i));l+=i;var d=n.decode(e.slice(l,l+r));l+=r;var c=n.decode(e.slice(l,l+s));l+=s;var u=n.decode(e.slice(l,l+o));return l+=o,{join_ref:a,ref:d,topic:c,event:b,payload:{status:u,response:e.slice(l,e.byteLength)}}},decodeBroadcast:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=this.HEADER_LENGTH+2,o=n.decode(e.slice(s,s+i));s+=i;var l=n.decode(e.slice(s,s+r));return s+=r,{join_ref:null,ref:null,topic:o,event:l,payload:e.slice(s,e.byteLength)}}},T=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=i.timeout||1e4,this.transport=i.transport||u.WebSocket||A,this.defaultEncoder=I.encode.bind(I),this.defaultDecoder=I.decode.bind(I),this.closeWasClean=!1,this.unloaded=!1,this.binaryType=i.binaryType||"arraybuffer",this.transport!==A?(this.encode=i.encode||this.defaultEncoder,this.decode=i.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),c&&c.addEventListener&&c.addEventListener("unload",function(e){n.conn&&(n.unloaded=!0,n.abnormalClose("unloaded"))}),this.heartbeatIntervalMs=i.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(e){return i.rejoinAfterMs?i.rejoinAfterMs(e):[1e3,2e3,5e3][e-1]||1e4},this.reconnectAfterMs=function(e){return n.unloaded?100:i.reconnectAfterMs?i.reconnectAfterMs(e):[10,50,100,150,200,250,500,1e3,2e3][e-1]||5e3},this.logger=i.logger||null,this.longpollerTimeout=i.longpollerTimeout||2e4,this.params=E(i.params||{}),this.endPoint="".concat(t,"/").concat(w),this.vsn=i.vsn||"2.0.0",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new O(function(){n.teardown(function(){return n.connect()})},this.reconnectAfterMs)}return d(e,[{key:"protocol",value:function(){return location.protocol.match(/^https/)?"wss":"ws"}},{key:"endPointURL",value:function(){var e=R.appendParams(R.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return"/"!==e.charAt(0)?e:"/"===e.charAt(1)?"".concat(this.protocol(),":").concat(e):"".concat(this.protocol(),"://").concat(location.host).concat(e)}},{key:"disconnect",value:function(e,t,n){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,n)}},{key:"connect",value:function(e){var t=this;e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=E(e)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return t.onConnOpen()},this.conn.onerror=function(e){return t.onConnError(e)},this.conn.onmessage=function(e){return t.onConnMessage(e)},this.conn.onclose=function(e){return t.onConnClose(e)})}},{key:"log",value:function(e,t,n){this.logger(e,t,n)}},{key:"hasLogger",value:function(){return null!==this.logger}},{key:"onOpen",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}},{key:"onClose",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}},{key:"onError",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}},{key:"onMessage",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}},{key:"onConnOpen",value:function(){this.hasLogger()&&this.log("transport","connected to ".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(function(e){return(0,r(e,2)[1])()})}},{key:"resetHeartbeat",value:function(){var e=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return e.sendHeartbeat()},this.heartbeatIntervalMs))}},{key:"teardown",value:function(e,t,n){var i=this;if(!this.conn)return e&&e();this.waitForBufferDone(function(){i.conn&&(t?i.conn.close(t,n||""):i.conn.close()),i.waitForSocketClosed(function(){i.conn&&(i.conn.onclose=function(){},i.conn=null),e&&e()})})}},{key:"waitForBufferDone",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&this.conn.bufferedAmount?setTimeout(function(){t.waitForBufferDone(e,n+1)},150*n):e()}},{key:"waitForSocketClosed",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&3!==this.conn.readyState?setTimeout(function(){t.waitForSocketClosed(e,n+1)},150*n):e()}},{key:"onConnClose",value:function(e){this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(function(t){return(0,r(t,2)[1])(e)})}},{key:"onConnError",value:function(e){this.hasLogger()&&this.log("transport",e),this.triggerChanError(),this.stateChangeCallbacks.error.forEach(function(t){return(0,r(t,2)[1])(e)})}},{key:"triggerChanError",value:function(){this.channels.forEach(function(e){e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(j)})}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case 0:return"connecting";case 1:return"open";case 2:return"closing";default:return"closed"}}},{key:"isConnected",value:function(){return"open"===this.connectionState()}},{key:"remove",value:function(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter(function(t){return t.joinRef()!==e.joinRef()})}},{key:"off",value:function(e){for(var t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter(function(t){var n=r(t,1)[0];return -1===e.indexOf(n)})}},{key:"channel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new S(e,t,this);return this.channels.push(n),n}},{key:"push",value:function(e){var t=this;if(this.hasLogger()){var n=e.topic,i=e.event,r=e.payload,s=e.ref,o=e.join_ref;this.log("push","".concat(n," ").concat(i," (").concat(o,", ").concat(s,")"),r)}this.isConnected()?this.encode(e,function(e){return t.conn.send(e)}):this.sendBuffer.push(function(){return t.encode(e,function(e){return t.conn.send(e)})})}},{key:"makeRef",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:"sendHeartbeat",value:function(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void this.abnormalClose("heartbeat timeout");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}},{key:"abnormalClose",value:function(e){this.closeWasClean=!1,1===this.conn.readyState&&this.conn.close(1e3,e)}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(e){return e()}),this.sendBuffer=[])}},{key:"onConnMessage",value:function(e){var t=this;this.decode(e.data,function(e){var n=e.topic,i=e.event,s=e.payload,o=e.ref,l=e.join_ref;o&&o===t.pendingHeartbeatRef&&(t.pendingHeartbeatRef=null),t.hasLogger()&&t.log("receive","".concat(s.status||""," ").concat(n," ").concat(i," ").concat(o&&"("+o+")"||""),s);for(var a=0;a<t.channels.length;a++){var d=t.channels[a];d.isMember(n,i,s,l)&&d.trigger(i,s,o,l)}for(var c=0;c<t.stateChangeCallbacks.message.length;c++)(0,r(t.stateChangeCallbacks.message[c],2)[1])(e)})}},{key:"leaveOpenTopic",value:function(e){var t=this.channels.find(function(t){return t.topic===e&&(t.isJoined()||t.isJoining())});t&&(this.hasLogger()&&this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.leave())}}]),e}(),A=function(){function e(t){l(this,e),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(t),this.readyState=0,this.poll()}return d(e,[{key:"normalizeEndpoint",value:function(e){return e.replace("ws://","http://").replace("wss://","https://").replace(RegExp("(.*)/"+w),"$1/longpoll")}},{key:"endpointURL",value:function(){return R.appendParams(this.pollEndpoint,{token:this.token})}},{key:"closeAndRetry",value:function(){this.close(),this.readyState=0}},{key:"ontimeout",value:function(){this.onerror("timeout"),this.closeAndRetry()}},{key:"poll",value:function(){var e=this;1!==this.readyState&&0!==this.readyState||R.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),function(t){if(t){var n=t.status,i=t.token,r=t.messages;e.token=i}else n=0;switch(n){case 200:r.forEach(function(t){return e.onmessage({data:t})}),e.poll();break;case 204:e.poll();break;case 410:e.readyState=1,e.onopen(),e.poll();break;case 403:e.onerror(),e.close();break;case 0:case 500:e.onerror(),e.closeAndRetry();break;default:throw Error("unhandled poll status ".concat(n))}})}},{key:"send",value:function(e){var t=this;R.request("POST",this.endpointURL(),"application/json",e,this.timeout,this.onerror.bind(this,"timeout"),function(e){e&&200===e.status||(t.onerror(e&&e.status),t.closeAndRetry())})}},{key:"close",value:function(e,t){this.readyState=3,this.onclose()}}]),e}(),R=function(){function e(){l(this,e)}return d(e,null,[{key:"request",value:function(e,t,n,i,r,s,o){if(u.XDomainRequest){var l=new XDomainRequest;this.xdomainRequest(l,e,t,i,r,s,o)}else{var a=new u.XMLHttpRequest;this.xhrRequest(a,e,t,n,i,r,s,o)}}},{key:"xdomainRequest",value:function(e,t,n,i,r,s,o){var l=this;e.timeout=r,e.open(t,n),e.onload=function(){var t=l.parseJSON(e.responseText);o&&o(t)},s&&(e.ontimeout=s),e.onprogress=function(){},e.send(i)}},{key:"xhrRequest",value:function(e,t,n,i,r,s,o,l){var a=this;e.open(t,n,!0),e.timeout=s,e.setRequestHeader("Content-Type",i),e.onerror=function(){l&&l(null)},e.onreadystatechange=function(){e.readyState===a.states.complete&&l&&l(a.parseJSON(e.responseText))},o&&(e.ontimeout=o),e.send(r)}},{key:"parseJSON",value:function(e){if(!e||""===e)return null;try{return JSON.parse(e)}catch(t){return console&&console.log("failed to parse JSON response",e),null}}},{key:"serialize",value:function(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var s=t?"".concat(t,"[").concat(r,"]"):r,o=e[r];"object"===i(o)?n.push(this.serialize(o,s)):n.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}return n.join("&")}},{key:"appendParams",value:function(e,t){if(0===Object.keys(t).length)return e;var n=e.match(/\?/)?"&":"?";return"".concat(e).concat(n).concat(this.serialize(t))}}]),e}();R.states={complete:4};var _=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e);var r=i.events||{state:"presence_state",diff:"presence_diff"};this.state={},this.pendingDiffs=[],this.channel=t,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(r.state,function(t){var i=n.caller,r=i.onJoin,s=i.onLeave,o=i.onSync;n.joinRef=n.channel.joinRef(),n.state=e.syncState(n.state,t,r,s),n.pendingDiffs.forEach(function(t){n.state=e.syncDiff(n.state,t,r,s)}),n.pendingDiffs=[],o()}),this.channel.on(r.diff,function(t){var i=n.caller,r=i.onJoin,s=i.onLeave,o=i.onSync;n.inPendingSyncState()?n.pendingDiffs.push(t):(n.state=e.syncDiff(n.state,t,r,s),o())})}return d(e,[{key:"onJoin",value:function(e){this.caller.onJoin=e}},{key:"onLeave",value:function(e){this.caller.onLeave=e}},{key:"onSync",value:function(e){this.caller.onSync=e}},{key:"list",value:function(t){return e.list(this.state,t)}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:"syncState",value:function(e,t,n,i){var r=this,s=this.clone(e),o={},l={};return this.map(s,function(e,n){t[e]||(l[e]=n)}),this.map(t,function(e,t){var n=s[e];if(n){var i=t.metas.map(function(e){return e.phx_ref}),a=n.metas.map(function(e){return e.phx_ref}),d=t.metas.filter(function(e){return 0>a.indexOf(e.phx_ref)}),c=n.metas.filter(function(e){return 0>i.indexOf(e.phx_ref)});d.length>0&&(o[e]=t,o[e].metas=d),c.length>0&&(l[e]=r.clone(n),l[e].metas=c)}else o[e]=t}),this.syncDiff(s,{joins:o,leaves:l},n,i)}},{key:"syncDiff",value:function(e,t,n,i){var r=t.joins,l=t.leaves,a=this.clone(e);return n||(n=function(){}),i||(i=function(){}),this.map(r,function(e,t){var i=a[e];if(a[e]=t,i){var r,l=a[e].metas.map(function(e){return e.phx_ref}),d=i.metas.filter(function(e){return 0>l.indexOf(e.phx_ref)});(r=a[e].metas).unshift.apply(r,function(e){if(Array.isArray(e))return o(e)}(d)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(d)||s(d)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}n(e,i,t)}),this.map(l,function(e,t){var n=a[e];if(n){var r=t.metas.map(function(e){return e.phx_ref});n.metas=n.metas.filter(function(e){return 0>r.indexOf(e.phx_ref)}),i(e,n,t),0===n.metas.length&&delete a[e]}}),a}},{key:"list",value:function(e,t){return t||(t=function(e,t){return t}),this.map(e,function(e,n){return t(e,n)})}},{key:"map",value:function(e,t){return Object.getOwnPropertyNames(e).map(function(n){return t(n,e[n])})}},{key:"clone",value:function(e){return JSON.parse(JSON.stringify(e))}}]),e}(),O=function(){function e(t,n){l(this,e),this.callback=t,this.timerCalc=n,this.timer=null,this.tries=0}return d(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.tries=e.tries+1,e.callback()},this.timerCalc(this.tries+1))}}]),e}()}])},e.exports=t()},82923:(e,t,n)=>{"use strict";n.d(t,{F:()=>r,H:()=>i});var[i,r]=(0,n(37754).q)({name:"BreadcrumbStylesContext",errorMessage:"useBreadcrumbStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Breadcrumb />\" "})},67265:(e,t,n)=>{"use strict";n.d(t,{Q:()=>h});var i=n(82923),r=n(11976),s=n(76704),o=n(63552),l=n(11403),a=n(74108),d=n(31171),c=n(14041),u=n(31085),h=(0,o.R)(function(e,t){let n=(0,l.o5)("Breadcrumb",e),{children:o,spacing:h="0.5rem",separator:x="/",className:p,listProps:m,...f}=(0,a.MN)(e),g=(0,s.a)(o),j=g.length,v=g.map((e,t)=>(0,c.cloneElement)(e,{separator:x,spacing:h,isLastChild:j===t+1})),b=(0,r.cx)("chakra-breadcrumb",p);return(0,u.jsx)(d.B.nav,{ref:t,"aria-label":"breadcrumb",className:b,__css:n.container,...f,children:(0,u.jsx)(i.H,{value:n,children:(0,u.jsx)(d.B.ol,{className:"chakra-breadcrumb__list",...m,__css:{display:"flex",alignItems:"center",...n.list},children:v})})})});h.displayName="Breadcrumb"},91047:(e,t,n)=>{"use strict";n.d(t,{J:()=>h});var i=n(6373),r=n(82923),s=n(63552),o=n(31171),l=n(31085),a=(0,s.R)(function(e,t){let{spacing:n,...i}=e,s={mx:n,...(0,r.F)().separator};return(0,l.jsx)(o.B.span,{ref:t,role:"presentation",...i,__css:s})});a.displayName="BreadcrumbSeparator";var d=n(76704),c=n(11976),u=n(14041),h=(0,s.R)(function(e,t){let{isCurrentPage:n,separator:s,isLastChild:h,spacing:x,children:p,className:m,...f}=e,g=(0,d.a)(p).map(e=>e.type===i.w?(0,u.cloneElement)(e,{isCurrentPage:n}):e.type===a?(0,u.cloneElement)(e,{spacing:x,children:e.props.children||s}):e),j={display:"inline-flex",alignItems:"center",...(0,r.F)().item},v=(0,c.cx)("chakra-breadcrumb__list-item",m);return(0,l.jsxs)(o.B.li,{ref:t,className:v,...f,__css:j,children:[g,!h&&(0,l.jsx)(a,{spacing:x,children:s})]})});h.displayName="BreadcrumbItem"},6373:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var i=n(82923),r=n(63552),s=n(31171),o=n(11976),l=n(31085),a=(0,r.R)(function(e,t){let{isCurrentPage:n,as:r,className:a,href:d,...c}=e,u=(0,i.F)(),h={ref:t,as:r,className:(0,o.cx)("chakra-breadcrumb__link",a),...c};return n?(0,l.jsx)(s.B.span,{"aria-current":"page",__css:u.link,...h}):(0,l.jsx)(s.B.a,{__css:u.link,href:d,...h})});a.displayName="BreadcrumbLink"},65513:(e,t,n)=>{"use strict";n.d(t,{b:()=>a});var i=n(59577),r=n(11976),s=n(63552),o=n(31171),l=n(31085),a=(0,s.R)(function(e,t){let{className:n,...s}=e,a=(0,i.Q)();return(0,l.jsx)(o.B.div,{ref:t,className:(0,r.cx)("chakra-card__body",n),__css:a.body,...s})})},59577:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r,s:()=>i});var[i,r]=(0,n(99740).Wh)("Card")},11395:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(59577),r=n(11976),s=n(63552),o=n(74108),l=n(11403),a=n(31171),d=n(31085),c=(0,s.R)(function(e,t){let{className:n,children:s,direction:c="column",justify:u,align:h,...x}=(0,o.MN)(e),p=(0,l.o5)("Card",e);return(0,d.jsx)(a.B.div,{ref:t,className:(0,r.cx)("chakra-card",n),__css:{display:"flex",flexDirection:c,justifyContent:u,alignItems:h,position:"relative",minWidth:0,wordWrap:"break-word",...p.container},...x,children:(0,d.jsx)(i.s,{value:p,children:s})})})},38983:e=>{"use strict";e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')}}]);
//# sourceMappingURL=9406-923a6211e2dc027d.js.map