"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3143],{20728:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(12109),o=r(92293),i=r(69670),a=r(54260);function s(e,t){if((0,a.A)(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var r="years"in t?(0,o.A)(t.years):0,s="months"in t?(0,o.A)(t.months):0,l="weeks"in t?(0,o.A)(t.weeks):0,d="days"in t?(0,o.A)(t.days):0,c="hours"in t?(0,o.A)(t.hours):0,u="minutes"in t?(0,o.A)(t.minutes):0,m="seconds"in t?(0,o.A)(t.seconds):0,p=(0,i.A)(e),x=s||r?function(e,t){(0,a.A)(2,arguments);var r=(0,i.A)(e),n=(0,o.A)(t);if(isNaN(n))return new Date(NaN);if(!n)return r;var s=r.getDate(),l=new Date(r.getTime());return(l.setMonth(r.getMonth()+n+1,0),s>=l.getDate())?l:(r.setFullYear(l.getFullYear(),l.getMonth(),s),r)}(p,s+12*r):p;return new Date((d||l?(0,n.A)(x,d+7*l):x).getTime()+1e3*(m+60*(u+60*c)))}},27732:(e,t,r)=>{r.d(t,{n:()=>G,j:()=>V});var n=r(31085),o=r(40173),i=r(25420),a=r(90290),s=r(35687),l=r(61778),d=r(80853),c=r(94259),u=r(20501),m=r(24221),p=r(14041),x=r(64130),f=r(64225),h=r(5933),g=r(44507),b=r(22544),y=r(92667),v=r(86724),j=r(30503),C=r(69086),w=r(95640),A=r(35002),k=r(92405),N=r(39286),R=r(3706),E=r(77563),M=r(20728),S=r(26253),P=r(14979),D=r(10458),_=r(57882),z=r(10628),O=r(88679),I=r(31941),T=r(14691);let U=[{Component:()=>{let e=(0,A.u)("outageButterbar");if(!e.enabled)return null;let{header:t,text:r,buttonLink:o,buttonText:i,key:a,pathnameRegexp:s}=e;return(0,n.jsx)(V,{definition:{key:a,header:t,text:r,buttonText:i,buttonLink:o,conditions:()=>!s||null!==window.location.pathname.match(new RegExp(s))}})},key:"outage-butterbar"},{Component:()=>"NORMAL"===(0,A.u)("openAiStatus")?null:(0,n.jsx)(V,{definition:{key:"ai-service-status",header:(0,n.jsx)(w.x6,{id:"1Agl06"}),text:(0,n.jsx)(w.x6,{id:"cCl6WD"}),ttl:86400,conditions:()=>(0,k.a5)(window.location.pathname)}}),key:"ai-service-status-butterbar"},{Component:()=>{var e,t,r;let{user:o,currentWorkspace:i}=(0,_.ur)(),{subscription:a,product:s}=(0,z.I)(),{launchFailedPaymentFlow:l,failedPaymentFlowEnabled:d}=(0,S.yf)({subscription:a,workspace:i,autoLaunch:!1});if(!a||!s)return null;let{name:c,dontChurnMessage:u}=(0,O.Ok)()[s],{status:m,expirationTime:p,id:x}=a,f=(0,P.Yq)(p,"MMMM do, yyyy"),h=(null==a?void 0:null===(e=a.createdByUser)||void 0===e?void 0:e.id)===(null==o?void 0:o.id),g=(0,I.AY)(),b=p>Date.now();if(!("unpaid"===m||"past_due"===m)&&!b)return null;let y=g&&(h||!(null==a?void 0:a.createdByUser))?(0,n.jsx)(w.x6,{id:"velw1T",values:{expirationFormatted:f,GAMMA_PROPER_NOUN:N.On,productName:c},components:{0:(0,n.jsx)(R.N,{href:d?void 0:g,onClick:d?l:void 0,isExternal:!0,textDecoration:"underline"})}}):(0,n.jsx)(w.x6,{id:"9aBOfk",values:{expirationFormatted:f,GAMMA_PROPER_NOUN:N.On,productName:c,0:null===(t=a.createdByUser)||void 0===t?void 0:t.displayName,1:null===(r=a.createdByUser)||void 0===r?void 0:r.email},components:{0:(0,n.jsx)("b",{}),1:(0,n.jsx)("b",{})}});return(0,n.jsx)(V,{definition:{key:"payment-overdue-".concat(x),header:(0,n.jsx)(w.x6,{id:"Lac1Vj",values:{GAMMA_PROPER_NOUN:N.On,productName:c}}),text:(0,n.jsxs)(n.Fragment,{children:[u," ",y]}),buttonText:(0,n.jsx)(w.x6,{id:"WLvqZR"}),buttonLink:d?void 0:g,buttonOnClick:d?l:void 0}})},key:"payment-overdue-butterbar"},{Component:()=>{let{subscription:e,openUpsellModal:t}=(0,z.I)();if(!e)return null;let{status:r,expirationTime:o,id:i}=e;if(!(new Date>(0,E.A)(o)&&new Date<(0,M.A)((0,E.A)(o),{days:10})))return null;let a=()=>t({segmentEvent:D.VV.GAMMA_PRO_UPSELL_SUBSCRIPTION_EXPIRED_BUTTERBAR}),s=(0,n.jsx)(R.N,{onClick:a,isExternal:!0,textDecoration:"underline",children:(0,n.jsx)(w.x6,{id:"mj68q/"})});return(0,n.jsx)(V,{definition:{key:"subscription-expired-".concat(i),header:(0,n.jsx)(w.x6,{id:"0hHZEf",values:{GAMMA_PROPER_NOUN:N.On}}),text:(0,n.jsxs)(n.Fragment,{children:["unpaid"===r||"past_due"===r?(0,n.jsx)(w.x6,{id:"QdgXJv"}):""," ",s]}),buttonText:(0,n.jsx)(w.x6,{id:"kwkhPe"}),buttonOnClick:a}})},key:"subscription-expired-butterbar"},{Component:()=>{var e,t,r;let{user:o}=(0,_.ur)(),{subscription:i,product:a}=(0,z.I)();if(!i||!a)return null;let{status:s,expirationTime:l,id:d,cancellationRequestedTime:c}=i;if(!("canceled"!=s&&c&&new Date<(0,E.A)(l)&&new Date>(0,M.A)((0,E.A)(l),{days:-7})))return null;let u=(null==i?void 0:null===(e=i.createdByUser)||void 0===e?void 0:e.id)===(null==o?void 0:o.id),m=(0,I.AY)(),p=(0,P.Yq)(l,"MMMM do, yyyy"),{name:x,dontChurnMessage:f}=(0,O.Ok)()[a],h=!u&&(null==i?void 0:i.createdByUser)?(0,n.jsx)(w.x6,{id:"z4DeyC",values:{expirationFormatted:p,GAMMA_PROPER_NOUN:N.On,productName:x,0:null===(t=i.createdByUser)||void 0===t?void 0:t.displayName,1:null===(r=i.createdByUser)||void 0===r?void 0:r.email},components:{0:(0,n.jsx)("b",{}),1:(0,n.jsx)("b",{})}}):(0,n.jsx)(w.x6,{id:"qP91+f",values:{expirationFormatted:p,GAMMA_PROPER_NOUN:N.On,productName:x},components:{0:(0,n.jsx)(R.N,{href:m,isExternal:!0,textDecoration:"underline"})}});return(0,n.jsx)(V,{definition:{key:"subscription-ending-soon-".concat(d),header:(0,n.jsx)(w.x6,{id:"66dedh",values:{GAMMA_PROPER_NOUN:N.On,productName:x}}),text:(0,n.jsxs)(n.Fragment,{children:[f," ",h]}),buttonText:(0,n.jsx)(w.x6,{id:"3jHA5d"}),buttonLink:m}})},key:"upcoming-cancellation-butterbar"},{key:"tablet-browser-warning",header:(0,n.jsx)(w.x6,{id:"JAtlMu",values:{GAMMA_PROPER_NOUN:N.On}}),text:(0,n.jsx)(w.x6,{id:"9JlCFS",values:{GAMMA_PROPER_NOUN:N.On}}),conditions:()=>(0,g.Pg)(),dismissKey:T.E.lastDismissedPreferredBrowserMessage},{key:"desktop-browser-warning",header:(0,n.jsx)(w.x6,{id:"3S0+Wy",values:{GAMMA_PROPER_NOUN:N.On}}),text:(0,n.jsx)(w.x6,{id:"Tf7VpJ"}),conditions:()=>F()&&(0,g.bh)(),dismissKey:T.E.lastDismissedPreferredBrowserMessage}],F=()=>(0,g.z3)()||!(0,g.H8)()&&!(0,g.nr)()&&!(0,g.yE)(),G=e=>{let{isViewOnly:t}=e,r=(0,y.En)(),a=(0,f.GV)(h.VJ);if(t||!r||(0,g.rA)()||b.D1||(0,j.NF)()||a)return null;let s=U.map(e=>"Component"in e?(0,n.jsx)(e.Component,{},e.key):(0,n.jsx)(V,{definition:e},e.key));return(0,n.jsx)(o.Z,{children:(0,n.jsx)(i.s,{"data-testid":"butterbar",direction:"column",top:2,pos:"absolute",zIndex:"toast",sx:{"> *:not(:first-child)":{display:"none"}},children:s})})},V=e=>{let{definition:t}=e,r=(0,x.fW)(),{key:o,dismissKey:f="butterbar-dismiss-".concat(o),header:h,text:g,buttonText:b,buttonLink:y,buttonOnClick:j=y?()=>window.open(y,"_blank"):void 0,conditions:w,ttl:A}=t,[k,N]=(0,v.M)(f,!1);if((0,p.useEffect)(()=>{A&&k&&new Date().getTime()-new Date(k).getTime()>1e3*A&&C.x.removeItem(f)},[f,k,A]),w&&!w()||k)return null;let R=b&&j;return(0,n.jsxs)(a.F,{gap:4,position:"fixed",insetStart:"50%",transform:"translateX(".concat(r?"50%":"-50%",")"),shadow:"lg",width:{base:"calc(100% - 1rem)",md:"auto"},flexDirection:{base:"column",lg:"row"},alignItems:{base:"flex-start",lg:"center"},colorScheme:"highlight-flamingo",variant:"solid",children:[(0,n.jsxs)(s.B,{spacing:0,flex:1,pe:{base:12,lg:0},children:[(0,n.jsx)(l.E,{fontWeight:"bold",children:h}),(0,n.jsx)(l.E,{opacity:"0.7",fontSize:"xs",children:g})]}),R&&(0,n.jsx)(d.$,{flexShrink:0,variant:"plain",size:"sm",rightIcon:y?(0,n.jsx)(m.g,{icon:u.Ju_}):void 0,onClick:j,children:b}),(0,n.jsx)(i.s,{alignSelf:"flex-start",position:{base:"absolute",lg:"static"},insetEnd:4,top:4,children:(0,n.jsx)(c.J,{variant:"solid-alert",size:"sm",onClick:()=>{N(String(new Date))}})})]})}},5577:(e,t,r)=>{r.d(t,{B:()=>A,K:()=>k});var n=r(31085),o=r(25420),i=r(2600),a=r(80853),s=r(62230),l=r(20501),d=r(24221),c=r(95640),u=r(29524),m=r(73758),p=r.n(m),x=r(14041),f=r(64225),h=r(58599),g=r(65053),b=r(38888),y=r(20869),v=r(40214),j=r(23056),C=r(61644);let w={...g.q,...v.X,...b.X0},A="ai-card-editor",k=(0,x.memo)(e=>{let{...t}=e,r=(0,f.GV)(y.n7),s=(0,u.hG)({...t,extensions:j.CJ,editorProps:{attributes:{"data-testid":"ai-content-editor"}}});s&&(s.editorId=A);let m=(0,f.GV)(y.qo),g=(0,f.GV)(y.yR);(0,x.useEffect)(()=>{s&&s.setEditable(!r)},[r,s]);let b=(0,x.useCallback)(()=>{null==s||s.chain().insertContentAt(null==s?void 0:s.state.doc.content.size,{type:"card",content:[{type:"paragraph"}]}).selectInsertedNode().run()},[s]);return(0,C.X)(s),(0,n.jsxs)(o.s,{flex:"1",direction:"column",sx:w,p:{base:2,md:3},children:[(0,n.jsx)(h.$Z,{editor:s,style:{wordBreak:"break-word",display:"flex",flexDirection:"column"}}),r&&(0,n.jsx)(i.T,{children:p()(m-g).map(e=>(0,n.jsx)(N,{},e))}),!r&&(0,n.jsx)(a.$,{boxShadow:"none",leftIcon:(0,n.jsx)(d.g,{icon:l.QLR,fixedWidth:!0}),onClick:b,children:(0,n.jsx)(c.x6,{id:"sFY+gw"})})]})});k.displayName="AICardEditor";let N=()=>(0,n.jsx)(s.E,{height:14,width:"100%",borderRadius:"md"})},40214:(e,t,r)=>{r.d(t,{X:()=>i});var n=r(68062),o=r(81700);let i={".ProseMirror":{flex:1,...n.F,...o.p},".block":{my:"0.5rem","&.first-block":{mt:"0px !important"},"&.last-block":{mb:"0px !important"}},".block-heading":{fontWeight:"bold",lineHeight:"1.125",_first:{mt:0}},h1:{fontSize:"1.4em"},h2:{fontSize:"1.2em"},h3:{fontSize:"1.1em"},"a[href]":{color:"var(--chakra-colors-trueblue-600)",textDecoration:"underline"}}},23056:(e,t,r)=>{r.d(t,{CJ:()=>eS,a4:()=>eM,ZC:()=>eP});var n=r(13236),o=r(43504),i=r(1366),a=r(72851),s=r(83683),l=r(87307),d=r(1144),c=r(98213),u=r(35864),m=r(67291),p=r(28396),x=r(15657),f=r(47687),h=r(56219),g=r(65208),b=r(46291),y=r(99364),v=r(33795),j=r(72809),C=r(12127),w=r(79893),A=r(87643),k=r(97404),N=r(44498),R=r(4977),E=r(952),M=r(29362),S=r(39933),P=r(58599),D=r(95580),_=r(17539),z=r(31085),O=r(80532),I=r(14285),T=r(27930);let U=e=>{let{node:t}=e,{uploadStatus:r}=t.attrs;return(0,z.jsx)(P.VR,{children:(0,z.jsxs)(O.az,{"data-selection-ring":!0,pos:"relative",borderRadius:"md",w:"fit-content",css:{"--media-maxH":"8em"},children:[r===R.A.Error?(0,z.jsx)(T.Pf,{w:"12em",h:"6em"}):(0,z.jsx)(I.FQ,{imageAttrs:t.attrs,"data-drag-handle":!0}),r===R.A.Uploading&&(0,z.jsx)(T.Td,{}),r==R.A.Error&&(0,z.jsx)(T.Hy,{})]})})},F=N.Ay.extend({selectable:!0,draggable:!0,expandable:!0,addNodeView:()=>(0,P.gu)(U,{update:M.z0}),renderHTML(e){let{node:t}=e,r=t.attrs,{src:n,tempUrl:o,uploadStatus:i}=r;return["img",{src:i===R.A.Error?"":n||((null==o?void 0:o.startsWith("http"))?o:""),alt:(0,E.ve)(r),meta:JSON.stringify(r.meta),resize:JSON.stringify(r.resize)}]},parseHTML:()=>[{tag:"img[src]",getAttrs:e=>{let t=e.getAttribute("src");return(0,_.md)(t)?{src:t}:{tempUrl:t}}}],addAttributes:()=>({id:(0,S.e)(C.z),src:{},tempUrl:{},uploadStatus:{},meta:{...(0,D.tb)("meta")},resize:{...(0,D.tb)("resize")}})});var G=r(98380);let V=e=>{let{selected:t}=e;return(0,z.jsx)(P.VR,{children:(0,z.jsx)(O.az,{pos:"relative",draggable:"true","data-drag-handle":!0,cursor:"grab",contentEditable:"false",position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",height:"1.25rem",color:t?"trueblue.400":"gray.400",lineHeight:"1rem",fontWeight:"800",children:"---"})})},B=/^(---|___|—-)/,L=n.bP.create({name:"sectionBreak",group:"block",atom:!0,selectable:!0,draggable:!0,parseHTML:()=>[{tag:"hr"}],renderHTML(e){let{HTMLAttributes:t}=e;return["hr",(0,n.KV)(t)]},addNodeView:()=>(0,P.gu)(V),addInputRules(){return[(0,G.wN)({find:B,type:this.type})]}});var W=r(42215),H=r(91100),Y=r(19534),J=r(81570),K=r(73686);let X=new J.k_({props:{decorations:e=>{let{doc:t}=e,r=[],n=1;return t.descendants((e,t)=>{"card"===e.type.name&&(r.push(K.NZ.node(t,t+e.nodeSize,{},{number:n,isSectionCardPluginDecoration:!0})),n++)}),0==r.length?K.zF.empty:K.zF.create(t,r)}}}),q=e=>{let t=e.find(e=>e.spec.isSectionCardPluginDecoration);return t?t.spec:{number:0,isSectionCardPluginDecoration:!0}};var Z=r(62313),Q=r(61778),$=r(25420),ee=r(9021),et=r(63341),er=r(18528),en=r(40173),eo=r(72821),ei=r(33683),ea=r(81575),es=r(20501),el=r(24221),ed=r(9104),ec=r(95640),eu=r(12327),em=r(14041),ep=r(88380),ex=r(20869),ef=r(64225),eh=r(44507),eg=r(63723);let eb={r:235,g:248,b:255},ey={r:255,g:245,b:255},ev={r:107,g:70,b:193},ej={r:43,g:108,b:176},eC=(e,t,r,n)=>n?{bg:"gray.100",text:"gray.600"}:{bg:(0,eg.tV)(eb,ey,e/Math.min(r,t)),text:(0,eg.tV)(ej,ev,e/Math.min(r,t))},ew=e=>{let{decorations:t,editor:r,getPos:n}=e,{number:o}=q(t),i=(0,ef.GV)(ex.yR),{maxCards:a,canUpgrade:s}=(0,ep.Zq)(),l=o>a,d=o===i,c=eC(o,i,a,l),u=(0,em.useCallback)(()=>{let e=n(),t=r.view.state.doc.nodeAt(e);if(!t){console.error("[SectionCardView] Cannot append card. Node unknown");return}let o=e+t.nodeSize;r.chain().insertContentAt(o,{type:"card",content:[{type:"paragraph"}]}).focus().selectInsertedNode().run()},[r,n]),m=(0,em.useCallback)(()=>{r.commands.selectNodeAtPos(n())},[r,n]),p=(0,em.useCallback)(()=>{let e=n(),t=r.view.state.doc.nodeAt(e);if(!t){console.error("[SectionCardView] Cannot delete card. Node unknown");return}r.chain().deleteRange({from:e,to:e+t.nodeSize}).selectInsideNodeAtPos(e).focus().run()},[r,n]),x=(0,em.useCallback)(()=>{let e=n();if(!r.view.state.doc.nodeAt(e)){console.error("[SectionCardView] Cannot focus card. Node unknown");return}r.chain().selectInsideNodeAtPos(e).focus().run()},[r,n]),f=(0,A.DM)(t);return(0,z.jsxs)(P.VR,{role:"group",children:[(0,z.jsxs)(Z.z,{className:"card",border:"1px solid",borderColor:f?"var(--chakra-ring-color)":"blackAlpha.100",shadow:"sm",_hover:{shadow:"md"},transitionProperty:"box-shadow",transitionDuration:"normal",bg:"white",borderRadius:"md",spacing:0,align:"stretch","data-selection-ring":!0,pos:"relative",my:3,mt:1===o?0:void 0,role:"group",children:[!(0,eh.Xb)()&&(0,z.jsx)(O.az,{position:"absolute",color:c.text,zIndex:"1",top:"3.5",insetStart:"0",pointerEvents:"none",opacity:"0",_groupHover:{opacity:.75},children:(0,z.jsx)(el.g,{icon:es.IMq,fixedWidth:!0})}),l&&(0,z.jsx)(O.jl,{size:"6px",position:"absolute",zIndex:"2",top:"1.5",left:"1.5",bg:"sunglow.400"}),(0,z.jsx)(ed.Tz,{label:l&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(Q.E,{children:[(0,z.jsx)(ec.x6,{id:"rayOuP"})," "]}),(0,z.jsx)(Q.E,{color:"gray.400",children:s?(0,z.jsx)(ec.x6,{id:"W8sobv",values:{MAX_CARDS_PRO:ep.t}}):(0,z.jsx)(ec.x6,{id:"yLG7qf"})})]}),placement:"top",children:(0,z.jsx)($.s,{dir:"column",align:"start",justify:"center",pe:1,ps:2,py:{base:3.5,md:4},w:12,cursor:l?"help":"grab","data-drag-handle":!0,contentEditable:!1,onClick:m,fontSize:o>=100?"xs":"sm",fontFamily:"mono",fontWeight:"600",borderLeftRadius:"inherit",userSelect:"none",transitionProperty:"filter",transitionDuration:"normal",_hover:{filter:"brightness(0.95)"},bg:c.bg,color:c.text,children:o})}),(0,z.jsx)(O.az,{p:{base:"0.75em",md:"1em"},flex:1,color:l?"gray.600":void 0,position:"relative",children:(0,z.jsx)(P.$p,{})}),(0,z.jsx)(ek,{addCard:u,focusCard:x,deleteCard:p})]}),!(0,eh.Xb)()&&!d&&(0,z.jsx)(eA,{addCard:u})]})},eA=(0,em.memo)(e=>{let{addCard:t}=e;return(0,z.jsxs)($.s,{w:"100%",h:1,borderRadius:"md",bg:"trueblue.200",transitionProperty:"opacity",transitionDuration:"slow",opacity:0,_hover:{opacity:1},_focusWithin:{opacity:1},contentEditable:!1,my:1,dir:"column",align:"center",justify:"center",pos:"absolute",transform:"translateY(-0.75rem)",zIndex:1,children:[(0,z.jsx)(O.az,{pos:"absolute",top:-2,bottom:-2,insetStart:0,insetEnd:0}),(0,z.jsx)(ed.Tz,{placement:"top",label:eu.Ru._({id:"sFY+gw"}),shortcut:"---",children:(0,z.jsx)(ee.K,{pos:"absolute",variant:"solid",icon:(0,z.jsx)(el.g,{icon:es.QLR}),"aria-label":"Add card",isRound:!0,size:"xs",onClick:t,tabIndex:-1})})]})});eA.displayName="CardDivider";let ek=(0,em.memo)(e=>{let{addCard:t,deleteCard:r,focusCard:n}=e;return(0,z.jsx)(Z.z,{pe:{base:2,md:2.5},pt:{base:2,md:3},alignSelf:"start",children:(0,eh.Xb)()?(0,z.jsx)(et.W,{children:e=>{let{onClose:o}=e;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(er.I,{onClick:n,as:ee.K,colorScheme:"gray",variant:"ghost",size:"sm",icon:(0,z.jsx)(el.g,{icon:es.Dwc,fixedWidth:!0})}),(0,z.jsx)(en.Z,{children:(0,z.jsxs)(eo.c,{zIndex:"tooltip",children:[(0,z.jsx)(ei.D,{onClick:()=>{o(),t()},icon:(0,z.jsx)(el.g,{icon:es.JHe,fixedWidth:!0}),children:(0,z.jsx)(ec.x6,{id:"90n2YU"})}),(0,z.jsx)(ea.N,{}),(0,z.jsx)(ei.D,{onClick:()=>{r(),o()},color:"red",icon:(0,z.jsx)(el.g,{icon:es.sjs,fixedWidth:!0}),children:(0,z.jsx)(ec.x6,{id:"nabda1"})})]})})]})}}):(0,z.jsx)(ed.Tz,{label:(0,z.jsx)(ec.x6,{id:"nabda1"}),placement:"top",children:(0,z.jsx)(ee.K,{colorScheme:"gray",variant:"ghost",opacity:"0",_groupHover:{opacity:1},_focus:{opacity:1},transitionProperty:"opacity",transitionDuration:"slow",size:"sm",onClick:r,"aria-label":eu.Ru._({id:"nabda1"}),icon:(0,z.jsx)(el.g,{icon:es.sjs,fixedWidth:!0})})})})});ek.displayName="CardActions";let eN=/^(---|___|—-)$/,eR=n.bP.create({name:"card",content:"block+",selectable:!0,draggable:!0,isolating:!0,parseHTML:()=>[{tag:"section"}],renderHTML(e){let{HTMLAttributes:t}=e;return["section",(0,n.KV)(t),0]},addNodeView:()=>(0,P.gu)(ew),addProseMirrorPlugins:()=>[X],addInputRules:()=>[new n.fV({find:eN,handler:e=>{let{state:t,range:r}=e,{tr:n}=t;(0,W.S)({tr:n.deleteRange(r.from,r.to),dispatch:!0})}})],addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.mergeCardsOnDelete(!1),Delete:()=>this.editor.commands.mergeCardsOnDelete(!0),Tab:()=>this.editor.commands.selectNextCard(!0),"Shift-Tab":()=>this.editor.commands.selectNextCard(!1)}},addCommands:()=>({selectNextCard:e=>t=>{let{state:r,dispatch:o,commands:i}=t;if(!o)return!0;let{selection:a}=r,s=(0,n.KP)(Y.jg)(a);if(!s||!a.empty)return!1;let l=r.doc.resolve(s.pos),d=l.index();if(e){if(d===l.parent.childCount-1)return!1;i.selectInsideNodeAtPos(s.pos+s.node.nodeSize)}else{if(0===d)return!1;let e=l.posAtIndex(d-1);i.selectInsideNodeAtPos(e)}return!0},mergeCardsOnDelete:e=>t=>{let{tr:r,state:o,dispatch:i}=t;if(!i)return!0;let{selection:a}=o,s=(0,n.KP)(Y.jg)(a);if(!s||!a.empty)return!1;try{if(!(0,H.jF)(a,e))return!1;return e?(0,H.Uc)(s.pos,r,o):(0,H.c9)(s.pos,r)}catch(e){return console.debug("[CardCommands] mergeCardsOnDelete failed",e),!1}}})}),eE=[d.B,f.a,m.f,p.E,b.Hf,l.D,o.yN,x.z,c.J2,u.Ay.configure({openOnClick:!1}),v.B8,y.D,j.R,k.a,h.B,s.v,a.Q.configure({color:"var(--chakra-colors-trueblue-200)",width:3,class:"ProseMirror-dropcursor"}),A.bU,F,w.Q8,C.p],eM=[...eE,L,i.y.extend({content:"block+"})],eS=[...eE,eR,i.y.extend({content:"card+"})],eP=(e,t)=>{let r=(0,n._w)("freeform"===t?eM:eS);return"structured"===t&&(e=e.split("<hr>").map(e=>"<section>".concat(e,"</section>")).join("\n")),(0,g.S)(e,r)}},61644:(e,t,r)=>{r.d(t,{X:()=>a});var n=r(14041),o=r(91417),i=r(57882);let a=e=>{let{currentWorkspace:t}=(0,i.ur)(),r=null==t?void 0:t.id;(0,n.useEffect)(()=>{e&&!e.isDestroyed&&r&&e.commands.initializeUploadExtension(r)},[e,r]),(0,o.W)(e)}},50080:(e,t,r)=>{r.d(t,{X0:()=>o,_2:()=>a,lW:()=>i});var n=r(14041);let o=["createWithAI","createGenerate","legacyGuidedMode","createPaste","createImport","promptEditor","home"],i=(0,n.createContext)({goToScreen:()=>{throw Error("goToScreen not available. Did you forget to wrap your component in RouterNavigationContext?")},onDocGenerationLoaded:()=>{},navEnabled:!0,webpageOnly:!1,skipThemeStep:!1}),a=()=>(0,n.useContext)(i)},37908:(e,t,r)=>{r.d(t,{Tx:()=>a,pY:()=>s});var n=r(31085),o=r(14041);let i=o.createContext({});function a(){return(0,o.useContext)(i)}let s=e=>{let{children:t}=e,r=o.useRef();return(0,n.jsx)(i.Provider,{value:{setEditorInstance:e=>{r.current=e},getEditorInstance:()=>r.current},children:t})}},60434:(e,t,r)=>{r.d(t,{R7:()=>j,T7:()=>v,b2:()=>h,jQ:()=>f,lF:()=>b,ow:()=>w,pm:()=>g,sC:()=>y});var n=r(14041),o=r(50080),i=r(37908),a=r(50877),s=r(37049),l=r(64225),d=r(39848),c=r(43125),u=r(45591),m=r(5577),p=r(23056),x=r(20869);let f=()=>{let e=(0,l.CU)(),t=(0,l.jL)(),[r]=(0,a.zb6)();return(0,n.useCallback)(async()=>{var n;let o=(0,x.cK)(e.getState()).id,i=null===(n=(await r({variables:{docGenerateInputId:o,input:{}}})).data)||void 0===n?void 0:n.updateDocGenerationDraftInput;i&&i.draftInput&&o!==i.draftInput.id&&t((0,x.Jv)(i))},[t,e,r])},h=e=>{var t;let r=(0,l.CU)(),o=(0,l.jL)(),[i]=(0,a.zb6)(),s=(0,n.useCallback)(async e=>{var t;let n=(0,x.gG)(r.getState()),a=(0,x.nY)(r.getState());if(!n||!a)return;let{format:s,...l}=e,d={format:s,...l},c=(0,x._y)(r.getState());d.settings&&(d.settings={...c,...d.settings});let u=(0,x.nY)(r.getState()),m=null===(t=(await i({variables:{docGenerateInputId:a,input:d}})).data)||void 0===t?void 0:t.updateDocGenerationDraftInput;m&&m.draftInput&&u!==m.draftInput.id&&o((0,x.Jv)(m))},[o,r,i]),d=(0,u.lW)(s,null!==(t=null==e?void 0:e.debounce)&&void 0!==t?t:0);return(0,n.useCallback)(function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];o((0,x.Yo)(e)),t&&d(e)},[d,o])},g=()=>{let e=h(),t=(0,l.GV)(x.wS),[r,i]=j("styleTemplate"),a=(0,n.useCallback)(function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=(0,c.zY)(t).styleTemplates[0];e({format:t,settings:{styleTemplate:n}},r)},[e]),{webpageOnly:s}=(0,o._2)();return(0,n.useEffect)(()=>{s&&"webpage"!==t&&a("webpage")},[t,s,a,r,i]),{format:t,styleTemplate:r,setFormat:a,setStyleTemplate:i}},b=()=>{let e=h({debounce:500}),t=(0,n.useCallback)(function(t){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e({prompt:t},r)},[e]);return[(0,l.GV)(x.fg),t]},y=()=>{let[e,t]=C("themeId"),r=(0,l.GV)(x.u$),o=(0,l.jL)();return(0,n.useEffect)(()=>{e&&r.length>0&&!r.includes(e)&&o((0,x._W)([e,...r]))},[e,r,o]),[e,t]},v=()=>{let[e,t]=C("imageModel"),[r,o]=(0,s.ZQ)();return[(0,s.R5)(e),(0,n.useCallback)(e=>{t(e),o(e)},[t,o])]},j=(e,t)=>{if("imageModel"===e)throw Error("the imageModel generatorSetting must be loaded with useGeneratorAiImageModel");return C(e,t)},C=(e,t)=>{let r=h(t),o=(0,n.useCallback)(function(t){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];r({settings:{[e]:t}},n)},[e,r]);return[(0,l.GV)((0,x.Wt)(e)),o]},w=e=>{let t=h(e),{getEditorInstance:r}=(0,i.Tx)();return(0,n.useCallback)(function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=arguments.length>2?arguments[2]:void 0,i=r();if(i){let t=i.editorId===m.B,r=(0,d.uY)(e),n=(0,p.ZC)(r,t?"structured":"freeform").content.toJSON(),a=i.chain().setContent(n);o&&a.focus(o),a.run()}t({content:e},n)},[t,r])}},56219:(e,t,r)=>{r.d(t,{B:()=>d});var n=r(13236),o=r(81570),i=r(1279),a=r(39848),s=r(12537),l=r(60948);let d=n.YY.create({name:"clipboardLight",addCommands:()=>({insertMarkdownAt:(e,t)=>r=>{let{state:n,tr:o}=r;try{let r=(0,a.os)(t,n.schema);return o.replaceRange(e.from,e.to,r),!0}catch(e){return console.warn("(caught) [Clipboard] insertMarkdownAt error",e),!1}}}),addProseMirrorPlugins(){let e=this.editor;return[new o.k_({key:new o.hs("clipboardLight"),props:{clipboardSerializer:{serializeFragment:t=>(0,l.t8)(t,e.schema)},handlePaste:(t,r,n)=>(0,a.D1)(e,r)||(0,i.j)(t,r,n),transformPastedHTML:e=>(0,s.V)(e)}})]}})},29524:(e,t,r)=>{r.d(t,{hG:()=>u});var n=r(14041),o=r(43144),i=r(13236);let a=(...e)=>t=>{e.forEach(e=>{"function"==typeof e?e(t):e&&(e.current=t)})},s=({renderers:e})=>n.createElement(n.Fragment,null,Object.entries(e).map(([e,t])=>o.createPortal(t.reactElement,t.element,e)));class l extends n.Component{constructor(e){super(e),this.editorContentRef=n.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){let{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;let t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?(0,o.flushSync)(e):e()}setRenderer(e,t){this.maybeFlushSync(()=>{this.setState(({renderers:r})=>({renderers:{...r,[e]:t}}))})}removeRenderer(e){this.maybeFlushSync(()=>{this.setState(({renderers:t})=>{let r={...t};return delete r[e],{renderers:r}})})}componentWillUnmount(){let{editor:e}=this.props;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;let t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){let{editor:e,innerRef:t,...r}=this.props;return n.createElement(n.Fragment,null,n.createElement("div",{ref:a(t,this.editorContentRef),...r}),n.createElement(s,{renderers:this.state.renderers}))}}let d=(0,n.forwardRef)((e,t)=>{let r=n.useMemo(()=>Math.floor(0xffffffff*Math.random()).toString(),[e.editor]);return n.createElement(l,{key:r,innerRef:t,...e})});n.memo(d);class c extends i.KE{constructor(){super(...arguments),this.contentComponent=null}}let u=(e={},t=[])=>{let r=(0,n.useRef)(null),[,o]=(0,n.useState)({}),{onBeforeCreate:i,onBlur:a,onCreate:s,onDestroy:l,onFocus:d,onSelectionUpdate:u,onTransaction:m,onUpdate:p}=e,x=(0,n.useRef)(i),f=(0,n.useRef)(a),h=(0,n.useRef)(s),g=(0,n.useRef)(l),b=(0,n.useRef)(d),y=(0,n.useRef)(u),v=(0,n.useRef)(m),j=(0,n.useRef)(p);return(0,n.useEffect)(()=>{r.current&&(i&&(r.current.off("beforeCreate",x.current),r.current.on("beforeCreate",i),x.current=i),a&&(r.current.off("blur",f.current),r.current.on("blur",a),f.current=a),s&&(r.current.off("create",h.current),r.current.on("create",s),h.current=s),l&&(r.current.off("destroy",g.current),r.current.on("destroy",l),g.current=l),d&&(r.current.off("focus",b.current),r.current.on("focus",d),b.current=d),u&&(r.current.off("selectionUpdate",y.current),r.current.on("selectionUpdate",u),y.current=u),m&&(r.current.off("transaction",v.current),r.current.on("transaction",m),v.current=m),p&&(r.current.off("update",j.current),r.current.on("update",p),j.current=p))},[i,a,s,l,d,u,m,p,r.current]),(0,n.useEffect)(()=>{let t=!0,n=new c(e);return r.current=n,r.current.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t&&o({})})})}),()=>{t=!1,n.destroy()}},t),r.current};(0,n.createContext)({editor:null}).Consumer;let m=(0,n.createContext)({onDragStart:void 0}),p=()=>(0,n.useContext)(m);n.forwardRef((e,t)=>{let{onDragStart:r}=p(),o=e.as||"div";return n.createElement(o,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...e.style}})})}}]);
//# sourceMappingURL=3143-fbca28b6e59d2e4b.js.map