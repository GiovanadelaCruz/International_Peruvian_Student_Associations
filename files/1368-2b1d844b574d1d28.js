"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1368],{97548:(e,t,n)=>{n.d(t,{e:()=>en});var i=n(31085),a=n(25420),r=n(14041),l=n(64225),s=n(16092),o=n(57673),d=n(23051),c=n(44507),u=n(92667),m=n(80532),h=n(2600),x=n(80853),g=n(15428),p=n(3040),v=n(24221),f=n(5377),j=n(95640),b=n(60674),w=n(50933),I=n.n(w),y=n(46108),R=n.n(y),C=n(20869),k=n(27793),S=n(10458),_=n(77654),E=n(6402),z=n(24383),G=n(40408),T=n(34118),M=n(78354),A=n(17539),V=n(60434),D=n(75675),L=n(69920);let P=(0,b.P)(m.az),F=e=>{let{card:t,theme:n,...a}=e,l=(0,r.useMemo)(()=>{if(t)return(0,f.createDocWithCards)({},[t])},[t]);return(0,i.jsx)(P,{pointerEvents:"none",sx:{"*":{backdropFilter:"none !important",transitionProperty:"background-color, color, border-color, padding, margin, width, maxWidth, fontSize",transitionDuration:".15s",[".button .".concat(_.U6)]:{transitionProperty:"none"}},".doc-content-wrapper *[data-doc-background-element], .motion-present-mode-bg":{display:"none"},".card-wrapper,.card-body,.doc-content-wrapper":{padding:0,margin:0,minHeight:"auto"},"[data-card-body]":{"--card-color-transparent":"var(--card-color)","--card-background-color":"var(--card-color)","--card-width":"60rem"},".logo":{display:"none"}},...a,children:l&&n&&(0,i.jsx)(G.S,{content:l,initialContent:l,theme:n})})},O=(e,t,n)=>{let i=0,a=e=>{var r;return null===(r=e.content)||void 0===r?void 0:r.map(e=>{var r,l,s,o,d,c,u;let m={...e,attrs:{...e.attrs}};if("image"===e.type){let e=t.shift();e&&(m.attrs.src=e.imageUrl,m.attrs.tempUrl=e.imageUrl)}if("cardAccentLayoutItem"===e.type&&(null===(s=e.attrs)||void 0===s?void 0:null===(l=s.background)||void 0===l?void 0:null===(r=l.image)||void 0===r?void 0:r.src)){let e=null==n?void 0:null===(u=n.config)||void 0===u?void 0:null===(c=u.accentBackgrounds)||void 0===c?void 0:c[i];e&&(i++,m.attrs.background=e)}if("smartLayoutCell"===e.type&&(null===(d=e.attrs)||void 0===d?void 0:null===(o=d.image)||void 0===o?void 0:o.src)==="custom"){let e=t.shift();e&&(m.attrs.image.src=e.imageUrl,m.attrs.image.tempUrl=e.imageUrl)}return e.content&&(m.content=a(m)),m})};return Object.assign({},e,{content:a(e)})},W=e=>{e&&requestAnimationFrame(()=>{var t;return null===(t=document.querySelector('[data-theme-id="'.concat(e,'"]')))||void 0===t?void 0:t.scrollIntoView({behavior:"smooth"})})},N=e=>{let{images:t}=e,n=(0,l.jL)(),s=(0,l.GV)(o.ST),d=(0,l.GV)(o.kl),u=(0,S.st)(),m=(0,T.fL)(),[f,b]=(0,V.R7)("themeId"),w=(0,l.GV)(C.zQ),y=(0,r.useCallback)(e=>{b(e),null==u||u.track(S.VV.AI_DOC_CREATION_THEME_CLICKED,{themeId:e||"none",device:(0,c.ZI)(),generationType:w})},[u,b,w]),_=s.find(e=>f===e.id);(0,r.useEffect)(()=>{if(f||!(null==s?void 0:s.length))return;n((0,o.U7)({activeView:"standard"}));let e=I()(d),t=(null==m?void 0:m.defaultThemeId)||(null==e?void 0:e.id);t&&(b(t),W(t))},[n,f,d,s,b,null==m?void 0:m.defaultThemeId]);let G=(0,r.useMemo)(()=>O(R()((0,k.O)()),R()(t),_).content[0].content||[],[_,t]),P=(0,r.useCallback)(()=>{if(!s)return;let e=I()(s);e&&(b(e.id),(null==e?void 0:e.workspaceId)?n((0,o.U7)({activeView:"custom"})):n((0,o.U7)({activeView:"standard"})),W(null==e?void 0:e.id))},[n,b,s]),N=(0,M.h5)({base:0,"4xl":300})||0,q=(0,M.h5)({base:600,xl:250,"4xl":0})||0,U=(0,M.h5)({base:0,xl:1})||0,B=(0,M.h5)({base:.5,lg:.6,xl:.7,"2xl":.85,"3xl":1,"4xl":1.125});return(0,r.useEffect)(function(){s&&0!==s.length&&Promise.all(s.map(e=>{var t,n,i,a,r,l,s,o,d,c;(null===(i=e.config.accentBackgrounds)||void 0===i?void 0:null===(n=i[0])||void 0===n?void 0:null===(t=n.image)||void 0===t?void 0:t.src)&&(0,A.GV)(null===(o=e.config.accentBackgrounds)||void 0===o?void 0:null===(s=o[0].image)||void 0===s?void 0:s.src),(null===(l=e.config.accentBackgrounds)||void 0===l?void 0:null===(r=l[1])||void 0===r?void 0:null===(a=r.image)||void 0===a?void 0:a.src)&&(0,A.GV)(null===(c=e.config.accentBackgrounds)||void 0===c?void 0:null===(d=c[1].image)||void 0===d?void 0:d.src)}))},[s]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L.a,{theme:_}),(0,i.jsxs)(a.s,{zIndex:1,py:0,px:6,"data-theme-desktop-root":!0,position:"relative",children:[(0,i.jsx)(g.mL,{styles:{html:{overflowX:"hidden",overflowY:"auto"}}}),(0,i.jsxs)(a.s,{direction:"column",pos:"relative",flex:1,h:"100%",transform:"scale(".concat(B,")"),justifyContent:"center",alignItems:"center",ms:[40,35,30,20,0],"data-id":"theme-picker-desktop-cards",children:[(0,i.jsx)(F,{pos:"absolute",theme:_,card:G[2],initial:{opacity:0},animate:{opacity:1,translateX:0,transition:{opacity:{duration:.5,delay:0,ease:"easeOut"},default:{duration:2,ease:"easeOut"}}},zIndex:1}),(0,i.jsx)(F,{pos:"absolute",theme:_,card:G[0],initial:{translateX:0,opacity:0},animate:{translateX:N,translateY:q,rotate:-U,opacity:1,transition:{default:{duration:2,delay:.5,ease:"easeOut"}}}}),(0,i.jsx)(F,{pos:"absolute",theme:_,card:G[1],initial:{translateX:0,opacity:0},transformOrigin:"center",animate:{translateX:-N,translateY:-q,rotate:U,opacity:1,transition:{default:{duration:2,delay:.5,ease:"easeOut"}}}})]}),(0,i.jsxs)(a.s,{w:"420px",p:6,direction:"column",justifyContent:"center",bg:"whiteAlpha.900",borderRadius:"lg",h:"calc(100vh - var(--chakra-sizes-20))",minH:"700px",mb:4,shadow:"md",pos:"relative",position:"sticky",mt:6,children:[(0,i.jsx)(z.D,{title:(0,i.jsx)(j.x6,{id:"cQGp8b"}),description:(0,i.jsxs)(h.T,{w:"100%",align:"center",justify:"center",children:[(0,i.jsx)(D.I,{w:"100%",children:(0,i.jsx)(j.x6,{id:"ziAjHi"})}),(0,i.jsx)(x.$,{w:"100%",leftIcon:(0,i.jsx)(v.g,{icon:p.tW,color:"var(--chakra-colors-trueblue-800)"}),size:"md",onClick:P,children:(0,i.jsx)(j.x6,{id:"B8w15Q"})})]}),stackProps:{pb:4},currentTheme:_,showCreateButtons:!1}),(0,i.jsx)(E.oz,{shouldScrollToCurrent:!0,currentTheme:_,setTheme:e=>{y(null==e?void 0:e.id)},flexProps:{overflowY:"auto",mx:-6,px:3},disableEditing:!0})]})]})]})};var q=n(35687),U=n(2219),B=n(61778),H=n(74727),X=n(62313),J=n(20501),$=n(32133),Q=n(44691),Z=n(50877),K=n(74387),Y=n(1771),ee=n(57882);let et=()=>{let e=(0,r.useRef)(!1),t=(0,l.GV)(o.WI),n=(0,l.GV)(o.kl),s=(0,S.st)(),d=(0,l.GV)(C.zQ),[u,h]=(0,V.R7)("themeId",{debounce:500}),[p,f]=(0,r.useState)(()=>t.find(e=>e.id===u)),b=(0,$.wA)(),{currentWorkspace:w}=(0,ee.ur)(),{data:y}=(0,Z.Vl$)({variables:{id:null==w?void 0:w.id},skip:!(null==w?void 0:w.id)}),R=null==y?void 0:y.workspace,k=(0,l.GV)(o.cE),_=(0,l.GV)(o.yD),E=p?(0,Y.Mw)(p):void 0;(0,r.useEffect)(()=>{if(u||!(null==n?void 0:n.length)||e.current)return;let i=I()(n),a=t.find(e=>e.id===(null==R?void 0:R.defaultThemeId))||i;if(a){var r;b((0,o.U7)({activeView:"standard"})),f(a),null===(r=document.querySelector('[data-theme-mobile-preview="'.concat(a.id,'"]')))||void 0===r||r.scrollIntoView(),e.current=!0}},[b,n,u,t,null==R?void 0:R.defaultThemeId]),(0,r.useEffect)(()=>{var t;!e.current&&u&&p&&(p.workspaceId?b((0,o.U7)({activeView:"custom"})):b((0,o.U7)({activeView:"standard"})),null===(t=document.querySelector('[data-theme-mobile-preview="'.concat(p.id,'"]')))||void 0===t||t.scrollIntoView(),e.current=!0)},[b,p,u]);let z=(0,r.useCallback)(e=>{let{scrollLeft:n,scrollWidth:i,clientWidth:a}=e.target,r=Math.round(n/(i-a)*(t.length-1)),l=t[r];l.id!==(null==p?void 0:p.id)&&f(l)},[t,null==p?void 0:p.id,f]),T=(0,r.useCallback)(()=>{(null==p?void 0:p.id)&&(h(p.id),null==s||s.track(S.VV.AI_DOC_CREATION_THEME_CLICKED,{themeId:p.id,device:(0,c.ZI)(),generationType:d}))},[s,d,null==p?void 0:p.id,h]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L.a,{theme:p}),(0,i.jsxs)(q.B,{spacing:0,h:"100%",w:"100vw",children:[(0,i.jsx)(g.mL,{styles:{html:{height:"100%"},body:{height:"100%"}}}),(0,i.jsxs)(q.B,{spacing:0,mx:"auto",zIndex:1,px:6,pt:20,sx:G.o,w:"100%",children:[(0,i.jsxs)(q.B,{align:"center",spacing:1,children:[(0,i.jsx)(U.D,{variant:"brand",letterSpacing:"-0.04em",fontWeight:"700",color:E?"#FFFFFF":"#0a1629",w:"100%",size:"2xl",transitionProperty:"common",transitionDuration:"normal",children:(0,i.jsx)(j.x6,{id:"cQGp8b"})}),(0,i.jsx)(B.E,{fontSize:"lg",color:E?"#FFFFFF":"#0a1629",letterSpacing:"-0.04em",transitionProperty:"common",transitionDuration:"normal",children:(0,i.jsx)(j.x6,{id:"950yV9"})})]}),k&&(0,i.jsxs)(H.e,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",pt:2,justifyContent:"center",children:[(0,i.jsx)(x.$,{borderRadius:"full",leftIcon:(0,i.jsx)(v.g,{icon:J.ffg,fixedWidth:!0}),"data-theme-picker-active-view-button":"custom",colorScheme:"custom"===_?"trueblue":"gray",bg:"custom"===_?"trueblue.100":"gray.100",onClick:()=>b((0,o.U7)({activeView:"custom"})),children:(0,i.jsx)(j.x6,{id:"8Tg/JR"})}),(0,i.jsx)(x.$,{borderRadius:"full",leftIcon:(0,i.jsx)(m.az,{w:3.5,children:(0,i.jsx)(Q.H,{})}),"data-theme-picker-active-view-button":"standard",colorScheme:"standard"===_?"trueblue":"gray",bg:"standard"===_?"trueblue.100":"gray.100",onClick:()=>b((0,o.U7)({activeView:"standard"})),children:(0,i.jsx)(j.x6,{id:"TJBHlP"})})]})]}),(0,i.jsx)(a.s,{zIndex:1,pos:"relative",overflow:"auto",py:8,sx:{"scroll-snap-type":"x mandatory"},onScroll:z,children:(0,i.jsx)(X.z,{flex:1,spacing:6,px:12,pt:1,children:t.map(e=>(0,i.jsx)(K.s,{isSelected:e.id===(null==p?void 0:p.id),theme:e},e.id))})}),(0,i.jsx)(a.s,{px:6,py:4,mb:2,justify:"center",zIndex:9,w:"100%",children:(0,i.jsx)(D.I,{size:"lg",w:"100%",onClick:T,children:(0,i.jsx)(j.x6,{id:"ziAjHi"})})})]})]})},en=(0,r.memo)(e=>{let{images:t=[]}=e;(0,s.t)();let n=(0,l.GV)(o.ST);return(0,u.En)()&&(null==n?void 0:n.length)?(0,i.jsxs)(a.s,{direction:"column",justifyContent:"flex-start",flex:1,w:"100vw",h:"100%",children:[(0,i.jsx)(d.s,{}),(0,c.Xb)()?(0,i.jsx)(et,{}):(0,i.jsx)(N,{images:t})]}):null});en.displayName="ThemeStep"},40137:(e,t,n)=>{n.d(t,{Ew:()=>L,cG:()=>V,cZ:()=>P});var i=n(31085),a=n(27670),r=n(2600),l=n(63341),s=n(18528),o=n(80853),d=n(18651),c=n(40173),u=n(72821),m=n(33683),h=n(61778),x=n(62313),g=n(49547),p=n(22218),v=n(63633),f=n(12917),j=n(20501),b=n(3040),w=n(24221),I=n(95640),y=n(12327),R=n(14041),C=n(35002),k=n(74327),S=n(57754),_=n(82849),E=n(74312),z=n(90937),G=n(99548),T=n(60434),M=n(44066);let A={aiGenerated:{label:()=>y.Ru._({id:"O+LXs1"})},web:{label:()=>y.Ru._({id:"c8iFRc"})},auto:{label:()=>y.Ru._({id:"Dnn2XG"}),flag:"automatedImageProvider"},pictographic:{label:()=>y.Ru._({id:"Xo8Ctl"}),flag:"aiImageProviderPictographic"},unsplash:{label:()=>y.Ru._({id:"Oi5M1y"}),flag:"aiImageProviderUnsplash"},giphy:{label:()=>y.Ru._({id:"MK2yIS"}),flag:"aiImageProviderGiphy"},none:{label:()=>y.Ru._({id:"svexkX"}),flag:"noImagesInGenerate",badge:()=>(0,i.jsx)(a.E,{colorScheme:"green",children:(0,i.jsx)(I.x6,{id:"isRobC"})})},placeholder:{label:()=>y.Ru._({id:"UIgTRE"}),flag:"noImagesInGenerate",badge:()=>(0,i.jsx)(a.E,{colorScheme:"green",children:(0,i.jsx)(I.x6,{id:"isRobC"})})}},V=(0,R.memo)(()=>{var e;let[t]=(0,T.R7)("imageProvider"),n=z.u[t]||k.Rn,a=(null===(e=A[t])||void 0===e?void 0:e.label())||(null==n?void 0:n.label()),[l]=(0,T.R7)("imageLicense"),s=(0,E.h)(l),[o]=(0,T.R7)("imageStyle",{debounce:500}),[d]=(0,T.T7)();return(0,i.jsx)(M.X,{label:(0,i.jsx)(I.x6,{id:"an5hVd"}),colorScheme:"trueblue",icon:b.Cyq,values:[a,"web"===t&&s,"aiGenerated"===t&&d&&(0,S.pE)(d).label(),"aiGenerated"===t&&o],testId:"image-settings-group",children:(0,i.jsxs)(r.T,{spacing:4,children:[(0,i.jsx)(L,{}),(0,i.jsx)(P,{})]})})});V.displayName="ImageSettingsGroup";let D=(0,R.memo)(e=>{var t;let{provider:n,providerKey:a,setProvider:r}=e,g=(0,C.u)("automatedImageProvider");return(0,i.jsxs)(l.W,{isLazy:!0,matchWidth:!0,children:[(0,i.jsx)(s.I,{as:o.$,variant:"plain",w:"100%",textAlign:"start",justifyContent:"space-between",rightIcon:(0,i.jsx)(w.g,{icon:j.Jt$}),leftIcon:n.image?(0,i.jsx)(d._,{src:n.image.src,w:"1.5em",h:"1.5em",objectFit:"contain"}):n.icon?(0,i.jsx)(w.g,{icon:n.icon,fixedWidth:!0}):void 0,boxShadow:"none",size:"sm",children:null===n?A.auto.label():(null===(t=A[a])||void 0===t?void 0:t.label())||n.label()}),(0,i.jsx)(c.Z,{children:(0,i.jsxs)(u.c,{maxH:"350px",overflowY:"auto",overflowX:"hidden",zIndex:"modalPopover",border:"1px solid",borderColor:"gray.200",children:[g&&(0,i.jsxs)(m.D,{onClick:()=>r("auto"),icon:(0,i.jsx)(w.g,{icon:f.uts,fixedWidth:!0}),children:[A.auto.label(),(0,i.jsx)(h.E,{color:"gray.400",fontSize:"sm",children:(0,i.jsx)(I.x6,{id:"bQcSlJ"})})]}),Object.entries(z.u).map(e=>{let[t,{label:n,icon:a,description:l,featureFlag:s,image:o}]=e,{label:c,flag:u,badge:g}=A[t]||{};return s&&!C.of.get(s)||u&&!C.of.get(u)?null:(0,i.jsxs)(m.D,{onClick:()=>r(t),icon:o?(0,i.jsx)(d._,{src:o.src,w:"1.5em",h:"1.5em",objectFit:"contain"}):a?(0,i.jsx)(w.g,{icon:a,fixedWidth:!0}):void 0,children:[(0,i.jsxs)(x.z,{children:[(0,i.jsx)(h.E,{children:(null==c?void 0:c())||n()}),g&&g()]}),l&&(0,i.jsx)(h.E,{color:"gray.400",fontSize:"sm",children:l()})]},t)})]})})]})});D.displayName="ImageProviderPicker";let L=()=>{let[e,t]=(0,T.R7)("imageProvider"),n=z.u[e]||z.u.aiGenerated;return(0,i.jsxs)(g.MJ,{children:[(0,i.jsx)(p.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(I.x6,{id:"qA0pmh"})}),(0,i.jsx)(D,{providerKey:e,provider:n,setProvider:t})]})},P=e=>{let{hideImageStyle:t=!1}=e,[n]=(0,T.R7)("imageProvider"),[a,r]=(0,T.R7)("imageLicense"),[l,s]=(0,T.R7)("imageStyle",{debounce:500}),[o,d]=(0,T.T7)();return(0,i.jsxs)(i.Fragment,{children:["web"===n&&(0,i.jsxs)(g.MJ,{children:[(0,i.jsx)(p.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(I.x6,{id:"6TSHCF"})}),(0,i.jsx)(E.V,{value:a,onChange:r})]}),"aiGenerated"===n&&!t&&(0,i.jsxs)(g.MJ,{children:[(0,i.jsx)(p.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(I.x6,{id:"X2yiuT"})}),(0,i.jsx)(v.T,{value:l,onChange:e=>s(e.target.value),placeholder:y.Ru._({id:"5x/foo"}),rows:2,maxLength:G.nt})]}),"aiGenerated"===n&&(0,i.jsxs)(g.MJ,{children:[(0,i.jsx)(p.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(I.x6,{id:"GVuOrw"})}),(0,i.jsx)(_.o,{value:o,setValue:d})]})]})}},44066:(e,t,n)=>{n.d(t,{X:()=>j});var i=n(31085),a=n(14892),r=n(84755),l=n(62313),s=n(80532),o=n(35687),d=n(61778),c=n(18201),u=n(37586),m=n(58821),h=n(62230),x=n(24221),g=n(14041),p=n(20869),v=n(64225);let f={_groupHover:{color:"purple.600"}},j=(0,g.memo)(e=>{let{icon:t,colorScheme:n="gray",label:g,values:j=[],children:b,testId:w}=e,I=!(0,v.GV)(p.gG);return(0,i.jsx)(a.A,{border:"none",children:e=>{let{isExpanded:a}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.J,{_focus:{boxShadow:"none",outline:"none"},py:2,p:3,outline:"none",transitionProperty:"common",transitionDuration:"normal",bg:"transparent",_hover:{bg:"".concat(n,".50")},"data-testid":w,children:(0,i.jsxs)(l.z,{width:"100%",spacing:"3",align:"start",children:[(0,i.jsx)(s.az,{...f,display:"inline",fontSize:"sm",color:"".concat(n,".300"),children:(0,i.jsx)(x.g,{icon:t,fixedWidth:!0})}),(0,i.jsxs)(o.B,{spacing:0,align:"start",textAlign:"left",children:[(0,i.jsx)(d.E,{...f,fontWeight:"700",children:g}),!a&&(0,i.jsx)(d.E,{fontSize:"sm",fontWeight:"500",noOfLines:2,...f,children:j.filter(Boolean).join(" \xb7 ")})]}),(0,i.jsx)(c.h,{}),(0,i.jsx)(u.Q,{...f})]})}),(0,i.jsx)(m.v,{p:4,pt:3,pb:6,children:I?(0,i.jsxs)(o.B,{spacing:4,pt:2,align:"start",children:[(0,i.jsx)(h.E,{w:"100%",height:"30px"}),(0,i.jsx)(h.E,{w:"100%",height:"30px"}),(0,i.jsx)(h.E,{w:"100%",height:"30px"})]}):b})]})}})});j.displayName="SettingsGroup"},2928:(e,t,n)=>{n.d(t,{E:()=>A,M:()=>z});var i=n(31085),a=n(2600),r=n(61778),l=n(49547),s=n(22218),o=n(74727),d=n(80853),c=n(35687),u=n(63633),m=n(27559),h=n(3040),x=n(24221),g=n(9104),p=n(95640),v=n(12327),f=n(14041),j=n(24460),b=n(23832),w=n(39286),I=n(18405),y=n(99548),R=n(60434),C=n(14452),k=n(44066),S=n(28478),_=n(70403);let E=(0,f.memo)(e=>{let{tagsList:t,onClick:n}=e;return(0,i.jsx)(S.B,{pb:"2",align:"flex-start",w:"100%",children:t.map(e=>(0,i.jsx)(S.Q,{children:(0,i.jsx)(_.vw,{cursor:"pointer",colorScheme:"purple",boxShadow:"sm",_hover:{color:"white",bg:"purple.600"},onClick:()=>{n(e.value)},children:e.label})},e.label))})});E.displayName="SettingsTags";let z=(0,f.memo)(()=>{var e;let[t]=(0,R.R7)("locale"),n=t?(0,I.xt)(t):null,[l]=(0,R.R7)("textAmount"),[s]=(0,R.R7)("textMode"),o=null===(e=(0,b.n)(T).find(e=>e.key===s))||void 0===e?void 0:e.label();return(0,i.jsx)(k.X,{label:(0,i.jsx)(p.x6,{id:"OuNFIM"}),colorScheme:"blue",icon:h.ecg,values:[o,"preserve"!==s&&(0,C.Hr)(l).label(),"generate"===s&&(null==n?void 0:n.displayName)],children:(0,i.jsxs)(a.T,{spacing:4,alignItems:"stretch",children:[(0,i.jsx)(G,{}),"preserve"===s&&(0,i.jsxs)(r.E,{fontSize:"xs",color:"gray.600",children:[(0,i.jsx)(p.x6,{id:"7j0VMp"})," ",(0,i.jsx)(g.qT,{fontSize:"xs",label:v.Ru._({id:"kVzbm6",values:{GAMMA_ARTIFACT_PROPER_NOUN:w.TP}})})]}),"preserve"!==s&&(0,i.jsx)(A,{}),"generate"===s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V,{}),(0,i.jsx)(L,{})]}),(0,i.jsx)(M,{})]})})});z.displayName="TextSettingsGroup";let G=()=>{let[e,t]=(0,R.R7)("textMode"),n=(0,b.n)(T);return(0,i.jsxs)(l.MJ,{children:[(0,i.jsx)(s.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(p.x6,{id:"OuNFIM"})}),(0,i.jsx)(o.e,{size:"sm",isAttached:!0,width:"100%",children:n.map(n=>(0,i.jsx)(g.Tz,{placement:"top",label:n.tip(),children:(0,i.jsx)(d.$,{variant:n.key===e?"plainSelected":"plain",boxShadow:"none",leftIcon:(0,i.jsx)(x.g,{icon:n.icon}),onClick:()=>t(n.key),width:"100%",children:n.label()})},n.label()))})]})},T=()=>[{label:()=>v.Ru._({id:"ziAjHi"}),key:"generate",icon:h._$C,tip:()=>v.Ru._({id:"8mt5hR"})},{label:()=>v.Ru._({id:"NIvI2q"}),key:"condense",icon:h.nr0,tip:()=>v.Ru._({id:"owZbal"})},{label:()=>v.Ru._({id:"c0sF7y"}),key:"preserve",icon:h.DW4,tip:()=>v.Ru._({id:"/JkXZq"})}],M=()=>{let[e,t]=(0,R.R7)("locale"),n=(0,I.xt)(e);return(0,i.jsxs)(l.MJ,{children:[(0,i.jsx)(s.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(p.x6,{id:"f6Pzgf"})}),(0,i.jsx)(j.j,{locale:n,setLocale:t,buttonProps:{variant:"plain",size:"sm",width:"100%",textAlign:"left"}})]})},A=()=>{let[e,t]=(0,R.R7)("textAmount"),[n]=(0,R.R7)("textMode"),a=(0,b.n)(y.dg);return(0,i.jsxs)(l.MJ,{children:[(0,i.jsx)(s.l,{fontSize:"sm",fontWeight:"semibold",children:"condense"===n?(0,i.jsx)(p.x6,{id:"z7tEVo"}):(0,i.jsx)(p.x6,{id:"UmJg9q"})}),(0,i.jsx)(o.e,{size:"sm",isAttached:!0,width:"100%",children:Object.entries(a).map(n=>{let[a,{label:r,description:l,icon:s}]=n;return(0,i.jsx)(g.Tz,{placement:"top",label:l(),children:(0,i.jsx)(d.$,{variant:e===a?"plainSelected":"plain",boxShadow:"none",onClick:()=>t(a),leftIcon:(0,i.jsx)(x.g,{icon:s}),width:"100%",textAlign:"left",children:r()})},a)})})]})},V=()=>{let[e,t]=(0,R.R7)("audience",{debounce:500}),n=(0,f.useMemo)(()=>D(),[]);return(0,i.jsxs)(l.MJ,{children:[(0,i.jsx)(s.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(p.x6,{id:"CfNFS9"})}),(0,i.jsxs)(c.B,{spacing:3,children:[(0,i.jsx)(u.T,{size:"sm",minH:16,value:e,onChange:e=>t(e.target.value),maxLength:y.nt}),(0,i.jsx)(m.S,{in:""===e||null===e,children:(0,i.jsx)(E,{tagsList:n,onClick:e=>{t(e)}})})]})]})},D=()=>[{label:v.Ru._({id:"9N+p+g"}),value:v.Ru._({id:"pCuan7"})},{label:v.Ru._({id:"Y9OrUQ"}),value:v.Ru._({id:"no1XFa"})},{label:v.Ru._({id:"vINKFZ"}),value:v.Ru._({id:"H13RWO"})},{label:v.Ru._({id:"5AIqvu"}),value:v.Ru._({id:"hqe36h"})},{label:v.Ru._({id:"bNrMlq"}),value:v.Ru._({id:"kImdWQ"})}],L=()=>{let[e,t]=(0,R.R7)("tone",{debounce:500}),n=(0,f.useMemo)(()=>P(),[]);return(0,i.jsxs)(l.MJ,{children:[(0,i.jsx)(s.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(p.x6,{id:"uAQyzk"})}),(0,i.jsxs)(c.B,{spacing:"3",children:[(0,i.jsx)(u.T,{size:"sm",minH:16,value:e,onChange:e=>t(e.target.value),maxLength:y.nt}),(0,i.jsx)(m.S,{in:""===e||null===e,children:(0,i.jsx)(E,{tagsList:n,onClick:e=>{t(e)}})})]})]})},P=()=>[{label:v.Ru._({id:"Oojfbh"}),value:v.Ru._({id:"L7fEtA"})},{label:v.Ru._({id:"hzExWo"}),value:v.Ru._({id:"F64cR2"})},{label:v.Ru._({id:"wanXT9"}),value:v.Ru._({id:"Gop378"})},{label:v.Ru._({id:"ChasOQ"}),value:v.Ru._({id:"lVYl+I"})},{label:v.Ru._({id:"wTl0UK"}),value:v.Ru._({id:"sFGQvg"})},{label:v.Ru._({id:"4Nl9R0"}),value:v.Ru._({id:"cspP/G"})}]},64795:(e,t,n)=>{n.d(t,{F:()=>k,H:()=>S});var i=n(31085),a=n(74727),r=n(9021),l=n(80853),s=n(62313),o=n(61778),d=n(80532),c=n(63341),u=n(18528),m=n(40173),h=n(72821),x=n(48310),g=n(33473),p=n(20501),v=n(24221),f=n(9104),j=n(95640),b=n(12327),w=n(14041),I=n(14291),y=n(10628),R=n(10458),C=n(88380);let k=(0,w.memo)(e=>{let{onIncrement:t,onDecrement:n,maxCards:c,cardCount:u,...m}=e,h={boxShadow:"sm",bg:"white"};return(0,i.jsxs)(a.e,{isAttached:!0,flex:"1",...m,children:[null!=u&&(0,i.jsx)(r.K,{display:"flex",onClick:n,icon:(0,i.jsx)(v.g,{icon:p.EZy}),"aria-label":b.Ru._({id:"MrRUp2"}),width:2,...h}),(0,i.jsx)(l.$,{flex:"1",...h,_hover:{color:"inherit"},cursor:"default",children:(0,i.jsx)(f.Tz,{label:(0,i.jsx)(j.x6,{id:"ukrE78"}),placement:"top",children:(0,i.jsx)(s.z,{spacing:1,cursor:"help",children:(0,i.jsxs)(o.E,{children:[(0,i.jsx)(d.az,{as:"span",css:{fontVariantNumeric:"tabular-nums"},children:u})," ",(0,i.jsx)(j.x6,{id:"MU+gFM",values:{0:null!=u?u:0}})]})})})}),null!=u&&(0,i.jsx)(r.K,{display:"flex",onClick:t,icon:(0,i.jsx)(v.g,{icon:p.QLR}),"aria-label":b.Ru._({id:"sFY+gw"}),width:2,isDisabled:u>=c,...h})]})});k.displayName="CardCountStepper";let S=(0,w.memo)(e=>{let{hint:t,cardCount:n,maxCards:a,onChange:r}=e,{openUpsellModal:d}=(0,y.I)(),f=(0,w.useMemo)(()=>[...Array(a)],[a]),b=(0,w.useMemo)(()=>[15,20,25,30,40,50].filter(e=>e>a),[a]),k=()=>{d({segmentEvent:R.VV.GAMMA_UPSELL_CALLOUT_AI_GENERATE_LONGER})};return(0,i.jsxs)(c.W,{isLazy:!0,modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right-start","right-end","right"]}}],children:[(0,i.jsx)(u.I,{size:"sm",boxShadow:"none",minW:"32",textAlign:"left",as:l.$,rightIcon:(0,i.jsx)(v.g,{size:"xs",icon:p.Jt$}),children:(0,i.jsx)(j.x6,{id:"fFAIng",values:{0:null!=n?n:0}})}),(0,i.jsx)(m.Z,{children:(0,i.jsx)(h.c,{zIndex:"tooltip",maxH:"90vh",overflow:"auto",children:(0,i.jsxs)(x.i,{maxW:"200px",title:t,onChange:e=>{let t=Number(e);if(t>a){k();return}r(t)},value:"".concat(n),children:[f.map((e,t)=>{let n=t+1;return(0,i.jsx)(g.k,{value:"".concat(n),children:(0,i.jsx)(j.x6,{id:"bM4Wv5",values:{count:n}})},n)}),b.map(e=>(0,i.jsx)(g.k,{bg:"trueblue.50",border:"1px solid white",_hover:{bg:"trueblue.50",borderColor:"trueblue.200"},value:"".concat(e),children:(0,i.jsxs)(s.z,{spacing:"3",children:[(0,i.jsx)(o.E,{w:"100%",children:(0,i.jsx)(j.x6,{id:"bM4Wv5",values:{count:e}})}),e>a&&(0,i.jsx)(I.zL,{product:e<=C.ST?"plus":"pro"})]})},e))]})})})]})});S.displayName="CardCountDropdown"},24548:(e,t,n)=>{n.d(t,{Q:()=>v});var i=n(31085),a=n(25420),r=n(80853),l=n(62313),s=n(24221),o=n(9104),d=n(95640),c=n(14041),u=n(15355),m=n(71197),h=n(55090),x=n(60434);let g=()=>{let[e]=(0,x.R7)("imageProvider");return"aiGenerated"===e?"generateV2WithImages":"generateV2"};var p=n(55733);let v=(0,c.memo)(e=>{let{onClick:t,arrowIcon:n}=e,c=g(),{canGenerate:x,cantGenerateReason:v}=(0,p.w)(),{hasEnoughCreditsToGenerateDeck:f}=(0,m.B9)(),j=(0,m.tO)(t,"generateV2",h.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(o.Tz,{label:f?v:(0,i.jsx)(d.x6,{id:"mTJ1YV"}),isDisabled:x&&f,children:(0,i.jsx)(a.s,{flex:"1",alignItems:"stretch",alignSelf:"stretch",justifyContent:"stretch",flexDirection:"column",children:(0,i.jsx)(r.$,{variant:"solid",w:"100%",rightIcon:(0,i.jsxs)(l.z,{children:[(0,i.jsx)(u.G,{type:c}),(0,i.jsx)(s.g,{icon:n})]}),onClick:j,isDisabled:!x,size:{base:"md",lg:"lg"},children:(0,i.jsx)(d.x6,{id:"xGVfLh"})})})})})});v.displayName="ContinueToThemePickerButton"},75675:(e,t,n)=>{n.d(t,{I:()=>et});var i=n(31085),a=n(32202),r=n(25420),l=n(80853),s=n(3040),o=n(24221),d=n(9104),c=n(12327),u=n(14041),m=n(50080),h=n(71197),x=n(10458),g=n(57882),p=n(50933),v=n.n(p),f=n(31242),j=n(66766),b=n(53536),w=n(91526),I=n(59774),y=n(50877),R=n(35002),C=n(64225),k=n(21036),S=n(35147),_=n(68962),E=n(38256),z=n(90854),G=n(12664),T=n(55098),M=n(24051),A=n(44507),V=n(18405),D=n(79930),L=n(20869);let P=e=>{if(R.of.get("generatorBigModelAlways"))return"big";if("preserve"===e.textMode)return"preserve";let t="condense"===e.textMode,n=e.tokenLength>=1e3&&!e.canGenerateLongOutput,i=e.numCards&&e.numCards>=11&&!e.canGenerateLongOutput;return t||i||n?"big":"fast"},F=e=>{if("GenerateDeck3"===e.promptKey)return{size:void 0,model:R.of.get("generateDeck3Model"),reasoningEffort:"none"};let t=P(e),n="preserve"===t?R.of.get("generateDeckPreserveModel"):"big"===t?R.of.get("generateDeckBigModel"):R.of.get("generateDeckFastModel"),i="none";return"preserve"===t&&(i=R.of.get("generateDeckReasoningEffort")),{size:t,model:n,reasoningEffort:i}};var O=n(5377),W=n(5978),N=n(65449),q=n(32849),U=n(92405),B=n(32033);let H=()=>{let{push:e}=(0,f.useRouter)(),[t]=(0,y.Ybb)(),n=(0,R.u)("createSiteAi"),i=(0,q.Fd)(),{generate:a}=(0,N.pt)("DetermineSiteMetadata",{}),[r]=(0,y.g1r)(),[l]=(0,y.vlJ)(),[s]=(0,y.cGn)();return{canCreateSite:n&&i,createSiteWithAIAndRedirect:(0,u.useCallback)(async n=>{let{workspaceId:i,docId:o,themeId:d,generateVars:u,firstCards:m}=n,h=m[0]?(0,O.getCardTitle)(m[0].content):void 0,{data:x}=await t({variables:{input:{workspaceId:i,name:h||c.Ru._({id:"h3eRam"}),routes:[{docId:o,path:"/"}],themeId:d}}}),g=null==x?void 0:x.createSite;if(!g){console.error("[CreateSiteModal] Failed to create site, no site returned"),e("/docs/".concat(o,"?source=").concat(I.MH));return}try{let e=m.map(e=>e.raw).join("\n"),{language:t,instructions:n,input:d}=u,{promise:c}=a({workspaceId:i,variables:{topic:n||"",input:d,language:t,pageHtml:e}}),h=await c,{title:x,subdomain:p}=(0,B.d)(h);p=(0,W.Fw)(p);let v="string"==typeof p&&p.length<=60&&/^[a-z0-9-]+$/.test(p.toLowerCase()),f=[];v&&f.push(r({variables:{input:{siteId:g.id,name:p}}})),x&&f.push(l({variables:{input:{siteId:g.id,name:x}}}),s({variables:{id:o,title:x}})),await Promise.all(f)}catch(e){console.error("(caught) useGenerateSite error: ".concat(e))}e((0,U.pF)({docId:o,params:{source:I.MH}}))},[t,e,a,r,l,s])}};var X=n(60434),J=n(88380),$=n(99742);let Q=()=>{let{push:e}=(0,f.useRouter)(),[t]=(0,y.Imo)(),{generate:n}=(0,N.pt)("DeterminePageMetadata",{}),[i]=(0,y.cGn)();return{setPageMetadataWithAIAndRedirect:(0,u.useCallback)(async a=>{let{site:r,docId:l,workspaceId:s,generateVars:o,firstCards:d}=a;try{let{language:e,instructions:a,input:c}=o,u=r.routes.map(e=>{var t;return{title:null===(t=e.doc)||void 0===t?void 0:t.title,path:e.path}}),m=d.map(e=>e.raw).join("\n"),h=d[0]?(0,O.getCardTitle)(d[0].content):void 0,x=!0,{promise:g}=n({workspaceId:s,variables:{topic:a||"",input:c,language:e,otherPages:u,pageHtml:m}}),p=await g,{path:v,title:f}=(0,B.d)(p);f||(f=h||"Untitled page",x=!1),v||(v=(0,W.Fw)(f)),v=(0,W.Fw)(v),r.routes.some(e=>e.path===v)&&(v="".concat(v,"-").concat((0,$.Ak)(6))),await Promise.all([t({variables:{input:{siteId:r.id,docId:l,path:(0,_.wK)(v),offline:!1}},refetchQueries:["GetSite"]}),i({variables:{id:l,title:f,titleEdited:x}})])}catch(e){console.error("(caught) useSetPageMetadataWithAI error: ".concat(e))}e((0,U.pF)({docId:l,params:{source:I.MH}}))},[n,e,t,i])}},Z=e=>{let{onSuccess:t,options:n}=e,i=(0,x.st)(),{push:a,query:r}=(0,f.useRouter)(),l=r.channelId,s=(0,C.CU)(),o=(0,C.GV)(S.Gd),{canCreateSite:d,createSiteWithAIAndRedirect:c}=H(),[m,h]=(0,X.R7)("themeId"),{setPageMetadataWithAIAndRedirect:p}=Q(),[P]=(0,y.g5)(),O=(0,R.u)("generatorLazyImages"),[W,N]=(0,u.useState)(!1),q=(0,R.u)("streamResumingEnabled"),[U]=(0,X.T7)(),{maxCards:B}=(0,J.Zq)(),$=(0,y.tzS)(y.xAr);return{generate:(0,u.useCallback)(async()=>{var e;let r;let u=s.getState(),m=(0,L.gG)(u),f=(0,L.nY)(u);if(!f)throw Error("Cannot generate with no docGenerateInputId");N(!0);let C=(0,g.bs)(),S=(0,L.qT)(u),W=(0,L.J$)(u),H=(0,L.fg)(u),X=(0,V.xt)((0,L.Wt)("locale")(u)),J=(0,L.Wt)("textAmount")(u),Q=(0,L.Wt)("audience")(u),Z=(0,L.Wt)("tone")(u),K=(0,L.wS)(u),ee=(0,L.yR)(u),et=(0,L.Wt)("imageLicense")(u),en=(0,L.Wt)("imageProvider")(u),ei=(0,L.Wt)("styleTemplate")(u),ea=(0,L.Wt)("imageStyle")(u),er=(0,L.Wt)("textMode")(u),el=(0,L.Wt)("editorMode")(u),es=(0,L.zQ)(u),eo="generate"!==es,ed=(0,L.Wt)("searchRequested")(u),ec=(0,L.Wt)("themeId")(u),{search:eu,searchProvider:em,searchInGenerate:eh}=(0,D.g)(es,ed),ex={instructions:H,input:S,language:X.englishName,numCards:Math.min(ee,B),format:K,textAmount:J,audience:Q,tone:Z,textMode:er,editorMode:el,imageProvider:en,search:eh,searchProvider:em},eg=R.of.get("growthSkipThemePickerOnFirstDeck")&&"generate"===es,ep=ec||(eg?v()(E.CU):o?o.themeId:void 0);!ec&&eg&&(await h(ep),null==i||i.track(x.VV.SKIPPED_THEME_RANDOM_THEME_PICKED,{themeId:ep||"none"}));let ev=ep?(await $({id:ep})).data.theme:void 0,ef=ea?"Custom":"Theme";"aiGenerated"===en&&!ea&&ev&&(ea=(0,z.xI)(ev));let ej=d&&"webpage"===K,eb=(0,_.dv)(o)||ej,ew=R.of.get("generateParallel")&&"structured"===ex.editorMode&&ex.numCards>30,{promptKey:eI,canGenerateLongOutput:ey}=Y(K,ew),{model:eR,size:eC,reasoningEffort:ek}=F({numCards:ee,editorMode:el,textMode:er,canGenerateLongOutput:ey,textAmount:J,generationType:es,promptKey:eI,tokenLength:W}),eS=ei;eS||"social"!==K||(eS="social_portrait");let e_=(eS?{...G.S9[eS].docSettings()}:{})||{},eE={docFormatKey:K,imageOptions:{license:et,provider:en,generateStyle:ea,model:U,stylePreset:ef},lazyImages:"aiGenerated"===en||O,theme:ev,preserveLayouts:!1,cardDimensions:e_.cardDimensions,promptKey:eI},ez=null===(e=(await P({variables:{docGenerateInputId:f,options:{themeId:eb?void 0:ep||M.z.id,orgAccess:eb?y.aXG.Manage:void 0,docSettings:e_,aiOptions:{preserveLayouts:eE.preserveLayouts,imageOptions:eE.imageOptions},channels:l?[{channelId:l}]:void 0,schemaVersion:T.f$}}})).data)||void 0===e?void 0:e.generateDoc,eG=null==ez?void 0:ez.docGenerateInput.id;if(!eG)throw Error("No docGenerateInput.id to use as interactionId");if(!ez)throw Error("Could not create doc");let{input:eT,instructions:eM,...eA}=ex;w.B.trackRequestSent(s,{interface:"wizard",streaming:!0,interactionId:eG,inputContent:ex.input,inputMessage:ex.instructions,inputData:{options:{...eE,theme:ep},isGenerateV2:!0,isAdvancedMode:eo,isParallel:ew,generationType:es,...eA,promptKey:eI,tokenLength:W,docSettings:e_,modelSize:eC,search:eu,searchInGenerate:eh,reasoningEffort:ek},docId:ez.id,docGenerationId:m,docGenerateInputId:eG});let{stream:eV,cancel:eD}=(0,b.aO)({promptKey:eI,interactionId:eG,variables:{...ex,docId:ez.id,model:eR,reasoningEffort:ek},workspaceId:null==C?void 0:C.id},{streamId:ez.id,streamResumingEnabled:q,retries:3});try{r=await (0,j.Ct)({stream:eV,onCancel:eD,interactionId:eG,options:eE,bufferCards:1,store:s,docId:ez.id}).promise}catch(e){throw N(!1),e}if((0,k.c)({doc_id:ez.id,source:y.ALe.AiGenerated,extra:"v2"}),!o&&ej)await c({workspaceId:null==C?void 0:C.id,docId:ez.id,generateVars:ex,themeId:ep,firstCards:r.cards});else if(o)await p({docId:ez.id,site:o,workspaceId:null==C?void 0:C.id,generateVars:ex,firstCards:r.cards}),null==t||t();else{let e=null==n?void 0:n.mobileDocGenerated,t=(0,A.Xb)()&&!e;a("/docs/".concat(ez.id,"?source=").concat(I.MH).concat(t?"&isFirstMobileDocGeneration=true":""))}},[s,B,o,U,$,d,O,P,l,q,h,i,c,p,t,null==n?void 0:n.mobileDocGenerated,a]),isGenerating:W}},K=["GenerateDeckParallel","GenerateDeck2","GenerateDeck3","GenerateDeckContinuous"],Y=(e,t)=>{let n=t?R.of.get("generateDeckParallelPrompt"):R.of.get("generateDeckPrompt");return{promptKey:n,canGenerateLongOutput:K.includes(n)}};var ee=n(55733);let et=(0,u.memo)(e=>{var t;let{children:n,onClick:p,...v}=e,{onGenerateSuccess:f}=(0,m._2)(),j=(0,a.d)(),{user:b}=(0,g.ur)(),{isGenerating:w,generate:I}=Z({onSuccess:f,options:{mobileDocGenerated:null==b?void 0:null===(t=b.settings)||void 0===t?void 0:t.mobileDocGenerated}}),{canGenerate:y,cantGenerateReason:R}=(0,ee.w)(),C=(0,u.useCallback)(async()=>{null==p||p();try{await I()}catch(e){console.error("Error generating doc",e),j({title:c.Ru._({id:"lVr0qD"}),description:c.Ru._({id:"P+gnB7"}),status:"error",duration:5e3,isClosable:!0})}},[p,I,j]),k=(0,h.tO)(C,"generateV2",x.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2);return(0,i.jsx)(d.Tz,{label:R,isDisabled:y,children:(0,i.jsx)(r.s,{flex:"1",alignSelf:"stretch",alignItems:"stretch",justifyContent:"stretch",flexDirection:"column",children:(0,i.jsx)(l.$,{leftIcon:(0,i.jsx)(o.g,{icon:s.p7g}),variant:"solid",isLoading:w,loadingText:c.Ru._({id:"NOdFZR"}),isDisabled:w||!y,onClick:k,size:{base:"md",lg:"lg"},...v,children:n})})})});et.displayName="GenerateButton"},20574:(e,t,n)=>{n.d(t,{I:()=>I});var i=n(31085),a=n(35687),r=n(25420),l=n(62313),s=n(20869),o=n(33916),d=n(64225),c=n(55090),u=n(61778),m=n(9104),h=n(95640),x=n(14041),g=n(64795),p=n(99548),v=n(60434),f=n(88380);let j=(0,x.memo)(e=>{let{...t}=e,n=(0,d.GV)(s.yR),[r,l]=(0,v.R7)("numCards"),{maxCards:o}=(0,f.Zq)(),c=(0,x.useCallback)(()=>{if(!n)return;let e=n>=p.BO&&n%p.pn==0?p.pn:1;l(Math.min(n+e,o))},[n,l,o]),j=(0,x.useCallback)(()=>{if(!n||1===n)return;let e=n>=p.BO+p.pn&&n%p.pn==0?p.pn:1;l(Math.max(n-e,1))},[n,l]),[b]=(0,v.R7)("editorMode"),w=n>o,I=Math.min(n,o);return"structured"===b?(0,i.jsx)(m.Tz,{label:(0,i.jsx)(h.x6,{id:"Zne1Sw"}),placement:"top",children:(0,i.jsxs)(a.B,{spacing:{base:.5,sm:2},flex:"1",justifyContent:"center",alignItems:"center",direction:{base:"column-reverse",sm:"row"},children:[(0,i.jsx)(u.E,{cursor:"help",fontSize:w?"xs":"lg",fontWeight:w?void 0:"600",textDecoration:w?"line-through":void 0,color:w?"gray.500":void 0,css:{textWrap:"nowrap"},textAlign:"center",children:(0,i.jsx)(h.x6,{id:"AZLIlg",values:{cardCount:n}})}),w&&(0,i.jsx)(u.E,{fontSize:{base:"md",sm:"lg"},fontWeight:"600",lineHeight:"1",children:(0,i.jsx)(h.x6,{id:"gcpsjO",values:{adjustedCardCount:I}})})]})}):(0,i.jsx)(g.F,{maxCards:o,cardCount:n,onIncrement:c,onDecrement:j,...t})});j.displayName="CardCountSettings";var b=n(35316),w=n(28065);let I=e=>{let{cta:t}=e,n=(0,d.GV)(s.OM);if((0,d.GV)(s.n7))return null;let u=(0,i.jsx)(o.f,{modalId:"ai-credits-modal-generate-v2",variant:"ghost",justify:"flex-end",segmentEvent:c.VV.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2,alignSelf:"center"});return(0,i.jsx)(w.A,{children:(0,i.jsxs)(a.B,{w:"100%",direction:{base:"column-reverse",md:"row"},spacing:{base:2,md:4},alignItems:{base:"center",md:"flex-end"},children:[(0,i.jsx)(r.s,{flex:"1",children:u}),(0,i.jsxs)(a.B,{w:"2xl",maxW:"100%",overflow:"hidden",children:[(0,i.jsx)(b.NV,{}),(0,i.jsx)(b.Zy,{}),(0,i.jsx)(b.Kj,{}),(0,i.jsxs)(l.z,{spacing:{base:2,md:3},opacity:n?.75:1,pointerEvents:n?"none":"inherit",cursor:n?"not-allowed":"default",children:[(0,i.jsx)(j,{size:{base:"md",lg:"lg"}}),(0,i.jsx)(r.s,{flex:"1",alignItems:"stretch",flexDirection:"column",children:t})]})]}),(0,i.jsx)(r.s,{flex:"1",display:{base:"none",md:"flex"}})]})})}},55733:(e,t,n)=>{n.d(t,{w:()=>o});var i=n(12327),a=n(64225),r=n(20869),l=n(98177);let s=(e,t)=>{switch(e){case"invalid-empty":return i.Ru._({id:"9IxKHJ"});case"invalid-long":return i.Ru._({id:"ZcJO3k",values:{maxTokens:t}})}},o=()=>{let{maxTokens:e}=(0,l.is)(),t=(0,a.GV)((0,r.$t)(e));return void 0===t?{canGenerate:!0,cantGenerateReason:void 0}:{canGenerate:!1,validationError:t,cantGenerateReason:s(t,e)}}},79930:(e,t,n)=>{n.d(t,{g:()=>a});var i=n(35002);let a=(e,t)=>{let n=i.of.get("aiSearchMode");return"disabled"!==n&&"generate"===e&&("always"===n||"optional"===n&&t)?{search:!0,searchInGenerate:i.of.get("aiSearchInGenerate"),searchProvider:i.of.get("aiSearchProvider")}:{search:!1}}},66766:(e,t,n)=>{n.d(t,{f6:()=>f,Ct:()=>j,po:()=>v});var i=n(39448),a=n(78784),r=n(91526),l=n(23672),s=n(56154),o=n(21450);class d extends i.Rv{constructor(e,t){super({transform:async(t,n)=>{if("data"!==t.event){n.enqueue(t);return}let{data:i}=t;try{let a=await (0,o.Lm)(i,{...e,cardIndex:this.index,loadImages:!e.lazyImages}),r={index:this.index,cardComplete:!0,content:a,id:a.attrs.id,raw:i};n.enqueue({id:t.id,event:"data",data:r})}catch(t){console.error("[aiHtmlToCard] Skipping card ".concat(this.index," due to error:\n"),t),s.l7("aiHtml",i),s.l7("transformOptions",e),s.Cp(t),l.yf.logger.error("[aiHtmlToCard] Skipping card ${this.index} due to error",{sectionHtml:i,transformOptions:e},t)}this.index++}}),this.index=0,null!=t&&(this.index=t+1)}}let c=e=>{let t=e.match(/(<[^>]+>|<\/[^>]+>)|\S+/g);if(!t)throw Error("Could not parse tokens");return t};class u extends i.Rv{constructor(e){super({transform:async(t,n)=>{if("data"!==t.event){n.enqueue(t);return}let i=t.data,a=performance.now()-this.startTime,r=c(i.raw);e({index:this.index,duration:a,numTokens:r.length}),this.index++,this.startTime=performance.now(),n.enqueue(t)}}),this.index=0,this.startTime=performance.now()}}class m extends i.Rv{constructor(){super({transform:async(e,t)=>{"done"===e.event||"cancel"===e.event?t.enqueue({...e,content:this.content}):(this.content+=e.data.raw||"",t.enqueue(e))}}),this.content=""}}class h extends i.Rv{constructor(){let e=(e,t)=>{for(;;){let n=this._buffer.match(/<section\b[^>]*>(?:(?!<\/?section\b)[\s\S])*<\/section>/i);if(!n)break;let i=n[0],a=n.index;this._buffer=this._buffer.slice(a+i.length);let r=i+"\n\n";e.enqueue({id:t,event:"data",data:r})}};super({transform:async(t,n)=>{if("data"===t.event){if(!t.data)return;this._buffer+=t.data,e(n,t.id);return}this.lastId=t.id,n.enqueue(t)},flush:async t=>{e(t,this.lastId)}}),this._buffer=""}}class x extends i.Rv{constructor(){super({transform(e,t){if("done"===e.event){t.enqueue({id:e.id,event:"done",finishReason:e.data,content:""});return}if("cancel"===e.event){t.enqueue({id:e.id,event:"cancel",content:""});return}if("content"===e.event){t.enqueue({id:e.id,event:"data",data:e.data});return}console.error("[StreamMessageEventParser] unknown event type",e)}})}}var g=n(19033);let p="CANCEL",v=e=>new i.Rv({transform(t,n){e(t),n.enqueue(t)}}),f=e=>{let{stream:t,docId:n,lastCompletedCardId:i,lastCompletedCardIndex:l,interactionId:s,options:o,store:d}=e,[c,u]=b(t,o,l).tee(),m=c.pipeThrough(v(e=>{"done"===e.event&&r.B.trackStreamResponse(d,{interactionId:s,outputContent:e.content})}));(0,g.x_)(m,{}),d.dispatch((0,a.EX)({stream:{id:s,status:"running",stream:u,docId:n,isResuming:!0,lastCompletedCardId:i}}));let h=(0,a.A0)(n)(d.getState());if(!h)throw Error("Expected valid StreamResponse when resuming from stream");return h},j=e=>{let t,{stream:n,onCancel:i,interactionId:l,options:s,bufferCards:o=2,docId:d,store:c}=e,[m,h]=b(n,s).tee(),x=m.pipeThrough(new u(e=>{c.dispatch((0,a.cx)({interactionId:l,data:e}))})).pipeThrough(v(e=>{"done"===e.event&&r.B.trackStreamResponse(c,{interactionId:l,outputContent:e.content})}));c.dispatch((0,a.EX)({stream:{id:l,status:"running",stream:h,isResuming:!1,docId:d}}));let f=new Promise((e,n)=>{t=n;let i=[];(0,g.x_)(x,{onError:e=>{n(e)},onMessage(t){if("done"===t.event){e({status:"READY",cards:i});return}if("data"===t.event){let n=t.data.index+1;i.push(t.data),n>=o&&e({status:"READY",cards:i})}}})}).catch(e=>{if(e===p)return{status:"CANCELED",cards:[]};throw e}),j=!1;return{promise:f,cancel:()=>{j||(console.log("[AIStream] cancelling..."),j=!0,i(),null==t||t(p))}}},b=(e,t,n)=>e.pipeThrough(new x).pipeThrough(new h).pipeThrough(new d(t,n)).pipeThrough(v(e=>{"data"===e.event&&console.log("[AIStream] processed card ".concat(e.data.index+1))})).pipeThrough(new m).pipeThrough(v(e=>{"done"===e.event&&console.log("[AIStream] done (".concat(e.finishReason,")")),"cancel"===e.event&&console.log("[AIStream] cancelled")}))},74387:(e,t,n)=>{n.d(t,{s:()=>b});var i=n(31085),a=n(80532),r=n(25420),l=n(35687),s=n(61778),o=n(81313),d=n(14041),c=n(75678),u=n(1771),m=n(82354),h=n(38684),x=n(17539),g=n(53766),p=n(13320),v=n(79428),f=n(77654),j=n(55037);let b=(0,d.memo)(e=>{let{theme:t,isSelected:n=!1}=e,{contentStyles:d}=t.config,b=(0,h.fS)(t),w=(0,u.Mw)(t),I=(0,j.ZI)(t),y=(0,p.S)(t,!1),R=(0,h.FD)(b,w,x.p7),{inViewport:C,ref:k}=(0,g.v)({dimensions:{width:350,height:220}});return!1===C?(0,i.jsx)(a.az,{ref:k,"data-placeholder":!0,"data-theme-mobile-preview":t.id,w:"100%",children:(0,i.jsx)(r.s,{w:"calc(100vw - 5rem)",minH:"10em",sx:{"scroll-snap-align":"center"},color:"transparent",bg:"whiteAlpha.100",children:t.name})}):(0,i.jsx)(a.az,{css:I,sx:y,ref:k,w:"100%","data-theme-mobile-preview":t.id,children:(0,i.jsxs)(r.s,{flexDir:"column",w:"calc(100vw - 5rem)",sx:{"scroll-snap-align":"center"},borderRadius:"lg",shadow:n?"outline":"xl",overflow:"hidden",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease-out",pos:"relative",...R,children:[(0,i.jsx)(c.m,{theme:t}),(0,i.jsx)(a.az,{sx:{...v.CO,...d},borderRadius:"base",className:"".concat(m._P," ").concat(w?"is-dark":""),color:w?"white":"gray.900",flex:1,pointerEvents:"none",children:(0,i.jsxs)(l.B,{p:6,children:[(0,i.jsx)(s.E,{className:"block-title",noOfLines:1,wordBreak:"break-all",mt:"0 !important",mb:"var(--chakra-space-2) !important",children:(0,i.jsx)(s.E,{as:"span",className:(0,o.cx)("title",f.U6),fontSize:"1.8em !important",paddingBottom:"0 !important",children:t.name})}),(0,i.jsxs)(s.E,{fontSize:"sm",noOfLines:[4,6],className:"block block-paragraph",my:"0 !important",children:["Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dapibus iaculis sagittis."," ",(0,i.jsxs)(s.E,{as:"a",className:"link",children:[" ","Fusce pellentesque quam tortor,"]})," ","sit amet vulputate ligula sollicitudin nec. Etiam consectetur leo sed elit euismod, eget suscipit purus ullamcorper. Etiam id viverra purus. Nulla hendrerit sapien eget dui egestas posuere. Cras tristique condimentum tristique. Sed pellentesque felis sed justo ullamcorper molestie. Vestibulum et condimentum nibh, non pellentesque nisi."]})]})})]})})});b.displayName="ThemePreviewThumbnailMobile"}}]);
//# sourceMappingURL=1368-2b1d844b574d1d28.js.map