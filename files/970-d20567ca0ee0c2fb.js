"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[970],{14979:(e,t,r)=>{r.d(t,{Bo:()=>w,Gx:()=>y,R6:()=>v,Yq:()=>C,ak:()=>E});var o=r(12327),n=r(66820),s=r(77563),i=r(48736),a=r(75815),l=r(91142),d=r(49423),c=r(39643),u=r(59524),p=r(8808),h=r(96950),m=r(18176),g=r(14905),x=r(16753),b=r(38345),f=r(41103);let j={ar:d.A,en:c.A,fa:u.A,"pt-br":p.A,ja:h.A,"zh-cn":m.A,"zh-tw":g.A,es:x.A,fr:b.A,ko:f.A},v=()=>j[o.Ru.locale]||void 0,C=(e,t)=>e?(0,n.A)((0,s.A)(e),t,{locale:v()}):"",y=(e,t)=>e?(0,i.A)((0,s.A)(e),t?(0,s.A)(t):new Date,{locale:v()}):"",w=e=>e?(0,a.A)((0,s.A)(e),{locale:v()}):"",E=e=>e?(0,l.A)((0,s.A)(e),new Date,{locale:v(),addSuffix:!0,roundingMethod:"floor"}):""},4588:(e,t,r)=>{r.d(t,{b:()=>tR});var o=r(31085),n=r(80532),s=r(14041),i=r(4474),a=r(54041),l=r(32133),d=r(73893),c=r(63587),u=r(94445),p=r(67397),h=r(33854),m=r(64225),g=r(80352),x=r(25420),b=r(40173),f=r(9104),j=r(54235),v=r(87747),C=r(14968),y=r(65695),w=r(31201),E=r(35687),k=r(70323),I=r(35002),S=r(23832),R=r(19098),T=r(64444),A=r(9021),z=r(93185),B=r(61778),W=r(20501),D=r(24221),_=r(95640),L=r(59707);let N="0px 1px 0px rgba(0,0,0,0)",U="insert-widget-popover";var F=r(46882),O=r(13236),G=r(50877),M=r(10458),P=r(77256),V=r(77633),H=r(42849),q=r(27649),K=r(77646),Z=r(95580),X=r(75551);let J=(0,s.memo)(e=>{let{subcategory:t,items:r,editor:n,itemGroupLength:s,closeFn:i,hideTooltips:a,smallTitle:l}=e,{isInOfflineMode:d}=(0,G.utY)();return(0,o.jsxs)(E.B,{spacing:2,children:[(0,o.jsx)(f._x,{flex:"1",textAlign:"start",ms:1,fontSize:l?"xs":"sm",children:s>1&&t}),(0,o.jsx)(F.x,{gap:"1.5",gridTemplateColumns:"1fr 1fr 1fr",maxW:"100%",children:r.map(e=>(0,P.gT)(n,e,!1,d)?null:(0,o.jsx)(X.p,{item:e,onDragStart:()=>Q(e,n,i,a),onDragEnd:t=>Y(e,n,t),onClick:()=>$(e,n,i,d)},e.key))})]})});J.displayName="InsertWidgetSubcategory";let $=function(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=()=>{r(),(0,P.Jb)(e,M.oU.INSERT_WIDGET),"cardTemplate"===e.type&&(0,V.B)(e.key),e.execute(t)},s=t.view,i=t.state.selection,a=t.state.doc.resolve(i.from),l=(0,O.eL)(a,K.jg),{mostVisible:d,visibleCards:c}=(0,K.lA)(t),u=c.some(e=>e.pos===(null==l?void 0:l.pos)),p=(0,P.gT)(t,e,void 0,o);if(u&&!p){n();return}if(!(0,P.gT)(t,e,!1,o))try{let r=(null==d?void 0:d.pos)?(0,H.dg)(s.state.tr,d.pos):null,o=null==r?void 0:r.body;if(o){let r=o.pos+o.node.nodeSize-1;if(t.commands.setTextSelection(r),!(0,Z.Bi)(t,e.nodeName)){let e=o.pos+2;t.commands.setTextSelection(e)}if(!(0,Z.Bi)(t,e.nodeName))return}n(),s.dispatch(s.state.tr.scrollIntoView())}catch(e){console.error("[InsertWidget] error in click to insert:",e)}},Y=(e,t,r)=>{r.preventDefault(),r.stopPropagation();let{dragEndFn:o}=e;try{o&&o(t),(0,P.Jb)(e,M.oU.INSERT_WIDGET),"cardTemplate"===e.type&&(0,V.B)(e.key)}catch(e){console.error("[InsertWidget] dragEndFn error:",e)}},Q=(e,t,r,o)=>{setTimeout(()=>{r()});let n="card"===e.nodeName?(0,q.iM)((0,P.GO)()[e.key]):(0,P.GO)()[e.key],s=e.dragStartFn?e.dragStartFn:n?()=>(0,P.fS)(t,n):void 0;if(!s){console.error("[InsertWidget] dragStartFn undefined",e);return}s(t),null==o||o()};var ee=r(12917),et=r(12327),er=r(16262),eo=r(73459),en=r(95785),es=r(99603),ei=r(97025),ea=r(97661),el=r(59277);let ed="search";var ec=function(e){return e.Cards="cards",e.Images="images",e.Apps="apps",e.Videos="videos",e.Layouts="layouts",e.Text="text",e.Forms="forms",e.Charts="charts",e}({});let eu={Other:(0,o.jsx)(_.x6,{id:"/IX/7x"}),Tables:(0,o.jsx)(_.x6,{id:"8+4V8D"}),Columns:(0,o.jsx)(_.x6,{id:"jEu4bB"}),"Smart layouts":(0,o.jsx)(_.x6,{id:"uNnHCK"}),Lists:(0,o.jsx)(_.x6,{id:"h16FyT"}),Interactive:(0,o.jsx)(_.x6,{id:"jijeT/"}),Text:(0,o.jsx)(_.x6,{id:"xeiujy"}),Diagrams:(0,o.jsx)(_.x6,{id:"muZ1GG"}),"Smart diagrams":(0,o.jsx)(_.x6,{id:"djbazg"}),New:(0,o.jsx)(_.x6,{id:"isRobC"}),"Callout boxes":(0,o.jsx)(_.x6,{id:"uJ8xrP"}),Charts:(0,o.jsx)(_.x6,{id:"A4tHrb"})},ep=()=>{let e=(0,P.Vo)();return{cards:{key:"cards",name:et.Ru._({id:"4z8XKi"}),shortName:et.Ru._({id:"Ccpbzh"}),subtitle:et.Ru._({id:"b2o2+V"}),icon:ee.HuL,itemGroups:(0,eo.D)()},images:{key:"images",name:et.Ru._({id:"an5hVd"}),shortName:et.Ru._({id:"an5hVd"}),subtitle:et.Ru._({id:"BbyCbN"}),icon:ee.Cyq,itemGroups:[{subcategory:eu.Other,items:[...(0,ei.D)().filter(e=>"image"===e.nodeName),e.gallery]}]},charts:{key:"charts",name:et.Ru._({id:"u5XrTN"}),shortName:et.Ru._({id:"A4tHrb"}),subtitle:et.Ru._({id:"sp3a5R"}),icon:ee.s67,itemGroups:[{subcategory:eu.Charts,items:(0,en.V)()},{subcategory:eu.Diagrams,items:(0,es.A)()},{subcategory:eu["Smart diagrams"],items:(0,ea.b)()},{subcategory:(0,o.jsx)(_.x6,{id:"uNnHCK"}),items:(0,el.WP)()}]},apps:{key:"apps",name:et.Ru._({id:"Nz7jbx"}),shortName:et.Ru._({id:"aTofd0"}),icon:ee.c9S,subtitle:et.Ru._({id:"iC/G6e"}),itemGroups:[{subcategory:eu.Other,items:[...(0,ei.D)().filter(e=>"embed"===e.nodeName&&(!e.categories||e.categories.includes("app")))]}]},videos:{key:"videos",name:et.Ru._({id:"86kBVB"}),shortName:et.Ru._({id:"RKuImK"}),subtitle:et.Ru._({id:"hCcWLL"}),icon:ee.OxR,itemGroups:[{subcategory:eu.Other,items:[e.gallery,...(0,ei.D)().filter(e=>"video"===e.nodeName)]}]},layouts:{key:"layouts",name:et.Ru._({id:"uNnHCK"}),shortName:et.Ru._({id:"yU0QVO"}),subtitle:et.Ru._({id:"TDKzF0"}),icon:ee.swh,itemGroups:[{subcategory:eu.Columns,items:[e.columns2,e.columns3,e.columns4]},{subcategory:(0,o.jsx)(_.x6,{id:"vjXym+"}),items:(0,el.WP)()},{subcategory:(0,o.jsx)(_.x6,{id:"iTylMl"}),items:(0,el.Wg)()}]},text:{key:"text",name:et.Ru._({id:"8nVVMR"}),shortName:et.Ru._({id:"7s3WlU"}),subtitle:et.Ru._({id:"l6pR8S"}),icon:ee.tiU,itemGroups:[{subcategory:eu.Text,items:[e.title,e.h1,e.h2,e.h3,e.h4,e.blockquote]},{subcategory:eu.Tables,items:[e.table2,e.table3,e.table4]},{subcategory:eu.Lists,items:[e.bulletedList,e.numberedList,e.todoList]},{subcategory:eu["Callout boxes"],items:(0,er.A3)()},{subcategory:eu.Interactive,items:[e.buttonGroup,e.toggle]},{subcategory:eu.Other,items:[e.codeBlock,e.mathBlock,e.footnote,e.contributors,e.tableOfContents,e.divider]}]},forms:{key:"forms",name:et.Ru._({id:"4Kic3M"}),shortName:et.Ru._({id:"CiIFml"}),subtitle:et.Ru._({id:"Gsox27"}),icon:ee.tAZ,itemGroups:[{subcategory:eu.Other,items:[e.buttonGroup,...(0,ei.D)().filter(e=>{var t;return"embed"===e.nodeName&&(null===(t=e.categories)||void 0===t?void 0:t.includes("form"))})]}]}}},eh=()=>[["cards","layouts"],["text","images","videos","apps","charts","forms"]],em=()=>eh().map(e=>e.map(e=>ep()[e]));var eg=r(56824);let ex=()=>({iconColor:(0,eg.dU)("trueblue.600","trueblue.200"),hoverColor:(0,eg.dU)("gray.100","whiteAlpha.100"),activeColor:(0,eg.dU)("gray.200","whiteAlpha.200"),popoverBackgroundColor:(0,eg.dU)("gray.50","blackAlpha.900"),searchInputIconColor:(0,eg.dU)("gray.500","gray.500"),searchInputBorderColor:(0,eg.dU)("gray.200","whiteAlpha.200"),searchInputBackgroundColor:(0,eg.dU)("whiteAlpha.900","blackAlpha.900"),searchInputTextColor:(0,eg.dU)("gray.900","gray.100"),searchInputCloseColorScheme:(0,eg.dU)("blackAlpha","gray"),scrollGradientStart:(0,eg.dU)("rgba(249, 246, 246, 0)","rgba(0,0,0,0)"),scrollGradientEnd:(0,eg.dU)("rgba(249, 246, 246, 1)","rgba(0,0,0,0.9)"),attentionColor:(0,eg.dU)("trueblue.200","gray.900"),attentionTextColor:(0,eg.dU)("whiteAlpha.900","gray.100")}),eb=(0,s.memo)(e=>{let{icon:t,name:r,subtitle:i,itemGroups:a,editor:l,setOpenButton:d,isOpen:c}=e,u=(0,s.useRef)(null),{GammaTooltipHiderContext:p,hideTooltips:h}=(0,f.ku)(),m=ex(),g=(0,s.useCallback)(()=>{d(null)},[d]);(0,s.useEffect)(()=>{c&&u.current&&u.current.scrollTo({top:0})},[c]);let j=ep();return(0,o.jsxs)(R.A,{placement:"start",isOpen:c,isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,modifiers:[{name:"preventOverflow",enabled:!0,options:{padding:20}}],autoFocus:!1,children:[(0,o.jsx)(f.Tz,{label:r,modifiers:[{name:"offset",options:{offset:[0,-2]}}],shouldWrapChildren:!0,"aria-label":r,placement:"left",portalProps:{appendToParentPortal:!0},children:(0,o.jsx)(T.W,{children:(0,o.jsx)(A.K,{"aria-label":r,"data-testid":"".concat(r.toLowerCase().split(" ").join("-"),"-widget-inner-button"),size:"md",icon:(0,o.jsx)(D.g,{icon:t}),color:"neutral.toolbar.icon",fontWeight:"500",borderRadius:"md",backdropFilter:"blur(20px)",variant:"undefined",bg:c?m.activeColor:void 0,_hover:{bg:c?m.activeColor:m.hoverColor},textShadow:N,onMouseDown:e=>(l.isFocused&&(0,L.Fw)(e),d(e=>e===r?null:r),!0)})})}),(0,o.jsx)(b.Z,{children:(0,o.jsxs)(z.h,{bg:"neutral.menu.background",borderRadius:"xl",borderColor:"var(--chakra-colors-chakra-border-color)",shadow:"xl",zIndex:"overlay",overflow:"hidden",maxH:"90vh",w:"400px",p:0,me:-.5,className:U,position:"relative","data-insert-widget-popover":!0,children:[(0,o.jsxs)(p,{children:[(0,o.jsx)(n.az,{p:2,borderBottom:"1px solid",borderColor:m.searchInputBorderColor,children:(0,o.jsxs)(f._x,{flex:"1",textAlign:"start",ms:1,children:[(0,o.jsxs)(x.s,{alignItems:"center",children:[(0,o.jsx)(D.g,{icon:t}),(0,o.jsx)(B.E,{ms:2,children:r})]}),(0,o.jsx)(B.E,{fontSize:"xs",children:i})]})}),(0,o.jsx)(E.B,{ref:u,overflow:"hidden auto",p:2,pb:a.length>1?8:2,spacing:3,children:a.map((e,t)=>{let{subcategory:r,items:n}=e;return(0,o.jsx)(J,{subcategory:r,items:n,editor:l,itemGroupLength:a.length,closeFn:g,hideTooltips:h},t)})})]}),j[ec.Layouts].name===r&&(0,o.jsxs)(x.s,{alignItems:"center",gap:2,paddingX:4,paddingY:3,zIndex:1,backgroundColor:m.attentionColor,color:m.attentionTextColor,children:[(0,o.jsx)(D.g,{"aria-label":"Tip",icon:W.mEO}),(0,o.jsx)(B.E,{fontSize:"xs",children:(0,o.jsx)(_.x6,{id:"HVl8F3"})})]}),a.length>1&&(0,o.jsx)(n.az,{h:"12",w:"100%",position:"absolute",bottom:"0",bg:"linear-gradient(to bottom, ".concat(m.scrollGradientStart,", ").concat(m.scrollGradientEnd," 90%)"),pointerEvents:"none"})]})})]})});eb.displayName="InsertWidgetButtons";var ef=r(20931),ej=r(6256),ev=r(76166),eC=r(35436),ey=r(20671),ew=r(71144);let eE=(0,s.memo)(e=>{let{isOpen:t,setOpenButton:r,editor:n,insertableCategoriesListLocalized:i,allFlags:a}=e,l=ex(),d=(0,s.useMemo)(()=>{let e=i.flat().filter(e=>{let{featureFlag:t}=e;return!t||a[t]}),t=e.findIndex(e=>e.key===ec.Cards);if(t>-1){let[r]=e.splice(t,1);e.push(r)}return e},[i,a]),c=(0,s.useCallback)(()=>{r(null)},[r]);return(0,o.jsxs)(R.A,{placement:"start",isOpen:t,isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,modifiers:[{name:"preventOverflow",enabled:!0,options:{padding:20}}],autoFocus:!1,children:[(0,o.jsx)(f.Tz,{label:"Search",modifiers:[{name:"offset",options:{offset:[0,-2]}}],shouldWrapChildren:!0,"aria-label":et.Ru._({id:"A1taO8"}),placement:"left",portalProps:{appendToParentPortal:!0},children:(0,o.jsx)(T.W,{children:(0,o.jsx)(A.K,{"aria-label":et.Ru._({id:"A1taO8"}),"data-testid":"".concat(ed,"-widget-inner-button"),size:"md",icon:(0,o.jsx)(D.g,{icon:ee.MjD}),color:l.iconColor,fontWeight:"500",borderRadius:"md",backdropFilter:"blur(20px)",variant:"undefined",bg:t?l.activeColor:void 0,_hover:{bg:t?l.activeColor:l.hoverColor},textShadow:N,onMouseDown:e=>(n.isFocused&&(0,L.Fw)(e),r(e=>e===ed?null:ed),!0)})})}),(0,o.jsx)(b.Z,{children:(0,o.jsxs)(z.h,{bg:l.popoverBackgroundColor,borderRadius:"xl",borderColor:"var(--chakra-colors-chakra-border-color)",shadow:"xl",zIndex:"overlay",overflow:"hidden",maxH:"90vh",w:"400px",p:0,me:-.5,className:U,position:"relative","data-insert-widget-popover":!0,children:[(0,o.jsx)(eI,{editor:n,closeFn:c,isOpen:t,insertableCategoriesForSearch:d}),(0,o.jsxs)(x.s,{alignItems:"center",gap:2,paddingX:4,paddingY:3,zIndex:1,backgroundColor:l.attentionColor,color:l.attentionTextColor,children:[(0,o.jsx)(D.g,{"aria-label":et.Ru._({id:"rm2Cxd"}),icon:W.mEO}),(0,o.jsx)(B.E,{fontSize:"xs",children:(0,o.jsx)(_.x6,{id:"4jZKOY",components:{0:(0,o.jsx)(ej.C,{})}})})]})]})})]})});eE.displayName="SearchAllWidgets";let ek=(0,s.memo)(e=>{let{query:t,onChange:r,isOpen:i}=e,a=ex(),l=(0,s.useRef)(null);return(0,s.useEffect)(()=>{i&&l.current&&setTimeout(()=>{var e;null==l||null===(e=l.current)||void 0===e||e.focus()})},[i]),(0,o.jsx)(n.az,{p:4,borderBottom:"1px solid",borderColor:a.searchInputBorderColor,children:(0,o.jsxs)(ev.M,{size:"md",variant:"outline",children:[(0,o.jsx)(eC.W,{pointerEvents:"none",children:(0,o.jsx)(ef.W,{color:a.searchInputIconColor})}),(0,o.jsx)(ey.p,{ref:l,placeholder:et.Ru._({id:"W/TXwD"}),value:t,onChange:r,backgroundColor:a.searchInputBackgroundColor,color:a.searchInputTextColor}),t&&(0,o.jsx)(eC.t,{p:4,children:(0,o.jsx)(A.K,{variant:"ghost",colorScheme:a.searchInputCloseColorScheme,size:"xs","aria-label":et.Ru._({id:"V8yTm6"}),icon:(0,o.jsx)(D.g,{icon:W.Jyw}),onClick:()=>r({target:{value:""}})})})]})})});ek.displayName="SearchInput";let eI=(0,s.memo)(e=>{let{editor:t,closeFn:r,isOpen:n,insertableCategoriesForSearch:i}=e,{GammaTooltipHiderContext:a,hideTooltips:l}=(0,f.ku)(),d=(0,s.useRef)(null),[c,u]=(0,s.useState)(""),p=(0,s.useMemo)(()=>i.map(e=>{let{name:t,itemGroups:r,icon:o,featureFlag:n,subtitle:s}=e,i=r.map(e=>({...e,items:e.items.filter(e=>{let{name:t,keywords:r=[]}=e;return t().toLowerCase().includes(c.toLowerCase())||r.find(e=>e.startsWith(c.toLowerCase()))})})).filter(e=>e.items.length>0);return i.length>0?{name:t,subtitle:s,icon:o,featureFlag:n,itemGroups:i}:null}).filter(Boolean),[i,c]);return(0,s.useEffect)(()=>{n&&d.current&&d.current.scrollTo({top:0})},[n]),(0,s.useEffect)(()=>{n||u("")},[n]),(0,o.jsxs)(a,{children:[(0,o.jsx)(ek,{query:c,onChange:e=>u(e.target.value),isOpen:n}),(0,o.jsxs)(E.B,{p:2,pb:8,spacing:6,h:"100%",overflow:"hidden auto",ref:d,children:[!p.length&&(0,o.jsx)(E.B,{alignItems:"center",justifyContent:"center",h:"100%",pt:20,pb:20,children:(0,o.jsx)(ew.p,{size:"xs",title:(0,o.jsx)(_.x6,{id:"X+k8ml"}),description:(0,o.jsx)(_.x6,{id:"BcZ5cE"})})}),p.map(e=>{let{name:n,itemGroups:s,icon:i,subtitle:a}=e;return(0,o.jsxs)(E.B,{spacing:2,children:[(0,o.jsxs)(f._x,{flex:"1",textAlign:"start",ms:1,children:[(0,o.jsxs)(x.s,{alignItems:"center",children:[(0,o.jsx)(D.g,{icon:i}),(0,o.jsx)(B.E,{ms:2,children:n})]}),(0,o.jsx)(B.E,{fontSize:"xs",children:a})]}),s.map((e,n)=>{let{subcategory:i,items:a}=e;return(0,o.jsx)(J,{smallTitle:!0,subcategory:i,items:a,editor:t,itemGroupLength:s.length,closeFn:r,hideTooltips:l},n)})]},n)})]})]})});eI.displayName="SearchAllWidgetsContent";let eS=e=>{let{editor:t}=e,r=(0,S.n)(em),n=(0,I.mt)(),[i,a]=s.useState(null),l=(0,s.useRef)(null);return(0,w.j)({ref:l,handler:e=>{e.target.closest("[data-insert-widget-popover]")||a(null)}}),(0,o.jsxs)(E.B,{bg:"neutral.toolbar.background",color:"neutral.toolbar.text",p:.5,borderWidth:"1px",borderColor:"neutral.toolbar.border",borderRadius:"md",shadow:"lg",ref:l,overflow:"hidden",spacing:1,children:[(0,o.jsx)(eE,{setOpenButton:a,isOpen:"search"===i,editor:t,insertableCategoriesListLocalized:r,allFlags:n}),r.map((e,r)=>(0,o.jsxs)(s.Fragment,{children:[r>0&&(0,o.jsx)(k.c,{}),e.map(e=>{let{name:r,shortName:n,itemGroups:s,icon:l,subtitle:d,key:c}=e;return(0,o.jsx)(eb,{itemGroups:s,icon:l,name:r,shortName:n,subtitle:d,editor:t,setOpenButton:a,isOpen:i===r},c)})]},r))]})},eR=e=>{let{editor:t}=e;return(0,y.R)()?(0,o.jsx)(x.s,{position:"fixed",w:"0%",h:"0%",insetInlineEnd:4,top:"50%",alignItems:"center",zIndex:C.$.insertWidget,"data-testid":"insert-widget-wrapper",children:(0,o.jsx)(x.s,{position:"absolute",insetInlineEnd:0,"data-guider-highlight":"insert-widget",direction:"column",className:"insert-widget",children:(0,o.jsx)(eS,{editor:t})})}):null},eT=(0,s.memo)(e=>{let{editor:t}=e,[r,n]=(0,s.useState)(!1),i=(0,v.rd)();return((0,s.useEffect)(()=>j.R.on("bringInsertWidgetToFront",e=>{let{inFront:t}=e;n(t)}),[]),r)?(0,o.jsx)(f.L8,{isDark:i,children:(0,o.jsx)(b.Z,{children:(0,o.jsx)(eR,{editor:t})})}):(0,o.jsx)(f.L8,{isDark:i,children:(0,o.jsx)(eR,{editor:t})})});var eA=r(9138),ez=r(2250),eB=r(43421),eW=r(5933),eD=r(14e3);let e_=(e,t,r)=>{let[o,n]=(0,s.useState)(!1),[i,a]=(0,s.useState)(!1),l=(0,s.useRef)(),d=(0,s.useCallback)(t=>{n(!0),e(t)},[e]),c=(0,s.useCallback)(e=>{n(!1),a(!1),t(e)},[t]);return{isDragging:o,isMouseDown:i,handleDragStart:d,handleDragEnd:c,handleClick:(0,s.useCallback)(e=>{l.current instanceof HTMLElement&&l.current.focus(),r(e)},[r]),onMouseDown:(0,s.useCallback)(()=>{a(!0),l.current=document.activeElement||void 0},[]),onMouseUp:(0,s.useCallback)(()=>{a(!1)},[])}},eL=()=>{let[e]=(0,ez.U)(["(max-height: 400px)","(min-height: 401px"]),t=(0,m.GV)(eW.nD),r=(0,m.GV)(eW.cS),o=(0,eB.A)({base:!1,lg:!0}),n=(0,m.GV)(eW.wC);return t&&!e&&!r&&o&&n!==eD.w.SLIDE_VIEW};var eN=r(62313),eU=r(83858);let eF="insert-widget-popover";var eO=r(80853);let eG=()=>({textColor:(0,eg.dU)("gray.900","gray.100"),iconColor:(0,eg.dU)("trueblue.600","trueblue.200"),hoverColor:(0,eg.dU)("gray.100","whiteAlpha.100"),activeColor:(0,eg.dU)("gray.200","whiteAlpha.200"),popoverBackgroundColor:(0,eg.dU)("gray.50","blackAlpha.900"),searchInputIconColor:(0,eg.dU)("gray.500","gray.500"),searchInputBorderColor:(0,eg.dU)("gray.200","whiteAlpha.200"),searchInputBackgroundColor:(0,eg.dU)("whiteAlpha.900","blackAlpha.900"),searchInputTextColor:(0,eg.dU)("gray.900","gray.100"),searchInputCloseColorScheme:(0,eg.dU)("blackAlpha","gray"),scrollGradientStart:(0,eg.dU)("rgba(249, 246, 246, 0)","rgba(0,0,0,0)"),scrollGradientEnd:(0,eg.dU)("rgba(249, 246, 246, 1)","rgba(0,0,0,0.9)"),attentionColor:(0,eg.dU)("trueblue.200","gray.900"),attentionTextColor:(0,eg.dU)("whiteAlpha.900","gray.100"),bg:(0,eg.dU)("gray.50","gray.900"),border:(0,eg.dU)("blackAlpha.100","whiteAlpha.200"),dividerColor:(0,eg.dU)("blackAlpha.200","whiteAlpha.200")}),eM=(0,s.forwardRef)((e,t)=>{let{testId:r,icon:n,label:s,onClick:i,isOpen:a,editor:l}=e,d=eG();return(0,o.jsxs)(eO.$,{ref:t,"aria-label":s,"data-testid":"".concat(r,"-widget-inner-button"),size:"lg",color:d.iconColor,fontWeight:"500",borderRadius:"md",variant:"undefined",bg:a?d.activeColor:void 0,_hover:{bg:a?d.activeColor:d.hoverColor},textShadow:"0px 1px 0px rgba(0,0,0,0)",onMouseDown:e=>(l.isFocused&&(0,L.Fw)(e),i(),!0),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:2,width:65,height:65,transition:"height 0.2s ease-in-out",role:"button",children:[(0,o.jsx)(D.g,{icon:n,size:"lg","aria-hidden":"true"}),(0,o.jsx)(B.E,{fontSize:"xs",fontWeight:"medium",mt:2,color:d.textColor,textAlign:"center",maxW:"60px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxHeight:"20px","aria-hidden":"true",children:s})]})});eM.displayName="InsertWidgetButton";var eP=r(18651),eV=r(27670),eH=r(3040),eq=r(51436),eK=r(37570);let eZ=e=>{let{item:t}=e,{name:r,image:s,icon:i,key:a,previewImage:l,shortcut:d,badge:c}=t,u=(0,eq.iT)(),{colorMode:p}=(0,eg.G6)(),h={iconColor:(0,eg.dU)("trueblue.600","trueblue.100"),bgColor:(0,eg.dU)("white","gray.900"),textColor:(0,eg.dU)("gray.800","gray.100"),borderColor:(0,eg.dU)("gray.200","gray.700"),invertFilter:(0,eg.dU)("invert(0)","invert(.7) brightness(1.4) hue-rotate(180deg)"),iconBgColor:(0,eg.dU)("white","gray.800"),gripDotsColor:(0,eg.dU)("gray.500","gray.500")};return(0,o.jsxs)(E.B,{h:"100%",bg:h.bgColor,p:2.5,pt:2,spacing:1.5,alignItems:"center",shadow:"sm",borderRadius:"xl",border:"1px",borderColor:h.borderColor,role:"group",children:[(0,o.jsx)(x.s,{justifyContent:"center",alignItems:"center",minH:"7",w:"100%",children:"cardTemplate"===t.type&&u[a]?(0,o.jsx)(eK.LK,{content:u[a].jsonContent,isDark:"dark"===p}):l?(0,o.jsx)(x.s,{bg:h.iconBgColor,borderRadius:"md",children:(0,o.jsx)(eP._,{filter:h.invertFilter,src:l.src,w:"100%",maxW:"100%",alt:r(),pointerEvents:"none"})}):s?(0,o.jsx)(eP._,{src:s.src,borderRadius:"sm",h:"1.5em",w:"1.5em",objectFit:"contain",pointerEvents:"none"}):(0,o.jsx)(n.az,{color:h.iconColor,fontSize:"xl",children:i&&(0,o.jsx)(D.g,{icon:i})})}),c&&(0,o.jsx)(eV.E,{position:"absolute",top:"1",insetEnd:"2",colorScheme:"green",children:c()}),(0,o.jsxs)(E.B,{spacing:0,whiteSpace:"break-spaces",flex:"1",textAlign:"center",children:[(0,o.jsx)(B.E,{color:h.textColor,fontWeight:"600",fontSize:"xs",lineHeight:1.2,noOfLines:2,children:r()}),d&&(0,o.jsx)(B.E,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:d})]})]})},eX=e=>{let{item:t,onDragStart:r,onDragEnd:s,onClick:i}=e,{isDragging:a,isMouseDown:l,handleDragStart:d,handleDragEnd:c,handleClick:u,onMouseDown:p,onMouseUp:h}=e_(r,s,i),{key:m,description:g}=t,x={gripDotsBg:(0,eg.dU)("white","gray.900"),gripDotsColor:(0,eg.dU)("gray.500","gray.500")};return(0,o.jsx)(f.Tz,{closeOnMouseDown:!0,closeOnClick:!0,isOpen:!a&&void 0,label:(0,o.jsxs)(n.az,{as:"span",display:"inline",children:[(0,o.jsx)(D.g,{icon:W.bFI})," ",(0,o.jsx)(B.E,{display:"inline",children:(0,o.jsx)(_.x6,{id:"Dd9uag"})}),g&&(0,o.jsx)(B.E,{textAlign:"start",color:"gray.300",maxW:"170px",children:g()})]}),"aria-label":et.Ru._({id:"Dd9uag"}),placement:"top",children:(0,o.jsxs)(E.B,{"data-testid":"".concat(m,"-insert-button"),draggable:!0,onDragStart:d,onDragEnd:c,onClick:u,onMouseDown:p,onMouseUp:h,onMouseLeave:h,cursor:"grab",_hover:{transform:"scale(1.05) rotate(-0.25deg)",shadow:"lg"},transitionProperty:"common",transitionDuration:"normal",transform:"rotate(".concat(l&&!a?-1:0,"deg) translate(0, 0);"),role:"group",borderRadius:"xl",children:[(0,o.jsx)(eZ,{item:t}),(0,o.jsx)(n.az,{opacity:0,_groupHover:{opacity:1},transitionProperty:"opacity",transitionDuration:"normal",position:"absolute",top:"0",insetStart:"1.5",bg:x.gripDotsBg,color:x.gripDotsColor,borderRadius:"sm",fontSize:"sm",children:(0,o.jsx)(D.g,{icon:eH.IMq,fixedWidth:!0})})]})})},eJ=(0,s.memo)(e=>{let{subcategory:t,items:r,editor:n,itemGroupLength:s,closeFn:i,hideTooltips:a}=e,{isInOfflineMode:l}=(0,G.utY)();return(0,o.jsxs)(E.B,{spacing:2,children:[(0,o.jsx)(f._x,{flex:"1",textAlign:"start",ms:1,fontSize:"xs",children:s>1&&t}),(0,o.jsx)(F.x,{gap:"1.5",gridTemplateColumns:"1fr 1fr 1fr 1fr",maxW:"100%",children:r.map(e=>(0,P.gT)(n,e,!1,l)?null:(0,o.jsx)(eX,{item:e,onDragStart:()=>Q(e,n,i,a),onDragEnd:t=>Y(e,n,t),onClick:()=>$(e,n,i,l)},e.key))})]})});eJ.displayName="InsertWidgetSubcategory";let e$=(0,s.memo)(e=>{let{icon:t,name:r,shortName:i,subtitle:a,itemGroups:l,editor:d,setOpenButton:c,isOpen:u,containerRef:p}=e,[h,m]=(0,s.useState)(null),g=(0,s.useRef)(null),{GammaTooltipHiderContext:j,hideTooltips:v}=(0,f.ku)(),C=eG(),{styles:y,attributes:w}=(0,eU.E)(p.current,h,{placement:"top-start",modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{padding:20,boundary:document.body}},{name:"flip",options:{fallbackPlacements:["bottom-start","right-start","left-start"]}}]}),k=(0,s.useCallback)(()=>{c(null)},[c]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.Tz,{label:a,shouldWrapChildren:!0,"aria-label":a,placement:"bottom",portalProps:{appendToParentPortal:!0},children:(0,o.jsx)("div",{ref:g,children:(0,o.jsx)(eM,{testId:r,icon:t,label:i,onClick:()=>{u?k():c(r)},isOpen:u,editor:d})})}),u&&(0,o.jsx)(b.Z,{children:(0,o.jsxs)(E.B,{ref:m,style:{...y.popper},backgroundColor:C.popoverBackgroundColor,borderRadius:"var(--chakra-radii-xl)",borderColor:"var(--chakra-colors-chakra-border-color)",borderWidth:"1px",boxShadow:"var(--chakra-shadows-xl)",zIndex:"var(--chakra-zIndices-overlay)",overflow:"hidden",maxHeight:"50vh",width:"625px",padding:0,marginEnd:"-0.5rem",position:"relative",className:eF,"data-insert-widget-popover":!0,...w.popper,children:[(0,o.jsxs)(j,{children:[(0,o.jsx)(n.az,{p:2,borderBottom:"1px solid",borderColor:C.searchInputBorderColor,children:(0,o.jsx)(f._x,{flex:"1",textAlign:"start",ms:1,children:(0,o.jsxs)(x.s,{alignItems:"center",children:[(0,o.jsx)(D.g,{icon:t}),(0,o.jsxs)(B.E,{ms:2,fontSize:"xs",children:[r,"\xa0"]}),(0,o.jsxs)(B.E,{fontSize:"xxs",color:"gray.500",children:["| ",a]})]})})}),(0,o.jsx)(E.B,{ref:e=>{e&&u&&setTimeout(()=>{e&&e.scrollTo({top:0})},0)},overflow:"hidden auto",p:2,pb:l.length>1?8:2,spacing:3,children:l.map((e,t)=>{let{subcategory:r,items:n}=e;return(0,o.jsx)(eJ,{subcategory:r,items:n,editor:d,itemGroupLength:l.length,closeFn:k,hideTooltips:v},t)})})]}),l.length>1&&(0,o.jsx)(n.az,{h:"12",w:"100%",position:"absolute",bottom:"0",bg:"linear-gradient(to bottom, ".concat(C.scrollGradientStart,", ").concat(C.scrollGradientEnd," 90%)"),pointerEvents:"none"})]})})]})});e$.displayName="InsertWidgetButtons";let eY=(0,s.memo)(e=>{let{isOpen:t,setOpenButton:r,editor:n,insertableCategoriesListLocalized:i,allFlags:a,containerRef:l}=e,d=eG(),c=(0,s.useRef)(null),[u,p]=(0,s.useState)(null),{styles:h,attributes:m}=(0,eU.E)(l.current,u,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,8]}}]}),g=(0,s.useMemo)(()=>{let e=i.flat().filter(e=>{let{featureFlag:t}=e;return!t||a[t]}),t=e.findIndex(e=>e.key===ec.Cards);if(t>-1){let[r]=e.splice(t,1);e.push(r)}return e},[i,a]),x=(0,s.useCallback)(()=>{r(null)},[r]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.Tz,{label:"Search",shouldWrapChildren:!0,"aria-label":et.Ru._({id:"A1taO8"}),placement:"top",portalProps:{appendToParentPortal:!0},children:(0,o.jsx)("div",{ref:c,children:(0,o.jsx)(eM,{testId:ed,icon:ee.MjD,label:et.Ru._({id:"A1taO8"}),onClick:()=>{t?x():r(ed)},isOpen:t,editor:n})})}),t&&(0,o.jsx)(b.Z,{children:(0,o.jsx)(E.B,{ref:p,style:{...h.popper},backgroundColor:d.popoverBackgroundColor,borderRadius:"var(--chakra-radii-xl)",borderColor:"var(--chakra-colors-chakra-border-color)",borderWidth:"1px",boxShadow:"var(--chakra-shadows-xl)",zIndex:"var(--chakra-zIndices-overlay)",overflow:"hidden",maxHeight:"50vh",width:"625px",padding:0,marginEnd:"-0.5rem",position:"relative",className:eF,"data-insert-widget-popover":!0,...m.popper,children:(0,o.jsx)(e0,{editor:n,closeFn:x,isOpen:t,insertableCategoriesForSearch:g})})})]})});eY.displayName="SearchAllWidgets";let eQ=(0,s.memo)(e=>{let{query:t,onChange:r,isOpen:i}=e,a=eG(),l=(0,s.useRef)(null);return(0,s.useEffect)(()=>{i&&l.current&&setTimeout(()=>{var e;null==l||null===(e=l.current)||void 0===e||e.focus()})},[i]),(0,o.jsx)(n.az,{p:4,borderBottom:"1px solid",borderColor:a.searchInputBorderColor,children:(0,o.jsxs)(ev.M,{size:"md",variant:"outline",children:[(0,o.jsx)(eC.W,{pointerEvents:"none",children:(0,o.jsx)(ef.W,{color:a.searchInputIconColor})}),(0,o.jsx)(ey.p,{ref:l,placeholder:et.Ru._({id:"W/TXwD"}),value:t,onChange:r,backgroundColor:a.searchInputBackgroundColor,color:a.searchInputTextColor}),t&&(0,o.jsx)(eC.t,{p:4,children:(0,o.jsx)(A.K,{variant:"ghost",colorScheme:a.searchInputCloseColorScheme,size:"xs","aria-label":et.Ru._({id:"V8yTm6"}),icon:(0,o.jsx)(D.g,{icon:W.Jyw}),onClick:()=>r({target:{value:""}})})})]})})});eQ.displayName="SearchInput";let e0=(0,s.memo)(e=>{let{editor:t,closeFn:r,isOpen:i,insertableCategoriesForSearch:a}=e,{GammaTooltipHiderContext:l,hideTooltips:d}=(0,f.ku)(),c=eG(),u=(0,s.useRef)(null),[p,h]=(0,s.useState)(""),m=(0,s.useMemo)(()=>a.map(e=>{let{name:t,itemGroups:r,icon:o,featureFlag:n,subtitle:s}=e,i=r.map(e=>({...e,items:e.items.filter(e=>{let{name:t,keywords:r=[]}=e;return t().toLowerCase().includes(p.toLowerCase())||r.find(e=>e.startsWith(p.toLowerCase()))})})).filter(e=>e.items.length>0);return i.length>0?{name:t,subtitle:s,icon:o,featureFlag:n,itemGroups:i}:null}).filter(Boolean),[a,p]);return(0,s.useEffect)(()=>{i&&u.current&&u.current.scrollTo({top:0})},[i]),(0,s.useEffect)(()=>{i||h("")},[i]),(0,o.jsxs)(l,{children:[(0,o.jsx)(eQ,{query:p,onChange:e=>h(e.target.value),isOpen:i}),(0,o.jsxs)(E.B,{ref:e=>{e&&i&&setTimeout(()=>{e&&e.scrollTo({top:0})},0)},overflow:"hidden auto",p:2,pb:8,spacing:3,children:[!m.length&&(0,o.jsx)(E.B,{alignItems:"center",justifyContent:"center",h:"100%",pt:20,pb:20,children:(0,o.jsx)(ew.p,{size:"xs",title:(0,o.jsx)(_.x6,{id:"X+k8ml"}),description:(0,o.jsx)(_.x6,{id:"kXnLEt"})})}),m.map(e=>{let{name:n,itemGroups:s,icon:i,subtitle:a}=e;return(0,o.jsxs)(E.B,{spacing:2,children:[(0,o.jsx)(f._x,{flex:"1",textAlign:"start",ms:1,children:(0,o.jsxs)(x.s,{alignItems:"center",children:[(0,o.jsx)(D.g,{icon:i}),(0,o.jsxs)(B.E,{ms:2,fontSize:"xs",children:[n,"\xa0"]}),(0,o.jsxs)(B.E,{fontSize:"xxs",color:"gray.500",children:["| ",a]})]})}),s.map((e,n)=>{let{subcategory:i,items:a}=e;return(0,o.jsx)(eJ,{subcategory:i,items:a,editor:t,itemGroupLength:s.length,closeFn:r,hideTooltips:d},n)})]},n)})]}),(0,o.jsx)(n.az,{h:"12",w:"100%",position:"absolute",bottom:"0",bg:"linear-gradient(to bottom, ".concat(c.scrollGradientStart,", ").concat(c.scrollGradientEnd," 90%)"),pointerEvents:"none"})]})});e0.displayName="SearchAllWidgetsContent";let e1=e=>{let{editor:t}=e,r=(0,S.n)(em),n=(0,I.mt)(),[i,a]=s.useState(null),l=(0,s.useRef)(null),d=eG();return(0,w.j)({ref:l,handler:e=>{e.target.closest("[data-insert-widget-popover]")||a(null)}}),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(eN.z,{bg:d.bg,color:d.iconColor,p:.5,borderWidth:"1px",borderColor:d.border,borderRadius:"md",shadow:"lg",ref:l,overflow:"hidden",spacing:1,"data-testid":"insert-widget-inner",pointerEvents:"auto",children:[(0,o.jsx)(eY,{setOpenButton:a,isOpen:"search"===i,editor:t,insertableCategoriesListLocalized:r,allFlags:n,containerRef:l}),r.map((e,r)=>(0,o.jsxs)(s.Fragment,{children:[r>0&&(0,o.jsx)(k.c,{borderColor:d.dividerColor}),e.map(e=>{let{name:r,shortName:s,itemGroups:d,icon:c,featureFlag:u,subtitle:p,key:h}=e;return u&&!n[u]?null:(0,o.jsx)(e$,{itemGroups:d,icon:c,name:r,shortName:s,subtitle:p,editor:t,setOpenButton:a,isOpen:i===r,containerRef:l},h)})]},r))]})})},e2=e=>{let{editor:t}=e,r=eL(),n=(0,m.GV)((0,eA.lp)("left")),s=(0,m.GV)((0,eA.lp)("right"));return r?(0,o.jsx)(x.s,{position:"fixed",paddingLeft:"calc(var(--doc-padding-left) + ".concat(n,"px)"),paddingRight:"calc(var(--doc-padding-right) + ".concat(s,"px)"),bottom:"30px",insetStart:0,insetEnd:0,align:"center",alignItems:"center",justifyContent:"center",zIndex:"sticky","data-testid":"insert-widget-wrapper",pointerEvents:"none",children:(0,o.jsx)(x.s,{position:"relative","data-guider-highlight":"insert-widget",direction:"row",className:"insert-widget",children:(0,o.jsx)(e1,{editor:t})})}):null},e5=(0,s.memo)(e=>{let{editor:t}=e,[r,n]=(0,s.useState)(!1),i=(0,v.rd)();return((0,s.useEffect)(()=>j.R.on("bringInsertWidgetToFront",e=>{let{inFront:t}=e;n(t)}),[]),r)?(0,o.jsx)(f.L8,{isDark:i,children:(0,o.jsx)(b.Z,{children:(0,o.jsx)(e2,{editor:t})})}):(0,o.jsx)(f.L8,{isDark:i,children:(0,o.jsx)(e2,{editor:t})})});var e6=r(20277),e4=r(57882),e9=r(92667),e3=r(83707),e8=r(94745),e7=r(9952);let te=(0,s.memo)(e=>{let{editor:t}=e,r=I.of.get("arrowAutocomplete"),[n,i]=(0,s.useState)(null),[a,l]=(0,s.useState)(null);(0,s.useEffect)(()=>{t&&t.commands.command(e=>{let{tr:t}=e;return t.setMeta(e7.f,{buttonElement:a,tippyTarget:n}),!0})},[t,n,a]);let d=(0,v.rd)();return r?(0,o.jsx)("div",{ref:i,style:{visibility:"hidden"},children:(0,o.jsx)(f.L8,{isDark:d,children:(0,o.jsx)(f.Tz,{label:et.Ru._({id:"LT1nEz"}),placement:"top",children:(0,o.jsx)(eO.$,{ref:l,variant:"plain",size:"xs",padding:"1px 2px",borderRadius:"4px",background:"none",fontSize:"0.7em",children:"→"})})})}):null});te.displayName="AutocompleteButton";var tt=r(44428),tr=r(82354),to=r(69771);let tn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body";(0,s.useEffect)(()=>{let t;let r=document.querySelector(e);if(!r)return;let o=e=>{var o,n;(null===(o=document.activeElement)||void 0===o?void 0:o.tagName)==="IFRAME"&&document.activeElement instanceof HTMLIFrameElement&&!t?(console.debug("[EditorCore] Prevented scrolling at page load from iframe",e,document.activeElement),r.scrollTo(0,0),document.activeElement.blur()):(null===(n=document.activeElement)||void 0===n?void 0:n.tagName)==="IFRAME"&&0===e.target.scrollTop&&t>50?(console.debug("[EditorCore] Prevented scrolling to top from iframe",e,t,document.activeElement),r.scrollTo(0,t)):t=e.target.scrollTop};return r.addEventListener("scroll",o,{passive:!0}),()=>r.removeEventListener("scroll",o)},[e])};var ts=r(2696),ti=r(28895),ta=r(71997),tl=r(16372),td=r(58599),tc=r(65053),tu=r(35789),tp=r(3706),th=r(23672),tm=r(15428),tg=r(56154),tx=r(10891),tb=r(23071),tf=r(43006),tj=r(55090);class tv extends s.Component{static getDerivedStateFromError(e){return{hasError:!0,errMessage:e.message}}componentDidCatch(e,t){this.errorEventId=tg.Cp(e,{extra:{info:null==t?void 0:t.componentStack}}),th.yf.logger.error("[EditorCoreErrorBoundary]",{event:tj.ng.EDITOR_CORE_ERROR,docId:this.props.docId},e)}render(){return this.state.hasError?(0,o.jsx)(ty,{errMessage:this.state.errMessage,errorId:this.errorEventId,isInsideDrawer:this.props.isInsideDrawer}):this.props.children}constructor(e){super(e),this.errorEventId=null,this.state={hasError:!1,errMessage:""}}}let tC=["collaborative-editor-wrapper","public-static-editor-wrapper-inner","example-static-editor-wrapper-inner","custom-theme-tabs","custom-theme-tab-panels","custom-theme-preview-editor"].map(e=>'[data-testid="'.concat(e,'"]')).join(", "),ty=e=>{let{errMessage:t,errorId:r,isInsideDrawer:n=!1}=e,s=(0,h.u)("intercom"),i=(0,tf.k)();return(0,o.jsxs)(x.s,{minH:"100%",direction:"column","data-editor-error-component":!0,align:"center",children:[(0,o.jsx)(tm.mL,{styles:{[tC]:{height:"100%"},html:{height:"100%"},body:{height:"100%"}}}),(0,o.jsx)(tu.o,{flex:1,w:"100%",px:6,children:(0,o.jsxs)(tx.K,{title:(0,o.jsx)(_.x6,{id:"q54tkL"}),message:(0,o.jsx)(_.x6,{id:"qeLWZE"}),stackProps:{maxWidth:"min(450px, 100%)"},children:[t&&(0,o.jsxs)(ej.C,{display:"block",py:1,px:{base:4,md:12},maxW:"100%",children:[t,r&&(0,o.jsx)(_.x6,{id:"sS1P4/",values:{errorId:r},components:{0:(0,o.jsx)("br",{})}})]}),!n&&(0,o.jsxs)(eN.z,{wrap:"wrap",justifyContent:"center",pb:4,spacing:3,mt:2,children:[(0,o.jsx)(eO.$,{variant:"solid",onClick:()=>{window.location.reload()},leftIcon:(0,o.jsx)(D.g,{fixedWidth:!0,icon:W.lLb}),children:(0,o.jsx)(_.x6,{id:"SnHWX8"})}),(0,o.jsx)(eO.$,{variant:"plain",onClick:s?i:void 0,leftIcon:(0,o.jsx)(D.g,{fixedWidth:!0,icon:s?W.gSF:W.y_8}),as:s?tp.N:void 0,href:s?void 0:"mailto:".concat(tb.J),children:(0,o.jsx)(_.x6,{id:"mpby9d"})})]})]})})]})};var tw=r(57267),tE=r(23529);let tk=e=>new Promise(t=>{setTimeout(()=>{requestAnimationFrame(()=>{let r=e.state.doc.resolve(1),o=(0,e6.s)(r,1,!0);o&&e.commands.command(e=>{let{tr:t}=e;return t.setSelection(o),!0}),t()})})}),tI=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=(0,g.O2)("editor"),o=(0,m.GV)(t=>{let r=(0,eW.wC)(t),o=(0,eW.$i)(t);return r===eD.w.SLIDE_VIEW&&o?(0,tr.OB)(o):e});(0,s.useEffect)(()=>{t&&o&&r.setScrollSelector(o)},[t,r,o])},tS=e=>{let{onCreate:t=()=>{},extensions:r=[],readOnly:g=!0,shouldSupportComments:x=!1,shouldSupportMenus:b=!1,initialContent:f,doc:j,docId:v,isStatic:C=!1,animationsEnabled:y=!0,scrollingParentSelector:w,theme:E,editorId:k,isThumbnail:I}=e,S=(0,e4.Iy)("edit",j),R=(null==j?void 0:j.organization)&&j.organization.id,[T]=(0,s.useState)(b),[A,z]=(0,s.useState)(!1),B=(0,l.wA)(),W=(0,m.GV)(eW.Cl),D=(0,s.useMemo)(()=>(0,tw.C)(),[]),_=function(){a.r.current||(0,i.U)();let[e]=(0,s.useState)(a.O.current);return e}(),L=(0,h.u)("debugLogging"),N=!!(null==j?void 0:j.site),{setEditorRendered:U,onEditorUnload:F}=(0,tl.f)(k);tn(w),tI(w,!C);let O=(0,td.hG)({async onCreate(e){let{editor:t}=e;console.debug("[EditorCore][onCreate] TipTap editor is now ready"),(0,tE.m)(t,B),z(!0)},onUpdate(e){var t,r;let{editor:o}=e;null===(t=to.U.getState(o.state))||void 0===t||t.processChanges(B),null===(r=tt.Jl.getState(o.state))||void 0===r||r.processChanges(B)},onSelectionUpdate(e){let{editor:t}=e;console.debug("[EditorCore][onSelectionUpdate] selection updated",t.state.selection.from,t.state.selection.to,t.state.selection)},onDestroy(){L&&console.warn("[EditorCore][onDestroy] This should only happen on page navigation."),F(),B((0,eW.cL)()),B((0,u.qq)())},extensions:D.concat(r),content:f,editable:!1});I&&(O.isThumbnail=!0),(0,p.GZ)(O);let G=!!(O&&A);return((0,s.useEffect)(()=>{E&&B((0,eW.Yl)({theme:E}))},[E,B]),(0,e9.Vg)(()=>{O&&G&&(O.commands.migrateNativeEmojis(),tk(O).then(()=>{console.debug("[EditorCore][fullyReady] Menus initialized & focused at start - fully ready"),t({editor:O}),requestAnimationFrame(()=>{requestIdleCallback(()=>{U()})})}))},[O,G,t,U],[G]),(0,s.useEffect)(()=>{j&&B((0,eW.BN)({doc:j}))},[j,B]),(0,s.useEffect)(()=>{B((0,eW.Rs)({isStatic:C})),O.isStatic=C},[O,C,B]),(0,s.useEffect)(()=>{B((0,eW.$j)({animationsEnabled:y&&!1===_}))},[y,_,B]),(0,s.useEffect)(()=>{B((0,eW.yJ)({commentsEnabled:x}))},[x,B]),(0,s.useEffect)(()=>{if(O)return d.$.DEBUG_ENABLED&&void 0===window.gammaEditorCore&&(window.gammaEditorCore=O,window.contentToAIHTML=()=>{if(O&&O.state.doc.firstChild)return(0,c.K)(O,O.state.doc.firstChild.content)}),O.gammaOrgId=R,O.gammaDocId=v,O.editorId=k,O.multipageEnabled=N,()=>{delete window.gammaEditorCore}},[O,v,R,k,N]),(0,s.useEffect)(()=>{O&&B((0,eW.kd)({isAllowedToEdit:S&&!g}))},[O,B,g,S]),(0,s.useEffect)(()=>{O&&G&&requestAnimationFrame(()=>{O.setOptions({editable:W})})},[O,B,W,G,U]),(0,ts.gp)(O),(0,ts.l3)(O),(0,ts.eb)(O,W),(0,ts.WS)(O),O&&A)?(0,o.jsx)(ta.Q,{value:k,children:(0,o.jsxs)(n.az,{id:"editor-core-root",className:"editor-core-root","data-testid":"editor-core-root",width:"100%",position:"relative",sx:tc.q,children:[(0,o.jsx)(td.$Z,{editor:O,style:{width:"100%",height:"100%"},"data-testid":"tiptap-react-root-wrapper",className:"highlight-mask"}),T&&(0,o.jsx)(ti.A,{editorId:k,children:(0,o.jsx)(tT,{editor:O,scrollingParentSelector:w})})]})}):(0,o.jsx)(o.Fragment,{})},tR=e=>{let{isInsideDrawer:t,...r}=e;return(0,o.jsx)(tv,{isInsideDrawer:t,docId:r.docId,children:(0,o.jsx)(tS,{...r})})},tT=(0,s.memo)(e=>{let{editor:t,scrollingParentSelector:r}=e,n=(0,h.u)("insertWidgetBottom");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e8.Ht,{editor:t,scrollingParentSelector:r}),n?(0,o.jsx)(e5,{editor:t}):(0,o.jsx)(eT,{editor:t}),(0,o.jsx)(e3.G,{editor:t}),(0,o.jsx)(te,{editor:t})]})})},23529:(e,t,r)=>{r.d(t,{m:()=>i});var o=r(69646),n=r(44428),s=r(69771);let i=(e,t)=>{var r,i;null===(r=s.U.getState(e.state))||void 0===r||r.compute(e.state.doc).processChanges(t),null===(i=n.Jl.getState(e.state))||void 0===i||i.compute(e.state).processChanges(t),e.commands.command(()=>((0,o.jL)(e.state.doc,t),!0))}},9952:(e,t,r)=>{r.d(t,{f:()=>o});let o=new(r(81570)).hs("autocompleteButton")}}]);
//# sourceMappingURL=970-d20567ca0ee0c2fb.js.map